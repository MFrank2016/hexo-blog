{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/indigos/source/css/style.less","path":"css/style.less","modified":1,"renderable":1},{"_id":"themes/indigos/source/img/avatar.jpg","path":"img/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/brand.jpg","path":"img/brand.jpg","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/cc.png","path":"img/cc.png","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/favicon.ico","path":"img/favicon.ico","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/img-err.png","path":"img/img-err.png","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/img-loading.png","path":"img/img-loading.png","modified":0,"renderable":1},{"_id":"themes/indigos/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/indigos/source/js/main.min.js","path":"js/main.min.js","modified":1,"renderable":1},{"_id":"themes/indigos/source/js/search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes/indigos/source/js/search.min.js","path":"js/search.min.js","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/wechat.jpg","path":"img/wechat.jpg","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/alipay.jpg","path":"img/alipay.jpg","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.eot","path":"css/fonts/roboto/Roboto-Bold.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.woff","path":"css/fonts/roboto/Roboto-Bold.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.woff2","path":"css/fonts/roboto/Roboto-Bold.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.eot","path":"css/fonts/roboto/Roboto-Light.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.woff","path":"css/fonts/roboto/Roboto-Light.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.woff2","path":"css/fonts/roboto/Roboto-Light.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.eot","path":"css/fonts/roboto/Roboto-Medium.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.woff","path":"css/fonts/roboto/Roboto-Medium.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.woff2","path":"css/fonts/roboto/Roboto-Medium.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.eot","path":"css/fonts/roboto/Roboto-Regular.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.woff","path":"css/fonts/roboto/Roboto-Regular.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.woff2","path":"css/fonts/roboto/Roboto-Regular.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.eot","path":"css/fonts/roboto/Roboto-Thin.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.woff","path":"css/fonts/roboto/Roboto-Thin.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.woff2","path":"css/fonts/roboto/Roboto-Thin.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.woff2","path":"css/fonts/fontawesome/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.woff","path":"css/fonts/fontawesome/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.ttf","path":"css/fonts/roboto/Roboto-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.ttf","path":"css/fonts/roboto/Roboto-Light.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.ttf","path":"css/fonts/roboto/Roboto-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.ttf","path":"css/fonts/roboto/Roboto-Medium.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/FontAwesome.otf","path":"css/fonts/fontawesome/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.eot","path":"css/fonts/fontawesome/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.ttf","path":"css/fonts/roboto/Roboto-Thin.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.ttf","path":"css/fonts/fontawesome/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.svg","path":"css/fonts/fontawesome/fontawesome-webfont.svg","modified":1,"renderable":1}],"Cache":[{"_id":"themes/indigos/.editorconfig","hash":"67a03b88eadd7810f2e01866e73814074ecd3b87","modified":1546439123494},{"_id":"themes/indigos/README.md","hash":"cfc7d09fc2ce26003954d647e3bbf98f71574eb7","modified":1546439123494},{"_id":"themes/indigos/_config.yml","hash":"1937e04dcb05828a26e75e1ff56d81b3138dab7b","modified":1546439123494},{"_id":"themes/indigos/package.json","hash":"3ad9b9ccb1ddaad3136f179a7ebff7d7b1c193f7","modified":1546439123584},{"_id":"themes/indigos/LICENSE","hash":"9dd0f70bc72c9d575447655526aded395bb93754","modified":1546439123494},{"_id":"source/_data/menu.yml","hash":"3c047776441f4e70b4117bfe53e5e4cd4586a37e","modified":1546439123178},{"_id":"source/_posts/README.md","hash":"e49ac8ab774530338a212b524bc64c2a3cdc2413","modified":1546439123178},{"_id":"source/_posts/hello-world.md","hash":"7c9cd41cfa3020c9c3c612974f7d9add1374225e","modified":1546439123228},{"_id":"source/categories/index.md","hash":"e303959f5443d0e22e7225489ce61f699ef2f02d","modified":1546439123484},{"_id":"source/tags/index.md","hash":"0e58a1e43bddc0d56a67ad808e98304a7c78bf2f","modified":1546439123484},{"_id":"themes/indigos/languages/ja.yml","hash":"65a32717335211a45771a21fb7d7778808c6f0aa","modified":1546439123494},{"_id":"themes/indigos/languages/en.yml","hash":"ba78def0453d08172248e220a1f9e145e99b4f23","modified":1546439123494},{"_id":"themes/indigos/languages/nl-NL","hash":"b540b76af76c1a180c517089ed2ad770cbded170","modified":1546439123504},{"_id":"themes/indigos/languages/zh-CN.yml","hash":"6806e4c305facf19cbe4e37ccc5d6b00cb56e199","modified":1546439123504},{"_id":"themes/indigos/languages/zh-TW.yml","hash":"9b8bdd9c8b68716f364503926dca6ba8571ee5ff","modified":1546439123504},{"_id":"themes/indigos/layout/archive.ejs","hash":"6897178ba358379d6a4b7c0ba1bc2ab97ad5303a","modified":1546439123564},{"_id":"themes/indigos/layout/categories.ejs","hash":"efae06b4d83aaf73ab93260381e891825bf404ac","modified":1546439123574},{"_id":"themes/indigos/layout/layout.ejs","hash":"770af84fff104c398ce8b6c995130cddd3e9a1e9","modified":1546439123574},{"_id":"themes/indigos/layout/category.ejs","hash":"e5ba5cc2e092c199285b8097ef12ffe70bf84c91","modified":1546439123574},{"_id":"themes/indigos/layout/index.ejs","hash":"772c1985c7743e101598b4eddc253f9174c5605b","modified":1546439123574},{"_id":"themes/indigos/layout/post.ejs","hash":"efc3352828351f8574c51e8a93dc56c66660c3b1","modified":1546439123574},{"_id":"themes/indigos/layout/tag.ejs","hash":"90a231dea3a364b329a740e5d6c49c8cf5664fe9","modified":1546439123584},{"_id":"themes/indigos/layout/page.ejs","hash":"567c42b978da4c39b8b4982df19b940c26bc32a4","modified":1546439123574},{"_id":"themes/indigos/scripts/plugins.js","hash":"00ea278ea77733f546439aed507ce69a298da362","modified":1546439123584},{"_id":"themes/indigos/layout/tags.ejs","hash":"1fc0461e9602b53899ec756e4361beb8cce74740","modified":1546439123584},{"_id":"source/_posts/.DS_Store","hash":"da6a87719cbf79a62cc3511f165b751a09703ae8","modified":1545897934207},{"_id":"source/_posts/guide/.DS_Store","hash":"a0890cfe2435f2aa4981cbf29d330f3de4799901","modified":1537588287492},{"_id":"source/_posts/java/README.md","hash":"dfa3eebc35d12028e93040ca0666c8fa777cb00a","modified":1546439123238},{"_id":"source/_posts/guide/README.md","hash":"ef07bf7d636fe804ab666821987a2ddf0b4df617","modified":1546439123198},{"_id":"source/_posts/guide/background-skill.md","hash":"c56d7bdcdee42494cd49fedef28f23080e26fb31","modified":1546439123198},{"_id":"source/_posts/leetcode/Design-Linked-List.md","hash":"7ecf52804b77d6642a04bae45a0ca2a7e0136d1a","modified":1546439123473},{"_id":"source/_posts/life-thinking/README.md","hash":"721725c3d32bac96fac525f1a44fbef897f25342","modified":1544779785247},{"_id":"source/_posts/leetcode/README.md","hash":"680b68475067e17a5d6348d98e79369c46b64017","modified":1546439123474},{"_id":"source/_posts/ops/.DS_Store","hash":"8e11b6d471ce2c41082f2f28d12c7e1be0911d8b","modified":1539213397108},{"_id":"source/_posts/ops/centos-jdk8-installation.md","hash":"56ce476d2921642b8893bf05c91abc3926779cd2","modified":1546439123477},{"_id":"source/_posts/ops/jenkins-work-with-github-webhook.md","hash":"fd3828302ef6533b38f9379e9a249021b76843e5","modified":1546439123480},{"_id":"source/_posts/reading/README.md","hash":"51c5bc50d0f1f12567472e02ebf3e43bb4a8e3d0","modified":1546439123482},{"_id":"source/_posts/ops/deploy-vuepress-on-centos7.md","hash":"d3dd0fdc2ca070d283ddeebc8da7007992e07e8c","modified":1546439123478},{"_id":"source/_posts/reading/java-multithread-programming-guide-in-action-digest.md","hash":"5fd7696b88d4a13b7bb5b8d93ec3d0246daa5be9","modified":1546439123483},{"_id":"source/_posts/reading/java-multithread-programming-guide-in-action.md","hash":"75be12e02874ba0c405ce76b8cd8dda06fe73e7f","modified":1546439123484},{"_id":"source/_posts/reading/the-power-of-habit.md","hash":"80f8a169da20aad1428f48adb4d5ee78756f0fcb","modified":1546439123484},{"_id":"themes/indigos/layout/_partial/after-footer.ejs","hash":"1351dbfca311f0d50a939f9e1a91c4f65bbcdf5f","modified":1546439123504},{"_id":"themes/indigos/layout/_partial/archive.ejs","hash":"c294c98617ce14082f9b3d5eec83328f480f5597","modified":1546439123504},{"_id":"themes/indigos/layout/_partial/footer.ejs","hash":"9105a6f38846b27c030ee6ca40340b5f77353681","modified":1546439123504},{"_id":"themes/indigos/layout/_partial/head.ejs","hash":"9dfc591ec6c918c5b60b6ccbc5d1e18fea9faf8e","modified":1546439123514},{"_id":"themes/indigos/layout/_partial/header.ejs","hash":"648db446567a81371b8a29d719d13636aa157012","modified":1546439123514},{"_id":"themes/indigos/layout/_partial/index-item.ejs","hash":"7208d4083ee3355aa969972a2ce249a67d56b3a6","modified":1546439123514},{"_id":"themes/indigos/layout/_partial/loading.ejs","hash":"8b3e037dd5f3d4564012689c5cd6f63caf73df0f","modified":1546439123514},{"_id":"themes/indigos/layout/_partial/menu.ejs","hash":"ea6aded24a68de0914f24b3760f766b5e1c9835a","modified":1546439123514},{"_id":"themes/indigos/layout/_partial/paginator.ejs","hash":"13952250463f70d1c1bbbfdd7f4ee8160dd6d99b","modified":1546439123514},{"_id":"themes/indigos/layout/_partial/post.ejs","hash":"20597ac0d547aea37680ecf195eb129fe5ee19d8","modified":1546439123544},{"_id":"themes/indigos/layout/_partial/script.ejs","hash":"31052bc524a10abd6871aed2415448ce585faff2","modified":1546439123564},{"_id":"themes/indigos/layout/_partial/search.ejs","hash":"752109904304fdb8e988ee1254df2af9c0701466","modified":1546439123564},{"_id":"themes/indigos/layout/_partial/tags-bar.ejs","hash":"30ec74f081cc4c273a7bcd5d57da99072e9f0755","modified":1546439123564},{"_id":"themes/indigos/source/css/style.less","hash":"cf362925ae099b810fd5763e6b724b823612ed15","modified":1546439123684},{"_id":"themes/indigos/source/img/avatar.jpg","hash":"96f2506c587325147a383aad3ada8d5993e6cdf8","modified":1545721392740},{"_id":"themes/indigos/source/img/brand.jpg","hash":"0e237f1b433851c156e1f1cdaeb044054b3b9879","modified":1545719561556},{"_id":"themes/indigos/source/img/cc.png","hash":"ebce75a62b40976a72d43f0bd937d859ac24d87c","modified":1545719561556},{"_id":"themes/indigos/source/img/favicon.ico","hash":"c88cd0044daea8f5b87913d71c4ade2aa31387c9","modified":1545725227449},{"_id":"source/_posts/reading/the-power-of-habit-digest.md","hash":"bcdb419b52fd23eba7cf67696d7d0aa82807598c","modified":1546439123484},{"_id":"themes/indigos/source/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1545719561556},{"_id":"themes/indigos/source/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1545719561556},{"_id":"themes/indigos/source/js/main.js","hash":"ff44bb7b2f1f08757093fd6ffa92c9ac2b674109","modified":1546439123698},{"_id":"themes/indigos/source/js/main.min.js","hash":"e77a89fe5a9827ac590a288778176b233dd900ad","modified":1546439123698},{"_id":"themes/indigos/source/js/search.js","hash":"a4d6c9c566ec1ca71ddacfd14c58f7ddaf9db24d","modified":1546439123698},{"_id":"themes/indigos/source/js/search.min.js","hash":"a8a450bb8b1ca9ad577052addcbd3393f1af6c6a","modified":1545719561558},{"_id":"source/_posts/java/basic/java-data-type.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1545897009426},{"_id":"source/_posts/java/basic/java-operator.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1545897009449},{"_id":"source/_posts/architecture/domain-driven-design/ddd-outline.md","hash":"7e801be6c0ee00d1b5da98cb58c6ac338e014a65","modified":1546439123178},{"_id":"source/_posts/architecture/domain-driven-design/ddd-recommendation.md","hash":"f47818e4fa29c9a4097cc080ac3a5eeb7ea2cc6b","modified":1546439123188},{"_id":"source/_posts/architecture/domain-driven-design/ddd-steps.md","hash":"878463fa2f535b319621495b77e05010d4dfcb34","modified":1546439123188},{"_id":"source/_posts/java/basic/java-basic.md","hash":"587944477f8c563b07df465877155c3c85dafcac","modified":1546439123238},{"_id":"source/_posts/java/basic/java-class.md","hash":"92b7e19cefd1a27a025445309965001a75cb26b7","modified":1546439123238},{"_id":"source/_posts/java/basic/java-variable.md","hash":"f0f90454ac7a743028116531719d15eafad92cdc","modified":1546439123248},{"_id":"source/_posts/java/basic/java-simple-structure.md","hash":"7e759c28039e4c5572d14a71b6a6b495c10f9a09","modified":1546439123248},{"_id":"source/_posts/java/collection/0038.png","hash":"dc8ec7ec15f9d18d028fa4baa7b8edf7dcf9f587","modified":1545897772164},{"_id":"source/_posts/java/collection/weakhashmap-1.png","hash":"2d21b6d2b326191f28c04b070863c03614dc08fe","modified":1545897772181},{"_id":"source/_posts/java/collection/weakhashmap-2.png","hash":"a97b7673b4d40163640e1a35540c2c2b51c8ed93","modified":1545897772190},{"_id":"source/_posts/java/collection/weakhashmap-code-detail.md","hash":"ce6d3182643cf12a35b4b1474dc9c2b937cf7b01","modified":1546439123258},{"_id":"source/_posts/java/introduction/10-jdk-mac.png","hash":"a058e42380742e3be7911c30ea4c54263f2e99e9","modified":1545897750576},{"_id":"source/_posts/java/introduction/12-jdk-mac.png","hash":"79b6a623b06142723ea9dc4981f3ef12ff3bcd75","modified":1545897750604},{"_id":"source/_posts/java/introduction/13-jdk-mac.png","hash":"aa4d7a93b28afb3424a5c107724b07cb9cbeed3d","modified":1545897750621},{"_id":"source/_posts/java/introduction/16-jdk-mac.png","hash":"5451e575e4bf08b384335bb070bb46817edad5bd","modified":1545897750701},{"_id":"source/_posts/java/introduction/2-jdk-windows.png","hash":"4d1cb8168cde93a8aabef63c8d12a8ccb56a60e4","modified":1545897750300},{"_id":"source/_posts/java/introduction/14-jdk-mac.png","hash":"4bc54995d9f778084a8b486634bc30793f1592f0","modified":1545897750645},{"_id":"source/_posts/java/introduction/3-jdk-windows.png","hash":"2a89504a729c391003e94d74941aeada3fde7e4a","modified":1545897750319},{"_id":"source/_posts/java/introduction/4-jdk-windows.png","hash":"155d9ca099b6138a5f3c2df3b826f6ce972d847a","modified":1545897750385},{"_id":"source/_posts/java/introduction/5-jdk-mac.png","hash":"b65be8a8b49518b8fc8ea4f1c1b7d1113352180c","modified":1545897750392},{"_id":"source/_posts/java/introduction/6-jdk-mac.png","hash":"cc0550022513036a612d666bab64f1876d703ec3","modified":1545897750438},{"_id":"source/_posts/java/introduction/6-jdk-windows.png","hash":"f26f02913932acf206e345b96a2749c22d68a7c1","modified":1545897750456},{"_id":"source/_posts/java/introduction/7-jdk-mac.png","hash":"57310fc56a96be434f0ad69eb6387a82f54d0d5a","modified":1545897750465},{"_id":"source/_posts/java/introduction/7-jdk-windows.png","hash":"79f375c43ac760ce5a88aef12df9e788494f0643","modified":1545897750480},{"_id":"source/_posts/java/introduction/8-jdk-mac.png","hash":"52eacf47993855414045b0719196da9001ccb153","modified":1545897750497},{"_id":"source/_posts/java/introduction/5-jdk-windows.png","hash":"ac4f6a18554f2d1aae972e1bf6737dd60551613d","modified":1545897750417},{"_id":"source/_posts/java/introduction/8-jdk-windows.png","hash":"884e1c6927bf1394dc9941de017deb3b9901daeb","modified":1545897750514},{"_id":"source/_posts/java/introduction/9-jdk-windows.png","hash":"8defa728fac888e8203a5e6151596c5ce15280d3","modified":1545897750554},{"_id":"source/_posts/java/introduction/9-jdk-mac.png","hash":"1c9dbad3045f234695be69fb4c27c0cd53ab1918","modified":1545897750538},{"_id":"source/_posts/java/introduction/java-environment-mac.md","hash":"2b4dc1c09518926de28235fc9e5e83662d2a1951","modified":1546439123268},{"_id":"source/_posts/java/introduction/java-environment-windows.md","hash":"da34959710d2ef4d5b8876fb2b7069ab01d7340d","modified":1546439123318},{"_id":"source/_posts/java/introduction/java-ide-3.png","hash":"5616c391ba4e9a1341b4c6213758924b9e8124d1","modified":1545897750805},{"_id":"source/_posts/java/introduction/java-environment.md","hash":"ebf5b25a8ad3817dd69e4772ab2e5ecf709e83b8","modified":1546439123338},{"_id":"source/_posts/java/introduction/java-ide-6.png","hash":"bc4523f962ca5301e062c864166cf4cc2dfd6f34","modified":1545897750874},{"_id":"source/_posts/java/introduction/java-ide-7.png","hash":"db6fcb1e3350c32db0a5ad41400ee7e22023eed1","modified":1545897750896},{"_id":"source/_posts/java/introduction/java-ide-8.png","hash":"311e7f7643a2facb45dc3165c938af1bd84b28b7","modified":1545897750915},{"_id":"source/_posts/java/introduction/java-ide-5.png","hash":"627cfbad99d15a6962df90269eb9df896a6b6021","modified":1545897750852},{"_id":"source/_posts/java/introduction/java-ide-9.png","hash":"b7cb86602219d3609159f856c4449b7b85ae0aac","modified":1545897750932},{"_id":"source/_posts/java/introduction/java-ide.md","hash":"451f581d5d6badf4986f30bcd97a8971fca66287","modified":1546439123338},{"_id":"source/_posts/java/introduction/java-introduction.md","hash":"b7fb2082136c9e8df87be8fa5c8bd4e849b9badf","modified":1546439123368},{"_id":"source/_posts/java/introduction/java-primer-conclusion.md","hash":"3932886636f89449b753189cb752562ffdc5ba17","modified":1546439123378},{"_id":"source/_posts/java/introduction/java-package.md","hash":"87173175a6ed22e23f7628dcb5040ce344662134","modified":1545902466941},{"_id":"source/_posts/java/introduction/java-simple-example-1.png","hash":"7be12cd9b902847ed3ca8ce7a6f06139103f1180","modified":1545897751028},{"_id":"source/_posts/java/introduction/java-simple-example-2.png","hash":"404e3de6764fab8a109a7efceabfb4bc6942fb30","modified":1545897751038},{"_id":"source/_posts/java/introduction/java-simple-example.md","hash":"038bf67e4f9ade614caecc8bf087c1e13ee680db","modified":1546439123378},{"_id":"source/_posts/java/introduction/java-simple-example-3.png","hash":"9b42950df71c6cb651d76dec741a4549e4855fd5","modified":1545897751060},{"_id":"source/_posts/java/introduction/java-started.md","hash":"a74ee15e9a7e064ea91e6b266fa9d276d4a82204","modified":1546439123388},{"_id":"source/_posts/java/jvm/accessibility1.jpg","hash":"36ba36afdaa689c5cadd4919a834569d72fdb478","modified":1545897794506},{"_id":"source/_posts/java/jvm/accessibility2.png","hash":"281d56cfb09c2ac6654e604869f1c089bb19688b","modified":1545897794527},{"_id":"source/_posts/java/jvm/garbage-collection.md","hash":"acf3f375b20e044d63fe55e9519057b22fd7febc","modified":1546439123398},{"_id":"source/_posts/java/jvm/memory-leak.md","hash":"1cb419170a41cd638f1d13e07733fd4a4ee66bbf","modified":1546439123398},{"_id":"source/_posts/java/jvm/reachable.md","hash":"715ac88f2e075679e9cd2911c0e9aae3bb13aec3","modified":1546439123398},{"_id":"source/_posts/java/jvm/object-self-rescue.md","hash":"f221ee7193855f3ae0889685d050cf0a51250bef","modified":1546439123398},{"_id":"source/_posts/java/jvm/reachable-in-hotspot.md","hash":"7065ba091e6410d51181b393e59aae342fd545ff","modified":1546439123398},{"_id":"source/_posts/guide/8101.png","hash":"985f8790a13d24c512910d43eec74b4fd27a0b29","modified":1485164820899},{"_id":"source/_posts/guide/8100.png","hash":"4b620036807df794bb9b8ffed9006704bfbfbbe3","modified":1485164820846},{"_id":"source/_posts/java/multithread/multithread-start.md","hash":"dc20edbd55525bd7d6773befb846ee7ead5f4732","modified":1546439123398},{"_id":"source/_posts/java/reference/0002.png","hash":"54f015dd14356d46b4a5eb4c42bb0b296f3c2b68","modified":1545897861138},{"_id":"source/_posts/java/reference/0005.png","hash":"fcfdff32f6d724be3c3d12e709f9f3a460a3e274","modified":1545897861151},{"_id":"source/_posts/java/reference/0003.png","hash":"7efe69ed1c19533b6bc5b6cb7cb7356303702513","modified":1545897861145},{"_id":"source/_posts/java/reference/0012.png","hash":"15a7c4e801630c8a3f6bb67d0fd18e69eb8eacc7","modified":1545897861194},{"_id":"source/_posts/java/reference/0013.png","hash":"7b5bda6e7d94dbeacef12ef060e5e0d8e2fa4d32","modified":1545897861218},{"_id":"source/_posts/java/reference/0019.png","hash":"013380c072a2fe829f2e10dbee5a76554ff20509","modified":1545897861240},{"_id":"source/_posts/java/reference/0040.png","hash":"3a4142e60fcb16d71ee8f2eb5e4de31091d2676f","modified":1545897861268},{"_id":"source/_posts/java/reference/0046.png","hash":"e07f0c042e640e7cd71e132f7f48d6360f09e3ca","modified":1545897861287},{"_id":"source/_posts/java/reference/0190.png","hash":"c5929d6f6445ef0d9aa017a313d10dff0e6fa553","modified":1545897861372},{"_id":"source/_posts/java/reference/06.png","hash":"54707910862fdf7b148c90e36fa832f10c0d22fb","modified":1545897861163},{"_id":"source/_posts/java/reference/105.png","hash":"be0006708b897b95df1253186474048473bb8bbe","modified":1545897861324},{"_id":"source/_posts/java/reference/148.png","hash":"5533113be8fff9946f3ebca68666478732c18203","modified":1545897861365},{"_id":"source/_posts/java/reference/195.png","hash":"240ea388434d019a8cddf1df5f986ec1877bda14","modified":1545897861400},{"_id":"source/_posts/java/reference/2030.png","hash":"01e87e34ca69f7d33403860a9d59d0ac809162eb","modified":1545897861408},{"_id":"source/_posts/java/reference/8111.png","hash":"3ee2a0a45a1121730ece4ce28b1f5208063e4c8a","modified":1545897861426},{"_id":"source/_posts/java/reference/94.png","hash":"5da31bf5172d88b611f6c4706effecb82420ea47","modified":1545897861306},{"_id":"source/_posts/java/reference/final-reference-code-detail.md","hash":"fe595d1b78cd8858c5bd49f6ee6c7036301a5335","modified":1546439123443},{"_id":"source/_posts/java/reference/four-kinds-of-reference.md","hash":"bfef55173c93faa5afe9b4b90baf861e1912d7b0","modified":1546439123445},{"_id":"source/_posts/java/reference/phantom-reference-code-detail.md","hash":"a69acc96a291fbf3a85e7d942540b3f4660e6ecc","modified":1546439123447},{"_id":"source/_posts/java/reference/phantom-reference.md","hash":"7be905ae3b84930ed6cd28dcadbeae1118d724d3","modified":1546439123449},{"_id":"source/_posts/java/reference/reference-1.png","hash":"90330bc0125b7580e1421a7e3f409e5a703caf8e","modified":1545897861527},{"_id":"source/_posts/java/reference/reference-2.png","hash":"a8dc3f3b71dcb3ace64dd22fd364972a8b2daf22","modified":1545897861545},{"_id":"source/_posts/java/reference/reference-code-detail.md","hash":"5578f4187a8392fff837a3bc388a4b71bb928efd","modified":1546439123454},{"_id":"source/_posts/java/reference/reference-queue-code-detail.md","hash":"c95bb5a432ef7eab86db63061ad57a92606648fe","modified":1546439123455},{"_id":"source/_posts/java/reference/reference-summary.md","hash":"44fda8c04add18ea53ea702a194486dfdedfe15c","modified":1546439123457},{"_id":"source/_posts/java/reference/soft-reference-2.png","hash":"f07af2215f65766b68a5c3e932bc01e1ea4a0fc5","modified":1545897861605},{"_id":"source/_posts/java/reference/soft-reference-3.png","hash":"39f4779065da2ccd6dd355ff6fd1e72efaf4391f","modified":1545897861621},{"_id":"source/_posts/java/reference/soft-reference-code-detail.md","hash":"7909daa0f14b9336c3d8d66375837edd2f0fd932","modified":1546439123465},{"_id":"source/_posts/java/reference/soft-reference.md","hash":"6732380229a7b1a8f5f52d506771b89f2f38bc85","modified":1546439123466},{"_id":"source/_posts/java/reference/strong-reference.md","hash":"490a233576ec7cf8dc8cb04e8855beceb560c0ad","modified":1546439123468},{"_id":"source/_posts/java/reference/weak-reference-code-detail.md","hash":"562b65467d3a19df1ac378312b16d3c0173a714b","modified":1546439123469},{"_id":"source/_posts/java/reference/weak-reference.md","hash":"b69f539911c74c0c206f437dec3d7e9512bab7b1","modified":1546439123471},{"_id":"themes/indigos/layout/_partial/plugins/baidu.ejs","hash":"da1355eea131952031e54c45560555e6d3aa5a33","modified":1546439123524},{"_id":"themes/indigos/layout/_partial/plugins/disqus.ejs","hash":"86fe837ab16cb60754b0a73bb9efa38b04f3023f","modified":1546439123524},{"_id":"themes/indigos/layout/_partial/plugins/dynamic-title.ejs","hash":"3b877868c4a6fc217ea6f3314544830280a77472","modified":1546439123524},{"_id":"themes/indigos/layout/_partial/plugins/gitment.ejs","hash":"5f6ceb7f4b9b579e8e3f87894447f556a53f9385","modified":1546439123524},{"_id":"themes/indigos/layout/_partial/plugins/google-analytics.ejs","hash":"b5b87761751a897949e085a8f1ace78b0b8babd5","modified":1546439123524},{"_id":"themes/indigos/layout/_partial/plugins/hyper-comments.ejs","hash":"d0e6f1d713e7a1c0cc5fe25f3e574a4b791f938a","modified":1546439123524},{"_id":"themes/indigos/layout/_partial/plugins/mathjax.ejs","hash":"3a5c9f7d22d30cd8ffa4e83a8d3976db22815994","modified":1546439123534},{"_id":"themes/indigos/layout/_partial/plugins/page-visit.ejs","hash":"bb9deb32c54ea6820f622b923e62592915e9f21f","modified":1546439123534},{"_id":"themes/indigos/layout/_partial/plugins/site-visit.ejs","hash":"a2c247c2e32016563dd6a22c21474072d93f4dbd","modified":1546439123534},{"_id":"themes/indigos/layout/_partial/plugins/tajs.ejs","hash":"ef9c77d8c6e004b014c83c5f9333e7174f8bafa3","modified":1546439123534},{"_id":"themes/indigos/layout/_partial/plugins/uyan.ejs","hash":"ddf290e90dc1c779f42a48e1bd852ca932148dfb","modified":1546439123534},{"_id":"themes/indigos/layout/_partial/plugins/valine.ejs","hash":"0a6245da90d54177441d32a6f1766b4f434660db","modified":1546439123534},{"_id":"themes/indigos/layout/_partial/post/category.ejs","hash":"c08e44cbd7315dec7afb6054b04d3c7b82c3bde8","modified":1546439123544},{"_id":"themes/indigos/layout/_partial/post/comment.ejs","hash":"b1a6984e19d3493fb327383ee76e09fdee090426","modified":1546439123544},{"_id":"themes/indigos/layout/_partial/post/copyright.ejs","hash":"dd1dcc7776021ab3d68065f8532efead4c2b8051","modified":1546439123544},{"_id":"themes/indigos/layout/_partial/post/date.ejs","hash":"c5adcec8db1506c378d39855a697e1bb1165646c","modified":1546439123544},{"_id":"themes/indigos/layout/_partial/post/head-meta.ejs","hash":"f137c126672769e9571be2bb0a70ea8dda644b0e","modified":1546439123544},{"_id":"themes/indigos/layout/_partial/post/nav.ejs","hash":"03719097851575a2c1bb95774058b224f6402a1f","modified":1546439123544},{"_id":"themes/indigos/layout/_partial/post/reward-btn.ejs","hash":"b46160005224821a439dec9f1ff183e2f66d9f4b","modified":1546439123554},{"_id":"themes/indigos/layout/_partial/post/reward.ejs","hash":"097c0276a61665e5ee96e5d5d85a7d6ae5ab2f49","modified":1546439123554},{"_id":"themes/indigos/layout/_partial/post/share-fab.ejs","hash":"2ec7de870988cfbc8ea9872cddf7e4076ac64a57","modified":1546439123554},{"_id":"themes/indigos/layout/_partial/post/share.ejs","hash":"7d79a67b3e5e6989f22fb0e0904fa540bfca5fcc","modified":1546439123554},{"_id":"themes/indigos/layout/_partial/post/tag.ejs","hash":"412894001b1ac6e63012b26b1109a0856651c076","modified":1546439123554},{"_id":"themes/indigos/layout/_partial/post/title.ejs","hash":"eaad7af7888bddd7095243a43ff38f55ad8c494a","modified":1546439123554},{"_id":"themes/indigos/layout/_partial/post/toc.ejs","hash":"d534b888d24df7703c632539d4bdd638fa764e98","modified":1546439123564},{"_id":"themes/indigos/layout/_partial/post/updated.ejs","hash":"00fedf7971c0bda0623d968bc0614e512d19a985","modified":1546439123564},{"_id":"themes/indigos/source/css/_partial/archives.less","hash":"382fc22cd5cc073e881768a65600d97eba9f1d21","modified":1546439123594},{"_id":"themes/indigos/source/css/_partial/article.less","hash":"f047c8ca92f9e6a8e1299ace0cce91514631a21c","modified":1546439123594},{"_id":"themes/indigos/source/css/_partial/gotop.less","hash":"bad63006b3bd4849bf53ad38482af0d9971061d3","modified":1546439123594},{"_id":"themes/indigos/source/css/_partial/header.less","hash":"880b4a28e97d556ed15b07642d25115f9b6ba4f6","modified":1546439123594},{"_id":"themes/indigos/source/css/_partial/highlight.less","hash":"99e48793dc0b4ffb66ecaf2d1315145872f9bb98","modified":1546439123594},{"_id":"themes/indigos/source/css/_partial/layout.less","hash":"5f783f34bf093e654e8922ed4a2af8b7b2cd41c4","modified":1546439123604},{"_id":"themes/indigos/source/css/_partial/lightbox.less","hash":"38419aaf3c1832e84ade331f051f110fdc8b960f","modified":1546439123604},{"_id":"themes/indigos/source/css/_partial/loading.less","hash":"85157ddf3877b5c58e8f1d737dda3dfb1bfd540b","modified":1546439123604},{"_id":"themes/indigos/source/css/_partial/page.less","hash":"33b0a5edcedc26a4c592c812c5785bb20d3c93db","modified":1546439123604},{"_id":"themes/indigos/source/css/_partial/postlist.less","hash":"516cded3c7f1db4cacfa898bcaf0adfae7f3a2e1","modified":1546439123604},{"_id":"themes/indigos/source/css/_partial/reward.less","hash":"f5e89ea5414e3096a28c8c96e86c3f669040a892","modified":1546439123604},{"_id":"themes/indigos/source/css/_partial/roboto.less","hash":"3e457942995da8840e7662fa6cb551a7e12ea294","modified":1546439123614},{"_id":"themes/indigos/source/css/_partial/search.less","hash":"dbc23e77e586ee682a21475f5eb568628ea6720f","modified":1546439123614},{"_id":"themes/indigos/source/css/_partial/share.less","hash":"a683c96a59470efd35722b763c55149a46e35156","modified":1546439123614},{"_id":"themes/indigos/source/css/_partial/tags.less","hash":"01eb7f84193180928a6ed4796ee8802f6c1628e7","modified":1546439123614},{"_id":"themes/indigos/source/css/_partial/variable.less","hash":"3232e75f4653402c9fbd7bda5b97c05ecc31db2b","modified":1546439123614},{"_id":"themes/indigos/source/css/_partial/waves.less","hash":"a02eaa601887f947257f6016679b62dc96a61c0c","modified":1546439123614},{"_id":"themes/indigos/source/css/_plugin/valine.less","hash":"b8f8d8037fb3c8525da12e580bd9e2ff9f298132","modified":1546439123614},{"_id":"themes/indigos/source/img/wechat.jpg","hash":"c7887fd95a3383371b957667d4bfbc3c8c2cbe53","modified":1545721370643},{"_id":"themes/indigos/source/img/alipay.jpg","hash":"d2e76219d3f688a805c9f30e004f48e79daf03ab","modified":1545721413724},{"_id":"source/_posts/java/collection/weakhashmap-4.png","hash":"ca0ae5597535eb89f027c74cf3e92369cffb0bd4","modified":1545897772213},{"_id":"source/_posts/java/collection/weakhashmap-3.png","hash":"a1971c4b5102b3a6c222ed1014712e399a6e3ce2","modified":1545897772202},{"_id":"source/_posts/java/introduction/1-jdk-windows.png","hash":"8f643602c33a1a98b96e46349952dea4dae4981b","modified":1545897750285},{"_id":"source/_posts/java/introduction/11-jdk-mac.png","hash":"09153cd9a58d2ea84f64bc4105fee92a0691c221","modified":1545897750585},{"_id":"source/_posts/java/introduction/15-jdk-mac.png","hash":"115d45c94471ff20db11d361a5111108181273f9","modified":1545897750667},{"_id":"source/_posts/java/introduction/java-ide-4.png","hash":"41e84a42900e891648f3b37130a080606f531181","modified":1545897750832},{"_id":"themes/indigos/source/css/_partial/fontawesome.less","hash":"a3ecbd6ccf5b56ac39df710c34a149b82989a498","modified":1546439123594},{"_id":"source/_posts/java/introduction/2-jdk-mac.png","hash":"bef4170c81af99efbdb89dafa2094fd127648889","modified":1545897750293},{"_id":"source/_posts/java/introduction/java-started-1.png","hash":"83c77b655ea24647ff6c55c830924baa4e90b845","modified":1545983120160},{"_id":"source/_posts/java/reference/141.png","hash":"accf4d56385ac11f9ae611c005ee807214bfc1af","modified":1545897861342},{"_id":"source/_posts/java/reference/0001.png","hash":"5646e88cc49bea8fb2744a8a131c94b2b55b266f","modified":1545897861131},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.eot","hash":"a76cd602f5188b9fbd4ba7443dcb9c064e3dbf10","modified":1545719561539},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.woff","hash":"ee99cd87a59a9a5d4092c83232bb3eec67547425","modified":1545719561541},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.woff2","hash":"933b866d09c2b087707a98dab64b3888865eeb96","modified":1545719561542},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.eot","hash":"42fe156996197e5eb0c0264c5d1bb3b4681f4595","modified":1545719561542},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.woff","hash":"6300f659be9e834ab263efe2fb3c581d48b1e7b2","modified":1545719561544},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.woff2","hash":"bbdc28b887400fcb340b504ec2904993af42a5d7","modified":1545719561545},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.eot","hash":"1517f4b6e1c5d0e5198f937557253aac8fab0416","modified":1545719561545},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.woff","hash":"d45f84922131364989ad6578c7a06b6b4fc22c34","modified":1545719561547},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.woff2","hash":"6cc1b73571af9e827c4e7e91418f476703cd4c4b","modified":1545719561548},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.eot","hash":"77ae3e980ec03863ebe2587a8ef9ddfd06941db0","modified":1545719561548},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.woff","hash":"74734dde8d94e7268170f9b994dedfbdcb5b3a15","modified":1545719561551},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.woff2","hash":"ed1558b0541f5e01ce48c7db1588371b990eec19","modified":1545719561551},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.eot","hash":"0790a51a848dbe7292c98f9d0459218bf1a8ffdd","modified":1545719561551},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.woff","hash":"fbc3e71d456c96667d8082ab910e3946ef89240b","modified":1545719561553},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.woff2","hash":"2449e3dac5ddb7c3da8bb07450493b62d052758c","modified":1545719561554},{"_id":"source/_posts/java/reference/0009.png","hash":"785e1957c7aea321a1933bbaf37a7e7b834212e6","modified":1545897861174},{"_id":"source/_posts/java/introduction/3-jdk-mac.png","hash":"0b4bb944db5070a12b706f7ffaf451f5d558cfd9","modified":1545897750310},{"_id":"source/_posts/java/introduction/java-ide-2.png","hash":"9e81a827e3e5793b7f262df0eda5de1746c65899","modified":1545897750788},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1545719561538},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1545719561537},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.ttf","hash":"47327df0f35e7cd7c8645874897a7449697544ae","modified":1545719561540},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.ttf","hash":"e321c183e2b75ee19813892b7bac8d7c411cb88a","modified":1545719561543},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.ttf","hash":"824b5480c977a8166e177e5357d13164ccc45f47","modified":1545719561550},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.ttf","hash":"6060ca726b9760b76f7c347dce9d2fa1fe42ec92","modified":1545719561547},{"_id":"source/_posts/java/introduction/4-jdk-mac.png","hash":"df019bad4cac078997c8a067a59d69be97a34adc","modified":1545897750367},{"_id":"source/_posts/java/introduction/java-started/java-started-1.png","hash":"83c77b655ea24647ff6c55c830924baa4e90b845","modified":1545958752475},{"_id":"themes/indigos/source/css/fonts/fontawesome/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1545719561528},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1545719561530},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.ttf","hash":"173ed64528b4d010a76d8d38deb1d7e7eed58eda","modified":1545719561553},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1545719561536},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1546439123624},{"_id":"source/_posts/java/introduction/1-jdk-mac.png","hash":"4acf222e3a5d9728d358cd16a2f0d4300ae6700e","modified":1545897750275},{"_id":"source/_posts/java/introduction/java-ide-1.png","hash":"ab6bb5ebfc5b292263824a72ba6eeca819f31f14","modified":1545897750769},{"_id":"source/_posts/java/basic/java-package.md","hash":"6c03a0a37f5366e36c60ce7c99caa5a003caf44a","modified":1546439123238},{"_id":"source/_posts/java/introduction/java-environment-mac/10-jdk-mac.png","hash":"a058e42380742e3be7911c30ea4c54263f2e99e9","modified":1545987773638},{"_id":"source/_posts/java/introduction/java-environment-mac/12-jdk-mac.png","hash":"79b6a623b06142723ea9dc4981f3ef12ff3bcd75","modified":1545987773639},{"_id":"source/_posts/java/introduction/java-environment-mac/13-jdk-mac.png","hash":"aa4d7a93b28afb3424a5c107724b07cb9cbeed3d","modified":1545987773639},{"_id":"source/_posts/java/introduction/java-environment-mac/16-jdk-mac.png","hash":"5451e575e4bf08b384335bb070bb46817edad5bd","modified":1545987773639},{"_id":"source/_posts/java/introduction/java-environment-mac/14-jdk-mac.png","hash":"4bc54995d9f778084a8b486634bc30793f1592f0","modified":1545987773639},{"_id":"source/_posts/java/introduction/java-environment-mac/5-jdk-mac.png","hash":"b65be8a8b49518b8fc8ea4f1c1b7d1113352180c","modified":1545987773638},{"_id":"source/_posts/java/introduction/java-environment-mac/6-jdk-mac.png","hash":"cc0550022513036a612d666bab64f1876d703ec3","modified":1545987773638},{"_id":"source/_posts/java/introduction/java-environment-mac/7-jdk-mac.png","hash":"57310fc56a96be434f0ad69eb6387a82f54d0d5a","modified":1545987773638},{"_id":"source/_posts/java/introduction/java-environment-mac/8-jdk-mac.png","hash":"52eacf47993855414045b0719196da9001ccb153","modified":1545987773638},{"_id":"source/_posts/java/introduction/java-environment-mac/9-jdk-mac.png","hash":"1c9dbad3045f234695be69fb4c27c0cd53ab1918","modified":1545987773638},{"_id":"source/_posts/java/introduction/java-environment-windows/2-jdk-windows.png","hash":"4d1cb8168cde93a8aabef63c8d12a8ccb56a60e4","modified":1545987636754},{"_id":"source/_posts/java/introduction/java-environment-windows/3-jdk-windows.png","hash":"2a89504a729c391003e94d74941aeada3fde7e4a","modified":1545987636754},{"_id":"source/_posts/java/introduction/java-environment-windows/5-jdk-windows.png","hash":"ac4f6a18554f2d1aae972e1bf6737dd60551613d","modified":1545987636755},{"_id":"source/_posts/java/introduction/java-environment-windows/4-jdk-windows.png","hash":"155d9ca099b6138a5f3c2df3b826f6ce972d847a","modified":1545987636754},{"_id":"source/_posts/java/introduction/java-environment-windows/8-jdk-windows.png","hash":"884e1c6927bf1394dc9941de017deb3b9901daeb","modified":1545987642456},{"_id":"source/_posts/java/introduction/java-environment-windows/9-jdk-windows.png","hash":"8defa728fac888e8203a5e6151596c5ce15280d3","modified":1545987642456},{"_id":"source/_posts/java/introduction/java-environment-windows/6-jdk-windows.png","hash":"f26f02913932acf206e345b96a2749c22d68a7c1","modified":1545987636755},{"_id":"source/_posts/java/introduction/java-environment-windows/7-jdk-windows.png","hash":"79f375c43ac760ce5a88aef12df9e788494f0643","modified":1545987636754},{"_id":"source/_posts/java/introduction/java-ide/java-ide-3.png","hash":"5616c391ba4e9a1341b4c6213758924b9e8124d1","modified":1545988148472},{"_id":"source/_posts/java/introduction/java-ide/java-ide-5.png","hash":"627cfbad99d15a6962df90269eb9df896a6b6021","modified":1545988148473},{"_id":"source/_posts/java/introduction/java-ide/java-ide-7.png","hash":"db6fcb1e3350c32db0a5ad41400ee7e22023eed1","modified":1545988148473},{"_id":"source/_posts/java/introduction/java-ide/java-ide-6.png","hash":"bc4523f962ca5301e062c864166cf4cc2dfd6f34","modified":1545988148472},{"_id":"source/_posts/java/introduction/java-ide/java-ide-8.png","hash":"311e7f7643a2facb45dc3165c938af1bd84b28b7","modified":1545988148473},{"_id":"source/_posts/java/introduction/java-ide/java-ide-9.png","hash":"b7cb86602219d3609159f856c4449b7b85ae0aac","modified":1545988148473},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-1.png","hash":"7be12cd9b902847ed3ca8ce7a6f06139103f1180","modified":1545990049919},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-2.png","hash":"404e3de6764fab8a109a7efceabfb4bc6942fb30","modified":1545990049919},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-3.png","hash":"9b42950df71c6cb651d76dec741a4549e4855fd5","modified":1545990049919},{"_id":"source/_posts/java/introduction/java-environment-mac/15-jdk-mac.png","hash":"115d45c94471ff20db11d361a5111108181273f9","modified":1545987773639},{"_id":"source/_posts/java/introduction/java-environment-windows/1-jdk-windows.png","hash":"8f643602c33a1a98b96e46349952dea4dae4981b","modified":1545987624287},{"_id":"source/_posts/java/introduction/java-ide/java-ide-4.png","hash":"41e84a42900e891648f3b37130a080606f531181","modified":1545988148472},{"_id":"source/_posts/java/introduction/java-environment-mac/11-jdk-mac.png","hash":"09153cd9a58d2ea84f64bc4105fee92a0691c221","modified":1545987773638},{"_id":"source/_posts/java/introduction/java-environment-mac/2-jdk-mac.png","hash":"bef4170c81af99efbdb89dafa2094fd127648889","modified":1545987773638},{"_id":"source/_posts/java/introduction/java-environment-mac/3-jdk-mac.png","hash":"0b4bb944db5070a12b706f7ffaf451f5d558cfd9","modified":1545987773638},{"_id":"source/_posts/java/introduction/java-ide/java-ide-2.png","hash":"9e81a827e3e5793b7f262df0eda5de1746c65899","modified":1545988148472},{"_id":"source/_posts/java/introduction/java-environment-mac/4-jdk-mac.png","hash":"df019bad4cac078997c8a067a59d69be97a34adc","modified":1545987773638},{"_id":"source/_posts/java/introduction/java-environment-mac/1-jdk-mac.png","hash":"4acf222e3a5d9728d358cd16a2f0d4300ae6700e","modified":1545987773639},{"_id":"source/_posts/java/introduction/java-ide/java-ide-1.png","hash":"ab6bb5ebfc5b292263824a72ba6eeca819f31f14","modified":1545988148473},{"_id":"public/atom.xml","hash":"f6bde12cecad56f3ea5464a5432f9558a49368d0","modified":1546431798709},{"_id":"public/content.json","hash":"5631ef74327ff9b3ce48e24bfdbc95a5573be81f","modified":1546431798710},{"_id":"public/uncategorized/README.html","hash":"4a956051f650dc2051e6dc5ab25ff2beaf05e048","modified":1546431800064},{"_id":"public/archives/page/3/index.html","hash":"fbef6ecdf22c51df6077b3314e165c3194fb115d","modified":1546431800102},{"_id":"public/archives/page/5/index.html","hash":"37e4c1c79d08a88fef239cbd03af69b8acbe96d8","modified":1546431800102},{"_id":"public/archives/page/6/index.html","hash":"63db2531d5bd1c2f8f6512e775b19dda99d2b8ed","modified":1546431800102},{"_id":"public/archives/2018/page/3/index.html","hash":"c455187c6dfd2389f72baff2303603f5a6cce8ee","modified":1546431800102},{"_id":"public/archives/2018/page/5/index.html","hash":"45ddd097d14c06911848c216914d08bdc9a47dba","modified":1546431800102},{"_id":"public/archives/2018/page/6/index.html","hash":"2b13a42959feeca994b630f24e5ba21d28dc6594","modified":1546431800102},{"_id":"public/archives/2018/09/index.html","hash":"d647c8bb083c13ef9d7b2db40243a5ab0c4d93b0","modified":1546431800102},{"_id":"public/archives/2018/10/index.html","hash":"8f6fbc98d549824ff430a77c029f980689f88c89","modified":1546431800103},{"_id":"public/archives/2018/11/index.html","hash":"872c35e0c7cbda71f91791b3529cc04f69c75041","modified":1546431800103},{"_id":"public/archives/2018/12/page/3/index.html","hash":"2ff635af086b01fb676f2558af0010e26781b64d","modified":1546431800103},{"_id":"public/archives/2018/12/page/5/index.html","hash":"9feef23a4e276ec08eabe76a6730155baae2a349","modified":1546431800103},{"_id":"public/categories/Hexo/index.html","hash":"79b91f1a0a94c44a1011f01752e63658fc4a4af0","modified":1546431800064},{"_id":"public/categories/reading/index.html","hash":"7b459d8a71ad05d2e9dfd9a470e959ae4bf5b7c0","modified":1546431800101},{"_id":"public/categories/programming/page/2/index.html","hash":"97428a37cbb3797a08870c0af68ae382f7f05501","modified":1546431800101},{"_id":"public/page/6/index.html","hash":"de443e67610c558f5910d2766fb623fdf25bece0","modified":1546431800103},{"_id":"public/tags/digest/index.html","hash":"175902a1fb31a4f3de4703ad8633276dedfd8292","modified":1546431800103},{"_id":"public/tags/multithread/index.html","hash":"94063f661353341d6eff4f6295da2243497a09d1","modified":1546431800103},{"_id":"public/tags/reading-notes/index.html","hash":"81be1ae19e7e738cd79fafbcb246d0fe262b0092","modified":1546431800103},{"_id":"public/tags/enviroment/index.html","hash":"bc3d0ec74390acf72702bee18d3c51424bf68c4c","modified":1546431800108},{"_id":"public/categories/index.html","hash":"0b01aaa687e1d2fcd86cd0d48c08ee855eff4fff","modified":1546431800103},{"_id":"public/tags/index.html","hash":"a62c078d2dd7f071fd789e29ec7b76539ac1018f","modified":1546431800103},{"_id":"public/programming/java/basic/java-class.html","hash":"c95659db674bee61d2ab64bc9688919434bd0a94","modified":1546431800103},{"_id":"public/programming/java/basic/java-variable.html","hash":"d6209edc614d6ec2d6052c97456cda4fe6035cc3","modified":1546431800103},{"_id":"public/programming/java/basic/java-package.html","hash":"1bd20a3fa57a66804d9407a49c0d66518dc57df7","modified":1546431800103},{"_id":"public/programming/java/basic/java-simple-structure.html","hash":"f7dfd8ee26b172942cebd82632968849c7f24f99","modified":1546431800103},{"_id":"public/programming/java/basic/java-basic.html","hash":"b37bcf5486076f6498e7fd2c4b4b13bc3539957b","modified":1546431800103},{"_id":"public/programming/java/introduction/java-primer-conclusion.html","hash":"07c7c8ac434f0a7e81087b39e2a571021ab63d06","modified":1546431800103},{"_id":"public/programming/java/introduction/java-simple-example.html","hash":"f98d7d6c7c353e3841630412e577671206411022","modified":1546431800103},{"_id":"public/programming/java/introduction/java-introduction.html","hash":"4878c7ef7fda860eb0452babd30555fce3618696","modified":1546431800103},{"_id":"public/programming/java/introduction/java-ide.html","hash":"e5bdbaa83949a4342d3b30851018553a4e60830b","modified":1546431800103},{"_id":"public/programming/java/introduction/java-environment-mac.html","hash":"69e39e7394fcd772243f82524195669497e4d805","modified":1546431800104},{"_id":"public/programming/java/introduction/java-environment-windows.html","hash":"ea3b3be4959cf258f59791b5d13689a81f3ca279","modified":1546431800104},{"_id":"public/programming/java/introduction/java-environment.html","hash":"ac3053f23e6e698c54169b96bd1d05c581c519b2","modified":1546431800104},{"_id":"public/programming/java/introduction/java-started.html","hash":"7bf0d8395d020c52cca56f954c45f7fc15bbc79e","modified":1546431800104},{"_id":"public/uncategorized/java/reference/weak-reference.html","hash":"930650af9826db6ca94c9bcde6d277fe70475db3","modified":1546431800104},{"_id":"public/uncategorized/java/reference/weak-reference-code-detail.html","hash":"d47d19977535eff50fbce7cbd740adf703ddc3d7","modified":1546431800104},{"_id":"public/uncategorized/java/reference/strong-reference.html","hash":"84d1edc945fb95a36454720207de52e35a53b30f","modified":1546431800104},{"_id":"public/uncategorized/java/reference/soft-reference.html","hash":"8f01ee2bff599c45b48465dfbf85a0b85610f862","modified":1546431800104},{"_id":"public/uncategorized/java/reference/soft-reference-code-detail.html","hash":"5d12cc414f51783d65cdc94571ba0f0ea645b741","modified":1546431800104},{"_id":"public/uncategorized/java/reference/reference-summary.html","hash":"024636060a9685e3ec2c5986f7d67638418d419a","modified":1546431800104},{"_id":"public/uncategorized/java/reference/reference-queue-code-detail.html","hash":"342df3e67c1d7f56c876879e518ef67c8bf7ea7f","modified":1546431800104},{"_id":"public/uncategorized/java/reference/reference-code-detail.html","hash":"02a4bbae23e491770ea6693f837660f3458fbc17","modified":1546431800105},{"_id":"public/uncategorized/java/reference/phantom-reference.html","hash":"c9e604f534e7d5dc3703922d1e889cdc4d32d99c","modified":1546431800104},{"_id":"public/uncategorized/java/reference/phantom-reference-code-detail.html","hash":"98407b17b43c1c9667941f42d43a95cf311ec35d","modified":1546431800105},{"_id":"public/uncategorized/java/reference/four-kinds-of-reference.html","hash":"3a79d0eee9647d4c2b1a654b54cef7e38824b05c","modified":1546431800104},{"_id":"public/uncategorized/java/reference/final-reference-code-detail.html","hash":"265be0d51e5505b2031ae1456f2f99b5b7ee356e","modified":1546431800105},{"_id":"public/uncategorized/java/README.html","hash":"55f433c6f2af52a8edea775933d8b085218b7405","modified":1546431800105},{"_id":"public/uncategorized/java/multithread/multithread-start.html","hash":"60125c72f8e350612c63cc298b3195d28d11bd95","modified":1546431800105},{"_id":"public/uncategorized/java/jvm/reachable.html","hash":"9e0f25e86194d9e1b65cd8bd6da3f6038332f7e1","modified":1546431800105},{"_id":"public/uncategorized/java/jvm/reachable-in-hotspot.html","hash":"0243ba95f77213f1d1adb4b1275d0b2bf71c58b5","modified":1546431800105},{"_id":"public/uncategorized/java/jvm/object-self-rescue.html","hash":"392013b9a2974d03e6b8fb9a3eecb2433047f5b3","modified":1546431800105},{"_id":"public/uncategorized/java/jvm/memory-leak.html","hash":"2d52e9dc54a0d0e2989eda71a4432cbf42aa5dd0","modified":1546431800105},{"_id":"public/uncategorized/java/jvm/garbage-collection.html","hash":"840ef2d6ce27d01101e7a5bf8cc73f85de71e08c","modified":1546431800105},{"_id":"public/uncategorized/java/collection/weakhashmap-code-detail.html","hash":"de73b9670cb49ccf346a4a60d558a36c09ce358c","modified":1546431800106},{"_id":"public/uncategorized/java/basic/java-operator.html","hash":"baf3faf948360dc92a2e9f061c647bca0684cf7f","modified":1546431800105},{"_id":"public/uncategorized/java/basic/java-data-type.html","hash":"5f94598d4887d449397ba9adccb889530b1f1fc7","modified":1546431800105},{"_id":"public/reading/reading/the-power-of-habit.html","hash":"c0ad1a2036ab73904213adf8078fe75dcaa16c89","modified":1546431800106},{"_id":"public/reading/reading/java-multithread-programming-guide-in-action.html","hash":"127a982692e2f4a96aa270d4fd8f3825fe7b5cc0","modified":1546431800105},{"_id":"public/reading/reading/java-multithread-programming-guide-in-action-digest.html","hash":"8a14b4fb77c09ddb6b1c27f61f4d8e758a8c1450","modified":1546431800105},{"_id":"public/reading/reading/the-power-of-habit-digest.html","hash":"68f9a4dbc759f4a319645cb471e3da78d6b1e11e","modified":1546431800105},{"_id":"public/Hexo/hello-world.html","hash":"130e71393d587952373f9a5f85cdb2a37f4ed9f7","modified":1546431800106},{"_id":"public/uncategorized/leetcode/Design-Linked-List.html","hash":"464a3c63683260a70f994366151be16efbcd59da","modified":1546431800106},{"_id":"public/uncategorized/leetcode/README.html","hash":"95f3a335bb3033ae0e592e30473d40a78ff6dec6","modified":1546431800106},{"_id":"public/uncategorized/life-thinking/README.html","hash":"12aaaa5cdd5131432fd583854ada4773de4b8ffd","modified":1545993664336},{"_id":"public/uncategorized/reading/README.html","hash":"b220c6416b2ab3b786c1eeaf49b292a07446df73","modified":1546431800106},{"_id":"public/uncategorized/guide/background-skill.html","hash":"8992c62a0e3332dad885de821282d7861e794707","modified":1546431800106},{"_id":"public/uncategorized/guide/README.html","hash":"111a8c92ca1ff6a1e935aae6f3de2cca45bbffd8","modified":1546431800106},{"_id":"public/uncategorized/architecture/domain-driven-design/ddd-outline.html","hash":"751da7d079aa8619eaeb0178b771d08ba5e2d8cb","modified":1546431800107},{"_id":"public/uncategorized/architecture/domain-driven-design/ddd-steps.html","hash":"6e3854cbfcd5418d8ea317c37b7f99bc52fdbeca","modified":1546431800106},{"_id":"public/uncategorized/architecture/domain-driven-design/ddd-recommendation.html","hash":"896b55a87e52ac238339f81c912be7fa979fa8c8","modified":1546431800106},{"_id":"public/uncategorized/ops/centos-jdk8-installation.html","hash":"0fb5fc82db5d9117ad26cb297e2ffa127ce4fad3","modified":1546431800106},{"_id":"public/uncategorized/ops/deploy-vuepress-on-centos7.html","hash":"7a5189f9aad559ab009a218f7d45d900e91f585a","modified":1546431800106},{"_id":"public/uncategorized/ops/jenkins-work-with-github-webhook.html","hash":"b15563af50621e997bc8e475ab624dd2b803f13a","modified":1546431800106},{"_id":"public/archives/index.html","hash":"e5fa6c022fefa6fab36db1fe7ef09cee33e19d2c","modified":1546431800106},{"_id":"public/archives/page/2/index.html","hash":"b8b2db94cfdedb812827a96626a642bf93e6984b","modified":1546431800106},{"_id":"public/archives/page/4/index.html","hash":"2aecd9ec60c3d6b60d059720e9ab7cea6dc7199b","modified":1546431800107},{"_id":"public/archives/2018/index.html","hash":"ec8fd608696fe97ba10ed5461b06bf653ee1f6f1","modified":1546431800107},{"_id":"public/archives/2018/page/2/index.html","hash":"71d175d4d8af875e0000a1dc635579444892586f","modified":1546431800107},{"_id":"public/archives/2018/page/4/index.html","hash":"bf72f93d08c50ece323c1df284873c5f090bef4b","modified":1546431800107},{"_id":"public/archives/2018/12/index.html","hash":"af35eaa8fd6645ea1bcef5ae68d70d567f953bdd","modified":1546431800107},{"_id":"public/archives/2018/12/page/2/index.html","hash":"b91a767e614db7e55418606c5deeb0cb31be61a2","modified":1546431800107},{"_id":"public/archives/2018/12/page/4/index.html","hash":"3a21444ec8fa80c30b6c501567324cc870540543","modified":1546431800107},{"_id":"public/categories/programming/index.html","hash":"0e718a662fc4f6b5770f097d52bba8406fadb110","modified":1546431800106},{"_id":"public/index.html","hash":"a59143f606f40f2d22c3026e4a42374d6edcb3e5","modified":1546431800107},{"_id":"public/page/2/index.html","hash":"aca48498050c17c417082d054c38fd3ed0773f89","modified":1546431800107},{"_id":"public/page/3/index.html","hash":"98c45ded667f4df7185e73955cb09cdd39c0e8db","modified":1546431800107},{"_id":"public/page/4/index.html","hash":"61337a12411e72c8e2c3d9f0062c75bb4705c7fc","modified":1546431800107},{"_id":"public/page/5/index.html","hash":"399706004b38da3e920280cd71e2fd5b600f8f12","modified":1546431800107},{"_id":"public/tags/java/index.html","hash":"aa729f0fe05233c00fc7aba488311e4c313a9643","modified":1546431800107},{"_id":"public/tags/java/page/2/index.html","hash":"085568435b54defad7254dd5ad8499c59f50f4f5","modified":1546431800107},{"_id":"public/tags/java-base/index.html","hash":"86116a7a504ed9905490dde6c1c61d064462310e","modified":1546431800108},{"_id":"public/tags/java-introduction/index.html","hash":"1b3b7ff7363fa0df7b38dea848f026fbfbcf352b","modified":1546431800107},{"_id":"public/img/avatar.jpg","hash":"96f2506c587325147a383aad3ada8d5993e6cdf8","modified":1545993664347},{"_id":"public/img/brand.jpg","hash":"0e237f1b433851c156e1f1cdaeb044054b3b9879","modified":1545993664347},{"_id":"public/img/cc.png","hash":"ebce75a62b40976a72d43f0bd937d859ac24d87c","modified":1545993664347},{"_id":"public/img/favicon.ico","hash":"c88cd0044daea8f5b87913d71c4ade2aa31387c9","modified":1545993664347},{"_id":"public/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1545993664347},{"_id":"public/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1545993664347},{"_id":"public/css/fonts/roboto/Roboto-Bold.eot","hash":"a76cd602f5188b9fbd4ba7443dcb9c064e3dbf10","modified":1545993664347},{"_id":"public/css/fonts/roboto/Roboto-Bold.woff2","hash":"933b866d09c2b087707a98dab64b3888865eeb96","modified":1545993664347},{"_id":"public/css/fonts/roboto/Roboto-Bold.woff","hash":"ee99cd87a59a9a5d4092c83232bb3eec67547425","modified":1545993664347},{"_id":"public/css/fonts/roboto/Roboto-Light.eot","hash":"42fe156996197e5eb0c0264c5d1bb3b4681f4595","modified":1545993664347},{"_id":"public/css/fonts/roboto/Roboto-Light.woff","hash":"6300f659be9e834ab263efe2fb3c581d48b1e7b2","modified":1545993664347},{"_id":"public/css/fonts/roboto/Roboto-Light.woff2","hash":"bbdc28b887400fcb340b504ec2904993af42a5d7","modified":1545993664347},{"_id":"public/css/fonts/roboto/Roboto-Medium.eot","hash":"1517f4b6e1c5d0e5198f937557253aac8fab0416","modified":1545993664347},{"_id":"public/css/fonts/roboto/Roboto-Medium.woff2","hash":"6cc1b73571af9e827c4e7e91418f476703cd4c4b","modified":1545993664348},{"_id":"public/css/fonts/roboto/Roboto-Regular.eot","hash":"77ae3e980ec03863ebe2587a8ef9ddfd06941db0","modified":1545993664348},{"_id":"public/css/fonts/roboto/Roboto-Regular.woff","hash":"74734dde8d94e7268170f9b994dedfbdcb5b3a15","modified":1545993664348},{"_id":"public/css/fonts/roboto/Roboto-Regular.woff2","hash":"ed1558b0541f5e01ce48c7db1588371b990eec19","modified":1545993664348},{"_id":"public/css/fonts/roboto/Roboto-Thin.eot","hash":"0790a51a848dbe7292c98f9d0459218bf1a8ffdd","modified":1545993664348},{"_id":"public/css/fonts/roboto/Roboto-Medium.woff","hash":"d45f84922131364989ad6578c7a06b6b4fc22c34","modified":1545993664348},{"_id":"public/css/fonts/roboto/Roboto-Thin.woff","hash":"fbc3e71d456c96667d8082ab910e3946ef89240b","modified":1545993664348},{"_id":"public/css/fonts/roboto/Roboto-Thin.woff2","hash":"2449e3dac5ddb7c3da8bb07450493b62d052758c","modified":1545993664348},{"_id":"public/programming/java/introduction/java-environment-windows/7-jdk-windows.png","hash":"79f375c43ac760ce5a88aef12df9e788494f0643","modified":1545993664348},{"_id":"public/programming/java/introduction/java-environment-windows/2-jdk-windows.png","hash":"4d1cb8168cde93a8aabef63c8d12a8ccb56a60e4","modified":1545993664348},{"_id":"public/programming/java/introduction/java-environment-windows/3-jdk-windows.png","hash":"2a89504a729c391003e94d74941aeada3fde7e4a","modified":1545993664348},{"_id":"public/programming/java/introduction/java-environment-windows/4-jdk-windows.png","hash":"155d9ca099b6138a5f3c2df3b826f6ce972d847a","modified":1545993664348},{"_id":"public/programming/java/introduction/java-environment-windows/5-jdk-windows.png","hash":"ac4f6a18554f2d1aae972e1bf6737dd60551613d","modified":1545993664348},{"_id":"public/programming/java/introduction/java-environment-windows/6-jdk-windows.png","hash":"f26f02913932acf206e345b96a2749c22d68a7c1","modified":1545993664348},{"_id":"public/programming/java/introduction/java-environment-windows/8-jdk-windows.png","hash":"884e1c6927bf1394dc9941de017deb3b9901daeb","modified":1545993664348},{"_id":"public/programming/java/introduction/java-environment-windows/9-jdk-windows.png","hash":"8defa728fac888e8203a5e6151596c5ce15280d3","modified":1545993664349},{"_id":"public/programming/java/introduction/java-environment-mac/5-jdk-mac.png","hash":"b65be8a8b49518b8fc8ea4f1c1b7d1113352180c","modified":1545993664349},{"_id":"public/programming/java/introduction/java-environment-mac/6-jdk-mac.png","hash":"cc0550022513036a612d666bab64f1876d703ec3","modified":1545993664349},{"_id":"public/programming/java/introduction/java-environment-mac/9-jdk-mac.png","hash":"1c9dbad3045f234695be69fb4c27c0cd53ab1918","modified":1545993664349},{"_id":"public/programming/java/introduction/java-environment-mac/10-jdk-mac.png","hash":"a058e42380742e3be7911c30ea4c54263f2e99e9","modified":1545993664349},{"_id":"public/programming/java/introduction/java-environment-mac/12-jdk-mac.png","hash":"79b6a623b06142723ea9dc4981f3ef12ff3bcd75","modified":1545993664349},{"_id":"public/programming/java/introduction/java-environment-mac/8-jdk-mac.png","hash":"52eacf47993855414045b0719196da9001ccb153","modified":1545993664349},{"_id":"public/programming/java/introduction/java-environment-mac/13-jdk-mac.png","hash":"aa4d7a93b28afb3424a5c107724b07cb9cbeed3d","modified":1545993664349},{"_id":"public/programming/java/introduction/java-environment-mac/7-jdk-mac.png","hash":"57310fc56a96be434f0ad69eb6387a82f54d0d5a","modified":1545993664349},{"_id":"public/programming/java/introduction/java-environment-mac/14-jdk-mac.png","hash":"4bc54995d9f778084a8b486634bc30793f1592f0","modified":1545993664349},{"_id":"public/programming/java/introduction/java-environment-mac/16-jdk-mac.png","hash":"5451e575e4bf08b384335bb070bb46817edad5bd","modified":1545993664349},{"_id":"public/programming/java/introduction/java-ide/java-ide-3.png","hash":"5616c391ba4e9a1341b4c6213758924b9e8124d1","modified":1545993664349},{"_id":"public/programming/java/introduction/java-ide/java-ide-7.png","hash":"db6fcb1e3350c32db0a5ad41400ee7e22023eed1","modified":1545993664349},{"_id":"public/programming/java/introduction/java-ide/java-ide-8.png","hash":"311e7f7643a2facb45dc3165c938af1bd84b28b7","modified":1545993664349},{"_id":"public/programming/java/introduction/java-ide/java-ide-5.png","hash":"627cfbad99d15a6962df90269eb9df896a6b6021","modified":1545993664349},{"_id":"public/programming/java/introduction/java-ide/java-ide-9.png","hash":"b7cb86602219d3609159f856c4449b7b85ae0aac","modified":1545993664350},{"_id":"public/programming/java/introduction/java-simple-example/java-simple-example-2.png","hash":"404e3de6764fab8a109a7efceabfb4bc6942fb30","modified":1545993664350},{"_id":"public/programming/java/introduction/java-simple-example/java-simple-example-3.png","hash":"9b42950df71c6cb651d76dec741a4549e4855fd5","modified":1545993664350},{"_id":"public/programming/java/introduction/java-ide/java-ide-6.png","hash":"bc4523f962ca5301e062c864166cf4cc2dfd6f34","modified":1545993664350},{"_id":"public/programming/java/introduction/java-simple-example/java-simple-example-1.png","hash":"7be12cd9b902847ed3ca8ce7a6f06139103f1180","modified":1545993664350},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1545993664372},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1545993664372},{"_id":"public/css/fonts/roboto/Roboto-Bold.ttf","hash":"47327df0f35e7cd7c8645874897a7449697544ae","modified":1545993664372},{"_id":"public/css/fonts/roboto/Roboto-Light.ttf","hash":"e321c183e2b75ee19813892b7bac8d7c411cb88a","modified":1545993664372},{"_id":"public/css/fonts/roboto/Roboto-Regular.ttf","hash":"824b5480c977a8166e177e5357d13164ccc45f47","modified":1545993664372},{"_id":"public/css/fonts/roboto/Roboto-Medium.ttf","hash":"6060ca726b9760b76f7c347dce9d2fa1fe42ec92","modified":1545993664373},{"_id":"public/css/fonts/roboto/Roboto-Thin.ttf","hash":"173ed64528b4d010a76d8d38deb1d7e7eed58eda","modified":1545993664373},{"_id":"public/programming/java/introduction/java-environment-windows/1-jdk-windows.png","hash":"8f643602c33a1a98b96e46349952dea4dae4981b","modified":1545993664373},{"_id":"public/programming/java/introduction/java-environment-mac/11-jdk-mac.png","hash":"09153cd9a58d2ea84f64bc4105fee92a0691c221","modified":1545993664373},{"_id":"public/programming/java/introduction/java-environment-mac/15-jdk-mac.png","hash":"115d45c94471ff20db11d361a5111108181273f9","modified":1545993664373},{"_id":"public/programming/java/introduction/java-ide/java-ide-4.png","hash":"41e84a42900e891648f3b37130a080606f531181","modified":1545993664373},{"_id":"public/js/main.min.js","hash":"8acf4480f8ab859423b8926b9b790c67b5a77276","modified":1545993664378},{"_id":"public/js/search.js","hash":"a1de7e7a2ef8330ebcd9f3a7a4622b3bac44e4f3","modified":1545993664378},{"_id":"public/js/search.min.js","hash":"a8a450bb8b1ca9ad577052addcbd3393f1af6c6a","modified":1545993664379},{"_id":"public/js/main.js","hash":"300b2e963683ced162e28afcd24ffc970fc23ac2","modified":1545993664379},{"_id":"public/img/wechat.jpg","hash":"c7887fd95a3383371b957667d4bfbc3c8c2cbe53","modified":1545993664379},{"_id":"public/img/alipay.jpg","hash":"d2e76219d3f688a805c9f30e004f48e79daf03ab","modified":1545993664379},{"_id":"public/css/fonts/fontawesome/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1545993664379},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1545993664379},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1545993664379},{"_id":"public/programming/java/introduction/java-started/java-started-1.png","hash":"83c77b655ea24647ff6c55c830924baa4e90b845","modified":1545993664379},{"_id":"public/programming/java/introduction/java-environment-mac/2-jdk-mac.png","hash":"bef4170c81af99efbdb89dafa2094fd127648889","modified":1545993664379},{"_id":"public/programming/java/introduction/java-environment-mac/3-jdk-mac.png","hash":"0b4bb944db5070a12b706f7ffaf451f5d558cfd9","modified":1545993664384},{"_id":"public/programming/java/introduction/java-ide/java-ide-2.png","hash":"9e81a827e3e5793b7f262df0eda5de1746c65899","modified":1545993664385},{"_id":"public/programming/java/introduction/java-environment-mac/4-jdk-mac.png","hash":"df019bad4cac078997c8a067a59d69be97a34adc","modified":1545993664389},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1545993664396},{"_id":"public/css/style.css","hash":"4f59712181405c963fe7e80740071022050bc096","modified":1545993664813},{"_id":"public/programming/java/introduction/java-ide/java-ide-1.png","hash":"ab6bb5ebfc5b292263824a72ba6eeca819f31f14","modified":1545993664816},{"_id":"public/programming/java/introduction/java-environment-mac/1-jdk-mac.png","hash":"4acf222e3a5d9728d358cd16a2f0d4300ae6700e","modified":1545993664816},{"_id":"source/_posts/java/interview/daily-interview-test.md","hash":"8d85de323604a6102ce340a761e1b9abb61c05ab","modified":1546439123258},{"_id":"public/archives/2019/01/index.html","hash":"4a366f14d61d5dd8f42b29d4eeba9ee23c26e2a6","modified":1546431800109},{"_id":"public/archives/2019/index.html","hash":"24ec9db0b3010584133a493d2e3d7184a81c0ec1","modified":1546431800110},{"_id":"public/tags/interview/index.html","hash":"9336e496b127b58e7f647beb028c958bb70b6a78","modified":1546431800110},{"_id":"public/programming/java/interview/daily-interview-test.html","hash":"c943be56c6d5322c2c650a10e2b8712a0514f3ac","modified":1546431800110}],"Category":[{"name":"Hexo","_id":"cjq7rm5ko0004wu9k3p01mvob"},{"name":"","_id":"cjq7rm5nd000iwu9kpejg8xaf"},{"name":"","_id":"cjq7rm5pq001ewu9k8jvdop1y"}],"Data":[{"_id":"menu","data":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}],"Page":[{"layout":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"layout: categories\ncomments: false\n---","date":"2019-01-02T14:25:23.484Z","updated":"2019-01-02T14:25:23.484Z","path":"categories/index.html","_id":"cjq7rm5ki0001wu9ko4rykmtg","title":"","content":"","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":""},{"layout":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"layout: tags\ncomments: false\n---","date":"2019-01-02T14:25:23.484Z","updated":"2019-01-02T14:25:23.484Z","path":"tags/index.html","_id":"cjq7rm5kl0003wu9k2vmvw0hx","title":"","content":"","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":""}],"Post":[{"home":true,"heroImage":"/hero.png","actionText":"","actionLink":"/guide/","footer":"MIT Licensed | Copyright  2018-present Frank","_content":"","source":"_posts/README.md","raw":"---\nhome: true\nheroImage: /hero.png\nactionText: \nactionLink: /guide/\nfooter: MIT Licensed | Copyright  2018-present Frank\n---\n","slug":"README","published":1,"date":"2019-01-02T14:25:23.178Z","updated":"2019-01-02T14:25:23.178Z","_id":"cjq7rm5kf0000wu9kcoed2to4","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":""},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\ncategories:\n- Hexo\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2019-01-02T14:25:23.198Z","updated":"2019-01-02T14:25:23.228Z","_id":"cjq7rm5kj0002wu9kz30r3imr","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"},{"sidebar":false,"_content":"\n# Java\n\n> \n\n## \n\nJavaJavaJavanio\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/introduction/java-started.md)\n2. [Java](../java/introduction/java-environment.md)\n3. [JavaWindows](../java/introduction/java-environment-windows.md)\n4. [JavaMac](../java/introduction/java-environment-mac.md)\n5. [Java IDEA](../java/introduction/java-ide.md)\n6. [Java](../java/introduction/java-introduction.md)\n7. [Java](../java/introduction/java-simple-example.md)\n8. [Javapackageimport](../java/introduction/java-package.md)\n9. [Java](../java/introduction/java-primer-conclusion.md)\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/basic/java-basic.md)\n2. [Java](../java/basic/java-simple-structure.md)\n3. [Java](../java/basic/java-variable.md)\n4. [Java](../java/basic/java-class.md)\n5. Java\n6. \n7. \n8. \n9. \n10. \n11. \n12. \n13. \n14. \n15. \n16. \n17. \n18. Object\n19. \n20. \n21. \n22. \n23. \n24. \n25. \n26. \n27. \n28. \n\n<LabelBlock>Java   </LabelBlock>\n\n1. Java\n2. \n3. \n4. \n5. \n6. \n7. \n8. JVM\n9. \n\n<LabelBlock>Java  </LabelBlock>\n\n[WeakHashMap](../java/collections/weakhashmap-code-detail.md)\n\n<LabelBlock>Java  </LabelBlock>\n\n1. [](../java/reference/four-kinds-of-reference.md)\n2. [](../java/reference/strong-reference.md)\n3. [](../java/reference/soft-reference.md)\n4. [](../java/reference/weak-reference.md)\n5. [](../java/reference/phantom-reference.md)\n6. [Reference](../java/reference/reference-code-detail.md)\n7. [ReferenceQueue](../java/reference/reference-queue-code-detail.md)\n8. [SoftReference](../java/reference/soft-reference-code-detail.md)\n9. [WeakReference](../java/reference/weak-reference-code-detail.md)\n10. [PhantomReference](../java/reference/phantom-reference-code-detail.md)\n11. [FinalReference  Finalizer ](../java/reference/final-reference-code-detail.md)\n12. [](../java/reference/reference-summary.md)\n","source":"_posts/java/README.md","raw":"---\nsidebar: false\n\n\n---\n\n# Java\n\n> \n\n## \n\nJavaJavaJavanio\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/introduction/java-started.md)\n2. [Java](../java/introduction/java-environment.md)\n3. [JavaWindows](../java/introduction/java-environment-windows.md)\n4. [JavaMac](../java/introduction/java-environment-mac.md)\n5. [Java IDEA](../java/introduction/java-ide.md)\n6. [Java](../java/introduction/java-introduction.md)\n7. [Java](../java/introduction/java-simple-example.md)\n8. [Javapackageimport](../java/introduction/java-package.md)\n9. [Java](../java/introduction/java-primer-conclusion.md)\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/basic/java-basic.md)\n2. [Java](../java/basic/java-simple-structure.md)\n3. [Java](../java/basic/java-variable.md)\n4. [Java](../java/basic/java-class.md)\n5. Java\n6. \n7. \n8. \n9. \n10. \n11. \n12. \n13. \n14. \n15. \n16. \n17. \n18. Object\n19. \n20. \n21. \n22. \n23. \n24. \n25. \n26. \n27. \n28. \n\n<LabelBlock>Java   </LabelBlock>\n\n1. Java\n2. \n3. \n4. \n5. \n6. \n7. \n8. JVM\n9. \n\n<LabelBlock>Java  </LabelBlock>\n\n[WeakHashMap](../java/collections/weakhashmap-code-detail.md)\n\n<LabelBlock>Java  </LabelBlock>\n\n1. [](../java/reference/four-kinds-of-reference.md)\n2. [](../java/reference/strong-reference.md)\n3. [](../java/reference/soft-reference.md)\n4. [](../java/reference/weak-reference.md)\n5. [](../java/reference/phantom-reference.md)\n6. [Reference](../java/reference/reference-code-detail.md)\n7. [ReferenceQueue](../java/reference/reference-queue-code-detail.md)\n8. [SoftReference](../java/reference/soft-reference-code-detail.md)\n9. [WeakReference](../java/reference/weak-reference-code-detail.md)\n10. [PhantomReference](../java/reference/phantom-reference-code-detail.md)\n11. [FinalReference  Finalizer ](../java/reference/final-reference-code-detail.md)\n12. [](../java/reference/reference-summary.md)\n","slug":"java/README","published":1,"date":"2019-01-02T14:25:23.228Z","updated":"2019-01-02T14:25:23.238Z","_id":"cjq7rm5mr0006wu9kzc77lhu6","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h1><blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJavaJavanio</p>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/introduction/java-started.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment-windows.md\">JavaWindows</a></li>\n<li><a href=\"../java/introduction/java-environment-mac.md\">JavaMac</a></li>\n<li><a href=\"../java/introduction/java-ide.md\">Java IDEA</a></li>\n<li><a href=\"../java/introduction/java-introduction.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-simple-example.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-package.md\">Javapackageimport</a></li>\n<li><a href=\"../java/introduction/java-primer-conclusion.md\">Java</a></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/basic/java-basic.md\">Java</a></li>\n<li><a href=\"../java/basic/java-simple-structure.md\">Java</a></li>\n<li><a href=\"../java/basic/java-variable.md\">Java</a></li>\n<li><a href=\"../java/basic/java-class.md\">Java</a></li>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>Object</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li></li>\n</ol>\n<labelblock>Java  </labelblock>\n\n<p><a href=\"../java/collections/weakhashmap-code-detail.md\">WeakHashMap</a></p>\n<labelblock>Java  </labelblock>\n\n<ol>\n<li><a href=\"../java/reference/four-kinds-of-reference.md\"></a></li>\n<li><a href=\"../java/reference/strong-reference.md\"></a></li>\n<li><a href=\"../java/reference/soft-reference.md\"></a></li>\n<li><a href=\"../java/reference/weak-reference.md\"></a></li>\n<li><a href=\"../java/reference/phantom-reference.md\"></a></li>\n<li><a href=\"../java/reference/reference-code-detail.md\">Reference</a></li>\n<li><a href=\"../java/reference/reference-queue-code-detail.md\">ReferenceQueue</a></li>\n<li><a href=\"../java/reference/soft-reference-code-detail.md\">SoftReference</a></li>\n<li><a href=\"../java/reference/weak-reference-code-detail.md\">WeakReference</a></li>\n<li><a href=\"../java/reference/phantom-reference-code-detail.md\">PhantomReference</a></li>\n<li><a href=\"../java/reference/final-reference-code-detail.md\">FinalReference  Finalizer </a></li>\n<li><a href=\"../java/reference/reference-summary.md\"></a></li>\n</ol>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h1><blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJavaJavanio</p>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/introduction/java-started.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment-windows.md\">JavaWindows</a></li>\n<li><a href=\"../java/introduction/java-environment-mac.md\">JavaMac</a></li>\n<li><a href=\"../java/introduction/java-ide.md\">Java IDEA</a></li>\n<li><a href=\"../java/introduction/java-introduction.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-simple-example.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-package.md\">Javapackageimport</a></li>\n<li><a href=\"../java/introduction/java-primer-conclusion.md\">Java</a></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/basic/java-basic.md\">Java</a></li>\n<li><a href=\"../java/basic/java-simple-structure.md\">Java</a></li>\n<li><a href=\"../java/basic/java-variable.md\">Java</a></li>\n<li><a href=\"../java/basic/java-class.md\">Java</a></li>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>Object</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li></li>\n</ol>\n<labelblock>Java  </labelblock>\n\n<p><a href=\"../java/collections/weakhashmap-code-detail.md\">WeakHashMap</a></p>\n<labelblock>Java  </labelblock>\n\n<ol>\n<li><a href=\"../java/reference/four-kinds-of-reference.md\"></a></li>\n<li><a href=\"../java/reference/strong-reference.md\"></a></li>\n<li><a href=\"../java/reference/soft-reference.md\"></a></li>\n<li><a href=\"../java/reference/weak-reference.md\"></a></li>\n<li><a href=\"../java/reference/phantom-reference.md\"></a></li>\n<li><a href=\"../java/reference/reference-code-detail.md\">Reference</a></li>\n<li><a href=\"../java/reference/reference-queue-code-detail.md\">ReferenceQueue</a></li>\n<li><a href=\"../java/reference/soft-reference-code-detail.md\">SoftReference</a></li>\n<li><a href=\"../java/reference/weak-reference-code-detail.md\">WeakReference</a></li>\n<li><a href=\"../java/reference/phantom-reference-code-detail.md\">PhantomReference</a></li>\n<li><a href=\"../java/reference/final-reference-code-detail.md\">FinalReference  Finalizer </a></li>\n<li><a href=\"../java/reference/reference-summary.md\"></a></li>\n</ol>\n"},{"sidebar":false,"_content":"\n# \n\n::: tip \n\n:::\n\n## \n\nwiki[vuepress](https://vuepress.vuejs.org/):stuck_out_tongue_closed_eyes:\n\nwikiwikimarkdownTyporamacwindows\n\n<img src=\"./8100.png\"/>\n\n---\n\n## \n\n+ [Java](../java/README.md)\n+  [LeetCode](../leetcode/README.md)\n\n## \n\n+  [](../reading-notes/README.md)\n+  [](../life-thinking/README.md)\n\n\n\n----\n\n\n\n","source":"_posts/guide/README.md","raw":"---\nsidebar: false\n\n\n---\n\n# \n\n::: tip \n\n:::\n\n## \n\nwiki[vuepress](https://vuepress.vuejs.org/):stuck_out_tongue_closed_eyes:\n\nwikiwikimarkdownTyporamacwindows\n\n<img src=\"./8100.png\"/>\n\n---\n\n## \n\n+ [Java](../java/README.md)\n+  [LeetCode](../leetcode/README.md)\n\n## \n\n+  [](../reading-notes/README.md)\n+  [](../life-thinking/README.md)\n\n\n\n----\n\n\n\n","slug":"guide/README","published":1,"date":"2019-01-02T14:25:23.188Z","updated":"2019-01-02T14:25:23.198Z","_id":"cjq7rm5mr0007wu9kgbm6ps73","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>::: tip <br><br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>wiki<a href=\"https://vuepress.vuejs.org/\" target=\"_blank\" rel=\"noopener\">vuepress</a>:stuck_out_tongue_closed_eyes:</p>\n<p>wikiwikimarkdownTyporamacwindows</p>\n<p><img src=\"./8100.png\"></p>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"../java/README.md\">Java</a></li>\n<li><a href=\"../leetcode/README.md\">LeetCode</a></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"../reading-notes/README.md\"></a></li>\n<li><a href=\"../life-thinking/README.md\"></a></li>\n</ul>\n<hr>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>::: tip <br><br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>wiki<a href=\"https://vuepress.vuejs.org/\" target=\"_blank\" rel=\"noopener\">vuepress</a>:stuck_out_tongue_closed_eyes:</p>\n<p>wikiwikimarkdownTyporamacwindows</p>\n<p><img src=\"./8100.png\"></p>\n<hr>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"../java/README.md\">Java</a></li>\n<li><a href=\"../leetcode/README.md\">LeetCode</a></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"../reading-notes/README.md\"></a></li>\n<li><a href=\"../life-thinking/README.md\"></a></li>\n</ul>\n<hr>\n"},{"_content":"## <CustomHeader>Java</CustomHeader>\n\n\n\n::: tip \nJavaJava\n:::\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/introduction/java-started.md)\n2. [Java](../java/introduction/java-environment.md)\n3. [JavaWindows](../java/introduction/java-environment-windows.md)\n4. [JavaMac](../java/introduction/java-environment-mac.md)\n5. [Java IDEA](../java/introduction/java-ide.md)\n6. [Java](../java/introduction/java-introduction.md)\n7. [Java](../java/introduction/java-simple-example.md)\n8. [Javapackageimport](../java/introduction/java-package.md)\n9. [Java](../java/introduction/java-primer-conclusion.md)\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/basic/java-basic.md)\n2. [Java](../java/basic/java-simple-structure.md)\n3. [Java](../java/basic/java-variable.md)\n4. [Java](../java/basic/java-class.md)\n5. Java\n6. \n7. \n8. \n9. \n10. \n11. \n12. \n13. \n14. \n15. \n16. \n17. \n18. Object\n19. \n20. \n21. \n22. \n23. \n24. \n25. \n26. \n27. \n28. \n\n<LabelBlock>Java   </LabelBlock>\n\n1. Java\n2. \n3. \n4. \n5. \n6. \n7. \n8. JVM\n9. \n\n<LabelBlock>Java  </LabelBlock>\n\n[WeakHashMap](../java/collections/weakhashmap-code-detail.md)\n\n\n\n<LabelBlock>Java  </LabelBlock>\n\n[](../java/reference/four-kinds-of-reference.md)\n\n\n\n<LabelBlock>Java  </LabelBlock>\n\n\n\n<LabelBlock>Java  </LabelBlock>\n\n\n\n## <CustomHeader>Java Web </CustomHeader>\n\n::: tip \nJava Web\n:::\n\n<LabelBlock>Java EE  </LabelBlock>\n\n\n\n<LabelBlock>Spring  </LabelBlock>\n\n\n\n<LabelBlock>Spring Boot  </LabelBlock>\n\n\n\n<LabelBlock>Spring  Security</LabelBlock>\n\n\n\n<LabelBlock>Spring  Webflux</LabelBlock>\n\n\n\n<LabelBlock>Mybatis  </LabelBlock>\n\n\n\n<LabelBlock>Hibernate  </LabelBlock>\n\n\n\n<LabelBlock>Spring  Data JPA</LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n::: tip \n\n:::\n\n<LabelBlock>Domain-Driven-Design </LabelBlock>\n\n1. \n\n<LabelBlock> </LabelBlock>\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>Netty  </LabelBlock>\n\n\n\n<LabelBlock>Tomcat  </LabelBlock>\n\n\n\n<LabelBlock>Jetty </LabelBlock>\n\n\n\n<LabelBlock>Nginx </LabelBlock>\n\n\n\n## <CustomHeader>RPC </CustomHeader>\n\n\n\n<LabelBlock>Dubbo  </LabelBlock>\n\n\n\n<LabelBlock>Thrift  </LabelBlock>\n\n\n\n<LabelBlock>GRPC  </LabelBlock>\n\n\n\n<LabelBlock>SOFARPC  </LabelBlock>\n\n\n\n<LabelBlock>Motan  </LabelBlock>\n\n\n\n<LabelBlock>Ribbon  </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>Kafka  </LabelBlock>\n\n\n\n<LabelBlock>RocketMQ  </LabelBlock>\n\n\n\n<LabelBlock>RabbitMQ  </LabelBlock>\n\n\n\n<LabelBlock>ActiveMQ  </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>zookeeper  </LabelBlock>\n\n\n\n<LabelBlock>  </LabelBlock>\n\n\n\n<LabelBlock>  </LabelBlock>\n\n\n\n<LabelBlock>MyCat  </LabelBlock>\n\n\n\n<LabelBlock>Sharding JDBC  </LabelBlock>\n\n\n\n<LabelBlock>Sharding Sphere  </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>SkyWalking  </LabelBlock>\n\n\n\n<LabelBlock>Zipkin  </LabelBlock>\n\n\n\n<LabelBlock>Pinpoint </LabelBlock>\n\n\n\n<LabelBlock>CAT </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>Apollo  </LabelBlock>\n\n\n\n<LabelBlock>Disconf  </LabelBlock>\n\n\n\n<LabelBlock>Spring Cloud Config </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>Elastic Job Lite  </LabelBlock>\n\n\n\n<LabelBlock>Elastic Job Cloud  </LabelBlock>\n\n\n\n<LabelBlock>Quartz  </LabelBlock>\n\n\n\n<LabelBlock>XXL-Job  </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>Redis  </LabelBlock>\n\n\n\n<LabelBlock>Mysql  </LabelBlock>\n\n\n\n<LabelBlock>MongoDB  </LabelBlock>\n\n\n\n<LabelBlock>Memcached  </LabelBlock>\n\n\n\n<LabelBlock>Neo4J  </LabelBlock>\n\n\n\n<LabelBlock>TiDB  </LabelBlock>\n\n\n\n<LabelBlock>HikariCP  </LabelBlock>\n\n\n\n<LabelBlock>Druid  </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>  </LabelBlock>\n\n\n\n<LabelBlock>  </LabelBlock>\n\n\n\n<LabelBlock>Leecode  </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>Dubbo  </LabelBlock>\n\n\n\n<LabelBlock>Spring Cloud </LabelBlock>\n\n\n\n## <CustomHeader>Devops</CustomHeader>\n\n\n\n<LabelBlock>Linux </LabelBlock>\n\n\n\n<LabelBlock>Nginx </LabelBlock>\n\n\n\n<LabelBlock>Docker </LabelBlock>\n\n\n\n<LabelBlock>Swarm </LabelBlock>\n\n\n\n<LabelBlock>kubernetes </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>Jenkins </LabelBlock>\n\n\n\n<LabelBlock>TeamCity </LabelBlock>\n\n\n\n<LabelBlock> </LabelBlock>\n\n\n\n## <CustomHeader>ELK</CustomHeader>\n\n\n\n<LabelBlock>Lucene </LabelBlock>\n\n\n\n<LabelBlock>ElasticSearch </LabelBlock>\n\n\n\n<LabelBlock>Logstash </LabelBlock>\n\n\n\n<LabelBlock>Kibana </LabelBlock>\n\n<LabelBlock>Solr </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>python  </LabelBlock>\n\n\n\n<LabelBlock>R </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>Hadoop </LabelBlock>\n\n\n\n<LabelBlock>HBase  </LabelBlock>\n\n\n\n<LabelBlock>Hive  </LabelBlock>\n\n\n\n<LabelBlock>Spark  </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>Spark Streaming </LabelBlock>\n\n\n\n<LabelBlock>Flink </LabelBlock>\n\n\n\n<LabelBlock>Storming </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>UML</LabelBlock>\n\n\n\n<img src=\"8101.png\"/>\n\nQQ529253292","source":"_posts/guide/background-skill.md","raw":"## <CustomHeader>Java</CustomHeader>\n\n\n\n::: tip \nJavaJava\n:::\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/introduction/java-started.md)\n2. [Java](../java/introduction/java-environment.md)\n3. [JavaWindows](../java/introduction/java-environment-windows.md)\n4. [JavaMac](../java/introduction/java-environment-mac.md)\n5. [Java IDEA](../java/introduction/java-ide.md)\n6. [Java](../java/introduction/java-introduction.md)\n7. [Java](../java/introduction/java-simple-example.md)\n8. [Javapackageimport](../java/introduction/java-package.md)\n9. [Java](../java/introduction/java-primer-conclusion.md)\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/basic/java-basic.md)\n2. [Java](../java/basic/java-simple-structure.md)\n3. [Java](../java/basic/java-variable.md)\n4. [Java](../java/basic/java-class.md)\n5. Java\n6. \n7. \n8. \n9. \n10. \n11. \n12. \n13. \n14. \n15. \n16. \n17. \n18. Object\n19. \n20. \n21. \n22. \n23. \n24. \n25. \n26. \n27. \n28. \n\n<LabelBlock>Java   </LabelBlock>\n\n1. Java\n2. \n3. \n4. \n5. \n6. \n7. \n8. JVM\n9. \n\n<LabelBlock>Java  </LabelBlock>\n\n[WeakHashMap](../java/collections/weakhashmap-code-detail.md)\n\n\n\n<LabelBlock>Java  </LabelBlock>\n\n[](../java/reference/four-kinds-of-reference.md)\n\n\n\n<LabelBlock>Java  </LabelBlock>\n\n\n\n<LabelBlock>Java  </LabelBlock>\n\n\n\n## <CustomHeader>Java Web </CustomHeader>\n\n::: tip \nJava Web\n:::\n\n<LabelBlock>Java EE  </LabelBlock>\n\n\n\n<LabelBlock>Spring  </LabelBlock>\n\n\n\n<LabelBlock>Spring Boot  </LabelBlock>\n\n\n\n<LabelBlock>Spring  Security</LabelBlock>\n\n\n\n<LabelBlock>Spring  Webflux</LabelBlock>\n\n\n\n<LabelBlock>Mybatis  </LabelBlock>\n\n\n\n<LabelBlock>Hibernate  </LabelBlock>\n\n\n\n<LabelBlock>Spring  Data JPA</LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n::: tip \n\n:::\n\n<LabelBlock>Domain-Driven-Design </LabelBlock>\n\n1. \n\n<LabelBlock> </LabelBlock>\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>Netty  </LabelBlock>\n\n\n\n<LabelBlock>Tomcat  </LabelBlock>\n\n\n\n<LabelBlock>Jetty </LabelBlock>\n\n\n\n<LabelBlock>Nginx </LabelBlock>\n\n\n\n## <CustomHeader>RPC </CustomHeader>\n\n\n\n<LabelBlock>Dubbo  </LabelBlock>\n\n\n\n<LabelBlock>Thrift  </LabelBlock>\n\n\n\n<LabelBlock>GRPC  </LabelBlock>\n\n\n\n<LabelBlock>SOFARPC  </LabelBlock>\n\n\n\n<LabelBlock>Motan  </LabelBlock>\n\n\n\n<LabelBlock>Ribbon  </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>Kafka  </LabelBlock>\n\n\n\n<LabelBlock>RocketMQ  </LabelBlock>\n\n\n\n<LabelBlock>RabbitMQ  </LabelBlock>\n\n\n\n<LabelBlock>ActiveMQ  </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>zookeeper  </LabelBlock>\n\n\n\n<LabelBlock>  </LabelBlock>\n\n\n\n<LabelBlock>  </LabelBlock>\n\n\n\n<LabelBlock>MyCat  </LabelBlock>\n\n\n\n<LabelBlock>Sharding JDBC  </LabelBlock>\n\n\n\n<LabelBlock>Sharding Sphere  </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>SkyWalking  </LabelBlock>\n\n\n\n<LabelBlock>Zipkin  </LabelBlock>\n\n\n\n<LabelBlock>Pinpoint </LabelBlock>\n\n\n\n<LabelBlock>CAT </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>Apollo  </LabelBlock>\n\n\n\n<LabelBlock>Disconf  </LabelBlock>\n\n\n\n<LabelBlock>Spring Cloud Config </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>Elastic Job Lite  </LabelBlock>\n\n\n\n<LabelBlock>Elastic Job Cloud  </LabelBlock>\n\n\n\n<LabelBlock>Quartz  </LabelBlock>\n\n\n\n<LabelBlock>XXL-Job  </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>Redis  </LabelBlock>\n\n\n\n<LabelBlock>Mysql  </LabelBlock>\n\n\n\n<LabelBlock>MongoDB  </LabelBlock>\n\n\n\n<LabelBlock>Memcached  </LabelBlock>\n\n\n\n<LabelBlock>Neo4J  </LabelBlock>\n\n\n\n<LabelBlock>TiDB  </LabelBlock>\n\n\n\n<LabelBlock>HikariCP  </LabelBlock>\n\n\n\n<LabelBlock>Druid  </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>  </LabelBlock>\n\n\n\n<LabelBlock>  </LabelBlock>\n\n\n\n<LabelBlock>Leecode  </LabelBlock>\n\n\n\n## <CustomHeader> </CustomHeader>\n\n\n\n<LabelBlock>Dubbo  </LabelBlock>\n\n\n\n<LabelBlock>Spring Cloud </LabelBlock>\n\n\n\n## <CustomHeader>Devops</CustomHeader>\n\n\n\n<LabelBlock>Linux </LabelBlock>\n\n\n\n<LabelBlock>Nginx </LabelBlock>\n\n\n\n<LabelBlock>Docker </LabelBlock>\n\n\n\n<LabelBlock>Swarm </LabelBlock>\n\n\n\n<LabelBlock>kubernetes </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>Jenkins </LabelBlock>\n\n\n\n<LabelBlock>TeamCity </LabelBlock>\n\n\n\n<LabelBlock> </LabelBlock>\n\n\n\n## <CustomHeader>ELK</CustomHeader>\n\n\n\n<LabelBlock>Lucene </LabelBlock>\n\n\n\n<LabelBlock>ElasticSearch </LabelBlock>\n\n\n\n<LabelBlock>Logstash </LabelBlock>\n\n\n\n<LabelBlock>Kibana </LabelBlock>\n\n<LabelBlock>Solr </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>python  </LabelBlock>\n\n\n\n<LabelBlock>R </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>Hadoop </LabelBlock>\n\n\n\n<LabelBlock>HBase  </LabelBlock>\n\n\n\n<LabelBlock>Hive  </LabelBlock>\n\n\n\n<LabelBlock>Spark  </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>Spark Streaming </LabelBlock>\n\n\n\n<LabelBlock>Flink </LabelBlock>\n\n\n\n<LabelBlock>Storming </LabelBlock>\n\n\n\n## <CustomHeader></CustomHeader>\n\n\n\n<LabelBlock>UML</LabelBlock>\n\n\n\n<img src=\"8101.png\"/>\n\nQQ529253292","slug":"guide/background-skill","published":1,"date":"2019-01-02T14:25:23.198Z","updated":"2019-01-02T14:25:23.198Z","_id":"cjq7rm5ms0008wu9k3w80ubd4","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a><customheader>Java</customheader></h2><p>::: tip <br>JavaJava<br>:::</p>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/introduction/java-started.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment-windows.md\">JavaWindows</a></li>\n<li><a href=\"../java/introduction/java-environment-mac.md\">JavaMac</a></li>\n<li><a href=\"../java/introduction/java-ide.md\">Java IDEA</a></li>\n<li><a href=\"../java/introduction/java-introduction.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-simple-example.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-package.md\">Javapackageimport</a></li>\n<li><a href=\"../java/introduction/java-primer-conclusion.md\">Java</a></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/basic/java-basic.md\">Java</a></li>\n<li><a href=\"../java/basic/java-simple-structure.md\">Java</a></li>\n<li><a href=\"../java/basic/java-variable.md\">Java</a></li>\n<li><a href=\"../java/basic/java-class.md\">Java</a></li>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>Object</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li></li>\n</ol>\n<labelblock>Java  </labelblock>\n\n<p><a href=\"../java/collections/weakhashmap-code-detail.md\">WeakHashMap</a></p>\n<labelblock>Java  </labelblock>\n\n<p><a href=\"../java/reference/four-kinds-of-reference.md\"></a></p>\n<labelblock>Java  </labelblock>\n\n\n\n<labelblock>Java  </labelblock>\n\n\n\n<h2 id=\"Java-Web-\"><a href=\"#Java-Web-\" class=\"headerlink\" title=\"Java Web \"></a><customheader>Java Web </customheader></h2><p>::: tip <br>Java Web<br>:::</p>\n<labelblock>Java EE  </labelblock>\n\n\n\n<labelblock>Spring  </labelblock>\n\n\n\n<labelblock>Spring Boot  </labelblock>\n\n\n\n<labelblock>Spring  Security</labelblock>\n\n\n\n<labelblock>Spring  Webflux</labelblock>\n\n\n\n<labelblock>Mybatis  </labelblock>\n\n\n\n<labelblock>Hibernate  </labelblock>\n\n\n\n<labelblock>Spring  Data JPA</labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><p>::: tip <br><br>:::</p>\n<labelblock>Domain-Driven-Design </labelblock>\n\n<ol>\n<li></li>\n</ol>\n<labelblock> </labelblock>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>Netty  </labelblock>\n\n\n\n<labelblock>Tomcat  </labelblock>\n\n\n\n<labelblock>Jetty </labelblock>\n\n\n\n<labelblock>Nginx </labelblock>\n\n\n\n<h2 id=\"RPC\"><a href=\"#RPC\" class=\"headerlink\" title=\"RPC \"></a><customheader>RPC </customheader></h2><labelblock>Dubbo  </labelblock>\n\n\n\n<labelblock>Thrift  </labelblock>\n\n\n\n<labelblock>GRPC  </labelblock>\n\n\n\n<labelblock>SOFARPC  </labelblock>\n\n\n\n<labelblock>Motan  </labelblock>\n\n\n\n<labelblock>Ribbon  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>Kafka  </labelblock>\n\n\n\n<labelblock>RocketMQ  </labelblock>\n\n\n\n<labelblock>RabbitMQ  </labelblock>\n\n\n\n<labelblock>ActiveMQ  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>zookeeper  </labelblock>\n\n\n\n<labelblock>  </labelblock>\n\n\n\n<labelblock>  </labelblock>\n\n\n\n<labelblock>MyCat  </labelblock>\n\n\n\n<labelblock>Sharding JDBC  </labelblock>\n\n\n\n<labelblock>Sharding Sphere  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>SkyWalking  </labelblock>\n\n\n\n<labelblock>Zipkin  </labelblock>\n\n\n\n<labelblock>Pinpoint </labelblock>\n\n\n\n<labelblock>CAT </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>Apollo  </labelblock>\n\n\n\n<labelblock>Disconf  </labelblock>\n\n\n\n<labelblock>Spring Cloud Config </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>Elastic Job Lite  </labelblock>\n\n\n\n<labelblock>Elastic Job Cloud  </labelblock>\n\n\n\n<labelblock>Quartz  </labelblock>\n\n\n\n<labelblock>XXL-Job  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>Redis  </labelblock>\n\n\n\n<labelblock>Mysql  </labelblock>\n\n\n\n<labelblock>MongoDB  </labelblock>\n\n\n\n<labelblock>Memcached  </labelblock>\n\n\n\n<labelblock>Neo4J  </labelblock>\n\n\n\n<labelblock>TiDB  </labelblock>\n\n\n\n<labelblock>HikariCP  </labelblock>\n\n\n\n<labelblock>Druid  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>  </labelblock>\n\n\n\n<labelblock>  </labelblock>\n\n\n\n<labelblock>Leecode  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>Dubbo  </labelblock>\n\n\n\n<labelblock>Spring Cloud </labelblock>\n\n\n\n<h2 id=\"Devops\"><a href=\"#Devops\" class=\"headerlink\" title=\"Devops\"></a><customheader>Devops</customheader></h2><labelblock>Linux </labelblock>\n\n\n\n<labelblock>Nginx </labelblock>\n\n\n\n<labelblock>Docker </labelblock>\n\n\n\n<labelblock>Swarm </labelblock>\n\n\n\n<labelblock>kubernetes </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>Jenkins </labelblock>\n\n\n\n<labelblock>TeamCity </labelblock>\n\n\n\n<labelblock> </labelblock>\n\n\n\n<h2 id=\"ELK\"><a href=\"#ELK\" class=\"headerlink\" title=\"ELK\"></a><customheader>ELK</customheader></h2><labelblock>Lucene </labelblock>\n\n\n\n<labelblock>ElasticSearch </labelblock>\n\n\n\n<labelblock>Logstash </labelblock>\n\n\n\n<labelblock>Kibana </labelblock>\n\n<labelblock>Solr </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>python  </labelblock>\n\n\n\n<labelblock>R </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>Hadoop </labelblock>\n\n\n\n<labelblock>HBase  </labelblock>\n\n\n\n<labelblock>Hive  </labelblock>\n\n\n\n<labelblock>Spark  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>Spark Streaming </labelblock>\n\n\n\n<labelblock>Flink </labelblock>\n\n\n\n<labelblock>Storming </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>UML</labelblock>\n\n\n\n<p><img src=\"8101.png\"></p>\n<p>QQ529253292</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a><customheader>Java</customheader></h2><p>::: tip <br>JavaJava<br>:::</p>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/introduction/java-started.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment-windows.md\">JavaWindows</a></li>\n<li><a href=\"../java/introduction/java-environment-mac.md\">JavaMac</a></li>\n<li><a href=\"../java/introduction/java-ide.md\">Java IDEA</a></li>\n<li><a href=\"../java/introduction/java-introduction.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-simple-example.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-package.md\">Javapackageimport</a></li>\n<li><a href=\"../java/introduction/java-primer-conclusion.md\">Java</a></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/basic/java-basic.md\">Java</a></li>\n<li><a href=\"../java/basic/java-simple-structure.md\">Java</a></li>\n<li><a href=\"../java/basic/java-variable.md\">Java</a></li>\n<li><a href=\"../java/basic/java-class.md\">Java</a></li>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>Object</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li></li>\n</ol>\n<labelblock>Java  </labelblock>\n\n<p><a href=\"../java/collections/weakhashmap-code-detail.md\">WeakHashMap</a></p>\n<labelblock>Java  </labelblock>\n\n<p><a href=\"../java/reference/four-kinds-of-reference.md\"></a></p>\n<labelblock>Java  </labelblock>\n\n\n\n<labelblock>Java  </labelblock>\n\n\n\n<h2 id=\"Java-Web-\"><a href=\"#Java-Web-\" class=\"headerlink\" title=\"Java Web \"></a><customheader>Java Web </customheader></h2><p>::: tip <br>Java Web<br>:::</p>\n<labelblock>Java EE  </labelblock>\n\n\n\n<labelblock>Spring  </labelblock>\n\n\n\n<labelblock>Spring Boot  </labelblock>\n\n\n\n<labelblock>Spring  Security</labelblock>\n\n\n\n<labelblock>Spring  Webflux</labelblock>\n\n\n\n<labelblock>Mybatis  </labelblock>\n\n\n\n<labelblock>Hibernate  </labelblock>\n\n\n\n<labelblock>Spring  Data JPA</labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><p>::: tip <br><br>:::</p>\n<labelblock>Domain-Driven-Design </labelblock>\n\n<ol>\n<li></li>\n</ol>\n<labelblock> </labelblock>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>Netty  </labelblock>\n\n\n\n<labelblock>Tomcat  </labelblock>\n\n\n\n<labelblock>Jetty </labelblock>\n\n\n\n<labelblock>Nginx </labelblock>\n\n\n\n<h2 id=\"RPC\"><a href=\"#RPC\" class=\"headerlink\" title=\"RPC \"></a><customheader>RPC </customheader></h2><labelblock>Dubbo  </labelblock>\n\n\n\n<labelblock>Thrift  </labelblock>\n\n\n\n<labelblock>GRPC  </labelblock>\n\n\n\n<labelblock>SOFARPC  </labelblock>\n\n\n\n<labelblock>Motan  </labelblock>\n\n\n\n<labelblock>Ribbon  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>Kafka  </labelblock>\n\n\n\n<labelblock>RocketMQ  </labelblock>\n\n\n\n<labelblock>RabbitMQ  </labelblock>\n\n\n\n<labelblock>ActiveMQ  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>zookeeper  </labelblock>\n\n\n\n<labelblock>  </labelblock>\n\n\n\n<labelblock>  </labelblock>\n\n\n\n<labelblock>MyCat  </labelblock>\n\n\n\n<labelblock>Sharding JDBC  </labelblock>\n\n\n\n<labelblock>Sharding Sphere  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>SkyWalking  </labelblock>\n\n\n\n<labelblock>Zipkin  </labelblock>\n\n\n\n<labelblock>Pinpoint </labelblock>\n\n\n\n<labelblock>CAT </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>Apollo  </labelblock>\n\n\n\n<labelblock>Disconf  </labelblock>\n\n\n\n<labelblock>Spring Cloud Config </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>Elastic Job Lite  </labelblock>\n\n\n\n<labelblock>Elastic Job Cloud  </labelblock>\n\n\n\n<labelblock>Quartz  </labelblock>\n\n\n\n<labelblock>XXL-Job  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>Redis  </labelblock>\n\n\n\n<labelblock>Mysql  </labelblock>\n\n\n\n<labelblock>MongoDB  </labelblock>\n\n\n\n<labelblock>Memcached  </labelblock>\n\n\n\n<labelblock>Neo4J  </labelblock>\n\n\n\n<labelblock>TiDB  </labelblock>\n\n\n\n<labelblock>HikariCP  </labelblock>\n\n\n\n<labelblock>Druid  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>  </labelblock>\n\n\n\n<labelblock>  </labelblock>\n\n\n\n<labelblock>Leecode  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\" \"></a><customheader> </customheader></h2><labelblock>Dubbo  </labelblock>\n\n\n\n<labelblock>Spring Cloud </labelblock>\n\n\n\n<h2 id=\"Devops\"><a href=\"#Devops\" class=\"headerlink\" title=\"Devops\"></a><customheader>Devops</customheader></h2><labelblock>Linux </labelblock>\n\n\n\n<labelblock>Nginx </labelblock>\n\n\n\n<labelblock>Docker </labelblock>\n\n\n\n<labelblock>Swarm </labelblock>\n\n\n\n<labelblock>kubernetes </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>Jenkins </labelblock>\n\n\n\n<labelblock>TeamCity </labelblock>\n\n\n\n<labelblock> </labelblock>\n\n\n\n<h2 id=\"ELK\"><a href=\"#ELK\" class=\"headerlink\" title=\"ELK\"></a><customheader>ELK</customheader></h2><labelblock>Lucene </labelblock>\n\n\n\n<labelblock>ElasticSearch </labelblock>\n\n\n\n<labelblock>Logstash </labelblock>\n\n\n\n<labelblock>Kibana </labelblock>\n\n<labelblock>Solr </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>python  </labelblock>\n\n\n\n<labelblock>R </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>Hadoop </labelblock>\n\n\n\n<labelblock>HBase  </labelblock>\n\n\n\n<labelblock>Hive  </labelblock>\n\n\n\n<labelblock>Spark  </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>Spark Streaming </labelblock>\n\n\n\n<labelblock>Flink </labelblock>\n\n\n\n<labelblock>Storming </labelblock>\n\n\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><customheader></customheader></h2><labelblock>UML</labelblock>\n\n\n\n<p><img src=\"8101.png\"></p>\n<p>QQ529253292</p>\n"},{"prev":"README","next":false,"_content":"\n# Design-Linked-List\n\n[LeetCode](https://leetcode.com/explore/learn/card/linked-list/209/singly-linked-list/1290/)\n\n## \n\nDesign your implementation of the linked list. You can choose to use the singly linked list or the doubly linked list. A node in a singly linked list should have two attributes: `val` and `next`. `val` is the value of the current node, and `next` is a pointer/reference to the next node. If you want to use the doubly linked list, you will need one more attribute `prev` to indicate the previous node in the linked list. Assume all nodes in the linked list are 0-indexed.\n\nImplement these functions in your linked list class:\n\n- get(index) : Get the value of the `index`-th node in the linked list. If the index is invalid, return `-1`.\n- addAtHead(val) : Add a node of value `val` before the first element of the linked list. After the insertion, the new node will be the first node of the linked list.\n- addAtTail(val) : Append a node of value `val` to the last element of the linked list.\n- addAtIndex(index, val) : Add a node of value `val` before the `index`-th node in the linked list. If `index` equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted.\n- deleteAtIndex(index) : Delete the `index`-th node in the linked list, if the index is valid.\n\n**Example:**\n\n```\nMyLinkedList linkedList = new MyLinkedList();\nlinkedList.addAtHead(1);\nlinkedList.addAtTail(3);\nlinkedList.addAtIndex(1, 2);  // linked list becomes 1->2->3\nlinkedList.get(1);            // returns 2\nlinkedList.deleteAtIndex(1);  // now the linked list is 1->3\nlinkedList.get(1);            // returns 3\n```\n\n**Note:**\n\n- All values will be in the range of `[1, 1000]`.\n- The number of operations will be in the range of `[1, 1000]`.\n- Please do not use the built-in LinkedList library.\n\n## ","source":"_posts/leetcode/Design-Linked-List.md","raw":"---\nprev: README\nnext: false\n---\n\n# Design-Linked-List\n\n[LeetCode](https://leetcode.com/explore/learn/card/linked-list/209/singly-linked-list/1290/)\n\n## \n\nDesign your implementation of the linked list. You can choose to use the singly linked list or the doubly linked list. A node in a singly linked list should have two attributes: `val` and `next`. `val` is the value of the current node, and `next` is a pointer/reference to the next node. If you want to use the doubly linked list, you will need one more attribute `prev` to indicate the previous node in the linked list. Assume all nodes in the linked list are 0-indexed.\n\nImplement these functions in your linked list class:\n\n- get(index) : Get the value of the `index`-th node in the linked list. If the index is invalid, return `-1`.\n- addAtHead(val) : Add a node of value `val` before the first element of the linked list. After the insertion, the new node will be the first node of the linked list.\n- addAtTail(val) : Append a node of value `val` to the last element of the linked list.\n- addAtIndex(index, val) : Add a node of value `val` before the `index`-th node in the linked list. If `index` equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted.\n- deleteAtIndex(index) : Delete the `index`-th node in the linked list, if the index is valid.\n\n**Example:**\n\n```\nMyLinkedList linkedList = new MyLinkedList();\nlinkedList.addAtHead(1);\nlinkedList.addAtTail(3);\nlinkedList.addAtIndex(1, 2);  // linked list becomes 1->2->3\nlinkedList.get(1);            // returns 2\nlinkedList.deleteAtIndex(1);  // now the linked list is 1->3\nlinkedList.get(1);            // returns 3\n```\n\n**Note:**\n\n- All values will be in the range of `[1, 1000]`.\n- The number of operations will be in the range of `[1, 1000]`.\n- Please do not use the built-in LinkedList library.\n\n## ","slug":"leetcode/Design-Linked-List","published":1,"date":"2019-01-02T14:25:23.473Z","updated":"2019-01-02T14:25:23.473Z","_id":"cjq7rm5mt0009wu9kiat2fw6m","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Design-Linked-List\"><a href=\"#Design-Linked-List\" class=\"headerlink\" title=\"Design-Linked-List\"></a>Design-Linked-List</h1><p><a href=\"https://leetcode.com/explore/learn/card/linked-list/209/singly-linked-list/1290/\" target=\"_blank\" rel=\"noopener\">LeetCode</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Design your implementation of the linked list. You can choose to use the singly linked list or the doubly linked list. A node in a singly linked list should have two attributes: <code>val</code> and <code>next</code>. <code>val</code> is the value of the current node, and <code>next</code> is a pointer/reference to the next node. If you want to use the doubly linked list, you will need one more attribute <code>prev</code> to indicate the previous node in the linked list. Assume all nodes in the linked list are 0-indexed.</p>\n<p>Implement these functions in your linked list class:</p>\n<ul>\n<li>get(index) : Get the value of the <code>index</code>-th node in the linked list. If the index is invalid, return <code>-1</code>.</li>\n<li>addAtHead(val) : Add a node of value <code>val</code> before the first element of the linked list. After the insertion, the new node will be the first node of the linked list.</li>\n<li>addAtTail(val) : Append a node of value <code>val</code> to the last element of the linked list.</li>\n<li>addAtIndex(index, val) : Add a node of value <code>val</code> before the <code>index</code>-th node in the linked list. If <code>index</code> equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted.</li>\n<li>deleteAtIndex(index) : Delete the <code>index</code>-th node in the linked list, if the index is valid.</li>\n</ul>\n<p><strong>Example:</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MyLinkedList linkedList = new MyLinkedList();</span><br><span class=\"line\">linkedList.addAtHead(1);</span><br><span class=\"line\">linkedList.addAtTail(3);</span><br><span class=\"line\">linkedList.addAtIndex(1, 2);  // linked list becomes 1-&gt;2-&gt;3</span><br><span class=\"line\">linkedList.get(1);            // returns 2</span><br><span class=\"line\">linkedList.deleteAtIndex(1);  // now the linked list is 1-&gt;3</span><br><span class=\"line\">linkedList.get(1);            // returns 3</span><br></pre></td></tr></table></figure>\n<p><strong>Note:</strong></p>\n<ul>\n<li>All values will be in the range of <code>[1, 1000]</code>.</li>\n<li>The number of operations will be in the range of <code>[1, 1000]</code>.</li>\n<li>Please do not use the built-in LinkedList library.</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"Design-Linked-List\"><a href=\"#Design-Linked-List\" class=\"headerlink\" title=\"Design-Linked-List\"></a>Design-Linked-List</h1><p><a href=\"https://leetcode.com/explore/learn/card/linked-list/209/singly-linked-list/1290/\" target=\"_blank\" rel=\"noopener\">LeetCode</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Design your implementation of the linked list. You can choose to use the singly linked list or the doubly linked list. A node in a singly linked list should have two attributes: <code>val</code> and <code>next</code>. <code>val</code> is the value of the current node, and <code>next</code> is a pointer/reference to the next node. If you want to use the doubly linked list, you will need one more attribute <code>prev</code> to indicate the previous node in the linked list. Assume all nodes in the linked list are 0-indexed.</p>\n<p>Implement these functions in your linked list class:</p>\n<ul>\n<li>get(index) : Get the value of the <code>index</code>-th node in the linked list. If the index is invalid, return <code>-1</code>.</li>\n<li>addAtHead(val) : Add a node of value <code>val</code> before the first element of the linked list. After the insertion, the new node will be the first node of the linked list.</li>\n<li>addAtTail(val) : Append a node of value <code>val</code> to the last element of the linked list.</li>\n<li>addAtIndex(index, val) : Add a node of value <code>val</code> before the <code>index</code>-th node in the linked list. If <code>index</code> equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted.</li>\n<li>deleteAtIndex(index) : Delete the <code>index</code>-th node in the linked list, if the index is valid.</li>\n</ul>\n<p><strong>Example:</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MyLinkedList linkedList = new MyLinkedList();</span><br><span class=\"line\">linkedList.addAtHead(1);</span><br><span class=\"line\">linkedList.addAtTail(3);</span><br><span class=\"line\">linkedList.addAtIndex(1, 2);  // linked list becomes 1-&gt;2-&gt;3</span><br><span class=\"line\">linkedList.get(1);            // returns 2</span><br><span class=\"line\">linkedList.deleteAtIndex(1);  // now the linked list is 1-&gt;3</span><br><span class=\"line\">linkedList.get(1);            // returns 3</span><br></pre></td></tr></table></figure>\n<p><strong>Note:</strong></p>\n<ul>\n<li>All values will be in the range of <code>[1, 1000]</code>.</li>\n<li>The number of operations will be in the range of <code>[1, 1000]</code>.</li>\n<li>Please do not use the built-in LinkedList library.</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>"},{"prev":false,"next":"Design-Linked-List","_content":"\n# LeetCode \n\nLeetCode\n\n## \n\n+ [Design-Linked-List()](./Design-Linked-List.md)\n\n","source":"_posts/leetcode/README.md","raw":"---\nprev: false\nnext: Design-Linked-List\n\n---\n\n# LeetCode \n\nLeetCode\n\n## \n\n+ [Design-Linked-List()](./Design-Linked-List.md)\n\n","slug":"leetcode/README","published":1,"date":"2019-01-02T14:25:23.474Z","updated":"2019-01-02T14:25:23.474Z","_id":"cjq7rm5n1000bwu9k9g6d7q6v","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"LeetCode-\"><a href=\"#LeetCode-\" class=\"headerlink\" title=\"LeetCode \"></a>LeetCode </h1><p>LeetCode</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"./Design-Linked-List.md\">Design-Linked-List()</a></li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"LeetCode-\"><a href=\"#LeetCode-\" class=\"headerlink\" title=\"LeetCode \"></a>LeetCode </h1><p>LeetCode</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"./Design-Linked-List.md\">Design-Linked-List()</a></li>\n</ul>\n"},{"sidebar":"auto","_content":"\n# CentOSJDK8 \n\n","source":"_posts/ops/centos-jdk8-installation.md","raw":"---\nsidebar: auto\n\n\n---\n\n# CentOSJDK8 \n\n","slug":"ops/centos-jdk8-installation","published":1,"date":"2019-01-02T14:25:23.477Z","updated":"2019-01-02T14:25:23.477Z","_id":"cjq7rm5n4000cwu9khwn6y3xt","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"CentOSJDK8\"><a href=\"#CentOSJDK8\" class=\"headerlink\" title=\"CentOSJDK8\"></a>CentOSJDK8</h1>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"CentOSJDK8\"><a href=\"#CentOSJDK8\" class=\"headerlink\" title=\"CentOSJDK8\"></a>CentOSJDK8</h1>"},{"sidebar":"auto","_content":"\n# Github webhookJenkins\n\n\n\n","source":"_posts/ops/jenkins-work-with-github-webhook.md","raw":"---\nsidebar: auto\n\n\n---\n\n# Github webhookJenkins\n\n\n\n","slug":"ops/jenkins-work-with-github-webhook","published":1,"date":"2019-01-02T14:25:23.479Z","updated":"2019-01-02T14:25:23.480Z","_id":"cjq7rm5n6000dwu9khy9w9fds","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Github-webhookJenkins\"><a href=\"#Github-webhookJenkins\" class=\"headerlink\" title=\"Github webhookJenkins\"></a>Github webhookJenkins</h1>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"Github-webhookJenkins\"><a href=\"#Github-webhookJenkins\" class=\"headerlink\" title=\"Github webhookJenkins\"></a>Github webhookJenkins</h1>"},{"_content":"# \n\n## \n\n``\n\nXX\n\n\n\n## \n\n1. [](.\\The-Power-of-Habit.md)\n2. \n\n## \n\n1. [Java](./Java-Multithread-Programming-Guide-In-Action.md)\n2. Java\n3. Java\n\n","source":"_posts/reading/README.md","raw":"# \n\n## \n\n``\n\nXX\n\n\n\n## \n\n1. [](.\\The-Power-of-Habit.md)\n2. \n\n## \n\n1. [Java](./Java-Multithread-Programming-Guide-In-Action.md)\n2. Java\n3. Java\n\n","slug":"reading/README","published":1,"date":"2019-01-02T14:25:23.481Z","updated":"2019-01-02T14:25:23.482Z","_id":"cjq7rm5n7000ewu9kmrilv409","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<p>XX</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\".\\The-Power-of-Habit.md\"></a></li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\"./Java-Multithread-Programming-Guide-In-Action.md\">Java</a></li>\n<li>Java</li>\n<li>Java</li>\n</ol>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<p>XX</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\".\\The-Power-of-Habit.md\"></a></li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\"./Java-Multithread-Programming-Guide-In-Action.md\">Java</a></li>\n<li>Java</li>\n<li>Java</li>\n</ol>\n"},{"sidebar":"auto","_content":"\n# centos7  vuepress\n\n> vuepressmdhtml VuePress  HTMLSEOCentOS7vuepress\n\nhttps://vuepress.vuejs.org/zh/  \n\nhttps://vuepress.vuejs.org/zh/guide/Vuepress\n\nhttps://github.com/vuejs/vuepress\n\n## nodejs\n\n``` bash\ncurl -sL https://rpm.nodesource.com/setup_8.x | sudo bash -\nyum install nodejs\n```\n\n## vuepress\n\n``` bash\nnpm install -g vuepress\n```\n\n## \n\n``` bash\nmkdir project\ncd project\nmkdir docs\n```\n\n## \n\n``` bash\nnpm init -y\nvim package.json\n```\n\n\n\n```javascript\n{\n    \"scripts\": {\n    \t\"docs:dev\": \"vuepress dev docs\",\n    \t\"docs:build\": \"vuepress build docs\"\n    }\n}\n```\n\n.vuepress\n\n``` bash\nmkdir .vuepress\ncd .vuepress\n```\n\nconfig.jsvuepress\n\n``` bash\nmkdir public\nvim config.js\n```\n\n\n\n``` bash\nmodule.exports = {\n\ttitle: 'wiki',\n\tdescription: '',\n\t// git https://mfrank2016.github.io/wikibook/ '/wikibook/'\n\tbase: '/wikibook/',\n\thost: '0.0.0.0',\n\t// \n\tport: 8081,\n\n\tthemeConfig: {\n\t\t//gitc \n    \trepo: 'https://github.com/MFrank2016/wikibook',\n    \t// \n   \t\tdocsDir: 'docs',\n    \t//  master\n    \tdocsBranch: 'master',\n    \t//  true false \n    \teditLinks: true,\n    \t//\n    \tnav: [\n      \t\t{ text: 'Home', link: '/' },\n      \t\t{ text: 'Guide', link: '/guide/' },\n      \t\t{ text: 'External', link: 'https://google.com' },\n      \t\t{ text: 'Languages',\n      \t\titems: [\n      \t\t{ text: 'Chinese', link: '/language/chinese' },\n      \t\t{ text: 'Japanese', link: '/language/japanese' }\n      \t\t]}],\n      \tsidebar: [{\n        \ttitle: 'Group 1',\n        \tcollapsable: false,\n        \tchildren: [\n          \t\t'/'\n        \t\t]\n      \t\t},\n      \t\t{\n        \ttitle: 'Group 2',\n        \tchildren: [\n            \t'/'\n        \t\t]\n      \t\t}\n    \t]\n  \t},  \n    //\n    search: true,\n    searchMaxSuggestions: 10,\n    lastUpdated: 'Last Updated', // string | boolean\n}\n```\n\n\n\n``` bash\nproject\n docs\n  README.md\n  .vuepress\n    config.js\n    public\n      hero.png\n  guide\n    README.md \n package.json\n```\n\n## \n\ndocsREADME.md\n\n```bash\n---\nhome: true\nheroImage: /hero.png\nactionText: \nactionLink: /guide/\nfooter: MIT Licensed | Copyright  2018-present Frank\n---\n```\n\nproject\n\n```bash\n#  http://localhost:8081 () \nvuepress dev\n\n# mdhtmldocs/.vuepress/dist\nvuepress build\n```\n\n## \n\n**docs/.vuepress/dist**ftpdocsnginxapache\n\n\n\n\n","source":"_posts/ops/deploy-vuepress-on-centos7.md","raw":"---\nsidebar: auto\n\n\n---\n\n# centos7  vuepress\n\n> vuepressmdhtml VuePress  HTMLSEOCentOS7vuepress\n\nhttps://vuepress.vuejs.org/zh/  \n\nhttps://vuepress.vuejs.org/zh/guide/Vuepress\n\nhttps://github.com/vuejs/vuepress\n\n## nodejs\n\n``` bash\ncurl -sL https://rpm.nodesource.com/setup_8.x | sudo bash -\nyum install nodejs\n```\n\n## vuepress\n\n``` bash\nnpm install -g vuepress\n```\n\n## \n\n``` bash\nmkdir project\ncd project\nmkdir docs\n```\n\n## \n\n``` bash\nnpm init -y\nvim package.json\n```\n\n\n\n```javascript\n{\n    \"scripts\": {\n    \t\"docs:dev\": \"vuepress dev docs\",\n    \t\"docs:build\": \"vuepress build docs\"\n    }\n}\n```\n\n.vuepress\n\n``` bash\nmkdir .vuepress\ncd .vuepress\n```\n\nconfig.jsvuepress\n\n``` bash\nmkdir public\nvim config.js\n```\n\n\n\n``` bash\nmodule.exports = {\n\ttitle: 'wiki',\n\tdescription: '',\n\t// git https://mfrank2016.github.io/wikibook/ '/wikibook/'\n\tbase: '/wikibook/',\n\thost: '0.0.0.0',\n\t// \n\tport: 8081,\n\n\tthemeConfig: {\n\t\t//gitc \n    \trepo: 'https://github.com/MFrank2016/wikibook',\n    \t// \n   \t\tdocsDir: 'docs',\n    \t//  master\n    \tdocsBranch: 'master',\n    \t//  true false \n    \teditLinks: true,\n    \t//\n    \tnav: [\n      \t\t{ text: 'Home', link: '/' },\n      \t\t{ text: 'Guide', link: '/guide/' },\n      \t\t{ text: 'External', link: 'https://google.com' },\n      \t\t{ text: 'Languages',\n      \t\titems: [\n      \t\t{ text: 'Chinese', link: '/language/chinese' },\n      \t\t{ text: 'Japanese', link: '/language/japanese' }\n      \t\t]}],\n      \tsidebar: [{\n        \ttitle: 'Group 1',\n        \tcollapsable: false,\n        \tchildren: [\n          \t\t'/'\n        \t\t]\n      \t\t},\n      \t\t{\n        \ttitle: 'Group 2',\n        \tchildren: [\n            \t'/'\n        \t\t]\n      \t\t}\n    \t]\n  \t},  \n    //\n    search: true,\n    searchMaxSuggestions: 10,\n    lastUpdated: 'Last Updated', // string | boolean\n}\n```\n\n\n\n``` bash\nproject\n docs\n  README.md\n  .vuepress\n    config.js\n    public\n      hero.png\n  guide\n    README.md \n package.json\n```\n\n## \n\ndocsREADME.md\n\n```bash\n---\nhome: true\nheroImage: /hero.png\nactionText: \nactionLink: /guide/\nfooter: MIT Licensed | Copyright  2018-present Frank\n---\n```\n\nproject\n\n```bash\n#  http://localhost:8081 () \nvuepress dev\n\n# mdhtmldocs/.vuepress/dist\nvuepress build\n```\n\n## \n\n**docs/.vuepress/dist**ftpdocsnginxapache\n\n\n\n\n","slug":"ops/deploy-vuepress-on-centos7","published":1,"date":"2019-01-02T14:25:23.478Z","updated":"2019-01-02T14:25:23.478Z","_id":"cjq7rm5n9000fwu9kex5oibvt","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"centos7--vuepress\"><a href=\"#centos7--vuepress\" class=\"headerlink\" title=\"centos7  vuepress\"></a>centos7  vuepress</h1><blockquote>\n<p>vuepressmdhtml VuePress  HTMLSEOCentOS7vuepress</p>\n</blockquote>\n<p><a href=\"https://vuepress.vuejs.org/zh/\" target=\"_blank\" rel=\"noopener\">https://vuepress.vuejs.org/zh/</a>  </p>\n<p><a href=\"https://vuepress.vuejs.org/zh/guide/Vuepress\" target=\"_blank\" rel=\"noopener\">https://vuepress.vuejs.org/zh/guide/Vuepress</a></p>\n<p><a href=\"https://github.com/vuejs/vuepress\" target=\"_blank\" rel=\"noopener\">https://github.com/vuejs/vuepress</a></p>\n<h2 id=\"nodejs\"><a href=\"#nodejs\" class=\"headerlink\" title=\"nodejs\"></a>nodejs</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sL https://rpm.nodesource.com/setup_8.x | sudo bash -</span><br><span class=\"line\">yum install nodejs</span><br></pre></td></tr></table></figure>\n<h2 id=\"vuepress\"><a href=\"#vuepress\" class=\"headerlink\" title=\"vuepress\"></a>vuepress</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g vuepress</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir project</span><br><span class=\"line\"><span class=\"built_in\">cd</span> project</span><br><span class=\"line\">mkdir docs</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init -y</span><br><span class=\"line\">vim package.json</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    \t<span class=\"string\">\"docs:dev\"</span>: <span class=\"string\">\"vuepress dev docs\"</span>,</span><br><span class=\"line\">    \t<span class=\"string\">\"docs:build\"</span>: <span class=\"string\">\"vuepress build docs\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>.vuepress</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir .vuepress</span><br><span class=\"line\"><span class=\"built_in\">cd</span> .vuepress</span><br></pre></td></tr></table></figure>\n<p>config.jsvuepress</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir public</span><br><span class=\"line\">vim config.js</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">\ttitle: <span class=\"string\">'wiki'</span>,</span><br><span class=\"line\">\tdescription: <span class=\"string\">''</span>,</span><br><span class=\"line\">\t// git https://mfrank2016.github.io/wikibook/ <span class=\"string\">'/wikibook/'</span></span><br><span class=\"line\">\tbase: <span class=\"string\">'/wikibook/'</span>,</span><br><span class=\"line\">\thost: <span class=\"string\">'0.0.0.0'</span>,</span><br><span class=\"line\">\t// </span><br><span class=\"line\">\tport: 8081,</span><br><span class=\"line\"></span><br><span class=\"line\">\tthemeConfig: &#123;</span><br><span class=\"line\">\t\t//gitc </span><br><span class=\"line\">    \trepo: <span class=\"string\">'https://github.com/MFrank2016/wikibook'</span>,</span><br><span class=\"line\">    \t// </span><br><span class=\"line\">   \t\tdocsDir: <span class=\"string\">'docs'</span>,</span><br><span class=\"line\">    \t//  master</span><br><span class=\"line\">    \tdocsBranch: <span class=\"string\">'master'</span>,</span><br><span class=\"line\">    \t//  <span class=\"literal\">true</span> <span class=\"literal\">false</span> </span><br><span class=\"line\">    \teditLinks: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    \t//</span><br><span class=\"line\">    \tnav: [</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Home'</span>, link: <span class=\"string\">'/'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Guide'</span>, link: <span class=\"string\">'/guide/'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'External'</span>, link: <span class=\"string\">'https://google.com'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Languages'</span>,</span><br><span class=\"line\">      \t\titems: [</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Chinese'</span>, link: <span class=\"string\">'/language/chinese'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Japanese'</span>, link: <span class=\"string\">'/language/japanese'</span> &#125;</span><br><span class=\"line\">      \t\t]&#125;],</span><br><span class=\"line\">      \tsidebar: [&#123;</span><br><span class=\"line\">        \ttitle: <span class=\"string\">'Group 1'</span>,</span><br><span class=\"line\">        \tcollapsable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        \tchildren: [</span><br><span class=\"line\">          \t\t<span class=\"string\">'/'</span></span><br><span class=\"line\">        \t\t]</span><br><span class=\"line\">      \t\t&#125;,</span><br><span class=\"line\">      \t\t&#123;</span><br><span class=\"line\">        \ttitle: <span class=\"string\">'Group 2'</span>,</span><br><span class=\"line\">        \tchildren: [</span><br><span class=\"line\">            \t<span class=\"string\">'/'</span></span><br><span class=\"line\">        \t\t]</span><br><span class=\"line\">      \t\t&#125;</span><br><span class=\"line\">    \t]</span><br><span class=\"line\">  \t&#125;,  </span><br><span class=\"line\">    //</span><br><span class=\"line\">    search: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    searchMaxSuggestions: 10,</span><br><span class=\"line\">    lastUpdated: <span class=\"string\">'Last Updated'</span>, // string | boolean</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">project</span><br><span class=\"line\"> docs</span><br><span class=\"line\">  README.md</span><br><span class=\"line\">  .vuepress</span><br><span class=\"line\">    config.js</span><br><span class=\"line\">    public</span><br><span class=\"line\">      hero.png</span><br><span class=\"line\">  guide</span><br><span class=\"line\">    README.md </span><br><span class=\"line\"> package.json</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>docsREADME.md</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">home: <span class=\"literal\">true</span></span><br><span class=\"line\">heroImage: /hero.png</span><br><span class=\"line\">actionText: </span><br><span class=\"line\">actionLink: /guide/</span><br><span class=\"line\">footer: MIT Licensed | Copyright  2018-present Frank</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n<p>project</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  http://localhost:8081 () </span></span><br><span class=\"line\">vuepress dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># mdhtmldocs/.vuepress/dist</span></span><br><span class=\"line\">vuepress build</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>docs/.vuepress/dist</strong>ftpdocsnginxapache</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"centos7--vuepress\"><a href=\"#centos7--vuepress\" class=\"headerlink\" title=\"centos7  vuepress\"></a>centos7  vuepress</h1><blockquote>\n<p>vuepressmdhtml VuePress  HTMLSEOCentOS7vuepress</p>\n</blockquote>\n<p><a href=\"https://vuepress.vuejs.org/zh/\" target=\"_blank\" rel=\"noopener\">https://vuepress.vuejs.org/zh/</a>  </p>\n<p><a href=\"https://vuepress.vuejs.org/zh/guide/Vuepress\" target=\"_blank\" rel=\"noopener\">https://vuepress.vuejs.org/zh/guide/Vuepress</a></p>\n<p><a href=\"https://github.com/vuejs/vuepress\" target=\"_blank\" rel=\"noopener\">https://github.com/vuejs/vuepress</a></p>\n<h2 id=\"nodejs\"><a href=\"#nodejs\" class=\"headerlink\" title=\"nodejs\"></a>nodejs</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sL https://rpm.nodesource.com/setup_8.x | sudo bash -</span><br><span class=\"line\">yum install nodejs</span><br></pre></td></tr></table></figure>\n<h2 id=\"vuepress\"><a href=\"#vuepress\" class=\"headerlink\" title=\"vuepress\"></a>vuepress</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g vuepress</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir project</span><br><span class=\"line\"><span class=\"built_in\">cd</span> project</span><br><span class=\"line\">mkdir docs</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init -y</span><br><span class=\"line\">vim package.json</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    \t<span class=\"string\">\"docs:dev\"</span>: <span class=\"string\">\"vuepress dev docs\"</span>,</span><br><span class=\"line\">    \t<span class=\"string\">\"docs:build\"</span>: <span class=\"string\">\"vuepress build docs\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>.vuepress</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir .vuepress</span><br><span class=\"line\"><span class=\"built_in\">cd</span> .vuepress</span><br></pre></td></tr></table></figure>\n<p>config.jsvuepress</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir public</span><br><span class=\"line\">vim config.js</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">\ttitle: <span class=\"string\">'wiki'</span>,</span><br><span class=\"line\">\tdescription: <span class=\"string\">''</span>,</span><br><span class=\"line\">\t// git https://mfrank2016.github.io/wikibook/ <span class=\"string\">'/wikibook/'</span></span><br><span class=\"line\">\tbase: <span class=\"string\">'/wikibook/'</span>,</span><br><span class=\"line\">\thost: <span class=\"string\">'0.0.0.0'</span>,</span><br><span class=\"line\">\t// </span><br><span class=\"line\">\tport: 8081,</span><br><span class=\"line\"></span><br><span class=\"line\">\tthemeConfig: &#123;</span><br><span class=\"line\">\t\t//gitc </span><br><span class=\"line\">    \trepo: <span class=\"string\">'https://github.com/MFrank2016/wikibook'</span>,</span><br><span class=\"line\">    \t// </span><br><span class=\"line\">   \t\tdocsDir: <span class=\"string\">'docs'</span>,</span><br><span class=\"line\">    \t//  master</span><br><span class=\"line\">    \tdocsBranch: <span class=\"string\">'master'</span>,</span><br><span class=\"line\">    \t//  <span class=\"literal\">true</span> <span class=\"literal\">false</span> </span><br><span class=\"line\">    \teditLinks: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    \t//</span><br><span class=\"line\">    \tnav: [</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Home'</span>, link: <span class=\"string\">'/'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Guide'</span>, link: <span class=\"string\">'/guide/'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'External'</span>, link: <span class=\"string\">'https://google.com'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Languages'</span>,</span><br><span class=\"line\">      \t\titems: [</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Chinese'</span>, link: <span class=\"string\">'/language/chinese'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Japanese'</span>, link: <span class=\"string\">'/language/japanese'</span> &#125;</span><br><span class=\"line\">      \t\t]&#125;],</span><br><span class=\"line\">      \tsidebar: [&#123;</span><br><span class=\"line\">        \ttitle: <span class=\"string\">'Group 1'</span>,</span><br><span class=\"line\">        \tcollapsable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        \tchildren: [</span><br><span class=\"line\">          \t\t<span class=\"string\">'/'</span></span><br><span class=\"line\">        \t\t]</span><br><span class=\"line\">      \t\t&#125;,</span><br><span class=\"line\">      \t\t&#123;</span><br><span class=\"line\">        \ttitle: <span class=\"string\">'Group 2'</span>,</span><br><span class=\"line\">        \tchildren: [</span><br><span class=\"line\">            \t<span class=\"string\">'/'</span></span><br><span class=\"line\">        \t\t]</span><br><span class=\"line\">      \t\t&#125;</span><br><span class=\"line\">    \t]</span><br><span class=\"line\">  \t&#125;,  </span><br><span class=\"line\">    //</span><br><span class=\"line\">    search: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    searchMaxSuggestions: 10,</span><br><span class=\"line\">    lastUpdated: <span class=\"string\">'Last Updated'</span>, // string | boolean</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">project</span><br><span class=\"line\"> docs</span><br><span class=\"line\">  README.md</span><br><span class=\"line\">  .vuepress</span><br><span class=\"line\">    config.js</span><br><span class=\"line\">    public</span><br><span class=\"line\">      hero.png</span><br><span class=\"line\">  guide</span><br><span class=\"line\">    README.md </span><br><span class=\"line\"> package.json</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>docsREADME.md</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">home: <span class=\"literal\">true</span></span><br><span class=\"line\">heroImage: /hero.png</span><br><span class=\"line\">actionText: </span><br><span class=\"line\">actionLink: /guide/</span><br><span class=\"line\">footer: MIT Licensed | Copyright  2018-present Frank</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n<p>project</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  http://localhost:8081 () </span></span><br><span class=\"line\">vuepress dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># mdhtmldocs/.vuepress/dist</span></span><br><span class=\"line\">vuepress build</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>docs/.vuepress/dist</strong>ftpdocsnginxapache</p>\n"},{"title":"Java ","date":"2018-12-26T11:55:51.000Z","_content":"> \n> \n\n## \n\n[](https://mubu.com/doc/lW2C-KYYy0)\n\n##  Java\n\n1. ````\n2. \n3. ``\n4. Java\n5. Java\n6. Java``Thread.currentThread()\n7. \n\n|                |                                                    |                                                      |\n| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ID         | Long                                   | Java |\n| name       | StringThread- |  |\n| Daemon | booleantrue | setDaemon |\n| Priority | intJava1~10105 |    |\n\n8. ``JavaJava``Java\n9. Thread`join`\n10. `yield`\n11. `sleep`\n12. ABBA``AB``\n13. Java\n14. \n15. `Thread.State`\n    1. `NEW` \n    2. `RUNNABLE`READYRUNNING\n    3. `BLOCKED`\n    4. `WAITING`Object.wait(),Thread.join(),LockSupport.park(),Condition.await()WAITINGRUNNABLEObjeck.notify()/notifyAll()LockSupport.unpark()Condition.signal()\n    5. `TIMED WAITING`\n    6. `TERMINATED`\n16. Java\n17. \n    1. ****\n    2. ****\n    3. \n    4. \n    5. \n18. \n    1. \n    2. \n    3. \n    4. \n\n##  \n\n1. ``\n2. ``\n3. ``\n4. ``\n5. ``\n6. `read-modify-write`--`check-then-act`\n7. ``\n8. ``\n9. Java```CAS`\n10. ``\n11. JIT````\n12. ``\n13. `volatile`JITJITvolatilevolatile\n14. \n15. \n16. `join`\n17. ``\n18. ``````\n19. \n20. \n21. \n22. \n23. LoadLoadStoreStoreLoadStoreStoreLoad\n24. \n25. \n26. ``\n27. \n28. Thread.sleep()Object.wait()Thread.join()LockSupport.park()\n29. \n30. ********\n    1. \n    2. \n    3. \n    4. \n31. RUNNABLERUNNABLE``\n    1. \n    2. \n    3. \n    4. \n32. ````\n33. ``\n34. ``\n35. ````\n36. ``\n37. ********\n38. \n39. ****\n40. ****\n\n##  Java\n\n1. ``\n\n2. \n\n3. ``\n\n4. Java````\n\n5. ``\n\n6. ``\n\n7. \n\n8. ``\n\n9. Java``````\n\n10. Java``\n\n11. \n\n12. ``/````\n\n13. \n\n    1. \n    2. \n\n14. `ReetrantReadWriteLock```ReetrantReadWriteLock``\n\n15. `ReetrantReadWriteLock`\n\n16. ``****\n\n17. ``````********JavaMonitorExit``JavaMonitorEnter``\n\n18. ``````********JavaMonitorEnterMonitorExit\n\n19. \n\n    1. \n\n    2. \n\n    3. \n\n    4. \n\n    5. \n\n    6. \n\n    7. \n\n20. `volatile`volatile\n\n21. `volatile```volatilevolatile\n\n22. \n\n    ```java\n    volatile Map aMap = new HashMap();\n    ```\n\n    \n\n    ```java\n    objRef = allocate(HashMap.class); // 1\n    invokeConstructor(objRef); // 2objRef\n    aMap = objRef; // 3aMap\n    ```\n\n    volatile312aMap\n\n23. volatileJava````\n\n24. volatileJava````\n\n25. volatile****\n\n26. volatile****\n\n27. volatilevolatile\n\n28. volatilevolatile\n\n29. volatile\n\n    1. volatile``\n\n    2. volatile``\n\n    3. volatile\n\n    4. volatile\n\n30. volatilevolatilevolatile\n\n31. ``CAS`read-modify-write`\n\n32. ``\n\n33. \n\n    1. public\n\n    2. private\n\n    3. \n\n    4. \n\n34. `static`\n\n35. `static`\n\n36. `static` \n\n37. `final`\n\n38. `final``final`\n\n39. finalfinalfinal\n\n40. ``\n\n41. ``\n\n42. \n\n    1. this\n\n    2. this\n\n    3. \n\n43. this\n\n44. \n\n    1. staic\n\n    2. final\n\n    3. volatile\n\n    4. AtomicReference\n\n    5. \n\n##  \n\n1. ********\n\n2. ``\n\n   1. \n\n   2. \n\n   3. \n\n   4. \n\n3. \n\n4.  `CPU``IO`\n\n5. CPUCPUCPUIOIOIO\n\n6. ``\n\n7. `Amdahls `\n   $$\n   S_{max} = \\frac{1}{P + \\frac{1 - P}{N}}\n   $$\n   NP\n\n8. ****\n\n9. \n\n10. \n\n    1. CPU$N_{cpu} $CPU$N_{cpu}  + 1$\n\n    2. IOIO$2 * N_{cpu} $\n\n11. ****\n\n12. \n\n##  \n\n1. ``\n\n2. ``\n\n3. waitObject.wait()\n\n4. Object.wait()\n\n5. `Object.wait()`wait\n\n6. `Object.notify()`Object.notify()Object.notify() Object.notify()\n\n7. ````\n\n8. Java``Java``Object.wait()\n\n9. wait/notify\n\n   1. \n\n   2. \n\n   3. \n\n   4. \n\n10. `Object.notify()``Object.notify()``notifyAll`\n\n    1. \n\n    2. \n\n11. `join(long)``join(long)``wait/notify`\n\n12. Javarun`notifyAll`\n\n13. `Condition``wait/notify`/`Object.wait(long)`\n\n14. `Condition.await()/signal()`ConditionConditionCondition\n\n15. `Condition`await`signal/signalAll`\n\n16. `Condition.awaitUntil(Date deadline)``signal/signalAll`\n\n17. `Condition.await()/awaitUntil(Date)``Condition.await()/awaitUntil(Date)`\n\n18. `CountDownLatch```\n\n19. `CountDownLatch`0CountDownLatchawait`CountDownLatch.countDown()``finally`\n\n20. `CyclicBarrier````CyclicBarrier.await()`\n\n21. `CyclicBarrier.await()``CyclicBarrier`\n\n22. `CyclicBarrier``CyclicBarrier`\n\n23. CyclicBarriertrip/CyclicBarrierCyclicBarrier\n\n24. CyclicBarrier.await()parties0barrierAction.run() trip.signalAll()CyclicBarrierparties\n\n25. CyclicBarrier:\n\n    1. \n\n    2. \n\n26. \n\n27. /\n\n28. Interger.MAX_VALUE($2^{31} - 1$)\n\n29. ArrayBlockingQueueputtake\n\n30. LinkedBlockingQueue\n\n31. LinkedBlockingQueue\bputtakeputLocktakeLock\bLinkedBlockingQueueputtakeLinkedBlockingQueue\n\n32. SynchronousQueue\n\n33. SynchronousQueue\n34. ArrayBlockingQueueSynchronousQueueLinkedBlockingQueue\n35. LinkedBlockingQueueArrayBlockingQueue\n36. put\n37. Semaphore.acquire()  Semaphore.release()\n38. Semaphore.release()finally\n39. Semaphorepermits1SemaphoreSemaphore.acquire()Semaphore.release()\n40. PipedOutputStreamPipedInputStream-\n41. \n42. \n43. Exchanger.exchange(V)xExchanger.exchange(V)\n44. Java\n45. \n46. trueInterruptedException\n47. Java\n48. -run\n\n##  \n","source":"_posts/reading/java-multithread-programming-guide-in-action-digest.md","raw":"---\ntitle: Java \ntags: \n - \n - Java\n - \ncategories: \ndate: 2018-12-26 19:55:51\n---\n> \n> \n\n## \n\n[](https://mubu.com/doc/lW2C-KYYy0)\n\n##  Java\n\n1. ````\n2. \n3. ``\n4. Java\n5. Java\n6. Java``Thread.currentThread()\n7. \n\n|                |                                                    |                                                      |\n| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ID         | Long                                   | Java |\n| name       | StringThread- |  |\n| Daemon | booleantrue | setDaemon |\n| Priority | intJava1~10105 |    |\n\n8. ``JavaJava``Java\n9. Thread`join`\n10. `yield`\n11. `sleep`\n12. ABBA``AB``\n13. Java\n14. \n15. `Thread.State`\n    1. `NEW` \n    2. `RUNNABLE`READYRUNNING\n    3. `BLOCKED`\n    4. `WAITING`Object.wait(),Thread.join(),LockSupport.park(),Condition.await()WAITINGRUNNABLEObjeck.notify()/notifyAll()LockSupport.unpark()Condition.signal()\n    5. `TIMED WAITING`\n    6. `TERMINATED`\n16. Java\n17. \n    1. ****\n    2. ****\n    3. \n    4. \n    5. \n18. \n    1. \n    2. \n    3. \n    4. \n\n##  \n\n1. ``\n2. ``\n3. ``\n4. ``\n5. ``\n6. `read-modify-write`--`check-then-act`\n7. ``\n8. ``\n9. Java```CAS`\n10. ``\n11. JIT````\n12. ``\n13. `volatile`JITJITvolatilevolatile\n14. \n15. \n16. `join`\n17. ``\n18. ``````\n19. \n20. \n21. \n22. \n23. LoadLoadStoreStoreLoadStoreStoreLoad\n24. \n25. \n26. ``\n27. \n28. Thread.sleep()Object.wait()Thread.join()LockSupport.park()\n29. \n30. ********\n    1. \n    2. \n    3. \n    4. \n31. RUNNABLERUNNABLE``\n    1. \n    2. \n    3. \n    4. \n32. ````\n33. ``\n34. ``\n35. ````\n36. ``\n37. ********\n38. \n39. ****\n40. ****\n\n##  Java\n\n1. ``\n\n2. \n\n3. ``\n\n4. Java````\n\n5. ``\n\n6. ``\n\n7. \n\n8. ``\n\n9. Java``````\n\n10. Java``\n\n11. \n\n12. ``/````\n\n13. \n\n    1. \n    2. \n\n14. `ReetrantReadWriteLock```ReetrantReadWriteLock``\n\n15. `ReetrantReadWriteLock`\n\n16. ``****\n\n17. ``````********JavaMonitorExit``JavaMonitorEnter``\n\n18. ``````********JavaMonitorEnterMonitorExit\n\n19. \n\n    1. \n\n    2. \n\n    3. \n\n    4. \n\n    5. \n\n    6. \n\n    7. \n\n20. `volatile`volatile\n\n21. `volatile```volatilevolatile\n\n22. \n\n    ```java\n    volatile Map aMap = new HashMap();\n    ```\n\n    \n\n    ```java\n    objRef = allocate(HashMap.class); // 1\n    invokeConstructor(objRef); // 2objRef\n    aMap = objRef; // 3aMap\n    ```\n\n    volatile312aMap\n\n23. volatileJava````\n\n24. volatileJava````\n\n25. volatile****\n\n26. volatile****\n\n27. volatilevolatile\n\n28. volatilevolatile\n\n29. volatile\n\n    1. volatile``\n\n    2. volatile``\n\n    3. volatile\n\n    4. volatile\n\n30. volatilevolatilevolatile\n\n31. ``CAS`read-modify-write`\n\n32. ``\n\n33. \n\n    1. public\n\n    2. private\n\n    3. \n\n    4. \n\n34. `static`\n\n35. `static`\n\n36. `static` \n\n37. `final`\n\n38. `final``final`\n\n39. finalfinalfinal\n\n40. ``\n\n41. ``\n\n42. \n\n    1. this\n\n    2. this\n\n    3. \n\n43. this\n\n44. \n\n    1. staic\n\n    2. final\n\n    3. volatile\n\n    4. AtomicReference\n\n    5. \n\n##  \n\n1. ********\n\n2. ``\n\n   1. \n\n   2. \n\n   3. \n\n   4. \n\n3. \n\n4.  `CPU``IO`\n\n5. CPUCPUCPUIOIOIO\n\n6. ``\n\n7. `Amdahls `\n   $$\n   S_{max} = \\frac{1}{P + \\frac{1 - P}{N}}\n   $$\n   NP\n\n8. ****\n\n9. \n\n10. \n\n    1. CPU$N_{cpu} $CPU$N_{cpu}  + 1$\n\n    2. IOIO$2 * N_{cpu} $\n\n11. ****\n\n12. \n\n##  \n\n1. ``\n\n2. ``\n\n3. waitObject.wait()\n\n4. Object.wait()\n\n5. `Object.wait()`wait\n\n6. `Object.notify()`Object.notify()Object.notify() Object.notify()\n\n7. ````\n\n8. Java``Java``Object.wait()\n\n9. wait/notify\n\n   1. \n\n   2. \n\n   3. \n\n   4. \n\n10. `Object.notify()``Object.notify()``notifyAll`\n\n    1. \n\n    2. \n\n11. `join(long)``join(long)``wait/notify`\n\n12. Javarun`notifyAll`\n\n13. `Condition``wait/notify`/`Object.wait(long)`\n\n14. `Condition.await()/signal()`ConditionConditionCondition\n\n15. `Condition`await`signal/signalAll`\n\n16. `Condition.awaitUntil(Date deadline)``signal/signalAll`\n\n17. `Condition.await()/awaitUntil(Date)``Condition.await()/awaitUntil(Date)`\n\n18. `CountDownLatch```\n\n19. `CountDownLatch`0CountDownLatchawait`CountDownLatch.countDown()``finally`\n\n20. `CyclicBarrier````CyclicBarrier.await()`\n\n21. `CyclicBarrier.await()``CyclicBarrier`\n\n22. `CyclicBarrier``CyclicBarrier`\n\n23. CyclicBarriertrip/CyclicBarrierCyclicBarrier\n\n24. CyclicBarrier.await()parties0barrierAction.run() trip.signalAll()CyclicBarrierparties\n\n25. CyclicBarrier:\n\n    1. \n\n    2. \n\n26. \n\n27. /\n\n28. Interger.MAX_VALUE($2^{31} - 1$)\n\n29. ArrayBlockingQueueputtake\n\n30. LinkedBlockingQueue\n\n31. LinkedBlockingQueue\bputtakeputLocktakeLock\bLinkedBlockingQueueputtakeLinkedBlockingQueue\n\n32. SynchronousQueue\n\n33. SynchronousQueue\n34. ArrayBlockingQueueSynchronousQueueLinkedBlockingQueue\n35. LinkedBlockingQueueArrayBlockingQueue\n36. put\n37. Semaphore.acquire()  Semaphore.release()\n38. Semaphore.release()finally\n39. Semaphorepermits1SemaphoreSemaphore.acquire()Semaphore.release()\n40. PipedOutputStreamPipedInputStream-\n41. \n42. \n43. Exchanger.exchange(V)xExchanger.exchange(V)\n44. Java\n45. \n46. trueInterruptedException\n47. Java\n48. -run\n\n##  \n","slug":"reading/java-multithread-programming-guide-in-action-digest","published":1,"updated":"2019-01-02T14:25:23.483Z","_id":"cjq7rm5na000gwu9kls1nhb94","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p><br></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://mubu.com/doc/lW2C-KYYy0\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2><ol>\n<li><code></code><code></code></li>\n<li></li>\n<li><code></code></li>\n<li>Java</li>\n<li>Java</li>\n<li>Java<code></code>Thread.currentThread()</li>\n<li></li>\n</ol>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ID</td>\n<td>Long</td>\n<td>Java</td>\n</tr>\n<tr>\n<td>name</td>\n<td>StringThread-</td>\n<td></td>\n</tr>\n<tr>\n<td>Daemon</td>\n<td>booleantrue</td>\n<td>setDaemon</td>\n</tr>\n<tr>\n<td>Priority</td>\n<td>intJava1~10105</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<ol start=\"8\">\n<li><code></code>JavaJava<code></code>Java</li>\n<li>Thread<code>join</code></li>\n<li><code>yield</code></li>\n<li><code>sleep</code></li>\n<li>ABBA<code></code>AB<code></code></li>\n<li>Java</li>\n<li></li>\n<li><code>Thread.State</code><ol>\n<li><code>NEW</code> </li>\n<li><code>RUNNABLE</code>READYRUNNING</li>\n<li><code>BLOCKED</code></li>\n<li><code>WAITING</code>Object.wait(),Thread.join(),LockSupport.park(),Condition.await()WAITINGRUNNABLEObjeck.notify()/notifyAll()LockSupport.unpark()Condition.signal()</li>\n<li><code>TIMED WAITING</code></li>\n<li><code>TERMINATED</code></li>\n</ol>\n</li>\n<li>Java</li>\n<li><ol>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code>read-modify-write</code>--<code>check-then-act</code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li>Java<code></code><code>CAS</code></li>\n<li><code></code></li>\n<li>JIT<code></code><code></code></li>\n<li><code></code></li>\n<li><code>volatile</code>JITJITvolatilevolatile</li>\n<li></li>\n<li></li>\n<li><code>join</code></li>\n<li><code></code></li>\n<li><code></code><code></code><code></code></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>LoadLoadStoreStoreLoadStoreStoreLoad</li>\n<li></li>\n<li></li>\n<li><code></code></li>\n<li></li>\n<li>Thread.sleep()Object.wait()Thread.join()LockSupport.park()</li>\n<li></li>\n<li><strong></strong><strong></strong><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li>RUNNABLERUNNABLE<code></code><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><code></code><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code><code></code></li>\n<li><code></code></li>\n<li><strong></strong><strong></strong></li>\n<li></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ol>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2><ol>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>Java<code></code><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>Java<code></code><code></code><code></code></p>\n</li>\n<li><p>Java<code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code>/<code></code><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><p><code>ReetrantReadWriteLock</code><code></code>ReetrantReadWriteLock<code></code></p>\n</li>\n<li><p><code>ReetrantReadWriteLock</code></p>\n</li>\n<li><p><code></code><strong></strong></p>\n</li>\n<li><p><code></code><code></code><code></code><strong></strong><strong></strong>JavaMonitorExit<code></code>JavaMonitorEnter<code></code></p>\n</li>\n<li><p><code></code><code></code><code></code><strong></strong><strong></strong>JavaMonitorEnterMonitorExit</p>\n</li>\n<li><p></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>volatile</code>volatile</p>\n</li>\n<li><p><code>volatile</code><code></code>volatilevolatile</p>\n</li>\n<li><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">volatile</span> Map aMap = <span class=\"keyword\">new</span> HashMap();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">objRef = allocate(HashMap.class); <span class=\"comment\">// 1</span></span><br><span class=\"line\">invokeConstructor(objRef); <span class=\"comment\">// 2objRef</span></span><br><span class=\"line\">aMap = objRef; <span class=\"comment\">// 3aMap</span></span><br></pre></td></tr></table></figure>\n<p>volatile312aMap</p>\n</li>\n<li><p>volatileJava<code></code><code></code></p>\n</li>\n<li><p>volatileJava<code></code><code></code></p>\n</li>\n<li><p>volatile<strong></strong></p>\n</li>\n<li><p>volatile<strong></strong></p>\n</li>\n<li><p>volatilevolatile</p>\n</li>\n<li><p>volatilevolatile</p>\n</li>\n<li><p>volatile</p>\n<ol>\n<li><p>volatile<code></code></p>\n</li>\n<li><p>volatile<code></code></p>\n</li>\n<li><p>volatile</p>\n</li>\n<li><p>volatile</p>\n</li>\n</ol>\n</li>\n<li><p>volatilevolatilevolatile</p>\n</li>\n<li><p><code></code>CAS<code>read-modify-write</code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>public</p>\n</li>\n<li><p>private</p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>static</code></p>\n</li>\n<li><p><code>static</code></p>\n</li>\n<li><p><code>static</code> </p>\n</li>\n<li><p><code>final</code></p>\n</li>\n<li><p><code>final</code><code>final</code></p>\n</li>\n<li><p>finalfinalfinal</p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>this</p>\n</li>\n<li><p>this</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p>this</p>\n</li>\n<li><p></p>\n<ol>\n<li><p>staic</p>\n</li>\n<li><p>final</p>\n</li>\n<li><p>volatile</p>\n</li>\n<li><p>AtomicReference</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><p><strong></strong><strong></strong></p>\n</li>\n<li><p><code></code></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p></p>\n</li>\n<li><p> <code>CPU</code><code>IO</code></p>\n</li>\n<li><p>CPUCPUCPUIOIOIO</p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code>Amdahls </code><br>$$<br>S_{max} = \\frac{1}{P + \\frac{1 - P}{N}}<br>$$<br>NP</p>\n</li>\n<li><p><strong></strong></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>CPU$N_{cpu} $CPU$N_{cpu}  + 1$</p>\n</li>\n<li><p>IOIO$2 * N_{cpu} $</p>\n</li>\n</ol>\n</li>\n<li><p><strong></strong></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>waitObject.wait()</p>\n</li>\n<li><p>Object.wait()</p>\n</li>\n<li><p><code>Object.wait()</code>wait</p>\n</li>\n<li><p><code>Object.notify()</code>Object.notify()Object.notify() Object.notify()</p>\n</li>\n<li><p><code></code><code></code></p>\n</li>\n<li><p>Java<code></code>Java<code></code>Object.wait()</p>\n</li>\n<li><p>wait/notify</p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>Object.notify()</code><code>Object.notify()</code><code>notifyAll</code></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>join(long)</code><code>join(long)</code><code>wait/notify</code></p>\n</li>\n<li><p>Javarun<code>notifyAll</code></p>\n</li>\n<li><p><code>Condition</code><code>wait/notify</code>/<code>Object.wait(long)</code></p>\n</li>\n<li><p><code>Condition.await()/signal()</code>ConditionConditionCondition</p>\n</li>\n<li><p><code>Condition</code>await<code>signal/signalAll</code></p>\n</li>\n<li><p><code>Condition.awaitUntil(Date deadline)</code><code>signal/signalAll</code></p>\n</li>\n<li><p><code>Condition.await()/awaitUntil(Date)</code><code>Condition.await()/awaitUntil(Date)</code></p>\n</li>\n<li><p><code>CountDownLatch</code><code></code></p>\n</li>\n<li><p><code>CountDownLatch</code>0CountDownLatchawait<code>CountDownLatch.countDown()</code><code>finally</code></p>\n</li>\n<li><p><code>CyclicBarrier</code><code></code><code>CyclicBarrier.await()</code></p>\n</li>\n<li><p><code>CyclicBarrier.await()</code><code>CyclicBarrier</code></p>\n</li>\n<li><p><code>CyclicBarrier</code><code>CyclicBarrier</code></p>\n</li>\n<li><p>CyclicBarriertrip/CyclicBarrierCyclicBarrier</p>\n</li>\n<li><p>CyclicBarrier.await()parties0barrierAction.run() trip.signalAll()CyclicBarrierparties</p>\n</li>\n<li><p>CyclicBarrier:</p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p></p>\n</li>\n<li><p>/</p>\n</li>\n<li><p>Interger.MAX_VALUE($2^{31} - 1$)</p>\n</li>\n<li><p>ArrayBlockingQueueputtake</p>\n</li>\n<li><p>LinkedBlockingQueue</p>\n</li>\n<li><p>LinkedBlockingQueue\bputtakeputLocktakeLock\bLinkedBlockingQueueputtakeLinkedBlockingQueue</p>\n</li>\n<li><p>SynchronousQueue</p>\n</li>\n<li><p>SynchronousQueue</p>\n</li>\n<li>ArrayBlockingQueueSynchronousQueueLinkedBlockingQueue</li>\n<li>LinkedBlockingQueueArrayBlockingQueue</li>\n<li>put</li>\n<li>Semaphore.acquire()  Semaphore.release()</li>\n<li>Semaphore.release()finally</li>\n<li>Semaphorepermits1SemaphoreSemaphore.acquire()Semaphore.release()</li>\n<li>PipedOutputStreamPipedInputStream-</li>\n<li></li>\n<li></li>\n<li>Exchanger.exchange(V)xExchanger.exchange(V)</li>\n<li>Java</li>\n<li></li>\n<li>trueInterruptedException</li>\n<li>Java</li>\n<li>-run</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p><br></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://mubu.com/doc/lW2C-KYYy0\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2><ol>\n<li><code></code><code></code></li>\n<li></li>\n<li><code></code></li>\n<li>Java</li>\n<li>Java</li>\n<li>Java<code></code>Thread.currentThread()</li>\n<li></li>\n</ol>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ID</td>\n<td>Long</td>\n<td>Java</td>\n</tr>\n<tr>\n<td>name</td>\n<td>StringThread-</td>\n<td></td>\n</tr>\n<tr>\n<td>Daemon</td>\n<td>booleantrue</td>\n<td>setDaemon</td>\n</tr>\n<tr>\n<td>Priority</td>\n<td>intJava1~10105</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<ol start=\"8\">\n<li><code></code>JavaJava<code></code>Java</li>\n<li>Thread<code>join</code></li>\n<li><code>yield</code></li>\n<li><code>sleep</code></li>\n<li>ABBA<code></code>AB<code></code></li>\n<li>Java</li>\n<li></li>\n<li><code>Thread.State</code><ol>\n<li><code>NEW</code> </li>\n<li><code>RUNNABLE</code>READYRUNNING</li>\n<li><code>BLOCKED</code></li>\n<li><code>WAITING</code>Object.wait(),Thread.join(),LockSupport.park(),Condition.await()WAITINGRUNNABLEObjeck.notify()/notifyAll()LockSupport.unpark()Condition.signal()</li>\n<li><code>TIMED WAITING</code></li>\n<li><code>TERMINATED</code></li>\n</ol>\n</li>\n<li>Java</li>\n<li><ol>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code>read-modify-write</code>--<code>check-then-act</code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li>Java<code></code><code>CAS</code></li>\n<li><code></code></li>\n<li>JIT<code></code><code></code></li>\n<li><code></code></li>\n<li><code>volatile</code>JITJITvolatilevolatile</li>\n<li></li>\n<li></li>\n<li><code>join</code></li>\n<li><code></code></li>\n<li><code></code><code></code><code></code></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>LoadLoadStoreStoreLoadStoreStoreLoad</li>\n<li></li>\n<li></li>\n<li><code></code></li>\n<li></li>\n<li>Thread.sleep()Object.wait()Thread.join()LockSupport.park()</li>\n<li></li>\n<li><strong></strong><strong></strong><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li>RUNNABLERUNNABLE<code></code><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><code></code><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code><code></code></li>\n<li><code></code></li>\n<li><strong></strong><strong></strong></li>\n<li></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ol>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2><ol>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>Java<code></code><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>Java<code></code><code></code><code></code></p>\n</li>\n<li><p>Java<code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code>/<code></code><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><p><code>ReetrantReadWriteLock</code><code></code>ReetrantReadWriteLock<code></code></p>\n</li>\n<li><p><code>ReetrantReadWriteLock</code></p>\n</li>\n<li><p><code></code><strong></strong></p>\n</li>\n<li><p><code></code><code></code><code></code><strong></strong><strong></strong>JavaMonitorExit<code></code>JavaMonitorEnter<code></code></p>\n</li>\n<li><p><code></code><code></code><code></code><strong></strong><strong></strong>JavaMonitorEnterMonitorExit</p>\n</li>\n<li><p></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>volatile</code>volatile</p>\n</li>\n<li><p><code>volatile</code><code></code>volatilevolatile</p>\n</li>\n<li><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">volatile</span> Map aMap = <span class=\"keyword\">new</span> HashMap();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">objRef = allocate(HashMap.class); <span class=\"comment\">// 1</span></span><br><span class=\"line\">invokeConstructor(objRef); <span class=\"comment\">// 2objRef</span></span><br><span class=\"line\">aMap = objRef; <span class=\"comment\">// 3aMap</span></span><br></pre></td></tr></table></figure>\n<p>volatile312aMap</p>\n</li>\n<li><p>volatileJava<code></code><code></code></p>\n</li>\n<li><p>volatileJava<code></code><code></code></p>\n</li>\n<li><p>volatile<strong></strong></p>\n</li>\n<li><p>volatile<strong></strong></p>\n</li>\n<li><p>volatilevolatile</p>\n</li>\n<li><p>volatilevolatile</p>\n</li>\n<li><p>volatile</p>\n<ol>\n<li><p>volatile<code></code></p>\n</li>\n<li><p>volatile<code></code></p>\n</li>\n<li><p>volatile</p>\n</li>\n<li><p>volatile</p>\n</li>\n</ol>\n</li>\n<li><p>volatilevolatilevolatile</p>\n</li>\n<li><p><code></code>CAS<code>read-modify-write</code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>public</p>\n</li>\n<li><p>private</p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>static</code></p>\n</li>\n<li><p><code>static</code></p>\n</li>\n<li><p><code>static</code> </p>\n</li>\n<li><p><code>final</code></p>\n</li>\n<li><p><code>final</code><code>final</code></p>\n</li>\n<li><p>finalfinalfinal</p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>this</p>\n</li>\n<li><p>this</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p>this</p>\n</li>\n<li><p></p>\n<ol>\n<li><p>staic</p>\n</li>\n<li><p>final</p>\n</li>\n<li><p>volatile</p>\n</li>\n<li><p>AtomicReference</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><p><strong></strong><strong></strong></p>\n</li>\n<li><p><code></code></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p></p>\n</li>\n<li><p> <code>CPU</code><code>IO</code></p>\n</li>\n<li><p>CPUCPUCPUIOIOIO</p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code>Amdahls </code><br>$$<br>S_{max} = \\frac{1}{P + \\frac{1 - P}{N}}<br>$$<br>NP</p>\n</li>\n<li><p><strong></strong></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>CPU$N_{cpu} $CPU$N_{cpu}  + 1$</p>\n</li>\n<li><p>IOIO$2 * N_{cpu} $</p>\n</li>\n</ol>\n</li>\n<li><p><strong></strong></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>waitObject.wait()</p>\n</li>\n<li><p>Object.wait()</p>\n</li>\n<li><p><code>Object.wait()</code>wait</p>\n</li>\n<li><p><code>Object.notify()</code>Object.notify()Object.notify() Object.notify()</p>\n</li>\n<li><p><code></code><code></code></p>\n</li>\n<li><p>Java<code></code>Java<code></code>Object.wait()</p>\n</li>\n<li><p>wait/notify</p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>Object.notify()</code><code>Object.notify()</code><code>notifyAll</code></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>join(long)</code><code>join(long)</code><code>wait/notify</code></p>\n</li>\n<li><p>Javarun<code>notifyAll</code></p>\n</li>\n<li><p><code>Condition</code><code>wait/notify</code>/<code>Object.wait(long)</code></p>\n</li>\n<li><p><code>Condition.await()/signal()</code>ConditionConditionCondition</p>\n</li>\n<li><p><code>Condition</code>await<code>signal/signalAll</code></p>\n</li>\n<li><p><code>Condition.awaitUntil(Date deadline)</code><code>signal/signalAll</code></p>\n</li>\n<li><p><code>Condition.await()/awaitUntil(Date)</code><code>Condition.await()/awaitUntil(Date)</code></p>\n</li>\n<li><p><code>CountDownLatch</code><code></code></p>\n</li>\n<li><p><code>CountDownLatch</code>0CountDownLatchawait<code>CountDownLatch.countDown()</code><code>finally</code></p>\n</li>\n<li><p><code>CyclicBarrier</code><code></code><code>CyclicBarrier.await()</code></p>\n</li>\n<li><p><code>CyclicBarrier.await()</code><code>CyclicBarrier</code></p>\n</li>\n<li><p><code>CyclicBarrier</code><code>CyclicBarrier</code></p>\n</li>\n<li><p>CyclicBarriertrip/CyclicBarrierCyclicBarrier</p>\n</li>\n<li><p>CyclicBarrier.await()parties0barrierAction.run() trip.signalAll()CyclicBarrierparties</p>\n</li>\n<li><p>CyclicBarrier:</p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p></p>\n</li>\n<li><p>/</p>\n</li>\n<li><p>Interger.MAX_VALUE($2^{31} - 1$)</p>\n</li>\n<li><p>ArrayBlockingQueueputtake</p>\n</li>\n<li><p>LinkedBlockingQueue</p>\n</li>\n<li><p>LinkedBlockingQueue\bputtakeputLocktakeLock\bLinkedBlockingQueueputtakeLinkedBlockingQueue</p>\n</li>\n<li><p>SynchronousQueue</p>\n</li>\n<li><p>SynchronousQueue</p>\n</li>\n<li>ArrayBlockingQueueSynchronousQueueLinkedBlockingQueue</li>\n<li>LinkedBlockingQueueArrayBlockingQueue</li>\n<li>put</li>\n<li>Semaphore.acquire()  Semaphore.release()</li>\n<li>Semaphore.release()finally</li>\n<li>Semaphorepermits1SemaphoreSemaphore.acquire()Semaphore.release()</li>\n<li>PipedOutputStreamPipedInputStream-</li>\n<li></li>\n<li></li>\n<li>Exchanger.exchange(V)xExchanger.exchange(V)</li>\n<li>Java</li>\n<li></li>\n<li>trueInterruptedException</li>\n<li>Java</li>\n<li>-run</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2>"},{"title":"Java ","date":"2018-12-26T11:55:51.000Z","_content":"> \n\n## \n\n[](https://mubu.com/doc/lW2C-KYYy0)\n","source":"_posts/reading/java-multithread-programming-guide-in-action.md","raw":"---\ntitle: Java \ntags: \n - \n - Java\n - \ncategories: \ndate: 2018-12-26 19:55:51\n---\n> \n\n## \n\n[](https://mubu.com/doc/lW2C-KYYy0)\n","slug":"reading/java-multithread-programming-guide-in-action","published":1,"updated":"2019-01-02T16:32:22.377Z","_id":"cjq7rm5nc000hwu9kka9batrn","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://mubu.com/doc/lW2C-KYYy0\" target=\"_blank\" rel=\"noopener\"></a></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://mubu.com/doc/lW2C-KYYy0\" target=\"_blank\" rel=\"noopener\"></a></p>\n"},{"title":"- ","date":"2018-12-26T11:16:09.000Z","_content":"## \n\n- \n- \n- \n- \n  - \n  - \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- 15105\n- \n- \n- \n  - \n  - \n  - \n  - \n- \n  - \n  - \n  - \n  - \n  - \n","source":"_posts/reading/the-power-of-habit-digest.md","raw":"---\ntitle: - \ntags: \ncategories: \ndate: 2018-12-26 19:16:09\n---\n## \n\n- \n- \n- \n- \n  - \n  - \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- 15105\n- \n- \n- \n  - \n  - \n  - \n  - \n- \n  - \n  - \n  - \n  - \n  - \n","slug":"reading/the-power-of-habit-digest","published":1,"updated":"2019-01-02T14:25:23.484Z","_id":"cjq7rm5ne000kwu9kl9gfe3dh","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>15105</li>\n<li></li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>15105</li>\n<li></li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n"},{"title":"","date":"2018-12-26T12:39:32.000Z","_content":"\n## \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhabiticatapp","source":"_posts/reading/the-power-of-habit.md","raw":"---\ntitle: \ntags: \ncategories: \ndate: 2018-12-26 20:39:32\n---\n\n## \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhabiticatapp","slug":"reading/the-power-of-habit","published":1,"updated":"2019-01-02T14:25:23.484Z","_id":"cjq7rm5nf000lwu9ky8vczfeb","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p>habiticatapp</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p>habiticatapp</p>\n"},{"_content":"","source":"_posts/java/basic/java-data-type.md","raw":"","slug":"java/basic/java-data-type","published":1,"date":"2018-12-27T07:50:09.426Z","updated":"2018-12-27T07:50:09.426Z","title":"","comments":1,"layout":"post","photos":[],"link":"","_id":"cjq7rm5ng000mwu9kek4l6jwy","content":"","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":""},{"_content":"","source":"_posts/java/basic/java-operator.md","raw":"","slug":"java/basic/java-operator","published":1,"date":"2018-12-27T07:50:09.449Z","updated":"2018-12-27T07:50:09.449Z","title":"","comments":1,"layout":"post","photos":[],"link":"","_id":"cjq7rm5nj000pwu9k90orbxbj","content":"","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":""},{"prev":false,"next":false,"_content":"\n# \n\nDomain-Driven-DesignDDD\n\n1. \n2. \n3. \n4. \n   1. \n   2. \n   3. \n   4. \n   5. \n   6. \n   7. \n5. \n6. MVCDDD\n7. \n8. \n9. \n\n","source":"_posts/architecture/domain-driven-design/ddd-outline.md","raw":"---\nprev: false\nnext: false\n\n\n---\n\n# \n\nDomain-Driven-DesignDDD\n\n1. \n2. \n3. \n4. \n   1. \n   2. \n   3. \n   4. \n   5. \n   6. \n   7. \n5. \n6. MVCDDD\n7. \n8. \n9. \n\n","slug":"architecture/domain-driven-design/ddd-outline","published":1,"date":"2019-01-02T14:25:23.178Z","updated":"2019-01-02T14:25:23.178Z","_id":"cjq7rm5p60019wu9klv65i2jq","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>Domain-Driven-DesignDDD</p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li></li>\n<li>MVCDDD</li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>Domain-Driven-DesignDDD</p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li></li>\n<li>MVCDDD</li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n"},{"prev":false,"next":false,"_content":"\n# \n\n## \n\n\n\nDDDWebDDD\n\n## \n\nDDD\n\nserviceservice\n\n\n\n\n\n\n\n## \n\n1Eric Evans\n\n2 Vaughn Vernon\n\n3[DDD](https://www.jianshu.com/p/6e2917551e63)\n\n","source":"_posts/architecture/domain-driven-design/ddd-recommendation.md","raw":"---\nprev: false\nnext: false\n\n\n\n\n---\n\n# \n\n## \n\n\n\nDDDWebDDD\n\n## \n\nDDD\n\nserviceservice\n\n\n\n\n\n\n\n## \n\n1Eric Evans\n\n2 Vaughn Vernon\n\n3[DDD](https://www.jianshu.com/p/6e2917551e63)\n\n","slug":"architecture/domain-driven-design/ddd-recommendation","published":1,"date":"2019-01-02T14:25:23.178Z","updated":"2019-01-02T14:25:23.188Z","_id":"cjq7rm5p8001awu9kkqa2gf8c","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>DDDWebDDD</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>DDD</p>\n<p>serviceservice</p>\n<p></p>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>1Eric Evans</p>\n<p>2 Vaughn Vernon</p>\n<p>3<a href=\"https://www.jianshu.com/p/6e2917551e63\" target=\"_blank\" rel=\"noopener\">DDD</a></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>DDDWebDDD</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>DDD</p>\n<p>serviceservice</p>\n<p></p>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>1Eric Evans</p>\n<p>2 Vaughn Vernon</p>\n<p>3<a href=\"https://www.jianshu.com/p/6e2917551e63\" target=\"_blank\" rel=\"noopener\">DDD</a></p>\n"},{"prev":false,"next":false,"_content":"\n# \n\n## \n\n## \n\n","source":"_posts/architecture/domain-driven-design/ddd-steps.md","raw":"---\nprev: false\nnext: false\n\n\n\n\n\n---\n\n# \n\n## \n\n## \n\n","slug":"architecture/domain-driven-design/ddd-steps","published":1,"date":"2019-01-02T14:25:23.188Z","updated":"2019-01-02T14:25:23.188Z","_id":"cjq7rm5pc001bwu9kia3jz30j","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>"},{"title":"Java  - ","date":"2018-12-28T16:01:00.000Z","_content":"\n>  -- \n\n## \n\nJava Boss\n\nJavaJavaJavaJavaJava\n\n\n\n\n\n\n","source":"_posts/java/basic/java-basic.md","raw":"---\ntitle: Java  - \ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-29 00:01:00\n---\n\n>  -- \n\n## \n\nJava Boss\n\nJavaJavaJavaJavaJava\n\n\n\n\n\n\n","slug":"java/basic/java-basic","published":1,"updated":"2019-01-02T14:25:23.238Z","_id":"cjq7rm5pi001cwu9kql8olmid","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java Boss</p>\n<p>JavaJavaJavaJavaJava</p>\n<p></p>\n<p></p>\n<p></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java Boss</p>\n<p>JavaJavaJavaJavaJava</p>\n<p></p>\n<p></p>\n<p></p>\n"},{"title":"Java ","date":"2018-12-28T16:05:00.000Z","_content":"\n# Java \n\n>**Sometimes we stare so long at a door that is closing that we see too late the one that is open.**\n>\n> Alexander Graham Bell, Inventor\n>\n>****  ()\n\n## \n\nJavaJava\n\nJava\n\n\n\n## \n\nOOPJavaOOPJava\n\n\n\n\n\n>  +  = \n\n\n\nOOP\n\n100010010101000\n\n## Java\n\n\n\n\n\n\n\n> \n\n\n\n## \n\n\n\n```java\npublic class Person{\n    private String name;\n    private int age;\n    \n    public Person(String name, int age){\n        this.name = name;\n        this.age = age;\n    }\n    \n    public void eat(){\n        System.out.println(\"...\");\n    }\n    \n    public void say(){\n        System.out.println(\"\" + name + \"\" + age + \"\");\n    }\n}\n```\n\n`Person``name``age`Person\n\n\n\n```java\npublic class Person{\n\t...\n}\n```\n\n\n\n> [] + class + [] \n\n`public`\n\n`class`\n\n$JavaSmallCarSecondhandBook\n\n## \n\nPerson\n\n```java\nprivate String name;\nprivate int age;\n```\n\nPersonPerson\n\n\n\n> [] + [] + []\n\n```java\npublic void eat(){\n    System.out.println(\"...\");\n}\n\npublic void say(){\n    System.out.println(\"\" + name + \"\" + age + \"\");\n}\n```\n\n`void``a1``a2`\n\n\n\n```java\npublic Person(String name, int age){\n    this.name = name;\n    this.age = age;\n}\n```\n\n****\n\n## \n\n\n\n","source":"_posts/java/basic/java-class.md","raw":"---\ntitle: Java \ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-29 00:05:00\n---\n\n# Java \n\n>**Sometimes we stare so long at a door that is closing that we see too late the one that is open.**\n>\n> Alexander Graham Bell, Inventor\n>\n>****  ()\n\n## \n\nJavaJava\n\nJava\n\n\n\n## \n\nOOPJavaOOPJava\n\n\n\n\n\n>  +  = \n\n\n\nOOP\n\n100010010101000\n\n## Java\n\n\n\n\n\n\n\n> \n\n\n\n## \n\n\n\n```java\npublic class Person{\n    private String name;\n    private int age;\n    \n    public Person(String name, int age){\n        this.name = name;\n        this.age = age;\n    }\n    \n    public void eat(){\n        System.out.println(\"...\");\n    }\n    \n    public void say(){\n        System.out.println(\"\" + name + \"\" + age + \"\");\n    }\n}\n```\n\n`Person``name``age`Person\n\n\n\n```java\npublic class Person{\n\t...\n}\n```\n\n\n\n> [] + class + [] \n\n`public`\n\n`class`\n\n$JavaSmallCarSecondhandBook\n\n## \n\nPerson\n\n```java\nprivate String name;\nprivate int age;\n```\n\nPersonPerson\n\n\n\n> [] + [] + []\n\n```java\npublic void eat(){\n    System.out.println(\"...\");\n}\n\npublic void say(){\n    System.out.println(\"\" + name + \"\" + age + \"\");\n}\n```\n\n`void``a1``a2`\n\n\n\n```java\npublic Person(String name, int age){\n    this.name = name;\n    this.age = age;\n}\n```\n\n****\n\n## \n\n\n\n","slug":"java/basic/java-class","published":1,"updated":"2019-01-02T14:25:23.238Z","_id":"cjq7rm5pp001dwu9kiqywhhqh","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h1><blockquote>\n<p><strong>Sometimes we stare so long at a door that is closing that we see too late the one that is open.</strong></p>\n<p> Alexander Graham Bell, Inventor</p>\n<p><strong></strong>  ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>OOPJavaOOPJava</p>\n<p></p>\n<p></p>\n<blockquote>\n<p> +  = </p>\n</blockquote>\n<p></p>\n<p>OOP</p>\n<p>100010010101000</p>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p></p>\n<p></p>\n<p></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Person</span><span class=\"params\">(String name, <span class=\"keyword\">int</span> age)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">eat</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"...\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">say</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + name + <span class=\"string\">\"\"</span> + age + <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Person</code><code>name</code><code>age</code>Person</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span>&#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>[] + class + [] </p>\n</blockquote>\n<p><code>public</code></p>\n<p><code>class</code></p>\n<p>$JavaSmallCarSecondhandBook</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Person</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br></pre></td></tr></table></figure>\n<p>PersonPerson</p>\n<p></p>\n<blockquote>\n<p>[] + [] + []</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">eat</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"...\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">say</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\"</span> + name + <span class=\"string\">\"\"</span> + age + <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>void</code><code>a1</code><code>a2</code></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Person</span><span class=\"params\">(String name, <span class=\"keyword\">int</span> age)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h1><blockquote>\n<p><strong>Sometimes we stare so long at a door that is closing that we see too late the one that is open.</strong></p>\n<p> Alexander Graham Bell, Inventor</p>\n<p><strong></strong>  ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>OOPJavaOOPJava</p>\n<p></p>\n<p></p>\n<blockquote>\n<p> +  = </p>\n</blockquote>\n<p></p>\n<p>OOP</p>\n<p>100010010101000</p>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p></p>\n<p></p>\n<p></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Person</span><span class=\"params\">(String name, <span class=\"keyword\">int</span> age)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">eat</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"...\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">say</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + name + <span class=\"string\">\"\"</span> + age + <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Person</code><code>name</code><code>age</code>Person</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span>&#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>[] + class + [] </p>\n</blockquote>\n<p><code>public</code></p>\n<p><code>class</code></p>\n<p>$JavaSmallCarSecondhandBook</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Person</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br></pre></td></tr></table></figure>\n<p>PersonPerson</p>\n<p></p>\n<blockquote>\n<p>[] + [] + []</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">eat</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"...\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">say</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\"</span> + name + <span class=\"string\">\"\"</span> + age + <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>void</code><code>a1</code><code>a2</code></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Person</span><span class=\"params\">(String name, <span class=\"keyword\">int</span> age)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>"},{"title":"Java ","date":"2018-12-28T16:04:00.000Z","_content":"\n>**The superior man makes the difficulty to be overcome his first interest; success comes only later.**\n>\n> William Jennings Bryan\n>\n>****      ()\n\n## \n\nJavaJava\n\n\n\n\n\n## \n\n\n\n\n\n### \n\nJava\n\n\n\n\n\n```java\npublic static void main(String[] args){\n    System.out.print(\":\");\n    Scanner in = new Scanner(System.in);\n    int a = in.nextInt();\n    System.out.print(\":\");\n    int b = in.nextInt();\n    int sum = a + b;\n    System.out.print(\":\" + sum);\n}\n```\n\n`in`Scanner`a``b``sum``a``b`\n\n\n\n### \n\n\n\n```java\npublic static void main(String[] args){\n    System.out.print(\"\");\n}\n```\n\nemmm\n\n\n\n### \n\n\n\n```java\n[] + []\n```\n\n`int a`  `int` `a` \n\n\n\n`=` java\n\n\n\n```java\npublic static void main(String[] args){\n    int a = 1;\n    System.out.println(\"a\" + a);\n    a = 2;\n    System.out.println(\"a\" + a);\n    a = 3;\n    System.out.println(\"a\" + a);\n    int b;\n    System.out.println(\"b\" + b);\n    b = a;\n    System.out.println(\"b\" + b);\n}\n```\n\n\n\n```java\na1\na2\na3\nb0\nb3\n```\n\n`System.out.println`  `System.out.print` \n\n### \n\n$javajava `public``static``int``void`\n\n`a1``a2``a3`\n\nJava`totalDays``paperWidth`\n\n## \n\nJava\n","source":"_posts/java/basic/java-variable.md","raw":"---\ntitle: Java \ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-29 00:04:00\n---\n\n>**The superior man makes the difficulty to be overcome his first interest; success comes only later.**\n>\n> William Jennings Bryan\n>\n>****      ()\n\n## \n\nJavaJava\n\n\n\n\n\n## \n\n\n\n\n\n### \n\nJava\n\n\n\n\n\n```java\npublic static void main(String[] args){\n    System.out.print(\":\");\n    Scanner in = new Scanner(System.in);\n    int a = in.nextInt();\n    System.out.print(\":\");\n    int b = in.nextInt();\n    int sum = a + b;\n    System.out.print(\":\" + sum);\n}\n```\n\n`in`Scanner`a``b``sum``a``b`\n\n\n\n### \n\n\n\n```java\npublic static void main(String[] args){\n    System.out.print(\"\");\n}\n```\n\nemmm\n\n\n\n### \n\n\n\n```java\n[] + []\n```\n\n`int a`  `int` `a` \n\n\n\n`=` java\n\n\n\n```java\npublic static void main(String[] args){\n    int a = 1;\n    System.out.println(\"a\" + a);\n    a = 2;\n    System.out.println(\"a\" + a);\n    a = 3;\n    System.out.println(\"a\" + a);\n    int b;\n    System.out.println(\"b\" + b);\n    b = a;\n    System.out.println(\"b\" + b);\n}\n```\n\n\n\n```java\na1\na2\na3\nb0\nb3\n```\n\n`System.out.println`  `System.out.print` \n\n### \n\n$javajava `public``static``int``void`\n\n`a1``a2``a3`\n\nJava`totalDays``paperWidth`\n\n## \n\nJava\n","slug":"java/basic/java-variable","published":1,"updated":"2019-01-02T14:25:23.248Z","_id":"cjq7rm5pq001gwu9k5ehnulqr","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p><strong>The superior man makes the difficulty to be overcome his first interest; success comes only later.</strong></p>\n<p> William Jennings Bryan</p>\n<p><strong></strong>      ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Java</p>\n<p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">    Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>in</code>Scanner<code>a</code><code>b</code><code>sum</code><code>a</code><code>b</code></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emmm</p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[] + []</span><br></pre></td></tr></table></figure>\n<p><code>int a</code>  <code>int</code> <code>a</code> </p>\n<p></p>\n<p><code>=</code> java</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    a = <span class=\"number\">2</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    a = <span class=\"number\">3</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> b;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"b\"</span> + b);</span><br><span class=\"line\">    b = a;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"b\"</span> + b);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a<span class=\"number\">1</span></span><br><span class=\"line\">a<span class=\"number\">2</span></span><br><span class=\"line\">a<span class=\"number\">3</span></span><br><span class=\"line\">b<span class=\"number\">0</span></span><br><span class=\"line\">b<span class=\"number\">3</span></span><br></pre></td></tr></table></figure>\n<p><code>System.out.println</code>  <code>System.out.print</code> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>$javajava <code>public</code><code>static</code><code>int</code><code>void</code></p>\n<p><code>a1</code><code>a2</code><code>a3</code></p>\n<p>Java<code>totalDays</code><code>paperWidth</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p><strong>The superior man makes the difficulty to be overcome his first interest; success comes only later.</strong></p>\n<p> William Jennings Bryan</p>\n<p><strong></strong>      ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Java</p>\n<p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">    Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>in</code>Scanner<code>a</code><code>b</code><code>sum</code><code>a</code><code>b</code></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emmm</p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[] + []</span><br></pre></td></tr></table></figure>\n<p><code>int a</code>  <code>int</code> <code>a</code> </p>\n<p></p>\n<p><code>=</code> java</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    a = <span class=\"number\">2</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    a = <span class=\"number\">3</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> b;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"b\"</span> + b);</span><br><span class=\"line\">    b = a;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"b\"</span> + b);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a<span class=\"number\">1</span></span><br><span class=\"line\">a<span class=\"number\">2</span></span><br><span class=\"line\">a<span class=\"number\">3</span></span><br><span class=\"line\">b<span class=\"number\">0</span></span><br><span class=\"line\">b<span class=\"number\">3</span></span><br></pre></td></tr></table></figure>\n<p><code>System.out.println</code>  <code>System.out.print</code> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>$javajava <code>public</code><code>static</code><code>int</code><code>void</code></p>\n<p><code>a1</code><code>a2</code><code>a3</code></p>\n<p>Java<code>totalDays</code><code>paperWidth</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n"},{"title":"Java ","date":"2018-12-28T16:02:00.000Z","_content":"\n>No matter how small and unimportant what we are doing may seem, if we do it well, it may soon become the step that will lead us to better things.\t\t\t\t Channing Pollock, Writer\n>\n>\t\t\t\t\t\t\t\t  ()\n\n## \n\nJava\n\nJava\n\n\n\n## \n\nJavaJava\n\n\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class SimpleCalculator {\n    public static void main(String[] args){\n        System.out.print(\":\");\n        Scanner in = new Scanner(System.in);\n        int a = in.nextInt();\n        System.out.print(\":\");\n        int b = in.nextInt();\n        int sum = a + b;\n        System.out.print(\":\" + sum);\n    }\n}\n```\n\nJava\n\n[](../introduction/java-package.md)\n\n```java\npublic class SimpleCalculator {\n    ...\n}\n```\n\n`SimpleCalculator``public` **`public` `class` \n\n**Java**\n\n```java\npublic static void main(String[] args){\n    ...\n}\n```\n\nmainclass`public``static``void``main``String[] args`String`args`\n\n\n\n`main`java`main``main`\n\nJava\n\n```java\nSystem.out.print(\":\");\nScanner in = new Scanner(System.in);\nint a = in.nextInt();\nSystem.out.print(\":\");\nint b = in.nextInt();\nint sum = a + b;\nSystem.out.print(\":\" + sum);\n```\n\nJava`System.out.print(...)``System.out``print`\n\nJavaJavamain\n","source":"_posts/java/basic/java-simple-structure.md","raw":"---\ntitle: Java \ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-29 00:02:00\n---\n\n>No matter how small and unimportant what we are doing may seem, if we do it well, it may soon become the step that will lead us to better things.\t\t\t\t Channing Pollock, Writer\n>\n>\t\t\t\t\t\t\t\t  ()\n\n## \n\nJava\n\nJava\n\n\n\n## \n\nJavaJava\n\n\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class SimpleCalculator {\n    public static void main(String[] args){\n        System.out.print(\":\");\n        Scanner in = new Scanner(System.in);\n        int a = in.nextInt();\n        System.out.print(\":\");\n        int b = in.nextInt();\n        int sum = a + b;\n        System.out.print(\":\" + sum);\n    }\n}\n```\n\nJava\n\n[](../introduction/java-package.md)\n\n```java\npublic class SimpleCalculator {\n    ...\n}\n```\n\n`SimpleCalculator``public` **`public` `class` \n\n**Java**\n\n```java\npublic static void main(String[] args){\n    ...\n}\n```\n\nmainclass`public``static``void``main``String[] args`String`args`\n\n\n\n`main`java`main``main`\n\nJava\n\n```java\nSystem.out.print(\":\");\nScanner in = new Scanner(System.in);\nint a = in.nextInt();\nSystem.out.print(\":\");\nint b = in.nextInt();\nint sum = a + b;\nSystem.out.print(\":\" + sum);\n```\n\nJava`System.out.print(...)``System.out``print`\n\nJavaJavamain\n","slug":"java/basic/java-simple-structure","published":1,"updated":"2019-01-02T14:25:23.248Z","_id":"cjq7rm5ps001hwu9k02afcstq","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>No matter how small and unimportant what we are doing may seem, if we do it well, it may soon become the step that will lead us to better things.                 Channing Pollock, Writer</p>\n<p>                                  ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Java</p>\n<p><a href=\"../introduction/java-package.md\"></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>SimpleCalculator</code><code>public</code> <em></em><code>public</code> <code>class</code> </p>\n<p><strong>Java</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>mainclass<code>public</code><code>static</code><code>void</code><code>main</code><code>String[] args</code>String<code>args</code></p>\n<p></p>\n<p><code>main</code>java<code>main</code><code>main</code></p>\n<p>Java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\"><span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\"><span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br></pre></td></tr></table></figure>\n<p>Java<code>System.out.print(...)</code><code>System.out</code><code>print</code></p>\n<p>JavaJavamain</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>No matter how small and unimportant what we are doing may seem, if we do it well, it may soon become the step that will lead us to better things.                 Channing Pollock, Writer</p>\n<p>                                  ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Java</p>\n<p><a href=\"../introduction/java-package.md\"></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>SimpleCalculator</code><code>public</code> <em></em><code>public</code> <code>class</code> </p>\n<p><strong>Java</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>mainclass<code>public</code><code>static</code><code>void</code><code>main</code><code>String[] args</code>String<code>args</code></p>\n<p></p>\n<p><code>main</code>java<code>main</code><code>main</code></p>\n<p>Java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\"><span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\"><span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br></pre></td></tr></table></figure>\n<p>Java<code>System.out.print(...)</code><code>System.out</code><code>print</code></p>\n<p>JavaJavamain</p>\n"},{"_content":"# WeakHashMap\n\n::: tip\n`JDK8`\n:::\n\n## \n\nJava*WeakHashMap* *Map*HashMapHashMapHashMap\n\n*WeakHashMap*  *WeakHashMap* `entry``remove()``clear()`entryisEmptycontainsKeysize\n\n\n\n1WeakHashMapEntry\n\n2WeakHashMapHashMap\n\n3WeakHashMap\n\n## WeakHashMap\n\nWeakHashMapEntryEntryHashMapEntryMap\n\n[](../reference/weak-reference.md)WeakHashMapkeykeyGC\n\n::: warning \nkeyvaluevaluekeykey\n:::\n\n[](../reference/four-kinds-of-reference.md)\n\n\n\n## \n\n![weakhashmap-1](./weakhashmap-1.png)\n\nWeakHashMapHashMapAbstractMapHashMap\n\n## \n\nWeakHashMap+HashMapJDK8keyHashMapWeakHashMap\n\n![weakhashmap-1](./weakhashmap-4.png)\n\n## \n\n```java\n// 2\nprivate static final int DEFAULT_INITIAL_CAPACITY = 16;\n\n// \nprivate static final int MAXIMUM_CAPACITY = 1 << 30;\n\n// \nprivate static final float DEFAULT_LOAD_FACTOR = 0.75f;\n\n// Entry2\nEntry<K,V>[] table;\n\n// \nprivate int size;\n\n//  \nprivate int threshold;\n\n// \nprivate final float loadFactor;\n\n// \nprivate final ReferenceQueue<Object> queue = new ReferenceQueue<>();\n\n// \nint modCount;\n```\n\nHashMapReferenceQueueReferenceQueue[](../reference/reference-queue-code-detail.md)\n\n## \n\nWeakHashMap\n\n```java\npublic WeakHashMap(int initialCapacity, float loadFactor) {\n\t...\n}\n\npublic WeakHashMap(int initialCapacity) {\n    this(initialCapacity, DEFAULT_LOAD_FACTOR);\n}\n\npublic WeakHashMap() {\n    this(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);\n}\n\npublic WeakHashMap(Map<? extends K, ? extends V> m) {\n    this(Math.max((int) (m.size() / DEFAULT_LOAD_FACTOR) + 1,\n                  DEFAULT_INITIAL_CAPACITY),\n         DEFAULT_LOAD_FACTOR);\n    putAll(m);\n}\n```\n\n\n\n```java\n// initialCapacity\nif (initialCapacity < 0)\n    throw new IllegalArgumentException(\"Illegal Initial Capacity: \"+\n                                       initialCapacity);\nif (initialCapacity > MAXIMUM_CAPACITY)\n    initialCapacity = MAXIMUM_CAPACITY;\n\n// loadFactor\nif (loadFactor <= 0 || Float.isNaN(loadFactor))\n    throw new IllegalArgumentException(\"Illegal Load factor: \"+\n                                       loadFactor);\nint capacity = 1;\n// initialCapacity2\nwhile (capacity < initialCapacity)\n    capacity <<= 1;\ntable = newTable(capacity);\nthis.loadFactor = loadFactor;\nthreshold = (int)(capacity * loadFactor);\n```\n\nnewTable\n\n```java\nprivate Entry<K,V>[] newTable(int n) {\n    return (Entry<K,V>[]) new Entry<?,?>[n];\n}\n```\n\nEntry\n\n## Entry\n\nWeakHashMapEntryWeakHashMaptableEntry\n\n```java\nEntry<K,V>[] table;\n```\n\nEntry\n\n```java\nprivate static class Entry<K,V> extends WeakReference<Object> implements Map.Entry<K,V> {\n\t...   \n}\n```\n\nEntryWeakReference\n\n![weakhashmap-1](./weakhashmap-2.png)\n\nEntry\n\n```java\n// \nV value;\nfinal int hash;\nEntry<K,V> next;\n\n// \nEntry(Object key, V value,\n      ReferenceQueue<Object> queue,\n      int hash, Entry<K,V> next) {\n    super(key, queue);\n    this.value = value;\n    this.hash  = hash;\n    this.next  = next;\n}\n```\n\nkeykey\n\n```java\nsuper(key, queue);\n```\n\nWeakReferencekeyReferencereferentReferenceWeakReference[](../reference/reference-code-detail.md)[](../reference/weak-reference-code-detail.md)\n\n\n\n```java\n@SuppressWarnings(\"unchecked\")\npublic K getKey() {\n    // Referencegetreferent\n    // WeakHashMapkeynullNULL_KEY\n    return (K) WeakHashMap.unmaskNull(get());\n}\n\npublic V getValue() {\n    return value;\n}\n\npublic V setValue(V newValue) {\n    V oldValue = value;\n    value = newValue;\n    return oldValue;\n}\n\npublic boolean equals(Object o) {\n    if (!(o instanceof Map.Entry))\n        return false;\n    Map.Entry<?,?> e = (Map.Entry<?,?>)o;\n    K k1 = getKey();\n    Object k2 = e.getKey();\n    if (k1 == k2 || (k1 != null && k1.equals(k2))) {\n        V v1 = getValue();\n        Object v2 = e.getValue();\n        if (v1 == v2 || (v1 != null && v1.equals(v2)))\n            return true;\n    }\n    return false;\n}\n\npublic int hashCode() {\n    K k = getKey();\n    V v = getValue();\n    // keyvaluehashcode\n    return Objects.hashCode(k) ^ Objects.hashCode(v);\n}\n\npublic String toString() {\n    return getKey() + \"=\" + getValue();\n}\n```\n\ngetKeyWeakHashMap.unmaskNullWeakHashMapkeynull\n\n```java\nprivate static final Object NULL_KEY = new Object();\n```\n\n\n\n```java\nprivate static Object maskNull(Object key) {\n    return (key == null) ? NULL_KEY : key;\n}\n\nstatic Object unmaskNull(Object key) {\n    return (key == NULL_KEY) ? null : key;\n}\n```\n\nWeakHashMapEntryWeakReferencekeyWeakReferenceWeakHashMapWeakReference\n\n## \n\n\n\n```java\nvoid                   clear()\nObject                 clone()\nboolean                containsKey(Object key)\nboolean                containsValue(Object value)\nSet<Entry<K, V>>       entrySet()\nV                      get(Object key)\nboolean                isEmpty()\nSet<K>                 keySet()\nV                      put(K key, V value)\nvoid                   putAll(Map<? extends K, ? extends V> map)\nV                      remove(Object key)\nint                    size()\nCollection<V>          values()\n```\n\n\n\n### put\n\n```java\npublic V put(K key, V value) {\n    // null\n    Object k = maskNull(key);\n    // hash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int i = indexFor(h, tab.length);\n\n    // Entry\n    for (Entry<K,V> e = tab[i]; e != null; e = e.next) {\n        if (h == e.hash && eq(k, e.get())) {\n            V oldValue = e.value;\n            if (value != oldValue)\n                e.value = value;\n            return oldValue;\n        }\n    }\n\t\n    modCount++;\n    Entry<K,V> e = tab[i];\n    tab[i] = new Entry<>(k, value, queue, h, e);\n    // \n    if (++size >= threshold)\n        resize(tab.length * 2);\n    return null;\n}\n```\n\n\n\nhash\n\n```java\nfinal int hash(Object k) {\n    int h = k.hashCode();\n    // \n    h ^= (h >>> 20) ^ (h >>> 12);\n    return h ^ (h >>> 7) ^ (h >>> 4);\n}\n```\n\nhashkeyhashcodeEntry2indexget\n\n20,12,7,4emmm\n\nindexFor1hashcodelength21hashcode mod length\n\n```java\nprivate static int indexFor(int h, int length) {\n    return h & (length-1);\n}\n```\n\ngetTable\n\n```java\nprivate Entry<K,V>[] getTable() {\n    // Entry\n    expungeStaleEntries();\n    return table;\n}\n\nprivate void expungeStaleEntries() {\n    for (Object x; (x = queue.poll()) != null; ) {\n        // \n        synchronized (queue) {\n            @SuppressWarnings(\"unchecked\")\n            Entry<K,V> e = (Entry<K,V>) x;\n            // \n            int i = indexFor(e.hash, table.length);\n\n            // Entry\n            Entry<K,V> prev = table[i];\n            Entry<K,V> p = prev;\n            // \n            while (p != null) {\n                Entry<K,V> next = p.next;\n                if (p == e) {\n                    if (prev == e)\n                        table[i] = next;\n                    else\n                        prev.next = next;\n                    // valuenullGC\n                    e.value = null;\n                    size--;\n                    break;\n                }\n                prev = p;\n                p = next;\n            }\n        }\n    }\n}\n```\n\ngetTabletablekeyEntry\n\nresize\n\n```java\nvoid resize(int newCapacity) {\n    // table\n    Entry<K,V>[] oldTable = getTable();\n    int oldCapacity = oldTable.length;\n    if (oldCapacity == MAXIMUM_CAPACITY) {\n        threshold = Integer.MAX_VALUE;\n        return;\n    }\n\n    // table\n    Entry<K,V>[] newTable = newTable(newCapacity);\n    // tabletable\n    transfer(oldTable, newTable);\n    table = newTable;\n\n    if (size >= threshold / 2) {\n        threshold = (int)(newCapacity * loadFactor);\n    } else {\n        expungeStaleEntries();\n        transfer(newTable, oldTable);\n        table = oldTable;\n    }\n}\n// Entry\nprivate Entry<K,V>[] newTable(int n) {\n    return (Entry<K,V>[]) new Entry<?,?>[n];\n}\n\nprivate void transfer(Entry<K,V>[] src, Entry<K,V>[] dest) {\n    for (int j = 0; j < src.length; ++j) {\n        Entry<K,V> e = src[j];\n        src[j] = null;\n        while (e != null) {\n            Entry<K,V> next = e.next;\n            Object key = e.get();\n            if (key == null) {\n                e.next = null; \n                e.value = null; \n                size--;\n            } else {\n                int i = indexFor(e.hash, dest.length);\n                e.next = dest[i];\n                dest[i] = e;\n            }\n            e = next;\n        }\n    }\n}\n```\n\n### get\n\n```java\npublic V get(Object key) {\n    // null\n    Object k = maskNull(key);\n    // keyhash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int index = indexFor(h, tab.length);\n    Entry<K,V> e = tab[index];\n    // \n    while (e != null) {\n        if (e.hash == h && eq(k, e.get()))\n            return e.value;\n        e = e.next;\n    }\n    return null;\n}\n```\n\neq\n\n```java\nprivate static boolean eq(Object x, Object y) {\n    return x == y || x.equals(y);\n}\n```\n\n### remove\n\n```java\npublic V remove(Object key) {\n    // null\n    Object k = maskNull(key);\n    // keyhash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int i = indexFor(h, tab.length);\n    Entry<K,V> prev = tab[i];\n    Entry<K,V> e = prev;\n\n    while (e != null) {\n        Entry<K,V> next = e.next;\n        // Entry\n        if (h == e.hash && eq(k, e.get())) {\n            modCount++;\n            size--;\n            if (prev == e)\n                tab[i] = next;\n            else\n                prev.next = next;\n            // Entryvalue\n            return e.value;\n        }\n        prev = e;\n        e = next;\n    }\n\n    return null;\n}\n```\n\n## \n\n```java\npublic class WeakHashMapTest {\n    public static void main(String[] args){\n        testWeakHashMap();\n    }\n\n    private static void testWeakHashMap() {\n        // 3Stringkey\n        String w1 = new String(\"key1\");\n        String w2 = new String(\"key2\");\n        String w3 = new String(\"key3\");\n\n        // WeakHashMap\n        Map weakHashMap = new WeakHashMap();\n\n        // \n        weakHashMap.put(w1, \"v1\");\n        weakHashMap.put(w2, \"v2\");\n        weakHashMap.put(w3, \"v3\");\n\n        // weakHashMap\n        System.out.printf(\"weakHashMap:%s\\n\", weakHashMap);\n\n        // containsKey(Object key) :key\n        System.out.printf(\"contains key key1 : %s\\n\",weakHashMap.containsKey(\"key1\"));\n        System.out.printf(\"contains key key4 : %s\\n\",weakHashMap.containsKey(\"key4\"));\n\n        // containsValue(Object value) :value\n        System.out.printf(\"contains value v1 : %s\\n\",weakHashMap.containsValue(\"v1\"));\n        System.out.printf(\"contains value 0 : %s\\n\",weakHashMap.containsValue(0));\n\n        // remove(Object key)  key\n        weakHashMap.remove(\"three\");\n\n        System.out.printf(\"weakHashMap: %s\\n\", weakHashMap);\n\n\n        // ----  WeakHashMap  ----\n\n        // w1null\n        // w1gcWeakHashMapw1\n        w1 = null;\n\n        // WeakHashMapw1\n        System.gc();\n\n        // WeakHashMap\n        Iterator iter = weakHashMap.entrySet().iterator();\n        while (iter.hasNext()) {\n            Map.Entry en = (Map.Entry)iter.next();\n            System.out.printf(\"next : %s - %s\\n\",en.getKey(),en.getValue());\n        }\n        // WeakHashMap\n        System.out.printf(\"after gc WeakHashMap size:%s\\n\", weakHashMap.size());\n    }\n}\n```\n\n\n\n```java\nweakHashMap:{key1=w1, key2=w2, key3=w3}\ncontains key key1 : true\ncontains key key4 : false\ncontains value w1 : true\ncontains value 0 : false\nweakHashMap: {key1=w1, key2=w2, key3=w3}\nnext : key2 - w2\nnext : key3 - w3\nafter gc WeakHashMap size:2\n```\n\nw1EntryWeakHashMap\n\n## \n\nWeakHashMapEntry\n\n```java\npublic final class ConcurrentCache<K,V> {\n\n    private final int size;\n\n    private final Map<K,V> eden;\n\n    private final Map<K,V> longterm;\n\n    public ConcurrentCache(int size) {\n        this.size = size;\n        this.eden = new ConcurrentHashMap<>(size);\n        this.longterm = new WeakHashMap<>(size);\n    }\n\n    public V get(K k) {\n        V v = this.eden.get(k);\n        if (v == null) {\n            synchronized (longterm) {\n                v = this.longterm.get(k);\n            }\n            if (v != null) {\n                this.eden.put(k, v);\n            }\n        }\n        return v;\n    }\n\n    public void put(K k, V v) {\n        if (this.eden.size() >= size) {\n            synchronized (longterm) {\n                this.longterm.putAll(this.eden);\n            }\n            this.eden.clear();\n        }\n        this.eden.put(k, v);\n    }\n}\n```\n\nputedenedenedenlongtermlongtermedeneden\n\ngetedenvaluelongtermeden\n\nedenlongtermWeakHashMapEntrylongtermOOM\n\nWeakHashMap\n\n```java\nWeakHashMap<String,Map<K,V>> transactionCache;\n```\n\nkeyStringidvaluemapHashMapLinkedHashMap\n\nidkeymap\n\n## \n\n- WeakHashMapEntryMap\n- WeakHashMapHashMap\n- WeakHashMap+\n- WeakHashMap","source":"_posts/java/collection/weakhashmap-code-detail.md","raw":"# WeakHashMap\n\n::: tip\n`JDK8`\n:::\n\n## \n\nJava*WeakHashMap* *Map*HashMapHashMapHashMap\n\n*WeakHashMap*  *WeakHashMap* `entry``remove()``clear()`entryisEmptycontainsKeysize\n\n\n\n1WeakHashMapEntry\n\n2WeakHashMapHashMap\n\n3WeakHashMap\n\n## WeakHashMap\n\nWeakHashMapEntryEntryHashMapEntryMap\n\n[](../reference/weak-reference.md)WeakHashMapkeykeyGC\n\n::: warning \nkeyvaluevaluekeykey\n:::\n\n[](../reference/four-kinds-of-reference.md)\n\n\n\n## \n\n![weakhashmap-1](./weakhashmap-1.png)\n\nWeakHashMapHashMapAbstractMapHashMap\n\n## \n\nWeakHashMap+HashMapJDK8keyHashMapWeakHashMap\n\n![weakhashmap-1](./weakhashmap-4.png)\n\n## \n\n```java\n// 2\nprivate static final int DEFAULT_INITIAL_CAPACITY = 16;\n\n// \nprivate static final int MAXIMUM_CAPACITY = 1 << 30;\n\n// \nprivate static final float DEFAULT_LOAD_FACTOR = 0.75f;\n\n// Entry2\nEntry<K,V>[] table;\n\n// \nprivate int size;\n\n//  \nprivate int threshold;\n\n// \nprivate final float loadFactor;\n\n// \nprivate final ReferenceQueue<Object> queue = new ReferenceQueue<>();\n\n// \nint modCount;\n```\n\nHashMapReferenceQueueReferenceQueue[](../reference/reference-queue-code-detail.md)\n\n## \n\nWeakHashMap\n\n```java\npublic WeakHashMap(int initialCapacity, float loadFactor) {\n\t...\n}\n\npublic WeakHashMap(int initialCapacity) {\n    this(initialCapacity, DEFAULT_LOAD_FACTOR);\n}\n\npublic WeakHashMap() {\n    this(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);\n}\n\npublic WeakHashMap(Map<? extends K, ? extends V> m) {\n    this(Math.max((int) (m.size() / DEFAULT_LOAD_FACTOR) + 1,\n                  DEFAULT_INITIAL_CAPACITY),\n         DEFAULT_LOAD_FACTOR);\n    putAll(m);\n}\n```\n\n\n\n```java\n// initialCapacity\nif (initialCapacity < 0)\n    throw new IllegalArgumentException(\"Illegal Initial Capacity: \"+\n                                       initialCapacity);\nif (initialCapacity > MAXIMUM_CAPACITY)\n    initialCapacity = MAXIMUM_CAPACITY;\n\n// loadFactor\nif (loadFactor <= 0 || Float.isNaN(loadFactor))\n    throw new IllegalArgumentException(\"Illegal Load factor: \"+\n                                       loadFactor);\nint capacity = 1;\n// initialCapacity2\nwhile (capacity < initialCapacity)\n    capacity <<= 1;\ntable = newTable(capacity);\nthis.loadFactor = loadFactor;\nthreshold = (int)(capacity * loadFactor);\n```\n\nnewTable\n\n```java\nprivate Entry<K,V>[] newTable(int n) {\n    return (Entry<K,V>[]) new Entry<?,?>[n];\n}\n```\n\nEntry\n\n## Entry\n\nWeakHashMapEntryWeakHashMaptableEntry\n\n```java\nEntry<K,V>[] table;\n```\n\nEntry\n\n```java\nprivate static class Entry<K,V> extends WeakReference<Object> implements Map.Entry<K,V> {\n\t...   \n}\n```\n\nEntryWeakReference\n\n![weakhashmap-1](./weakhashmap-2.png)\n\nEntry\n\n```java\n// \nV value;\nfinal int hash;\nEntry<K,V> next;\n\n// \nEntry(Object key, V value,\n      ReferenceQueue<Object> queue,\n      int hash, Entry<K,V> next) {\n    super(key, queue);\n    this.value = value;\n    this.hash  = hash;\n    this.next  = next;\n}\n```\n\nkeykey\n\n```java\nsuper(key, queue);\n```\n\nWeakReferencekeyReferencereferentReferenceWeakReference[](../reference/reference-code-detail.md)[](../reference/weak-reference-code-detail.md)\n\n\n\n```java\n@SuppressWarnings(\"unchecked\")\npublic K getKey() {\n    // Referencegetreferent\n    // WeakHashMapkeynullNULL_KEY\n    return (K) WeakHashMap.unmaskNull(get());\n}\n\npublic V getValue() {\n    return value;\n}\n\npublic V setValue(V newValue) {\n    V oldValue = value;\n    value = newValue;\n    return oldValue;\n}\n\npublic boolean equals(Object o) {\n    if (!(o instanceof Map.Entry))\n        return false;\n    Map.Entry<?,?> e = (Map.Entry<?,?>)o;\n    K k1 = getKey();\n    Object k2 = e.getKey();\n    if (k1 == k2 || (k1 != null && k1.equals(k2))) {\n        V v1 = getValue();\n        Object v2 = e.getValue();\n        if (v1 == v2 || (v1 != null && v1.equals(v2)))\n            return true;\n    }\n    return false;\n}\n\npublic int hashCode() {\n    K k = getKey();\n    V v = getValue();\n    // keyvaluehashcode\n    return Objects.hashCode(k) ^ Objects.hashCode(v);\n}\n\npublic String toString() {\n    return getKey() + \"=\" + getValue();\n}\n```\n\ngetKeyWeakHashMap.unmaskNullWeakHashMapkeynull\n\n```java\nprivate static final Object NULL_KEY = new Object();\n```\n\n\n\n```java\nprivate static Object maskNull(Object key) {\n    return (key == null) ? NULL_KEY : key;\n}\n\nstatic Object unmaskNull(Object key) {\n    return (key == NULL_KEY) ? null : key;\n}\n```\n\nWeakHashMapEntryWeakReferencekeyWeakReferenceWeakHashMapWeakReference\n\n## \n\n\n\n```java\nvoid                   clear()\nObject                 clone()\nboolean                containsKey(Object key)\nboolean                containsValue(Object value)\nSet<Entry<K, V>>       entrySet()\nV                      get(Object key)\nboolean                isEmpty()\nSet<K>                 keySet()\nV                      put(K key, V value)\nvoid                   putAll(Map<? extends K, ? extends V> map)\nV                      remove(Object key)\nint                    size()\nCollection<V>          values()\n```\n\n\n\n### put\n\n```java\npublic V put(K key, V value) {\n    // null\n    Object k = maskNull(key);\n    // hash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int i = indexFor(h, tab.length);\n\n    // Entry\n    for (Entry<K,V> e = tab[i]; e != null; e = e.next) {\n        if (h == e.hash && eq(k, e.get())) {\n            V oldValue = e.value;\n            if (value != oldValue)\n                e.value = value;\n            return oldValue;\n        }\n    }\n\t\n    modCount++;\n    Entry<K,V> e = tab[i];\n    tab[i] = new Entry<>(k, value, queue, h, e);\n    // \n    if (++size >= threshold)\n        resize(tab.length * 2);\n    return null;\n}\n```\n\n\n\nhash\n\n```java\nfinal int hash(Object k) {\n    int h = k.hashCode();\n    // \n    h ^= (h >>> 20) ^ (h >>> 12);\n    return h ^ (h >>> 7) ^ (h >>> 4);\n}\n```\n\nhashkeyhashcodeEntry2indexget\n\n20,12,7,4emmm\n\nindexFor1hashcodelength21hashcode mod length\n\n```java\nprivate static int indexFor(int h, int length) {\n    return h & (length-1);\n}\n```\n\ngetTable\n\n```java\nprivate Entry<K,V>[] getTable() {\n    // Entry\n    expungeStaleEntries();\n    return table;\n}\n\nprivate void expungeStaleEntries() {\n    for (Object x; (x = queue.poll()) != null; ) {\n        // \n        synchronized (queue) {\n            @SuppressWarnings(\"unchecked\")\n            Entry<K,V> e = (Entry<K,V>) x;\n            // \n            int i = indexFor(e.hash, table.length);\n\n            // Entry\n            Entry<K,V> prev = table[i];\n            Entry<K,V> p = prev;\n            // \n            while (p != null) {\n                Entry<K,V> next = p.next;\n                if (p == e) {\n                    if (prev == e)\n                        table[i] = next;\n                    else\n                        prev.next = next;\n                    // valuenullGC\n                    e.value = null;\n                    size--;\n                    break;\n                }\n                prev = p;\n                p = next;\n            }\n        }\n    }\n}\n```\n\ngetTabletablekeyEntry\n\nresize\n\n```java\nvoid resize(int newCapacity) {\n    // table\n    Entry<K,V>[] oldTable = getTable();\n    int oldCapacity = oldTable.length;\n    if (oldCapacity == MAXIMUM_CAPACITY) {\n        threshold = Integer.MAX_VALUE;\n        return;\n    }\n\n    // table\n    Entry<K,V>[] newTable = newTable(newCapacity);\n    // tabletable\n    transfer(oldTable, newTable);\n    table = newTable;\n\n    if (size >= threshold / 2) {\n        threshold = (int)(newCapacity * loadFactor);\n    } else {\n        expungeStaleEntries();\n        transfer(newTable, oldTable);\n        table = oldTable;\n    }\n}\n// Entry\nprivate Entry<K,V>[] newTable(int n) {\n    return (Entry<K,V>[]) new Entry<?,?>[n];\n}\n\nprivate void transfer(Entry<K,V>[] src, Entry<K,V>[] dest) {\n    for (int j = 0; j < src.length; ++j) {\n        Entry<K,V> e = src[j];\n        src[j] = null;\n        while (e != null) {\n            Entry<K,V> next = e.next;\n            Object key = e.get();\n            if (key == null) {\n                e.next = null; \n                e.value = null; \n                size--;\n            } else {\n                int i = indexFor(e.hash, dest.length);\n                e.next = dest[i];\n                dest[i] = e;\n            }\n            e = next;\n        }\n    }\n}\n```\n\n### get\n\n```java\npublic V get(Object key) {\n    // null\n    Object k = maskNull(key);\n    // keyhash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int index = indexFor(h, tab.length);\n    Entry<K,V> e = tab[index];\n    // \n    while (e != null) {\n        if (e.hash == h && eq(k, e.get()))\n            return e.value;\n        e = e.next;\n    }\n    return null;\n}\n```\n\neq\n\n```java\nprivate static boolean eq(Object x, Object y) {\n    return x == y || x.equals(y);\n}\n```\n\n### remove\n\n```java\npublic V remove(Object key) {\n    // null\n    Object k = maskNull(key);\n    // keyhash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int i = indexFor(h, tab.length);\n    Entry<K,V> prev = tab[i];\n    Entry<K,V> e = prev;\n\n    while (e != null) {\n        Entry<K,V> next = e.next;\n        // Entry\n        if (h == e.hash && eq(k, e.get())) {\n            modCount++;\n            size--;\n            if (prev == e)\n                tab[i] = next;\n            else\n                prev.next = next;\n            // Entryvalue\n            return e.value;\n        }\n        prev = e;\n        e = next;\n    }\n\n    return null;\n}\n```\n\n## \n\n```java\npublic class WeakHashMapTest {\n    public static void main(String[] args){\n        testWeakHashMap();\n    }\n\n    private static void testWeakHashMap() {\n        // 3Stringkey\n        String w1 = new String(\"key1\");\n        String w2 = new String(\"key2\");\n        String w3 = new String(\"key3\");\n\n        // WeakHashMap\n        Map weakHashMap = new WeakHashMap();\n\n        // \n        weakHashMap.put(w1, \"v1\");\n        weakHashMap.put(w2, \"v2\");\n        weakHashMap.put(w3, \"v3\");\n\n        // weakHashMap\n        System.out.printf(\"weakHashMap:%s\\n\", weakHashMap);\n\n        // containsKey(Object key) :key\n        System.out.printf(\"contains key key1 : %s\\n\",weakHashMap.containsKey(\"key1\"));\n        System.out.printf(\"contains key key4 : %s\\n\",weakHashMap.containsKey(\"key4\"));\n\n        // containsValue(Object value) :value\n        System.out.printf(\"contains value v1 : %s\\n\",weakHashMap.containsValue(\"v1\"));\n        System.out.printf(\"contains value 0 : %s\\n\",weakHashMap.containsValue(0));\n\n        // remove(Object key)  key\n        weakHashMap.remove(\"three\");\n\n        System.out.printf(\"weakHashMap: %s\\n\", weakHashMap);\n\n\n        // ----  WeakHashMap  ----\n\n        // w1null\n        // w1gcWeakHashMapw1\n        w1 = null;\n\n        // WeakHashMapw1\n        System.gc();\n\n        // WeakHashMap\n        Iterator iter = weakHashMap.entrySet().iterator();\n        while (iter.hasNext()) {\n            Map.Entry en = (Map.Entry)iter.next();\n            System.out.printf(\"next : %s - %s\\n\",en.getKey(),en.getValue());\n        }\n        // WeakHashMap\n        System.out.printf(\"after gc WeakHashMap size:%s\\n\", weakHashMap.size());\n    }\n}\n```\n\n\n\n```java\nweakHashMap:{key1=w1, key2=w2, key3=w3}\ncontains key key1 : true\ncontains key key4 : false\ncontains value w1 : true\ncontains value 0 : false\nweakHashMap: {key1=w1, key2=w2, key3=w3}\nnext : key2 - w2\nnext : key3 - w3\nafter gc WeakHashMap size:2\n```\n\nw1EntryWeakHashMap\n\n## \n\nWeakHashMapEntry\n\n```java\npublic final class ConcurrentCache<K,V> {\n\n    private final int size;\n\n    private final Map<K,V> eden;\n\n    private final Map<K,V> longterm;\n\n    public ConcurrentCache(int size) {\n        this.size = size;\n        this.eden = new ConcurrentHashMap<>(size);\n        this.longterm = new WeakHashMap<>(size);\n    }\n\n    public V get(K k) {\n        V v = this.eden.get(k);\n        if (v == null) {\n            synchronized (longterm) {\n                v = this.longterm.get(k);\n            }\n            if (v != null) {\n                this.eden.put(k, v);\n            }\n        }\n        return v;\n    }\n\n    public void put(K k, V v) {\n        if (this.eden.size() >= size) {\n            synchronized (longterm) {\n                this.longterm.putAll(this.eden);\n            }\n            this.eden.clear();\n        }\n        this.eden.put(k, v);\n    }\n}\n```\n\nputedenedenedenlongtermlongtermedeneden\n\ngetedenvaluelongtermeden\n\nedenlongtermWeakHashMapEntrylongtermOOM\n\nWeakHashMap\n\n```java\nWeakHashMap<String,Map<K,V>> transactionCache;\n```\n\nkeyStringidvaluemapHashMapLinkedHashMap\n\nidkeymap\n\n## \n\n- WeakHashMapEntryMap\n- WeakHashMapHashMap\n- WeakHashMap+\n- WeakHashMap","slug":"java/collection/weakhashmap-code-detail","published":1,"date":"2019-01-02T14:25:23.258Z","updated":"2019-01-02T14:25:23.258Z","_id":"cjq7rm5pt001iwu9kjvb2m7zv","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"WeakHashMap\"><a href=\"#WeakHashMap\" class=\"headerlink\" title=\"WeakHashMap\"></a>WeakHashMap</h1><p>::: tip<br><code>JDK8</code><br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java<em>WeakHashMap</em> <em>Map</em>HashMapHashMapHashMap</p>\n<p><em>WeakHashMap</em>  <em>WeakHashMap</em> <code>entry</code><code>remove()</code><code>clear()</code>entryisEmptycontainsKeysize</p>\n<p></p>\n<p>1WeakHashMapEntry</p>\n<p>2WeakHashMapHashMap</p>\n<p>3WeakHashMap</p>\n<h2 id=\"WeakHashMap\"><a href=\"#WeakHashMap\" class=\"headerlink\" title=\"WeakHashMap\"></a>WeakHashMap</h2><p>WeakHashMapEntryEntryHashMapEntryMap</p>\n<p><a href=\"../reference/weak-reference.md\"></a>WeakHashMapkeykeyGC</p>\n<p>::: warning<br>keyvaluevaluekeykey<br>:::</p>\n<p><a href=\"../reference/four-kinds-of-reference.md\"></a></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./weakhashmap-1.png\" alt=\"weakhashmap-1\" title=\"\">\n                </div>\n                <div class=\"image-caption\">weakhashmap-1</div>\n            </figure>\n<p>WeakHashMapHashMapAbstractMapHashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMap+HashMapJDK8keyHashMapWeakHashMap</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./weakhashmap-4.png\" alt=\"weakhashmap-1\" title=\"\">\n                </div>\n                <div class=\"image-caption\">weakhashmap-1</div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DEFAULT_INITIAL_CAPACITY = <span class=\"number\">16</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAXIMUM_CAPACITY = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">30</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> DEFAULT_LOAD_FACTOR = <span class=\"number\">0.75f</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Entry2</span></span><br><span class=\"line\">Entry&lt;K,V&gt;[] table;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> threshold;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> loadFactor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;Object&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">int</span> modCount;</span><br></pre></td></tr></table></figure>\n<p>HashMapReferenceQueueReferenceQueue<a href=\"../reference/reference-queue-code-detail.md\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity, <span class=\"keyword\">float</span> loadFactor)</span> </span>&#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(Math.max((<span class=\"keyword\">int</span>) (m.size() / DEFAULT_LOAD_FACTOR) + <span class=\"number\">1</span>,</span><br><span class=\"line\">                  DEFAULT_INITIAL_CAPACITY),</span><br><span class=\"line\">         DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">    putAll(m);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// initialCapacity</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (initialCapacity &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal Initial Capacity: \"</span>+</span><br><span class=\"line\">                                       initialCapacity);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class=\"line\">    initialCapacity = MAXIMUM_CAPACITY;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// loadFactor</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (loadFactor &lt;= <span class=\"number\">0</span> || Float.isNaN(loadFactor))</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal Load factor: \"</span>+</span><br><span class=\"line\">                                       loadFactor);</span><br><span class=\"line\"><span class=\"keyword\">int</span> capacity = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"comment\">// initialCapacity2</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (capacity &lt; initialCapacity)</span><br><span class=\"line\">    capacity &lt;&lt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">table = newTable(capacity);</span><br><span class=\"line\"><span class=\"keyword\">this</span>.loadFactor = loadFactor;</span><br><span class=\"line\">threshold = (<span class=\"keyword\">int</span>)(capacity * loadFactor);</span><br></pre></td></tr></table></figure>\n<p>newTable</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] newTable(<span class=\"keyword\">int</span> n) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (Entry&lt;K,V&gt;[]) <span class=\"keyword\">new</span> Entry&lt;?,?&gt;[n];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Entry</p>\n<h2 id=\"Entry\"><a href=\"#Entry\" class=\"headerlink\" title=\"Entry\"></a>Entry</h2><p>WeakHashMapEntryWeakHashMaptableEntry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Entry&lt;K,V&gt;[] table;</span><br></pre></td></tr></table></figure>\n<p>Entry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">WeakReference</span>&lt;<span class=\"title\">Object</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">Map</span>.<span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">\t...   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>EntryWeakReference</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./weakhashmap-2.png\" alt=\"weakhashmap-1\" title=\"\">\n                </div>\n                <div class=\"image-caption\">weakhashmap-1</div>\n            </figure>\n<p>Entry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">V value;</span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"keyword\">int</span> hash;</span><br><span class=\"line\">Entry&lt;K,V&gt; next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Entry(Object key, V value,</span><br><span class=\"line\">      ReferenceQueue&lt;Object&gt; queue,</span><br><span class=\"line\">      <span class=\"keyword\">int</span> hash, Entry&lt;K,V&gt; next) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(key, queue);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hash  = hash;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.next  = next;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>keykey</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">super</span>(key, queue);</span><br></pre></td></tr></table></figure>\n<p>WeakReferencekeyReferencereferentReferenceWeakReference<a href=\"../reference/reference-code-detail.md\"></a><a href=\"../reference/weak-reference-code-detail.md\"></a></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> K <span class=\"title\">getKey</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Referencegetreferent</span></span><br><span class=\"line\">    <span class=\"comment\">// WeakHashMapkeynullNULL_KEY</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (K) WeakHashMap.unmaskNull(get());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">setValue</span><span class=\"params\">(V newValue)</span> </span>&#123;</span><br><span class=\"line\">    V oldValue = value;</span><br><span class=\"line\">    value = newValue;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">equals</span><span class=\"params\">(Object o)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(o <span class=\"keyword\">instanceof</span> Map.Entry))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class=\"line\">    K k1 = getKey();</span><br><span class=\"line\">    Object k2 = e.getKey();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (k1 == k2 || (k1 != <span class=\"keyword\">null</span> &amp;&amp; k1.equals(k2))) &#123;</span><br><span class=\"line\">        V v1 = getValue();</span><br><span class=\"line\">        Object v2 = e.getValue();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v1 == v2 || (v1 != <span class=\"keyword\">null</span> &amp;&amp; v1.equals(v2)))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">hashCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    K k = getKey();</span><br><span class=\"line\">    V v = getValue();</span><br><span class=\"line\">    <span class=\"comment\">// keyvaluehashcode</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Objects.hashCode(k) ^ Objects.hashCode(v);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> getKey() + <span class=\"string\">\"=\"</span> + getValue();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getKeyWeakHashMap.unmaskNullWeakHashMapkeynull</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object NULL_KEY = <span class=\"keyword\">new</span> Object();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Object <span class=\"title\">maskNull</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == <span class=\"keyword\">null</span>) ? NULL_KEY : key;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> Object <span class=\"title\">unmaskNull</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == NULL_KEY) ? <span class=\"keyword\">null</span> : key;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>WeakHashMapEntryWeakReferencekeyWeakReferenceWeakHashMapWeakReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>                   <span class=\"title\">clear</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Object                 <span class=\"title\">clone</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">containsKey</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">containsValue</span><span class=\"params\">(Object value)</span></span></span><br><span class=\"line\"><span class=\"function\">Set&lt;Entry&lt;K, V&gt;&gt;       <span class=\"title\">entrySet</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">get</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">isEmpty</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Set&lt;K&gt;                 <span class=\"title\">keySet</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>                   <span class=\"title\">putAll</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; map)</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">remove</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span>                    <span class=\"title\">size</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Collection&lt;V&gt;          <span class=\"title\">values</span><span class=\"params\">()</span></span></span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"put\"><a href=\"#put\" class=\"headerlink\" title=\"put\"></a>put</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// hash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = indexFor(h, tab.length);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Entry</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Entry&lt;K,V&gt; e = tab[i]; e != <span class=\"keyword\">null</span>; e = e.next) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (h == e.hash &amp;&amp; eq(k, e.get())) &#123;</span><br><span class=\"line\">            V oldValue = e.value;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (value != oldValue)</span><br><span class=\"line\">                e.value = value;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    modCount++;</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = tab[i];</span><br><span class=\"line\">    tab[i] = <span class=\"keyword\">new</span> Entry&lt;&gt;(k, value, queue, h, e);</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (++size &gt;= threshold)</span><br><span class=\"line\">        resize(tab.length * <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>hash</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">final</span> <span class=\"keyword\">int</span> <span class=\"title\">hash</span><span class=\"params\">(Object k)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = k.hashCode();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    h ^= (h &gt;&gt;&gt; <span class=\"number\">20</span>) ^ (h &gt;&gt;&gt; <span class=\"number\">12</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h ^ (h &gt;&gt;&gt; <span class=\"number\">7</span>) ^ (h &gt;&gt;&gt; <span class=\"number\">4</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>hashkeyhashcodeEntry2indexget</p>\n<p>20,12,7,4emmm</p>\n<p>indexFor1hashcodelength21hashcode mod length</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">indexFor</span><span class=\"params\">(<span class=\"keyword\">int</span> h, <span class=\"keyword\">int</span> length)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h &amp; (length-<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getTable</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] getTable() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Entry</span></span><br><span class=\"line\">    expungeStaleEntries();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> table;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">expungeStaleEntries</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Object x; (x = queue.poll()) != <span class=\"keyword\">null</span>; ) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (queue) &#123;</span><br><span class=\"line\">            <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">            Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) x;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> i = indexFor(e.hash, table.length);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// Entry</span></span><br><span class=\"line\">            Entry&lt;K,V&gt; prev = table[i];</span><br><span class=\"line\">            Entry&lt;K,V&gt; p = prev;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> (p != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                Entry&lt;K,V&gt; next = p.next;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (p == e) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (prev == e)</span><br><span class=\"line\">                        table[i] = next;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span></span><br><span class=\"line\">                        prev.next = next;</span><br><span class=\"line\">                    <span class=\"comment\">// valuenullGC</span></span><br><span class=\"line\">                    e.value = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                    size--;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                prev = p;</span><br><span class=\"line\">                p = next;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getTabletablekeyEntry</p>\n<p>resize</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">resize</span><span class=\"params\">(<span class=\"keyword\">int</span> newCapacity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] oldTable = getTable();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> oldCapacity = oldTable.length;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldCapacity == MAXIMUM_CAPACITY) &#123;</span><br><span class=\"line\">        threshold = Integer.MAX_VALUE;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] newTable = newTable(newCapacity);</span><br><span class=\"line\">    <span class=\"comment\">// tabletable</span></span><br><span class=\"line\">    transfer(oldTable, newTable);</span><br><span class=\"line\">    table = newTable;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (size &gt;= threshold / <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">        threshold = (<span class=\"keyword\">int</span>)(newCapacity * loadFactor);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        expungeStaleEntries();</span><br><span class=\"line\">        transfer(newTable, oldTable);</span><br><span class=\"line\">        table = oldTable;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Entry</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] newTable(<span class=\"keyword\">int</span> n) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (Entry&lt;K,V&gt;[]) <span class=\"keyword\">new</span> Entry&lt;?,?&gt;[n];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">transfer</span><span class=\"params\">(Entry&lt;K,V&gt;[] src, Entry&lt;K,V&gt;[] dest)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; src.length; ++j) &#123;</span><br><span class=\"line\">        Entry&lt;K,V&gt; e = src[j];</span><br><span class=\"line\">        src[j] = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            Entry&lt;K,V&gt; next = e.next;</span><br><span class=\"line\">            Object key = e.get();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (key == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                e.next = <span class=\"keyword\">null</span>; </span><br><span class=\"line\">                e.value = <span class=\"keyword\">null</span>; </span><br><span class=\"line\">                size--;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> i = indexFor(e.hash, dest.length);</span><br><span class=\"line\">                e.next = dest[i];</span><br><span class=\"line\">                dest[i] = e;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            e = next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// keyhash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> index = indexFor(h, tab.length);</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = tab[index];</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e.hash == h &amp;&amp; eq(k, e.get()))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> e.value;</span><br><span class=\"line\">        e = e.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>eq</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">eq</span><span class=\"params\">(Object x, Object y)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x == y || x.equals(y);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"remove\"><a href=\"#remove\" class=\"headerlink\" title=\"remove\"></a>remove</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">remove</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// keyhash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = indexFor(h, tab.length);</span><br><span class=\"line\">    Entry&lt;K,V&gt; prev = tab[i];</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = prev;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        Entry&lt;K,V&gt; next = e.next;</span><br><span class=\"line\">        <span class=\"comment\">// Entry</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (h == e.hash &amp;&amp; eq(k, e.get())) &#123;</span><br><span class=\"line\">            modCount++;</span><br><span class=\"line\">            size--;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (prev == e)</span><br><span class=\"line\">                tab[i] = next;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                prev.next = next;</span><br><span class=\"line\">            <span class=\"comment\">// Entryvalue</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> e.value;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        prev = e;</span><br><span class=\"line\">        e = next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakHashMapTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        testWeakHashMap();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testWeakHashMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 3Stringkey</span></span><br><span class=\"line\">        String w1 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key1\"</span>);</span><br><span class=\"line\">        String w2 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key2\"</span>);</span><br><span class=\"line\">        String w3 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key3\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        Map weakHashMap = <span class=\"keyword\">new</span> WeakHashMap();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        weakHashMap.put(w1, <span class=\"string\">\"v1\"</span>);</span><br><span class=\"line\">        weakHashMap.put(w2, <span class=\"string\">\"v2\"</span>);</span><br><span class=\"line\">        weakHashMap.put(w3, <span class=\"string\">\"v3\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// weakHashMap</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"weakHashMap:%s\\n\"</span>, weakHashMap);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// containsKey(Object key) :key</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains key key1 : %s\\n\"</span>,weakHashMap.containsKey(<span class=\"string\">\"key1\"</span>));</span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains key key4 : %s\\n\"</span>,weakHashMap.containsKey(<span class=\"string\">\"key4\"</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// containsValue(Object value) :value</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains value v1 : %s\\n\"</span>,weakHashMap.containsValue(<span class=\"string\">\"v1\"</span>));</span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains value 0 : %s\\n\"</span>,weakHashMap.containsValue(<span class=\"number\">0</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// remove(Object key)  key</span></span><br><span class=\"line\">        weakHashMap.remove(<span class=\"string\">\"three\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"weakHashMap: %s\\n\"</span>, weakHashMap);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// ----  WeakHashMap  ----</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// w1null</span></span><br><span class=\"line\">        <span class=\"comment\">// w1gcWeakHashMapw1</span></span><br><span class=\"line\">        w1 = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMapw1</span></span><br><span class=\"line\">        System.gc();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        Iterator iter = weakHashMap.entrySet().iterator();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (iter.hasNext()) &#123;</span><br><span class=\"line\">            Map.Entry en = (Map.Entry)iter.next();</span><br><span class=\"line\">            System.out.printf(<span class=\"string\">\"next : %s - %s\\n\"</span>,en.getKey(),en.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"after gc WeakHashMap size:%s\\n\"</span>, weakHashMap.size());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">weakHashMap:&#123;key1=w1, key2=w2, key3=w3&#125;</span><br><span class=\"line\">contains key key1 : <span class=\"keyword\">true</span></span><br><span class=\"line\">contains key key4 : <span class=\"keyword\">false</span></span><br><span class=\"line\">contains value w1 : <span class=\"keyword\">true</span></span><br><span class=\"line\">contains value <span class=\"number\">0</span> : <span class=\"keyword\">false</span></span><br><span class=\"line\">weakHashMap: &#123;key1=w1, key2=w2, key3=w3&#125;</span><br><span class=\"line\">next : key2 - w2</span><br><span class=\"line\">next : key3 - w3</span><br><span class=\"line\">after gc WeakHashMap size:<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<p>w1EntryWeakHashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMapEntry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcurrentCache</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; eden;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; longterm;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ConcurrentCache</span><span class=\"params\">(<span class=\"keyword\">int</span> size)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.size = size;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden = <span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(size);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.longterm = <span class=\"keyword\">new</span> WeakHashMap&lt;&gt;(size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(K k)</span> </span>&#123;</span><br><span class=\"line\">        V v = <span class=\"keyword\">this</span>.eden.get(k);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                v = <span class=\"keyword\">this</span>.longterm.get(k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (v != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> v;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(K k, V v)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.eden.size() &gt;= size) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.longterm.putAll(<span class=\"keyword\">this</span>.eden);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.eden.clear();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>putedenedenedenlongtermlongtermedeneden</p>\n<p>getedenvaluelongtermeden</p>\n<p>edenlongtermWeakHashMapEntrylongtermOOM</p>\n<p>WeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WeakHashMap&lt;String,Map&lt;K,V&gt;&gt; transactionCache;</span><br></pre></td></tr></table></figure>\n<p>keyStringidvaluemapHashMapLinkedHashMap</p>\n<p>idkeymap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>WeakHashMapEntryMap</li>\n<li>WeakHashMapHashMap</li>\n<li>WeakHashMap+</li>\n<li>WeakHashMap</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"WeakHashMap\"><a href=\"#WeakHashMap\" class=\"headerlink\" title=\"WeakHashMap\"></a>WeakHashMap</h1><p>::: tip<br><code>JDK8</code><br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java<em>WeakHashMap</em> <em>Map</em>HashMapHashMapHashMap</p>\n<p><em>WeakHashMap</em>  <em>WeakHashMap</em> <code>entry</code><code>remove()</code><code>clear()</code>entryisEmptycontainsKeysize</p>\n<p></p>\n<p>1WeakHashMapEntry</p>\n<p>2WeakHashMapHashMap</p>\n<p>3WeakHashMap</p>\n<h2 id=\"WeakHashMap\"><a href=\"#WeakHashMap\" class=\"headerlink\" title=\"WeakHashMap\"></a>WeakHashMap</h2><p>WeakHashMapEntryEntryHashMapEntryMap</p>\n<p><a href=\"../reference/weak-reference.md\"></a>WeakHashMapkeykeyGC</p>\n<p>::: warning<br>keyvaluevaluekeykey<br>:::</p>\n<p><a href=\"../reference/four-kinds-of-reference.md\"></a></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./weakhashmap-1.png\" alt=\"weakhashmap-1\" title=\"\">\n                </div>\n                <div class=\"image-caption\">weakhashmap-1</div>\n            </figure>\n<p>WeakHashMapHashMapAbstractMapHashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMap+HashMapJDK8keyHashMapWeakHashMap</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./weakhashmap-4.png\" alt=\"weakhashmap-1\" title=\"\">\n                </div>\n                <div class=\"image-caption\">weakhashmap-1</div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DEFAULT_INITIAL_CAPACITY = <span class=\"number\">16</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAXIMUM_CAPACITY = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">30</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> DEFAULT_LOAD_FACTOR = <span class=\"number\">0.75f</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Entry2</span></span><br><span class=\"line\">Entry&lt;K,V&gt;[] table;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> threshold;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> loadFactor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;Object&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">int</span> modCount;</span><br></pre></td></tr></table></figure>\n<p>HashMapReferenceQueueReferenceQueue<a href=\"../reference/reference-queue-code-detail.md\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity, <span class=\"keyword\">float</span> loadFactor)</span> </span>&#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(Math.max((<span class=\"keyword\">int</span>) (m.size() / DEFAULT_LOAD_FACTOR) + <span class=\"number\">1</span>,</span><br><span class=\"line\">                  DEFAULT_INITIAL_CAPACITY),</span><br><span class=\"line\">         DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">    putAll(m);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// initialCapacity</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (initialCapacity &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal Initial Capacity: \"</span>+</span><br><span class=\"line\">                                       initialCapacity);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class=\"line\">    initialCapacity = MAXIMUM_CAPACITY;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// loadFactor</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (loadFactor &lt;= <span class=\"number\">0</span> || Float.isNaN(loadFactor))</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal Load factor: \"</span>+</span><br><span class=\"line\">                                       loadFactor);</span><br><span class=\"line\"><span class=\"keyword\">int</span> capacity = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"comment\">// initialCapacity2</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (capacity &lt; initialCapacity)</span><br><span class=\"line\">    capacity &lt;&lt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">table = newTable(capacity);</span><br><span class=\"line\"><span class=\"keyword\">this</span>.loadFactor = loadFactor;</span><br><span class=\"line\">threshold = (<span class=\"keyword\">int</span>)(capacity * loadFactor);</span><br></pre></td></tr></table></figure>\n<p>newTable</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] newTable(<span class=\"keyword\">int</span> n) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (Entry&lt;K,V&gt;[]) <span class=\"keyword\">new</span> Entry&lt;?,?&gt;[n];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Entry</p>\n<h2 id=\"Entry\"><a href=\"#Entry\" class=\"headerlink\" title=\"Entry\"></a>Entry</h2><p>WeakHashMapEntryWeakHashMaptableEntry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Entry&lt;K,V&gt;[] table;</span><br></pre></td></tr></table></figure>\n<p>Entry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">WeakReference</span>&lt;<span class=\"title\">Object</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">Map</span>.<span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">\t...   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>EntryWeakReference</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./weakhashmap-2.png\" alt=\"weakhashmap-1\" title=\"\">\n                </div>\n                <div class=\"image-caption\">weakhashmap-1</div>\n            </figure>\n<p>Entry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">V value;</span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"keyword\">int</span> hash;</span><br><span class=\"line\">Entry&lt;K,V&gt; next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Entry(Object key, V value,</span><br><span class=\"line\">      ReferenceQueue&lt;Object&gt; queue,</span><br><span class=\"line\">      <span class=\"keyword\">int</span> hash, Entry&lt;K,V&gt; next) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(key, queue);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hash  = hash;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.next  = next;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>keykey</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">super</span>(key, queue);</span><br></pre></td></tr></table></figure>\n<p>WeakReferencekeyReferencereferentReferenceWeakReference<a href=\"../reference/reference-code-detail.md\"></a><a href=\"../reference/weak-reference-code-detail.md\"></a></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> K <span class=\"title\">getKey</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Referencegetreferent</span></span><br><span class=\"line\">    <span class=\"comment\">// WeakHashMapkeynullNULL_KEY</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (K) WeakHashMap.unmaskNull(get());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">setValue</span><span class=\"params\">(V newValue)</span> </span>&#123;</span><br><span class=\"line\">    V oldValue = value;</span><br><span class=\"line\">    value = newValue;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">equals</span><span class=\"params\">(Object o)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(o <span class=\"keyword\">instanceof</span> Map.Entry))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class=\"line\">    K k1 = getKey();</span><br><span class=\"line\">    Object k2 = e.getKey();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (k1 == k2 || (k1 != <span class=\"keyword\">null</span> &amp;&amp; k1.equals(k2))) &#123;</span><br><span class=\"line\">        V v1 = getValue();</span><br><span class=\"line\">        Object v2 = e.getValue();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v1 == v2 || (v1 != <span class=\"keyword\">null</span> &amp;&amp; v1.equals(v2)))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">hashCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    K k = getKey();</span><br><span class=\"line\">    V v = getValue();</span><br><span class=\"line\">    <span class=\"comment\">// keyvaluehashcode</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Objects.hashCode(k) ^ Objects.hashCode(v);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> getKey() + <span class=\"string\">\"=\"</span> + getValue();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getKeyWeakHashMap.unmaskNullWeakHashMapkeynull</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object NULL_KEY = <span class=\"keyword\">new</span> Object();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Object <span class=\"title\">maskNull</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == <span class=\"keyword\">null</span>) ? NULL_KEY : key;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> Object <span class=\"title\">unmaskNull</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == NULL_KEY) ? <span class=\"keyword\">null</span> : key;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>WeakHashMapEntryWeakReferencekeyWeakReferenceWeakHashMapWeakReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>                   <span class=\"title\">clear</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Object                 <span class=\"title\">clone</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">containsKey</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">containsValue</span><span class=\"params\">(Object value)</span></span></span><br><span class=\"line\"><span class=\"function\">Set&lt;Entry&lt;K, V&gt;&gt;       <span class=\"title\">entrySet</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">get</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">isEmpty</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Set&lt;K&gt;                 <span class=\"title\">keySet</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>                   <span class=\"title\">putAll</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; map)</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">remove</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span>                    <span class=\"title\">size</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Collection&lt;V&gt;          <span class=\"title\">values</span><span class=\"params\">()</span></span></span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"put\"><a href=\"#put\" class=\"headerlink\" title=\"put\"></a>put</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// hash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = indexFor(h, tab.length);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Entry</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Entry&lt;K,V&gt; e = tab[i]; e != <span class=\"keyword\">null</span>; e = e.next) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (h == e.hash &amp;&amp; eq(k, e.get())) &#123;</span><br><span class=\"line\">            V oldValue = e.value;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (value != oldValue)</span><br><span class=\"line\">                e.value = value;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    modCount++;</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = tab[i];</span><br><span class=\"line\">    tab[i] = <span class=\"keyword\">new</span> Entry&lt;&gt;(k, value, queue, h, e);</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (++size &gt;= threshold)</span><br><span class=\"line\">        resize(tab.length * <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>hash</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">final</span> <span class=\"keyword\">int</span> <span class=\"title\">hash</span><span class=\"params\">(Object k)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = k.hashCode();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    h ^= (h &gt;&gt;&gt; <span class=\"number\">20</span>) ^ (h &gt;&gt;&gt; <span class=\"number\">12</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h ^ (h &gt;&gt;&gt; <span class=\"number\">7</span>) ^ (h &gt;&gt;&gt; <span class=\"number\">4</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>hashkeyhashcodeEntry2indexget</p>\n<p>20,12,7,4emmm</p>\n<p>indexFor1hashcodelength21hashcode mod length</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">indexFor</span><span class=\"params\">(<span class=\"keyword\">int</span> h, <span class=\"keyword\">int</span> length)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h &amp; (length-<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getTable</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] getTable() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Entry</span></span><br><span class=\"line\">    expungeStaleEntries();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> table;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">expungeStaleEntries</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Object x; (x = queue.poll()) != <span class=\"keyword\">null</span>; ) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (queue) &#123;</span><br><span class=\"line\">            <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">            Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) x;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> i = indexFor(e.hash, table.length);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// Entry</span></span><br><span class=\"line\">            Entry&lt;K,V&gt; prev = table[i];</span><br><span class=\"line\">            Entry&lt;K,V&gt; p = prev;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> (p != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                Entry&lt;K,V&gt; next = p.next;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (p == e) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (prev == e)</span><br><span class=\"line\">                        table[i] = next;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span></span><br><span class=\"line\">                        prev.next = next;</span><br><span class=\"line\">                    <span class=\"comment\">// valuenullGC</span></span><br><span class=\"line\">                    e.value = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                    size--;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                prev = p;</span><br><span class=\"line\">                p = next;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getTabletablekeyEntry</p>\n<p>resize</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">resize</span><span class=\"params\">(<span class=\"keyword\">int</span> newCapacity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] oldTable = getTable();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> oldCapacity = oldTable.length;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldCapacity == MAXIMUM_CAPACITY) &#123;</span><br><span class=\"line\">        threshold = Integer.MAX_VALUE;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] newTable = newTable(newCapacity);</span><br><span class=\"line\">    <span class=\"comment\">// tabletable</span></span><br><span class=\"line\">    transfer(oldTable, newTable);</span><br><span class=\"line\">    table = newTable;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (size &gt;= threshold / <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">        threshold = (<span class=\"keyword\">int</span>)(newCapacity * loadFactor);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        expungeStaleEntries();</span><br><span class=\"line\">        transfer(newTable, oldTable);</span><br><span class=\"line\">        table = oldTable;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Entry</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] newTable(<span class=\"keyword\">int</span> n) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (Entry&lt;K,V&gt;[]) <span class=\"keyword\">new</span> Entry&lt;?,?&gt;[n];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">transfer</span><span class=\"params\">(Entry&lt;K,V&gt;[] src, Entry&lt;K,V&gt;[] dest)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; src.length; ++j) &#123;</span><br><span class=\"line\">        Entry&lt;K,V&gt; e = src[j];</span><br><span class=\"line\">        src[j] = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            Entry&lt;K,V&gt; next = e.next;</span><br><span class=\"line\">            Object key = e.get();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (key == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                e.next = <span class=\"keyword\">null</span>; </span><br><span class=\"line\">                e.value = <span class=\"keyword\">null</span>; </span><br><span class=\"line\">                size--;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> i = indexFor(e.hash, dest.length);</span><br><span class=\"line\">                e.next = dest[i];</span><br><span class=\"line\">                dest[i] = e;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            e = next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// keyhash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> index = indexFor(h, tab.length);</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = tab[index];</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e.hash == h &amp;&amp; eq(k, e.get()))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> e.value;</span><br><span class=\"line\">        e = e.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>eq</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">eq</span><span class=\"params\">(Object x, Object y)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x == y || x.equals(y);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"remove\"><a href=\"#remove\" class=\"headerlink\" title=\"remove\"></a>remove</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">remove</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// keyhash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = indexFor(h, tab.length);</span><br><span class=\"line\">    Entry&lt;K,V&gt; prev = tab[i];</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = prev;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        Entry&lt;K,V&gt; next = e.next;</span><br><span class=\"line\">        <span class=\"comment\">// Entry</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (h == e.hash &amp;&amp; eq(k, e.get())) &#123;</span><br><span class=\"line\">            modCount++;</span><br><span class=\"line\">            size--;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (prev == e)</span><br><span class=\"line\">                tab[i] = next;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                prev.next = next;</span><br><span class=\"line\">            <span class=\"comment\">// Entryvalue</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> e.value;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        prev = e;</span><br><span class=\"line\">        e = next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakHashMapTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        testWeakHashMap();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testWeakHashMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 3Stringkey</span></span><br><span class=\"line\">        String w1 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key1\"</span>);</span><br><span class=\"line\">        String w2 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key2\"</span>);</span><br><span class=\"line\">        String w3 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key3\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        Map weakHashMap = <span class=\"keyword\">new</span> WeakHashMap();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        weakHashMap.put(w1, <span class=\"string\">\"v1\"</span>);</span><br><span class=\"line\">        weakHashMap.put(w2, <span class=\"string\">\"v2\"</span>);</span><br><span class=\"line\">        weakHashMap.put(w3, <span class=\"string\">\"v3\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// weakHashMap</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"weakHashMap:%s\\n\"</span>, weakHashMap);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// containsKey(Object key) :key</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains key key1 : %s\\n\"</span>,weakHashMap.containsKey(<span class=\"string\">\"key1\"</span>));</span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains key key4 : %s\\n\"</span>,weakHashMap.containsKey(<span class=\"string\">\"key4\"</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// containsValue(Object value) :value</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains value v1 : %s\\n\"</span>,weakHashMap.containsValue(<span class=\"string\">\"v1\"</span>));</span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains value 0 : %s\\n\"</span>,weakHashMap.containsValue(<span class=\"number\">0</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// remove(Object key)  key</span></span><br><span class=\"line\">        weakHashMap.remove(<span class=\"string\">\"three\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"weakHashMap: %s\\n\"</span>, weakHashMap);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// ----  WeakHashMap  ----</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// w1null</span></span><br><span class=\"line\">        <span class=\"comment\">// w1gcWeakHashMapw1</span></span><br><span class=\"line\">        w1 = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMapw1</span></span><br><span class=\"line\">        System.gc();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        Iterator iter = weakHashMap.entrySet().iterator();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (iter.hasNext()) &#123;</span><br><span class=\"line\">            Map.Entry en = (Map.Entry)iter.next();</span><br><span class=\"line\">            System.out.printf(<span class=\"string\">\"next : %s - %s\\n\"</span>,en.getKey(),en.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"after gc WeakHashMap size:%s\\n\"</span>, weakHashMap.size());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">weakHashMap:&#123;key1=w1, key2=w2, key3=w3&#125;</span><br><span class=\"line\">contains key key1 : <span class=\"keyword\">true</span></span><br><span class=\"line\">contains key key4 : <span class=\"keyword\">false</span></span><br><span class=\"line\">contains value w1 : <span class=\"keyword\">true</span></span><br><span class=\"line\">contains value <span class=\"number\">0</span> : <span class=\"keyword\">false</span></span><br><span class=\"line\">weakHashMap: &#123;key1=w1, key2=w2, key3=w3&#125;</span><br><span class=\"line\">next : key2 - w2</span><br><span class=\"line\">next : key3 - w3</span><br><span class=\"line\">after gc WeakHashMap size:<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<p>w1EntryWeakHashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMapEntry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcurrentCache</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; eden;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; longterm;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ConcurrentCache</span><span class=\"params\">(<span class=\"keyword\">int</span> size)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.size = size;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden = <span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(size);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.longterm = <span class=\"keyword\">new</span> WeakHashMap&lt;&gt;(size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(K k)</span> </span>&#123;</span><br><span class=\"line\">        V v = <span class=\"keyword\">this</span>.eden.get(k);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                v = <span class=\"keyword\">this</span>.longterm.get(k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (v != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> v;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(K k, V v)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.eden.size() &gt;= size) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.longterm.putAll(<span class=\"keyword\">this</span>.eden);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.eden.clear();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>putedenedenedenlongtermlongtermedeneden</p>\n<p>getedenvaluelongtermeden</p>\n<p>edenlongtermWeakHashMapEntrylongtermOOM</p>\n<p>WeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WeakHashMap&lt;String,Map&lt;K,V&gt;&gt; transactionCache;</span><br></pre></td></tr></table></figure>\n<p>keyStringidvaluemapHashMapLinkedHashMap</p>\n<p>idkeymap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>WeakHashMapEntryMap</li>\n<li>WeakHashMapHashMap</li>\n<li>WeakHashMap+</li>\n<li>WeakHashMap</li>\n</ul>\n"},{"title":"JavaWindows","date":"2018-12-28T11:00:02.000Z","_content":"\n>  -- \n\n## JDK\n\nhttps://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\n\n{% asset_img 1-jdk-windows.png jdk-windows %}\n\n## \n\n\n\nJAVA_HOME     JDK\n\nPATH                  JDK\n\nCLASSPATH      \n\n### 1-->-->\n\n{% asset_img 2-jdk-windows.png jdk-windows %}\n\n### 2-->\n\n{% asset_img 3-jdk-windows.png jdk-windows %}\n\n{% asset_img 4-jdk-windows.png jdk-windows %}\n\n{% asset_img 5-jdk-windows.png jdk-windows %})\n\n(1)->\"JAVA_HOME\"\"C:/Java/jdk1.8.0_144\"JDK \n\n(2)->\"Path\";%JAVA_HOME%/bin;%JAVA_HOME%/jre/bin \n\n(3)->CLASSPATH,.;%JAVA_HOME%/lib;%JAVA_HOME%/lib/dt.jar;%JAVA_HOME%/lib/tools.jar\n\n### 3\n\njavajavacjava -version JDK\n\njava\n\n{% asset_img 6-jdk-windows.png jdk-windows %}\n\njavac\n\n{% asset_img 7-jdk-windows.png jdk-windows %}\n\njava -version\n\n{% asset_img 8-jdk-windows.png jdk-windows %}\n\n### 4java\n\n----\n\n```java\npublic class Test {\n    public static void main(String[] args) {\n    System.out.println(\"Hello World!\");\n    }\n}\n```\n\n\n\n```bash\nC:\ncd /Users/[]/Desktop\n```\n\n[]CC:/Users \n\njavac Test.javajava TestHello Java\n\n{% asset_img 9-jdk-windows.png jdk-windows %}\n\nJava","source":"_posts/java/introduction/java-environment-windows.md","raw":"---\ntitle: JavaWindows\ntags: \n - Java\n - Java\n - \ncategories: \ndate: 2018-12-28 19:00:02\n---\n\n>  -- \n\n## JDK\n\nhttps://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\n\n{% asset_img 1-jdk-windows.png jdk-windows %}\n\n## \n\n\n\nJAVA_HOME     JDK\n\nPATH                  JDK\n\nCLASSPATH      \n\n### 1-->-->\n\n{% asset_img 2-jdk-windows.png jdk-windows %}\n\n### 2-->\n\n{% asset_img 3-jdk-windows.png jdk-windows %}\n\n{% asset_img 4-jdk-windows.png jdk-windows %}\n\n{% asset_img 5-jdk-windows.png jdk-windows %})\n\n(1)->\"JAVA_HOME\"\"C:/Java/jdk1.8.0_144\"JDK \n\n(2)->\"Path\";%JAVA_HOME%/bin;%JAVA_HOME%/jre/bin \n\n(3)->CLASSPATH,.;%JAVA_HOME%/lib;%JAVA_HOME%/lib/dt.jar;%JAVA_HOME%/lib/tools.jar\n\n### 3\n\njavajavacjava -version JDK\n\njava\n\n{% asset_img 6-jdk-windows.png jdk-windows %}\n\njavac\n\n{% asset_img 7-jdk-windows.png jdk-windows %}\n\njava -version\n\n{% asset_img 8-jdk-windows.png jdk-windows %}\n\n### 4java\n\n----\n\n```java\npublic class Test {\n    public static void main(String[] args) {\n    System.out.println(\"Hello World!\");\n    }\n}\n```\n\n\n\n```bash\nC:\ncd /Users/[]/Desktop\n```\n\n[]CC:/Users \n\njavac Test.javajava TestHello Java\n\n{% asset_img 9-jdk-windows.png jdk-windows %}\n\nJava","slug":"java/introduction/java-environment-windows","published":1,"updated":"2019-01-02T14:25:23.318Z","_id":"cjq7rm5q7001lwu9k4tkaf5qu","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"JDK\"><a href=\"#JDK\" class=\"headerlink\" title=\"JDK\"></a>JDK</h2><p><a href=\"https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" target=\"_blank\" rel=\"noopener\">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p>\n<img src=\"/programming/java/introduction/java-environment-windows/1-jdk-windows.png\" title=\"jdk-windows\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>JAVA_HOME     JDK</p>\n<p>PATH                  JDK</p>\n<p>CLASSPATH      </p>\n<h3 id=\"1-gt--gt-\"><a href=\"#1-gt--gt-\" class=\"headerlink\" title=\"1&gt;&gt;\"></a>1&gt;&gt;</h3><img src=\"/programming/java/introduction/java-environment-windows/2-jdk-windows.png\" title=\"jdk-windows\">\n<h3 id=\"2-gt-\"><a href=\"#2-gt-\" class=\"headerlink\" title=\"2&gt;\"></a>2&gt;</h3><img src=\"/programming/java/introduction/java-environment-windows/3-jdk-windows.png\" title=\"jdk-windows\">\n<img src=\"/programming/java/introduction/java-environment-windows/4-jdk-windows.png\" title=\"jdk-windows\">\n<img src=\"/programming/java/introduction/java-environment-windows/5-jdk-windows.png\" title=\"jdk-windows\">)<br><br>(1)-&gt;JAVA_HOMEC:/Java/jdk1.8.0_144JDK<br><br>(2)-&gt;Path;%JAVA_HOME%/bin;%JAVA_HOME%/jre/bin<br><br>(3)-&gt;CLASSPATH,.;%JAVA_HOME%/lib;%JAVA_HOME%/lib/dt.jar;%JAVA_HOME%/lib/tools.jar<br><br>### 3<br><br>javajavacjava -version JDK<br><br>java<br><br><img src=\"/programming/java/introduction/java-environment-windows/6-jdk-windows.png\" title=\"jdk-windows\">\n<p>javac</p>\n<img src=\"/programming/java/introduction/java-environment-windows/7-jdk-windows.png\" title=\"jdk-windows\">\n<p>java -version</p>\n<img src=\"/programming/java/introduction/java-environment-windows/8-jdk-windows.png\" title=\"jdk-windows\">\n<h3 id=\"4java\"><a href=\"#4java\" class=\"headerlink\" title=\"4java\"></a>4java</h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Hello World!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /Users/[]/Desktop</span><br></pre></td></tr></table></figure>\n<p>[]CC:/Users </p>\n<p>javac Test.javajava TestHello Java</p>\n<img src=\"/programming/java/introduction/java-environment-windows/9-jdk-windows.png\" title=\"jdk-windows\">\n<p>Java</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"JDK\"><a href=\"#JDK\" class=\"headerlink\" title=\"JDK\"></a>JDK</h2><p><a href=\"https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" target=\"_blank\" rel=\"noopener\">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p>\n<img src=\"/programming/java/introduction/java-environment-windows/1-jdk-windows.png\" title=\"jdk-windows\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>JAVA_HOME     JDK</p>\n<p>PATH                  JDK</p>\n<p>CLASSPATH      </p>\n<h3 id=\"1-gt--gt-\"><a href=\"#1-gt--gt-\" class=\"headerlink\" title=\"1&gt;&gt;\"></a>1&gt;&gt;</h3><img src=\"/programming/java/introduction/java-environment-windows/2-jdk-windows.png\" title=\"jdk-windows\">\n<h3 id=\"2-gt-\"><a href=\"#2-gt-\" class=\"headerlink\" title=\"2&gt;\"></a>2&gt;</h3><img src=\"/programming/java/introduction/java-environment-windows/3-jdk-windows.png\" title=\"jdk-windows\">\n<img src=\"/programming/java/introduction/java-environment-windows/4-jdk-windows.png\" title=\"jdk-windows\">\n<img src=\"/programming/java/introduction/java-environment-windows/5-jdk-windows.png\" title=\"jdk-windows\">)<br><br>(1)-&gt;JAVA_HOMEC:/Java/jdk1.8.0_144JDK<br><br>(2)-&gt;Path;%JAVA_HOME%/bin;%JAVA_HOME%/jre/bin<br><br>(3)-&gt;CLASSPATH,.;%JAVA_HOME%/lib;%JAVA_HOME%/lib/dt.jar;%JAVA_HOME%/lib/tools.jar<br><br>### 3<br><br>javajavacjava -version JDK<br><br>java<br><br><img src=\"/programming/java/introduction/java-environment-windows/6-jdk-windows.png\" title=\"jdk-windows\">\n<p>javac</p>\n<img src=\"/programming/java/introduction/java-environment-windows/7-jdk-windows.png\" title=\"jdk-windows\">\n<p>java -version</p>\n<img src=\"/programming/java/introduction/java-environment-windows/8-jdk-windows.png\" title=\"jdk-windows\">\n<h3 id=\"4java\"><a href=\"#4java\" class=\"headerlink\" title=\"4java\"></a>4java</h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Hello World!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /Users/[]/Desktop</span><br></pre></td></tr></table></figure>\n<p>[]CC:/Users </p>\n<p>javac Test.javajava TestHello Java</p>\n<img src=\"/programming/java/introduction/java-environment-windows/9-jdk-windows.png\" title=\"jdk-windows\">\n<p>Java</p>\n"},{"title":"JavaMac","date":"2018-12-28T11:00:03.000Z","_content":"\n>  --\n\n## \n\n\n\n1.OracleJDK1.8\n\n2.\n\n3.\n\n4.JDK1.8\n\njdk8[](https://blog.csdn.net/deliciousion/article/details/78046007)\n\n## JDK8\n\nOracleJDK1.8\n\nhttps://www.oracle.com/index.html\n\nOracle\n\n{% asset_img 1-jdk-mac.png jdk-mac %}\n\nDownload Java for Developers\n\n{% asset_img 2-jdk-mac.png jdk-mac %}\n\nJDK1.8JDK1.8NetBeansJAVA IDE\n\n{% asset_img 3-jdk-mac.png jdk-mac %}\n\nAccept License AgreementJDKMAC OS X\n\n{% asset_img 4-jdk-mac.png jdk-mac %}\n\n## JDK\n\ndmg jdk-8u144-macosx-x64.dmg Java 8144JDK\n\n{% asset_img 5-jdk-mac.png jdk-mac %}\n\ndmg\n\n{% asset_img 6-jdk-mac.png jdk-mac %}\n\npkg\n\n{% asset_img 7-jdk-mac.png jdk-mac %}\n\n{% asset_img 9-jdk-mac.png jdk-mac %}\n\n{% asset_img 10-jdk-mac.png jdk-mac %}\n\n## \n\nJDK1.8terminalJAVAJDK1.8\n\nJDKJDKJDK1.8\n\n/Library/Java/JavaVirtualMachines\n\n{% asset_img 11-jdk-mac.png jdk-mac %}\n\n\nMACWINDOWSjdk\n\n/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home\n\nterminalhomecd\n\n{% asset_img 12-jdk-mac.png jdk-mac %}\n\n vim .bash_profile \n\n{% asset_img 13-jdk-mac.png jdk-mac %}\n\nvimIESC:wq\n\n{% asset_img 14-jdk-mac.png jdk-mac %}\n\n\n\n```bash\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home\n```\n\njdk1.8.0_45JDK/Library/Java/JavaVirtualMachines/\n\n## JDK1.8\n\njava,\n\n{% asset_img 15-jdk-mac.png jdk-mac %}\n\njava -version\n\n{% asset_img 16-jdk-mac.png jdk-mac %}\n\nJDK1.8\n","source":"_posts/java/introduction/java-environment-mac.md","raw":"---\ntitle: JavaMac\ntags: \n - Java\n - Java\n - \ncategories: \ndate: 2018-12-28 19:00:03\n---\n\n>  --\n\n## \n\n\n\n1.OracleJDK1.8\n\n2.\n\n3.\n\n4.JDK1.8\n\njdk8[](https://blog.csdn.net/deliciousion/article/details/78046007)\n\n## JDK8\n\nOracleJDK1.8\n\nhttps://www.oracle.com/index.html\n\nOracle\n\n{% asset_img 1-jdk-mac.png jdk-mac %}\n\nDownload Java for Developers\n\n{% asset_img 2-jdk-mac.png jdk-mac %}\n\nJDK1.8JDK1.8NetBeansJAVA IDE\n\n{% asset_img 3-jdk-mac.png jdk-mac %}\n\nAccept License AgreementJDKMAC OS X\n\n{% asset_img 4-jdk-mac.png jdk-mac %}\n\n## JDK\n\ndmg jdk-8u144-macosx-x64.dmg Java 8144JDK\n\n{% asset_img 5-jdk-mac.png jdk-mac %}\n\ndmg\n\n{% asset_img 6-jdk-mac.png jdk-mac %}\n\npkg\n\n{% asset_img 7-jdk-mac.png jdk-mac %}\n\n{% asset_img 9-jdk-mac.png jdk-mac %}\n\n{% asset_img 10-jdk-mac.png jdk-mac %}\n\n## \n\nJDK1.8terminalJAVAJDK1.8\n\nJDKJDKJDK1.8\n\n/Library/Java/JavaVirtualMachines\n\n{% asset_img 11-jdk-mac.png jdk-mac %}\n\n\nMACWINDOWSjdk\n\n/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home\n\nterminalhomecd\n\n{% asset_img 12-jdk-mac.png jdk-mac %}\n\n vim .bash_profile \n\n{% asset_img 13-jdk-mac.png jdk-mac %}\n\nvimIESC:wq\n\n{% asset_img 14-jdk-mac.png jdk-mac %}\n\n\n\n```bash\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home\n```\n\njdk1.8.0_45JDK/Library/Java/JavaVirtualMachines/\n\n## JDK1.8\n\njava,\n\n{% asset_img 15-jdk-mac.png jdk-mac %}\n\njava -version\n\n{% asset_img 16-jdk-mac.png jdk-mac %}\n\nJDK1.8\n","slug":"java/introduction/java-environment-mac","published":1,"updated":"2019-01-02T14:25:23.268Z","_id":"cjq7rm5q9001mwu9k0gis50on","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p> </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>1.OracleJDK1.8</p>\n<p>2.</p>\n<p>3.</p>\n<p>4.JDK1.8</p>\n<p>jdk8<a href=\"https://blog.csdn.net/deliciousion/article/details/78046007\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h2 id=\"JDK8\"><a href=\"#JDK8\" class=\"headerlink\" title=\"JDK8\"></a>JDK8</h2><p>OracleJDK1.8</p>\n<p><a href=\"https://www.oracle.com/index.html\" target=\"_blank\" rel=\"noopener\">https://www.oracle.com/index.html</a></p>\n<p>Oracle</p>\n<img src=\"/programming/java/introduction/java-environment-mac/1-jdk-mac.png\" title=\"jdk-mac\">\n<p>Download Java for Developers</p>\n<img src=\"/programming/java/introduction/java-environment-mac/2-jdk-mac.png\" title=\"jdk-mac\">\n<p>JDK1.8JDK1.8NetBeansJAVA IDE</p>\n<img src=\"/programming/java/introduction/java-environment-mac/3-jdk-mac.png\" title=\"jdk-mac\">\n<p>Accept License AgreementJDKMAC OS X</p>\n<img src=\"/programming/java/introduction/java-environment-mac/4-jdk-mac.png\" title=\"jdk-mac\">\n<h2 id=\"JDK\"><a href=\"#JDK\" class=\"headerlink\" title=\"JDK\"></a>JDK</h2><p>dmg jdk-8u144-macosx-x64.dmg Java 8144JDK</p>\n<img src=\"/programming/java/introduction/java-environment-mac/5-jdk-mac.png\" title=\"jdk-mac\">\n<p>dmg</p>\n<img src=\"/programming/java/introduction/java-environment-mac/6-jdk-mac.png\" title=\"jdk-mac\">\n<p>pkg</p>\n<img src=\"/programming/java/introduction/java-environment-mac/7-jdk-mac.png\" title=\"jdk-mac\">\n<img src=\"/programming/java/introduction/java-environment-mac/9-jdk-mac.png\" title=\"jdk-mac\">\n<img src=\"/programming/java/introduction/java-environment-mac/10-jdk-mac.png\" title=\"jdk-mac\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK1.8terminalJAVAJDK1.8</p>\n<p>JDKJDKJDK1.8</p>\n<p>/Library/Java/JavaVirtualMachines</p>\n<img src=\"/programming/java/introduction/java-environment-mac/11-jdk-mac.png\" title=\"jdk-mac\">\n<p>MACWINDOWSjdk</p>\n<p>/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home</p>\n<p>terminalhomecd</p>\n<img src=\"/programming/java/introduction/java-environment-mac/12-jdk-mac.png\" title=\"jdk-mac\">\n<p> vim .bash_profile </p>\n<img src=\"/programming/java/introduction/java-environment-mac/13-jdk-mac.png\" title=\"jdk-mac\">\n<p>vimIESC:wq</p>\n<img src=\"/programming/java/introduction/java-environment-mac/14-jdk-mac.png\" title=\"jdk-mac\">\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home</span><br></pre></td></tr></table></figure>\n<p>jdk1.8.0_45JDK/Library/Java/JavaVirtualMachines/</p>\n<h2 id=\"JDK1-8\"><a href=\"#JDK1-8\" class=\"headerlink\" title=\"JDK1.8\"></a>JDK1.8</h2><p>java,</p>\n<img src=\"/programming/java/introduction/java-environment-mac/15-jdk-mac.png\" title=\"jdk-mac\">\n<p>java -version</p>\n<img src=\"/programming/java/introduction/java-environment-mac/16-jdk-mac.png\" title=\"jdk-mac\">\n<p>JDK1.8</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p> </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>1.OracleJDK1.8</p>\n<p>2.</p>\n<p>3.</p>\n<p>4.JDK1.8</p>\n<p>jdk8<a href=\"https://blog.csdn.net/deliciousion/article/details/78046007\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h2 id=\"JDK8\"><a href=\"#JDK8\" class=\"headerlink\" title=\"JDK8\"></a>JDK8</h2><p>OracleJDK1.8</p>\n<p><a href=\"https://www.oracle.com/index.html\" target=\"_blank\" rel=\"noopener\">https://www.oracle.com/index.html</a></p>\n<p>Oracle</p>\n<img src=\"/programming/java/introduction/java-environment-mac/1-jdk-mac.png\" title=\"jdk-mac\">\n<p>Download Java for Developers</p>\n<img src=\"/programming/java/introduction/java-environment-mac/2-jdk-mac.png\" title=\"jdk-mac\">\n<p>JDK1.8JDK1.8NetBeansJAVA IDE</p>\n<img src=\"/programming/java/introduction/java-environment-mac/3-jdk-mac.png\" title=\"jdk-mac\">\n<p>Accept License AgreementJDKMAC OS X</p>\n<img src=\"/programming/java/introduction/java-environment-mac/4-jdk-mac.png\" title=\"jdk-mac\">\n<h2 id=\"JDK\"><a href=\"#JDK\" class=\"headerlink\" title=\"JDK\"></a>JDK</h2><p>dmg jdk-8u144-macosx-x64.dmg Java 8144JDK</p>\n<img src=\"/programming/java/introduction/java-environment-mac/5-jdk-mac.png\" title=\"jdk-mac\">\n<p>dmg</p>\n<img src=\"/programming/java/introduction/java-environment-mac/6-jdk-mac.png\" title=\"jdk-mac\">\n<p>pkg</p>\n<img src=\"/programming/java/introduction/java-environment-mac/7-jdk-mac.png\" title=\"jdk-mac\">\n<img src=\"/programming/java/introduction/java-environment-mac/9-jdk-mac.png\" title=\"jdk-mac\">\n<img src=\"/programming/java/introduction/java-environment-mac/10-jdk-mac.png\" title=\"jdk-mac\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK1.8terminalJAVAJDK1.8</p>\n<p>JDKJDKJDK1.8</p>\n<p>/Library/Java/JavaVirtualMachines</p>\n<img src=\"/programming/java/introduction/java-environment-mac/11-jdk-mac.png\" title=\"jdk-mac\">\n<p>MACWINDOWSjdk</p>\n<p>/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home</p>\n<p>terminalhomecd</p>\n<img src=\"/programming/java/introduction/java-environment-mac/12-jdk-mac.png\" title=\"jdk-mac\">\n<p> vim .bash_profile </p>\n<img src=\"/programming/java/introduction/java-environment-mac/13-jdk-mac.png\" title=\"jdk-mac\">\n<p>vimIESC:wq</p>\n<img src=\"/programming/java/introduction/java-environment-mac/14-jdk-mac.png\" title=\"jdk-mac\">\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home</span><br></pre></td></tr></table></figure>\n<p>jdk1.8.0_45JDK/Library/Java/JavaVirtualMachines/</p>\n<h2 id=\"JDK1-8\"><a href=\"#JDK1-8\" class=\"headerlink\" title=\"JDK1.8\"></a>JDK1.8</h2><p>java,</p>\n<img src=\"/programming/java/introduction/java-environment-mac/15-jdk-mac.png\" title=\"jdk-mac\">\n<p>java -version</p>\n<img src=\"/programming/java/introduction/java-environment-mac/16-jdk-mac.png\" title=\"jdk-mac\">\n<p>JDK1.8</p>\n"},{"title":"Java","date":"2018-12-28T11:00:01.000Z","_content":"\n> \n\n## \n\nJavaJDK\n\nJVMJREJDK\n\n## JVMJava Virtual Machine\n\nJVM  JavaJava\n\nJavawindowslinuxmacJVMJVMJava.class\n\nJVMHotSpotJ9 VMZing VM\n\n## JREJava Runtime Environment\n\nJRE  Java Java JVMJVMJavaJavaJVMclassclassJVMlib JVMJRE \n\n## JDKJava Development Kit\n\nJDK  Java  Java JRE\n\nJDKJREJREJVMJDKJavaJDKJavaJRE\n","source":"_posts/java/introduction/java-environment.md","raw":"---\ntitle: Java\ntags: \n - Java\n - Java\n - \ncategories: \ndate: 2018-12-28 19:00:01\n---\n\n> \n\n## \n\nJavaJDK\n\nJVMJREJDK\n\n## JVMJava Virtual Machine\n\nJVM  JavaJava\n\nJavawindowslinuxmacJVMJVMJava.class\n\nJVMHotSpotJ9 VMZing VM\n\n## JREJava Runtime Environment\n\nJRE  Java Java JVMJVMJavaJavaJVMclassclassJVMlib JVMJRE \n\n## JDKJava Development Kit\n\nJDK  Java  Java JRE\n\nJDKJREJREJVMJDKJavaJDKJavaJRE\n","slug":"java/introduction/java-environment","published":1,"updated":"2019-01-02T14:25:23.338Z","_id":"cjq7rm5q9001nwu9k7t34u2tz","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJDK</p>\n<p>JVMJREJDK</p>\n<h2 id=\"JVMJava-Virtual-Machine\"><a href=\"#JVMJava-Virtual-Machine\" class=\"headerlink\" title=\"JVMJava Virtual Machine\"></a>JVMJava Virtual Machine</h2><p>JVM  JavaJava</p>\n<p>JavawindowslinuxmacJVMJVMJava.class</p>\n<p>JVMHotSpotJ9 VMZing VM</p>\n<h2 id=\"JREJava-Runtime-Environment\"><a href=\"#JREJava-Runtime-Environment\" class=\"headerlink\" title=\"JREJava Runtime Environment\"></a>JREJava Runtime Environment</h2><p>JRE  Java Java JVMJVMJavaJavaJVMclassclassJVMlib JVMJRE </p>\n<h2 id=\"JDKJava-Development-Kit\"><a href=\"#JDKJava-Development-Kit\" class=\"headerlink\" title=\"JDKJava Development Kit\"></a>JDKJava Development Kit</h2><p>JDK  Java  Java JRE</p>\n<p>JDKJREJREJVMJDKJavaJDKJavaJRE</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJDK</p>\n<p>JVMJREJDK</p>\n<h2 id=\"JVMJava-Virtual-Machine\"><a href=\"#JVMJava-Virtual-Machine\" class=\"headerlink\" title=\"JVMJava Virtual Machine\"></a>JVMJava Virtual Machine</h2><p>JVM  JavaJava</p>\n<p>JavawindowslinuxmacJVMJVMJava.class</p>\n<p>JVMHotSpotJ9 VMZing VM</p>\n<h2 id=\"JREJava-Runtime-Environment\"><a href=\"#JREJava-Runtime-Environment\" class=\"headerlink\" title=\"JREJava Runtime Environment\"></a>JREJava Runtime Environment</h2><p>JRE  Java Java JVMJVMJavaJavaJVMclassclassJVMlib JVMJRE </p>\n<h2 id=\"JDKJava-Development-Kit\"><a href=\"#JDKJava-Development-Kit\" class=\"headerlink\" title=\"JDKJava Development Kit\"></a>JDKJava Development Kit</h2><p>JDK  Java  Java JRE</p>\n<p>JDKJREJREJVMJDKJavaJDKJavaJRE</p>\n"},{"title":"JavaIDE","date":"2018-12-28T11:00:04.000Z","_content":"\n>   --\n\n## \n\nJDKJava\n\nIDE\n\n## IDE\n\nIDEintegrated development enviroment\n\nIDE\n\n## IDE\n\nIDE\n\n99\n\n## IDE\n\nIDEAhttp://www.jetbrains.com/idea/\n\n{% asset_img java-ide-1.png jdk-ide %}\n\n{% asset_img java-ide-2.png jdk-ide %}\n\nultimatecommunityultimate\n\nhttp://idea.lanyus.com/ 0.0.0.0 account.jetbrains.comhosts\n\n\n\n## \n\nHelloWorld\n\n{% asset_img java-ide-3.png jdk-ide %}\n\n{% asset_img java-ide-4.png jdk-ide %}\n\n{% asset_img java-ide-5.png jdk-ide %}\n\nsrcpackagehellopackageHelloWorld\n\n{% asset_img java-ide-6.png jdk-ide %}\n\n{% asset_img java-ide-7.png jdk-ide %}\n\n{% asset_img java-ide-8.png jdk-ide %}\n\n\n\n```java\npackage hello;\nimport java.lang.System;\n\npublic class HelloWorld {\n    public static void main(String[] args){\n        System.out.println(\"Hello World!\");\n    }\n}\n```\n\nRunHelloWorld\n\n{% asset_img java-ide-9.png jdk-ide %}\n\nIDE\n\n529253292","source":"_posts/java/introduction/java-ide.md","raw":"---\ntitle: JavaIDE\ntags: \n - Java\n - Java\n - \ncategories: \ndate: 2018-12-28 19:00:04\n---\n\n>   --\n\n## \n\nJDKJava\n\nIDE\n\n## IDE\n\nIDEintegrated development enviroment\n\nIDE\n\n## IDE\n\nIDE\n\n99\n\n## IDE\n\nIDEAhttp://www.jetbrains.com/idea/\n\n{% asset_img java-ide-1.png jdk-ide %}\n\n{% asset_img java-ide-2.png jdk-ide %}\n\nultimatecommunityultimate\n\nhttp://idea.lanyus.com/ 0.0.0.0 account.jetbrains.comhosts\n\n\n\n## \n\nHelloWorld\n\n{% asset_img java-ide-3.png jdk-ide %}\n\n{% asset_img java-ide-4.png jdk-ide %}\n\n{% asset_img java-ide-5.png jdk-ide %}\n\nsrcpackagehellopackageHelloWorld\n\n{% asset_img java-ide-6.png jdk-ide %}\n\n{% asset_img java-ide-7.png jdk-ide %}\n\n{% asset_img java-ide-8.png jdk-ide %}\n\n\n\n```java\npackage hello;\nimport java.lang.System;\n\npublic class HelloWorld {\n    public static void main(String[] args){\n        System.out.println(\"Hello World!\");\n    }\n}\n```\n\nRunHelloWorld\n\n{% asset_img java-ide-9.png jdk-ide %}\n\nIDE\n\n529253292","slug":"java/introduction/java-ide","published":1,"updated":"2019-01-02T14:25:23.338Z","_id":"cjq7rm5qj001owu9kfjshu6n6","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDKJava</p>\n<p>IDE</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDEintegrated development enviroment</p>\n<p>IDE</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDE</p>\n<p>99</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDEA<a href=\"http://www.jetbrains.com/idea/\" target=\"_blank\" rel=\"noopener\">http://www.jetbrains.com/idea/</a></p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-1.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-2.png\" title=\"jdk-ide\">\n<p>ultimatecommunityultimate</p>\n<p><a href=\"http://idea.lanyus.com/\" target=\"_blank\" rel=\"noopener\">http://idea.lanyus.com/</a> 0.0.0.0 account.jetbrains.comhosts</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-3.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-4.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-5.png\" title=\"jdk-ide\">\n<p>srcpackagehellopackageHelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-6.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-7.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-8.png\" title=\"jdk-ide\">\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.System;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloWorld</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Hello World!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>RunHelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-9.png\" title=\"jdk-ide\">\n<p>IDE</p>\n<p>529253292</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDKJava</p>\n<p>IDE</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDEintegrated development enviroment</p>\n<p>IDE</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDE</p>\n<p>99</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDEA<a href=\"http://www.jetbrains.com/idea/\" target=\"_blank\" rel=\"noopener\">http://www.jetbrains.com/idea/</a></p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-1.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-2.png\" title=\"jdk-ide\">\n<p>ultimatecommunityultimate</p>\n<p><a href=\"http://idea.lanyus.com/\" target=\"_blank\" rel=\"noopener\">http://idea.lanyus.com/</a> 0.0.0.0 account.jetbrains.comhosts</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-3.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-4.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-5.png\" title=\"jdk-ide\">\n<p>srcpackagehellopackageHelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-6.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-7.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-8.png\" title=\"jdk-ide\">\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.System;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloWorld</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Hello World!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>RunHelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-9.png\" title=\"jdk-ide\">\n<p>IDE</p>\n<p>529253292</p>\n"},{"title":"Java ","date":"2018-12-28T11:00:05.000Z","_content":"\n>   -- \n\n## \n\nJava\n\nJavaIDEJava IDE\n\n\n\n## \n\nJava\n\nJavaJavaJavaJavaQQ\n\nJavaJava\n\nJavaJava\n\nJava\n\n\n\nIT\n\nJava\n\n\n\n## \n\n\n\nJavaJava\n\nboss\n\n \n\n\n\n\n\nJavaJavatxtExcel\n\n## \n\n\n\nJava:stuck_out_tongue_closed_eyes:\n","source":"_posts/java/introduction/java-introduction.md","raw":"---\ntitle: Java \ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-28 19:00:05\n---\n\n>   -- \n\n## \n\nJava\n\nJavaIDEJava IDE\n\n\n\n## \n\nJava\n\nJavaJavaJavaJavaQQ\n\nJavaJava\n\nJavaJava\n\nJava\n\n\n\nIT\n\nJava\n\n\n\n## \n\n\n\nJavaJava\n\nboss\n\n \n\n\n\n\n\nJavaJavatxtExcel\n\n## \n\n\n\nJava:stuck_out_tongue_closed_eyes:\n","slug":"java/introduction/java-introduction","published":1,"updated":"2019-01-02T14:25:23.368Z","_id":"cjq7rm5qq001pwu9koyeuujma","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>   </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>JavaIDEJava IDE</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>JavaJavaJavaJavaQQ</p>\n<p>JavaJava</p>\n<p>JavaJava</p>\n<p>Java</p>\n<p></p>\n<p>IT</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>JavaJava</p>\n<p>boss</p>\n<p> </p>\n<p></p>\n<p></p>\n<p>JavaJavatxtExcel</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>Java:stuck_out_tongue_closed_eyes:</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>   </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>JavaIDEJava IDE</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>JavaJavaJavaJavaQQ</p>\n<p>JavaJava</p>\n<p>JavaJava</p>\n<p>Java</p>\n<p></p>\n<p>IT</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>JavaJava</p>\n<p>boss</p>\n<p> </p>\n<p></p>\n<p></p>\n<p>JavaJavatxtExcel</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>Java:stuck_out_tongue_closed_eyes:</p>\n"},{"title":"Java","date":"2018-12-28T11:00:07.000Z","_content":"\n>  -- \n\n## \n\nJava\n\n1. Java\n2. JDK\n3. IDEA\n4. IDEA\n5. IDEA\n\nJavaJava\n\nJava","source":"_posts/java/introduction/java-primer-conclusion.md","raw":"---\ntitle: Java\ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-28 19:00:07\n---\n\n>  -- \n\n## \n\nJava\n\n1. Java\n2. JDK\n3. IDEA\n4. IDEA\n5. IDEA\n\nJavaJava\n\nJava","slug":"java/introduction/java-primer-conclusion","published":1,"updated":"2019-01-02T14:25:23.378Z","_id":"cjq7rm5qs001rwu9k8k2w6pfh","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<ol>\n<li>Java</li>\n<li>JDK</li>\n<li>IDEA</li>\n<li>IDEA</li>\n<li>IDEA</li>\n</ol>\n<p>JavaJava</p>\n<p>Java</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<ol>\n<li>Java</li>\n<li>JDK</li>\n<li>IDEA</li>\n<li>IDEA</li>\n<li>IDEA</li>\n</ol>\n<p>JavaJava</p>\n<p>Java</p>\n"},{"title":"Java","date":"2018-12-28T11:00:06.000Z","_content":"\n> \n\n## \n\n\n\nHello WorldJava\n\n## \n\nJava\n\n## \n\n\n\n\n\n### \n\n `System.out.println()`emmm\n\nidea[](java-ide.md)\n\nhelloPrintTest\n\n```java\npackage hello;\n\npublic class PrintTest {\n    public static void main(String[] args){\n        System.out.println(\"\");\n    }\n}\n```\n\n`ctrl+shift+R`\n\n{% asset_img java-simple-example-1.png java-example %}\n\nSystem `System.out.print() `\n\n### \n\n\n\nScannerScannerScannerSystem.inInputTest\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class InputTest {\n    public static void main(String[] args){\n        Scanner in = new Scanner(System.in);\n        System.out.print(\":\");\n        int a = in.nextInt();\n        System.out.println(\"\" + a);\n    }\n}\n```\n\n20\n\n{% asset_img java-simple-example-2.png java-example %}\n\n\n\n## \n\n\n\n```java\nSystem.out.print(\":\");\n```\n\nint\n\n```java\nScanner in = new Scanner(System.in);\nint a = in.nextInt();\n```\n\n\n\n```java\nSystem.out.print(\":\");\n```\n\nint\n\n```java\nint b = in.nextInt();\n```\n\n\n\n```java\nint sum = a + b;\n```\n\n\n\n```java\nSystem.out.print(\":\" + sum);\n```\n\n\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class SimpleCalculator {\n    public static void main(String[] args){\n        System.out.print(\":\");\n        Scanner in = new Scanner(System.in);\n        int a = in.nextInt();\n        System.out.print(\":\");\n        int b = in.nextInt();\n        int sum = a + b;\n        System.out.print(\":\" + sum);\n    }\n}\n```\n\n\n\n{% asset_img java-simple-example-3.png java-example %}\n\n\n\n`SimpleCalculator`mainScannerpackageimport\n","source":"_posts/java/introduction/java-simple-example.md","raw":"---\ntitle: Java\ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-28 19:00:06\n---\n\n> \n\n## \n\n\n\nHello WorldJava\n\n## \n\nJava\n\n## \n\n\n\n\n\n### \n\n `System.out.println()`emmm\n\nidea[](java-ide.md)\n\nhelloPrintTest\n\n```java\npackage hello;\n\npublic class PrintTest {\n    public static void main(String[] args){\n        System.out.println(\"\");\n    }\n}\n```\n\n`ctrl+shift+R`\n\n{% asset_img java-simple-example-1.png java-example %}\n\nSystem `System.out.print() `\n\n### \n\n\n\nScannerScannerScannerSystem.inInputTest\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class InputTest {\n    public static void main(String[] args){\n        Scanner in = new Scanner(System.in);\n        System.out.print(\":\");\n        int a = in.nextInt();\n        System.out.println(\"\" + a);\n    }\n}\n```\n\n20\n\n{% asset_img java-simple-example-2.png java-example %}\n\n\n\n## \n\n\n\n```java\nSystem.out.print(\":\");\n```\n\nint\n\n```java\nScanner in = new Scanner(System.in);\nint a = in.nextInt();\n```\n\n\n\n```java\nSystem.out.print(\":\");\n```\n\nint\n\n```java\nint b = in.nextInt();\n```\n\n\n\n```java\nint sum = a + b;\n```\n\n\n\n```java\nSystem.out.print(\":\" + sum);\n```\n\n\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class SimpleCalculator {\n    public static void main(String[] args){\n        System.out.print(\":\");\n        Scanner in = new Scanner(System.in);\n        int a = in.nextInt();\n        System.out.print(\":\");\n        int b = in.nextInt();\n        int sum = a + b;\n        System.out.print(\":\" + sum);\n    }\n}\n```\n\n\n\n{% asset_img java-simple-example-3.png java-example %}\n\n\n\n`SimpleCalculator`mainScannerpackageimport\n","slug":"java/introduction/java-simple-example","published":1,"updated":"2019-01-02T14:25:23.378Z","_id":"cjq7rm5qv001uwu9kq9zp27ef","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>Hello WorldJava</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>System.out.println()</code>emmm</p>\n<p>idea<a href=\"java-ide.md\"></a></p>\n<p>helloPrintTest</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PrintTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>ctrl+shift+R</code></p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-1.png\" title=\"java-example\">\n<p>System <code>System.out.print()</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>ScannerScannerScannerSystem.inInputTest</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">InputTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + a);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>20</p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-2.png\" title=\"java-example\">\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\"><span class=\"keyword\">int</span> a = in.nextInt();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> b = in.nextInt();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> sum = a + b;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-3.png\" title=\"java-example\">\n<p></p>\n<p><code>SimpleCalculator</code>mainScannerpackageimport</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>Hello WorldJava</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>System.out.println()</code>emmm</p>\n<p>idea<a href=\"java-ide.md\"></a></p>\n<p>helloPrintTest</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PrintTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>ctrl+shift+R</code></p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-1.png\" title=\"java-example\">\n<p>System <code>System.out.print()</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>ScannerScannerScannerSystem.inInputTest</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">InputTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + a);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>20</p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-2.png\" title=\"java-example\">\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\"><span class=\"keyword\">int</span> a = in.nextInt();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> b = in.nextInt();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> sum = a + b;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-3.png\" title=\"java-example\">\n<p></p>\n<p><code>SimpleCalculator</code>mainScannerpackageimport</p>\n"},{"title":"Java  - ","date":"2018-12-28T11:00:00.000Z","_content":"\n> \n\n## \n\n[](http://www.cnblogs.com/mfrank/)\n\nJavaJavaJavaJava\n\n## \n\nBOSS\n\n\n\n3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## Java\n\nJava\n\nJavaJavaWeb/APPJavaJava\n\n\n\n\n\nJavaJavaWebJava\n\nJavaWebhtmlappappUI\n\nJava\n\n\n\nJava\n\nQQ529253292\n\nJavabossbossboss\n\nJavaWeb\n\nJavaWeb:\n\n{% asset_img java-started-1.png JavaWeb %}\n\n\n\nJava\n","source":"_posts/java/introduction/java-started.md","raw":"---\ntitle: Java  - \ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-28 19:00:00\n---\n\n> \n\n## \n\n[](http://www.cnblogs.com/mfrank/)\n\nJavaJavaJavaJava\n\n## \n\nBOSS\n\n\n\n3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## Java\n\nJava\n\nJavaJavaWeb/APPJavaJava\n\n\n\n\n\nJavaJavaWebJava\n\nJavaWebhtmlappappUI\n\nJava\n\n\n\nJava\n\nQQ529253292\n\nJavabossbossboss\n\nJavaWeb\n\nJavaWeb:\n\n{% asset_img java-started-1.png JavaWeb %}\n\n\n\nJava\n","slug":"java/introduction/java-started","published":1,"updated":"2019-01-02T14:25:23.388Z","_id":"cjq7rm5qx001ywu9k4mtml6ht","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://www.cnblogs.com/mfrank/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>JavaJavaJavaJava</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>BOSS</p>\n<p></p>\n<p>3</p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p>Java</p>\n<p>JavaJavaWeb/APPJavaJava</p>\n<p></p>\n<p></p>\n<p>JavaJavaWebJava</p>\n<p>JavaWebhtmlappappUI</p>\n<p>Java</p>\n<p></p>\n<p>Java</p>\n<p>QQ529253292</p>\n<p>Javabossbossboss</p>\n<p>JavaWeb</p>\n<p>JavaWeb:</p>\n<img src=\"/programming/java/introduction/java-started/java-started-1.png\" title=\"JavaWeb\">\n<p></p>\n<p>Java</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://www.cnblogs.com/mfrank/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>JavaJavaJavaJava</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>BOSS</p>\n<p></p>\n<p>3</p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p>Java</p>\n<p>JavaJavaWeb/APPJavaJava</p>\n<p></p>\n<p></p>\n<p>JavaJavaWebJava</p>\n<p>JavaWebhtmlappappUI</p>\n<p>Java</p>\n<p></p>\n<p>Java</p>\n<p>QQ529253292</p>\n<p>Javabossbossboss</p>\n<p>JavaWeb</p>\n<p>JavaWeb:</p>\n<img src=\"/programming/java/introduction/java-started/java-started-1.png\" title=\"JavaWeb\">\n<p></p>\n<p>Java</p>\n"},{"title":"Java","date":"2018-12-26T11:55:51.000Z","_content":"\n## \n\n::: tip \nJavaJavadanteng\n:::\n\n \n\n+ \n+ \n\n## \n\nC++JavaJVM\n\n\"\"\n\n\n\nJava Java Java\n\nJava100%\n\n## \n\nJVMJVMJVM\n\n<img src=\"../reference/0190.png\" width=\"40\"/>\n\nJVMJVMOutOfMemoryError\n\nJVM\n\n\n\n\n\n\n\n\n\n","source":"_posts/java/jvm/garbage-collection.md","raw":"---\ntitle: Java\ntags: \n - \n - Java\n - \ncategories: \ndate: 2018-12-26 19:55:51\n---\n\n## \n\n::: tip \nJavaJavadanteng\n:::\n\n \n\n+ \n+ \n\n## \n\nC++JavaJVM\n\n\"\"\n\n\n\nJava Java Java\n\nJava100%\n\n## \n\nJVMJVMJVM\n\n<img src=\"../reference/0190.png\" width=\"40\"/>\n\nJVMJVMOutOfMemoryError\n\nJVM\n\n\n\n\n\n\n\n\n\n","slug":"java/jvm/garbage-collection","published":1,"updated":"2019-01-02T16:46:14.663Z","_id":"cjq7rm5r00021wu9ke0vbs3ft","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>JavaJavadanteng<br>:::</p>\n<p> </p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>C++JavaJVM</p>\n<p></p>\n<p></p>\n<p>Java Java Java</p>\n<p>Java100%</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JVMJVMJVM</p>\n<p><img src=\"../reference/0190.png\" width=\"40\"></p>\n<p>JVMJVMOutOfMemoryError</p>\n<p>JVM</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>JavaJavadanteng<br>:::</p>\n<p> </p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>C++JavaJVM</p>\n<p></p>\n<p></p>\n<p>Java Java Java</p>\n<p>Java100%</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JVMJVMJVM</p>\n<p><img src=\"../reference/0190.png\" width=\"40\"></p>\n<p>JVMJVMOutOfMemoryError</p>\n<p>JVM</p>\n"},{"prev":false,"next":"./reachable","_content":"\n# \n\n## \n\n::: tip \n\n:::\n\n## \n\nJava \n\nOOM\n\n(new)(delete)45,. \n\n## \n\n1\n\nHashMapVectorObjectVector\n\n2remove()\n\n3\n\n\n\n4\n\ndataSourse.getConnection()(socket)iocloseGC \n\n5\n\nA A B  public void registerMsg(Object b); BB \n\n6\n\nJVMJVM","source":"_posts/java/jvm/memory-leak.md","raw":"---\nprev: false\nnext: ./reachable\n---\n\n# \n\n## \n\n::: tip \n\n:::\n\n## \n\nJava \n\nOOM\n\n(new)(delete)45,. \n\n## \n\n1\n\nHashMapVectorObjectVector\n\n2remove()\n\n3\n\n\n\n4\n\ndataSourse.getConnection()(socket)iocloseGC \n\n5\n\nA A B  public void registerMsg(Object b); BB \n\n6\n\nJVMJVM","slug":"java/jvm/memory-leak","published":1,"date":"2019-01-02T14:25:23.398Z","updated":"2019-01-02T14:25:23.398Z","_id":"cjq7rm5r20025wu9k39jtd7pm","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br><br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java </p>\n<p>OOM</p>\n<p>(new)(delete)45,. </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>1</p>\n<p>HashMapVectorObjectVector</p>\n<p>2remove()</p>\n<p>3</p>\n<p></p>\n<p>4</p>\n<p>dataSourse.getConnection()(socket)iocloseGC </p>\n<p>5</p>\n<p>A A B  public void registerMsg(Object b); BB </p>\n<p>6</p>\n<p>JVMJVM</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br><br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java </p>\n<p>OOM</p>\n<p>(new)(delete)45,. </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>1</p>\n<p>HashMapVectorObjectVector</p>\n<p>2remove()</p>\n<p>3</p>\n<p></p>\n<p>4</p>\n<p>dataSourse.getConnection()(socket)iocloseGC </p>\n<p>5</p>\n<p>A A B  public void registerMsg(Object b); BB </p>\n<p>6</p>\n<p>JVMJVM</p>\n"},{"prev":"./memory-leak","next":"./reachable-in-hotspot","_content":"\n# \n\n## \n\n::: tip \nJavaReachableGC RootsReference ChainGC Roots\n:::\n\n## \n\n\n\nstrongly reachablesoftly reachableweakly reachablephantom reachableunreachable\n\n``` bash\n\n\n\n\n\n```\n\nJava\n\n![accessibility1](./accessibility1.jpg)\n\n## GC Roots\n\nGC RootsGC Roots\n\n```bash\n1. ()\n2. \n3. \n4. JNINative\n```\n\n## \n\n\tJVMGCGC Roots \n\n![accessibility1](./accessibility2.png)\n\nJVM\n\n1. \n2. \n\nObj43:1->62->53->4, Obj42->5Obj4strong reachable\n\nObj41->6,Obj4SoftReference,Obj4softly-reachable\n\nHotSpot[](./reachable-in-hotspot.md)\n\n","source":"_posts/java/jvm/reachable.md","raw":"---\nprev: ./memory-leak\nnext: ./reachable-in-hotspot\n---\n\n# \n\n## \n\n::: tip \nJavaReachableGC RootsReference ChainGC Roots\n:::\n\n## \n\n\n\nstrongly reachablesoftly reachableweakly reachablephantom reachableunreachable\n\n``` bash\n\n\n\n\n\n```\n\nJava\n\n![accessibility1](./accessibility1.jpg)\n\n## GC Roots\n\nGC RootsGC Roots\n\n```bash\n1. ()\n2. \n3. \n4. JNINative\n```\n\n## \n\n\tJVMGCGC Roots \n\n![accessibility1](./accessibility2.png)\n\nJVM\n\n1. \n2. \n\nObj43:1->62->53->4, Obj42->5Obj4strong reachable\n\nObj41->6,Obj4SoftReference,Obj4softly-reachable\n\nHotSpot[](./reachable-in-hotspot.md)\n\n","slug":"java/jvm/reachable","published":1,"date":"2019-01-02T14:25:23.398Z","updated":"2019-01-02T14:25:23.398Z","_id":"cjq7rm5r30028wu9kd2vclsbp","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>JavaReachableGC RootsReference ChainGC Roots<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>strongly reachablesoftly reachableweakly reachablephantom reachableunreachable</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>Java</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./accessibility1.jpg\" alt=\"accessibility1\" title=\"\">\n                </div>\n                <div class=\"image-caption\">accessibility1</div>\n            </figure>\n<h2 id=\"GC-Roots\"><a href=\"#GC-Roots\" class=\"headerlink\" title=\"GC Roots\"></a>GC Roots</h2><p>GC RootsGC Roots</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. ()</span><br><span class=\"line\">2. </span><br><span class=\"line\">3. </span><br><span class=\"line\">4. JNINative</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>    JVMGCGC Roots </p>\n<p><img src=\"./accessibility2.png\" alt=\"accessibility1\"></p>\n<p>JVM</p>\n<ol>\n<li></li>\n<li></li>\n</ol>\n<p>Obj43:1-&gt;62-&gt;53-&gt;4, Obj42-&gt;5Obj4strong reachable</p>\n<p>Obj41-&gt;6,Obj4SoftReference,Obj4softly-reachable</p>\n<p>HotSpot<a href=\"./reachable-in-hotspot.md\"></a></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>JavaReachableGC RootsReference ChainGC Roots<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>strongly reachablesoftly reachableweakly reachablephantom reachableunreachable</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>Java</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./accessibility1.jpg\" alt=\"accessibility1\" title=\"\">\n                </div>\n                <div class=\"image-caption\">accessibility1</div>\n            </figure>\n<h2 id=\"GC-Roots\"><a href=\"#GC-Roots\" class=\"headerlink\" title=\"GC Roots\"></a>GC Roots</h2><p>GC RootsGC Roots</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. ()</span><br><span class=\"line\">2. </span><br><span class=\"line\">3. </span><br><span class=\"line\">4. JNINative</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>    JVMGCGC Roots </p>\n<p><img src=\"./accessibility2.png\" alt=\"accessibility1\"></p>\n<p>JVM</p>\n<ol>\n<li></li>\n<li></li>\n</ol>\n<p>Obj43:1-&gt;62-&gt;53-&gt;4, Obj42-&gt;5Obj4strong reachable</p>\n<p>Obj41-&gt;6,Obj4SoftReference,Obj4softly-reachable</p>\n<p>HotSpot<a href=\"./reachable-in-hotspot.md\"></a></p>\n"},{"prev":"./reachable-in-hotspot","next":"./garbage-collection","_content":"\n# \n\n\n\n","source":"_posts/java/jvm/object-self-rescue.md","raw":"---\nprev: ./reachable-in-hotspot\nnext: ./garbage-collection\n---\n\n# \n\n\n\n","slug":"java/jvm/object-self-rescue","published":1,"date":"2019-01-02T14:25:23.398Z","updated":"2019-01-02T14:25:23.398Z","_id":"cjq7rm5r4002bwu9kye4nlqxg","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n"},{"prev":"./reachable","next":"./object-self-rescue","_content":"\n# HotSpot\n\nJavaHotSpotHotSpot\n\n## OopMap\n\nGC ROOTGC ROOT\n\nGCstop the worldCMS\n\nHotSpot\n\nOopMap\n\nJVMGC+HotSpotOopMap\n\nOopMapOopMapJITGC \n\n## Safepoint\n\nGC RootsOopMapOopMap\n\nHotSpotOopMapSafepoints\n\n\n\nGC******** \n\n- GC\n\n- \n\n## safe region\n\nGCsleepblockedJVM\n\n**) **\n\nJVMGCGCJVM","source":"_posts/java/jvm/reachable-in-hotspot.md","raw":"---\nprev: ./reachable\nnext: ./object-self-rescue\n---\n\n# HotSpot\n\nJavaHotSpotHotSpot\n\n## OopMap\n\nGC ROOTGC ROOT\n\nGCstop the worldCMS\n\nHotSpot\n\nOopMap\n\nJVMGC+HotSpotOopMap\n\nOopMapOopMapJITGC \n\n## Safepoint\n\nGC RootsOopMapOopMap\n\nHotSpotOopMapSafepoints\n\n\n\nGC******** \n\n- GC\n\n- \n\n## safe region\n\nGCsleepblockedJVM\n\n**) **\n\nJVMGCGCJVM","slug":"java/jvm/reachable-in-hotspot","published":1,"date":"2019-01-02T14:25:23.398Z","updated":"2019-01-02T14:25:23.398Z","_id":"cjq7rm5r5002dwu9kno8galhv","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"HotSpot\"><a href=\"#HotSpot\" class=\"headerlink\" title=\"HotSpot\"></a>HotSpot</h1><p>JavaHotSpotHotSpot</p>\n<h2 id=\"OopMap\"><a href=\"#OopMap\" class=\"headerlink\" title=\"OopMap\"></a>OopMap</h2><p>GC ROOTGC ROOT</p>\n<p>GCstop the worldCMS</p>\n<p>HotSpot</p>\n<p>OopMap</p>\n<p>JVMGC+HotSpotOopMap</p>\n<p>OopMapOopMapJITGC </p>\n<h2 id=\"Safepoint\"><a href=\"#Safepoint\" class=\"headerlink\" title=\"Safepoint\"></a>Safepoint</h2><p>GC RootsOopMapOopMap</p>\n<p>HotSpotOopMapSafepoints</p>\n<p></p>\n<p>GC<strong></strong><strong></strong> </p>\n<ul>\n<li><p>GC</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<h2 id=\"safe-region\"><a href=\"#safe-region\" class=\"headerlink\" title=\"safe region\"></a>safe region</h2><p>GCsleepblockedJVM</p>\n<p><strong>) </strong></p>\n<p>JVMGCGCJVM</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"HotSpot\"><a href=\"#HotSpot\" class=\"headerlink\" title=\"HotSpot\"></a>HotSpot</h1><p>JavaHotSpotHotSpot</p>\n<h2 id=\"OopMap\"><a href=\"#OopMap\" class=\"headerlink\" title=\"OopMap\"></a>OopMap</h2><p>GC ROOTGC ROOT</p>\n<p>GCstop the worldCMS</p>\n<p>HotSpot</p>\n<p>OopMap</p>\n<p>JVMGC+HotSpotOopMap</p>\n<p>OopMapOopMapJITGC </p>\n<h2 id=\"Safepoint\"><a href=\"#Safepoint\" class=\"headerlink\" title=\"Safepoint\"></a>Safepoint</h2><p>GC RootsOopMapOopMap</p>\n<p>HotSpotOopMapSafepoints</p>\n<p></p>\n<p>GC<strong></strong><strong></strong> </p>\n<ul>\n<li><p>GC</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<h2 id=\"safe-region\"><a href=\"#safe-region\" class=\"headerlink\" title=\"safe region\"></a>safe region</h2><p>GCsleepblockedJVM</p>\n<p><strong>) </strong></p>\n<p>JVMGCGCJVM</p>\n"},{"prev":false,"next":false,"_content":"\n# Java \n\n\n\n","source":"_posts/java/multithread/multithread-start.md","raw":"---\nprev: false\nnext: false\n\n---\n\n# Java \n\n\n\n","slug":"java/multithread/multithread-start","published":1,"date":"2019-01-02T14:25:23.398Z","updated":"2019-01-02T14:25:23.398Z","_id":"cjq7rm5r6002fwu9k2rseu2x6","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h1>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h1>"},{"prev":"./phantom-reference-code-detail","next":"./reference-summary","_content":"\n# FinalReference  Finalizer \n\n## \n\nFinalReferenceFinalizer\n\n<img src=\"./0012.png\"/>\n\n<img src=\"./0190.png\" width=\"40\"/>\n\nFinalReferenceReference\n\n```java\nclass FinalReference<T> extends Reference<T> {\n    public FinalReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n}\n```\n\n\n\nFinalReferenceJVMJVMObjectfinalize()FinalReference JVMFinalizerFinalizer\n\n## Finalizer\n\nfinalabstractpublicJVMfinalizerObjectfinalizefinalizerJVMfGCfinalize\n\n## Finalizer\n\njava.lang.refFinalReferenceFinalizer<img src=\"./06.png\" width=\"40\"/>\n\n```java\nfinal class Finalizer extends FinalReference<Object> {\n    ...\n}\n```\n\nemm.FinalizerFinalReferencefinal\n\nJVM\n\nfinalizeJVMFinalizerJVMFinalizer.register()Finalizer\n\n### \n\nFinalizer\n\n```java\nprivate Finalizer\n        next = null,\n        prev = null;\n```\n\nFinalizernextprev\n\n```java\nprivate static final Object lock = new Object();\n```\n\nlock\n\n```java\nprivate static Finalizer unfinalized = null;\n```\n\nunfinalizedffffinalizeGC\n\n```java\nprivate static ReferenceQueue<Object> queue = new ReferenceQueue<>();\n```\n\nqueueJVMFfqueueFinalizerThreadGCGC\n\n### \n\n```java\nprivate Finalizer(Object finalizee) {\n    super(finalizee, queue);\n    add();\n}\n```\n\naddFinalizerf\n\n### \n\nFinalizerFinalizerregisterFinalizer\n\n```java\nstatic void register(Object finalizee) {\n    new Finalizer(finalizee);\n}\n```\n\nJVM\n\nJVMFinalizer.registerFinalizerf\n\nclonefcloneFinalizer.register\n\n```java\nprivate void add() {\n    synchronized (lock) {\n        if (unfinalized != null) {\n            this.next = unfinalized;\n            unfinalized.prev = this;\n        }\n        unfinalized = this;\n    }\n}\n```\n\naddlockf\n\n```java\nprivate void remove() {\n    synchronized (lock) {\n        if (unfinalized == this) {\n            if (this.next != null) {\n                unfinalized = this.next;\n            } else {\n                unfinalized = this.prev;\n            }\n        }\n        if (this.next != null) {\n            this.next.prev = this.prev;\n        }\n        if (this.prev != null) {\n            this.prev.next = this.next;\n        }\n        this.next = this; \n        this.prev = this;\n    }\n}\n```\n\nremovelockfnextprevffinalize\n\n```java\nprivate boolean hasBeenFinalized() {\n    return (next == this);\n}\n```\n\nhasBeenFinalizedffinalizenext == this\n\n### FinalizerThread\n\nFinalizerFinalizerThread\n\n```java\nstatic {\n    ThreadGroup tg = Thread.currentThread().getThreadGroup();\n    for (ThreadGroup tgn = tg;\n         tgn != null;\n         tg = tgn, tgn = tg.getParent());\n    Thread finalizer = new FinalizerThread(tg);\n    finalizer.setPriority(Thread.MAX_PRIORITY - 2);\n    finalizer.setDaemon(true);\n    finalizer.start();\n}\n```\n\nReferenceHandler\n\n```java\nfinalizer.setPriority(Thread.MAX_PRIORITY - 2);\n```\n\nCPU\n\n```java\nprivate static class FinalizerThread extends Thread {\n    // \n    private volatile boolean running;\n    FinalizerThread(ThreadGroup g) {\n        super(g, \"Finalizer\");\n    }\n    public void run() {\n        // \n        if (running)\n            return;\n\n        // Finalizer System.initializeSystemClass \n        // JVM\n        while (!VM.isBooted()) {\n            try {\n                VM.awaitBooted();\n            } catch (InterruptedException x) {\n            }\n        }\n        final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n        running = true;\n        for (;;) {\n            try {\n                // \n                Finalizer f = (Finalizer)queue.remove();\n                // runFinalizer\n                f.runFinalizer(jla);\n            } catch (InterruptedException x) {\n                // \n            }\n        }\n    }\n}\n```\n\nJVMrunFinalizertrycatch**finalize**\n\n```java\nprivate void runFinalizer(JavaLangAccess jla) {\n    synchronized (this) {\n        // finalize\n        if (hasBeenFinalized()) return;\n        remove();\n    }\n    try {\n        // \n        Object finalizee = this.get();\n        // nullEnum\n        if (finalizee != null && !(finalizee instanceof java.lang.Enum)) {\n            // finalize\n            jla.invokeFinalize(finalizee);\n\n            // GC\n            finalizee = null;\n        }\n    } catch (Throwable x) { }\n    // Referenceclear\n    super.clear();\n}\n```\n\nfinalize**finalize**ffinalizefinalizeJVM\n\nFinalizerfinalizenull\n\n### SecondaryFinalizer\n\nemmm.runFinalizationrunAllFinalizersqueueFinalizerrunFinalizerfrunFinalizer\n\n```java\nstatic void runFinalization() {\n    if (!VM.isBooted()) {\n        return;\n    }\n\n    forkSecondaryFinalizer(new Runnable() {\n        private volatile boolean running;\n        public void run() {\n            // \n            if (running)\n                return;\n            final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n            running = true;\n            for (;;) {\n                Finalizer f = (Finalizer)queue.poll();\n                if (f == null) break;\n                f.runFinalizer(jla);\n            }\n        }\n    });\n}\n```\n\nrunFinalizationFinalizerThreadrunFinalizerRuntimeShutdownJVM\n\nSystem.runFinalizationRuntime.runFinalizationFinalizer.runFinalization\n\nrunAllFinalizers\n\n```java\nstatic void runAllFinalizers() {\n    if (!VM.isBooted()) {\n        return;\n    }\n\n    forkSecondaryFinalizer(new Runnable() {\n        private volatile boolean running;\n        public void run() {\n            // \n            if (running)\n                return;\n            final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n            running = true;\n            for (;;) {\n                Finalizer f;\n                synchronized (lock) {\n                    f = unfinalized;\n                    if (f == null) break;\n                    unfinalized = f.next;\n                }\n                f.runFinalizer(jla);\n            }}});\n}\n```\n\nqueueunfinalized\n\njava.lang.ShutDownsequencerunAllFinalizer\n\n```java\nif (rfoe) runAllFinalizers();\n```\n\nJVMFinalizerrunAllFinalizer\n\n```java\n/* Wormhole for invoking java.lang.ref.Finalizer.runAllFinalizers */\nprivate static native void runAllFinalizers();\n```\n\nforkSecondaryFinalizer\n\n```java\nprivate static void forkSecondaryFinalizer(final Runnable proc) {\n    AccessController.doPrivileged(\n        new PrivilegedAction<Void>() {\n            public Void run() {\n                ThreadGroup tg = Thread.currentThread().getThreadGroup();\n                for (ThreadGroup tgn = tg;\n                     tgn != null;\n                     tg = tgn, tgn = tg.getParent());\n                Thread sft = new Thread(tg, proc, \"Secondary finalizer\");\n                sft.start();\n                try {\n                    sft.join();\n                } catch (InterruptedException x) {\n                    Thread.currentThread().interrupt();\n                }\n                return null;\n            }});\n}\n```\n\nAccessController.doPrivileged[Java](https://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/)\n\nrunrun\n\n### Finalizer\n\nfinalize\n\nfinalizeJavaFinalizer;\n\n> Finalizerfinalizerfinalize\n\nfinalizefinalizefinalize\n\nfinalizefinalizebugJava\n\nfinalizefinalizationJVMJVMfinalization\n\nFinalizeThreadCPUFinalizerffinalize\n\nfGCGCfinalizeGCGCFinalizerThread\n\nf<img src=\"./0190.png\" width=\"40\"/>\n\nfFinalizerfunfinalizedFinalizerFinalizer\n\nfinalizeSystem.runFinalization\n\n### Finalizer \n\nFinalizer<img src=\"./0012.png\" width=\"50\"/>\n\nFinalizernativaCmallocfinalizenativefree\n\nsocketsFinalizerFinalizer\n\n## \n\n\n\n+ FinalReferencefinalize\n+ ObjectfinalizefJVM\n+ fFinalizer\n+ fGC\n+ ffinalizefGCfinalizeGC\n+ FinalizerGCGCFinalizerunfinalizedfinalize\n+ ffinalize\n+ ffinalizefoldGCFull GCGC\n\n\n\n\n\n### \n\n\n\n","source":"_posts/java/reference/final-reference-code-detail.md","raw":"---\nprev: ./phantom-reference-code-detail\nnext: ./reference-summary\n---\n\n# FinalReference  Finalizer \n\n## \n\nFinalReferenceFinalizer\n\n<img src=\"./0012.png\"/>\n\n<img src=\"./0190.png\" width=\"40\"/>\n\nFinalReferenceReference\n\n```java\nclass FinalReference<T> extends Reference<T> {\n    public FinalReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n}\n```\n\n\n\nFinalReferenceJVMJVMObjectfinalize()FinalReference JVMFinalizerFinalizer\n\n## Finalizer\n\nfinalabstractpublicJVMfinalizerObjectfinalizefinalizerJVMfGCfinalize\n\n## Finalizer\n\njava.lang.refFinalReferenceFinalizer<img src=\"./06.png\" width=\"40\"/>\n\n```java\nfinal class Finalizer extends FinalReference<Object> {\n    ...\n}\n```\n\nemm.FinalizerFinalReferencefinal\n\nJVM\n\nfinalizeJVMFinalizerJVMFinalizer.register()Finalizer\n\n### \n\nFinalizer\n\n```java\nprivate Finalizer\n        next = null,\n        prev = null;\n```\n\nFinalizernextprev\n\n```java\nprivate static final Object lock = new Object();\n```\n\nlock\n\n```java\nprivate static Finalizer unfinalized = null;\n```\n\nunfinalizedffffinalizeGC\n\n```java\nprivate static ReferenceQueue<Object> queue = new ReferenceQueue<>();\n```\n\nqueueJVMFfqueueFinalizerThreadGCGC\n\n### \n\n```java\nprivate Finalizer(Object finalizee) {\n    super(finalizee, queue);\n    add();\n}\n```\n\naddFinalizerf\n\n### \n\nFinalizerFinalizerregisterFinalizer\n\n```java\nstatic void register(Object finalizee) {\n    new Finalizer(finalizee);\n}\n```\n\nJVM\n\nJVMFinalizer.registerFinalizerf\n\nclonefcloneFinalizer.register\n\n```java\nprivate void add() {\n    synchronized (lock) {\n        if (unfinalized != null) {\n            this.next = unfinalized;\n            unfinalized.prev = this;\n        }\n        unfinalized = this;\n    }\n}\n```\n\naddlockf\n\n```java\nprivate void remove() {\n    synchronized (lock) {\n        if (unfinalized == this) {\n            if (this.next != null) {\n                unfinalized = this.next;\n            } else {\n                unfinalized = this.prev;\n            }\n        }\n        if (this.next != null) {\n            this.next.prev = this.prev;\n        }\n        if (this.prev != null) {\n            this.prev.next = this.next;\n        }\n        this.next = this; \n        this.prev = this;\n    }\n}\n```\n\nremovelockfnextprevffinalize\n\n```java\nprivate boolean hasBeenFinalized() {\n    return (next == this);\n}\n```\n\nhasBeenFinalizedffinalizenext == this\n\n### FinalizerThread\n\nFinalizerFinalizerThread\n\n```java\nstatic {\n    ThreadGroup tg = Thread.currentThread().getThreadGroup();\n    for (ThreadGroup tgn = tg;\n         tgn != null;\n         tg = tgn, tgn = tg.getParent());\n    Thread finalizer = new FinalizerThread(tg);\n    finalizer.setPriority(Thread.MAX_PRIORITY - 2);\n    finalizer.setDaemon(true);\n    finalizer.start();\n}\n```\n\nReferenceHandler\n\n```java\nfinalizer.setPriority(Thread.MAX_PRIORITY - 2);\n```\n\nCPU\n\n```java\nprivate static class FinalizerThread extends Thread {\n    // \n    private volatile boolean running;\n    FinalizerThread(ThreadGroup g) {\n        super(g, \"Finalizer\");\n    }\n    public void run() {\n        // \n        if (running)\n            return;\n\n        // Finalizer System.initializeSystemClass \n        // JVM\n        while (!VM.isBooted()) {\n            try {\n                VM.awaitBooted();\n            } catch (InterruptedException x) {\n            }\n        }\n        final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n        running = true;\n        for (;;) {\n            try {\n                // \n                Finalizer f = (Finalizer)queue.remove();\n                // runFinalizer\n                f.runFinalizer(jla);\n            } catch (InterruptedException x) {\n                // \n            }\n        }\n    }\n}\n```\n\nJVMrunFinalizertrycatch**finalize**\n\n```java\nprivate void runFinalizer(JavaLangAccess jla) {\n    synchronized (this) {\n        // finalize\n        if (hasBeenFinalized()) return;\n        remove();\n    }\n    try {\n        // \n        Object finalizee = this.get();\n        // nullEnum\n        if (finalizee != null && !(finalizee instanceof java.lang.Enum)) {\n            // finalize\n            jla.invokeFinalize(finalizee);\n\n            // GC\n            finalizee = null;\n        }\n    } catch (Throwable x) { }\n    // Referenceclear\n    super.clear();\n}\n```\n\nfinalize**finalize**ffinalizefinalizeJVM\n\nFinalizerfinalizenull\n\n### SecondaryFinalizer\n\nemmm.runFinalizationrunAllFinalizersqueueFinalizerrunFinalizerfrunFinalizer\n\n```java\nstatic void runFinalization() {\n    if (!VM.isBooted()) {\n        return;\n    }\n\n    forkSecondaryFinalizer(new Runnable() {\n        private volatile boolean running;\n        public void run() {\n            // \n            if (running)\n                return;\n            final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n            running = true;\n            for (;;) {\n                Finalizer f = (Finalizer)queue.poll();\n                if (f == null) break;\n                f.runFinalizer(jla);\n            }\n        }\n    });\n}\n```\n\nrunFinalizationFinalizerThreadrunFinalizerRuntimeShutdownJVM\n\nSystem.runFinalizationRuntime.runFinalizationFinalizer.runFinalization\n\nrunAllFinalizers\n\n```java\nstatic void runAllFinalizers() {\n    if (!VM.isBooted()) {\n        return;\n    }\n\n    forkSecondaryFinalizer(new Runnable() {\n        private volatile boolean running;\n        public void run() {\n            // \n            if (running)\n                return;\n            final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n            running = true;\n            for (;;) {\n                Finalizer f;\n                synchronized (lock) {\n                    f = unfinalized;\n                    if (f == null) break;\n                    unfinalized = f.next;\n                }\n                f.runFinalizer(jla);\n            }}});\n}\n```\n\nqueueunfinalized\n\njava.lang.ShutDownsequencerunAllFinalizer\n\n```java\nif (rfoe) runAllFinalizers();\n```\n\nJVMFinalizerrunAllFinalizer\n\n```java\n/* Wormhole for invoking java.lang.ref.Finalizer.runAllFinalizers */\nprivate static native void runAllFinalizers();\n```\n\nforkSecondaryFinalizer\n\n```java\nprivate static void forkSecondaryFinalizer(final Runnable proc) {\n    AccessController.doPrivileged(\n        new PrivilegedAction<Void>() {\n            public Void run() {\n                ThreadGroup tg = Thread.currentThread().getThreadGroup();\n                for (ThreadGroup tgn = tg;\n                     tgn != null;\n                     tg = tgn, tgn = tg.getParent());\n                Thread sft = new Thread(tg, proc, \"Secondary finalizer\");\n                sft.start();\n                try {\n                    sft.join();\n                } catch (InterruptedException x) {\n                    Thread.currentThread().interrupt();\n                }\n                return null;\n            }});\n}\n```\n\nAccessController.doPrivileged[Java](https://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/)\n\nrunrun\n\n### Finalizer\n\nfinalize\n\nfinalizeJavaFinalizer;\n\n> Finalizerfinalizerfinalize\n\nfinalizefinalizefinalize\n\nfinalizefinalizebugJava\n\nfinalizefinalizationJVMJVMfinalization\n\nFinalizeThreadCPUFinalizerffinalize\n\nfGCGCfinalizeGCGCFinalizerThread\n\nf<img src=\"./0190.png\" width=\"40\"/>\n\nfFinalizerfunfinalizedFinalizerFinalizer\n\nfinalizeSystem.runFinalization\n\n### Finalizer \n\nFinalizer<img src=\"./0012.png\" width=\"50\"/>\n\nFinalizernativaCmallocfinalizenativefree\n\nsocketsFinalizerFinalizer\n\n## \n\n\n\n+ FinalReferencefinalize\n+ ObjectfinalizefJVM\n+ fFinalizer\n+ fGC\n+ ffinalizefGCfinalizeGC\n+ FinalizerGCGCFinalizerunfinalizedfinalize\n+ ffinalize\n+ ffinalizefoldGCFull GCGC\n\n\n\n\n\n### \n\n\n\n","slug":"java/reference/final-reference-code-detail","published":1,"date":"2019-01-02T14:25:23.442Z","updated":"2019-01-02T14:25:23.443Z","_id":"cjq7rm5ra002hwu9k8sq9rdac","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"FinalReference--Finalizer-\"><a href=\"#FinalReference--Finalizer-\" class=\"headerlink\" title=\"FinalReference  Finalizer \"></a>FinalReference  Finalizer </h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>FinalReferenceFinalizer</p>\n<p><img src=\"./0012.png\"></p>\n<p><img src=\"./0190.png\" width=\"40\"></p>\n<p>FinalReferenceReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FinalReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FinalReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>FinalReferenceJVMJVMObjectfinalize()FinalReference JVMFinalizerFinalizer</p>\n<h2 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h2><p>finalabstractpublicJVMfinalizerObjectfinalizefinalizerJVMfGCfinalize</p>\n<h2 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h2><p>java.lang.refFinalReferenceFinalizer<img src=\"./06.png\" width=\"40\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Finalizer</span> <span class=\"keyword\">extends</span> <span class=\"title\">FinalReference</span>&lt;<span class=\"title\">Object</span>&gt; </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emm.FinalizerFinalReferencefinal</p>\n<p>JVM</p>\n<p>finalizeJVMFinalizerJVMFinalizer.register()Finalizer</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Finalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Finalizer</span><br><span class=\"line\">        next = <span class=\"keyword\">null</span>,</span><br><span class=\"line\">        prev = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>Finalizernextprev</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object lock = <span class=\"keyword\">new</span> Object();</span><br></pre></td></tr></table></figure>\n<p>lock</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Finalizer unfinalized = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>unfinalizedffffinalizeGC</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>queueJVMFfqueueFinalizerThreadGCGC</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Finalizer</span><span class=\"params\">(Object finalizee)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(finalizee, queue);</span><br><span class=\"line\">    add();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>addFinalizerf</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>FinalizerFinalizerregisterFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">register</span><span class=\"params\">(Object finalizee)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Finalizer(finalizee);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>JVM</p>\n<p>JVMFinalizer.registerFinalizerf</p>\n<p>clonefcloneFinalizer.register</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (unfinalized != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.next = unfinalized;</span><br><span class=\"line\">            unfinalized.prev = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        unfinalized = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>addlockf</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (unfinalized == <span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                unfinalized = <span class=\"keyword\">this</span>.next;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                unfinalized = <span class=\"keyword\">this</span>.prev;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.next.prev = <span class=\"keyword\">this</span>.prev;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.prev != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.prev.next = <span class=\"keyword\">this</span>.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.next = <span class=\"keyword\">this</span>; </span><br><span class=\"line\">        <span class=\"keyword\">this</span>.prev = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>removelockfnextprevffinalize</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasBeenFinalized</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (next == <span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>hasBeenFinalizedffinalizenext == this</p>\n<h3 id=\"FinalizerThread\"><a href=\"#FinalizerThread\" class=\"headerlink\" title=\"FinalizerThread\"></a>FinalizerThread</h3><p>FinalizerFinalizerThread</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">         tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">         tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">    Thread finalizer = <span class=\"keyword\">new</span> FinalizerThread(tg);</span><br><span class=\"line\">    finalizer.setPriority(Thread.MAX_PRIORITY - <span class=\"number\">2</span>);</span><br><span class=\"line\">    finalizer.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    finalizer.start();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceHandler</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">finalizer.setPriority(Thread.MAX_PRIORITY - <span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n<p>CPU</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FinalizerThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">    FinalizerThread(ThreadGroup g) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(g, <span class=\"string\">\"Finalizer\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Finalizer System.initializeSystemClass </span></span><br><span class=\"line\">        <span class=\"comment\">// JVM</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                VM.awaitBooted();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">        running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                Finalizer f = (Finalizer)queue.remove();</span><br><span class=\"line\">                <span class=\"comment\">// runFinalizer</span></span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>JVMrunFinalizertrycatch<strong>finalize</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">runFinalizer</span><span class=\"params\">(JavaLangAccess jla)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// finalize</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (hasBeenFinalized()) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        remove();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        Object finalizee = <span class=\"keyword\">this</span>.get();</span><br><span class=\"line\">        <span class=\"comment\">// nullEnum</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (finalizee != <span class=\"keyword\">null</span> &amp;&amp; !(finalizee <span class=\"keyword\">instanceof</span> java.lang.Enum)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// finalize</span></span><br><span class=\"line\">            jla.invokeFinalize(finalizee);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// GC</span></span><br><span class=\"line\">            finalizee = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Throwable x) &#123; &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Referenceclear</span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>.clear();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>finalize<strong>finalize</strong>ffinalizefinalizeJVM</p>\n<p>Finalizerfinalizenull</p>\n<h3 id=\"SecondaryFinalizer\"><a href=\"#SecondaryFinalizer\" class=\"headerlink\" title=\"SecondaryFinalizer\"></a>SecondaryFinalizer</h3><p>emmm.runFinalizationrunAllFinalizersqueueFinalizerrunFinalizerfrunFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">runFinalization</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    forkSecondaryFinalizer(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">            running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">                Finalizer f = (Finalizer)queue.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (f == <span class=\"keyword\">null</span>) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>runFinalizationFinalizerThreadrunFinalizerRuntimeShutdownJVM</p>\n<p>System.runFinalizationRuntime.runFinalizationFinalizer.runFinalization</p>\n<p>runAllFinalizers</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">runAllFinalizers</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    forkSecondaryFinalizer(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">            running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">                Finalizer f;</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">                    f = unfinalized;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (f == <span class=\"keyword\">null</span>) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    unfinalized = f.next;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125;&#125;&#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>queueunfinalized</p>\n<p>java.lang.ShutDownsequencerunAllFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (rfoe) runAllFinalizers();</span><br></pre></td></tr></table></figure>\n<p>JVMFinalizerrunAllFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Wormhole for invoking java.lang.ref.Finalizer.runAllFinalizers */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> <span class=\"keyword\">void</span> <span class=\"title\">runAllFinalizers</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<p>forkSecondaryFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">forkSecondaryFinalizer</span><span class=\"params\">(<span class=\"keyword\">final</span> Runnable proc)</span> </span>&#123;</span><br><span class=\"line\">    AccessController.doPrivileged(</span><br><span class=\"line\">        <span class=\"keyword\">new</span> PrivilegedAction&lt;Void&gt;() &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> Void <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">                     tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                     tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">                Thread sft = <span class=\"keyword\">new</span> Thread(tg, proc, <span class=\"string\">\"Secondary finalizer\"</span>);</span><br><span class=\"line\">                sft.start();</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    sft.join();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;&#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>AccessController.doPrivileged<a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/\" target=\"_blank\" rel=\"noopener\">Java</a></p>\n<p>runrun</p>\n<h3 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h3><p>finalize</p>\n<p>finalizeJavaFinalizer;</p>\n<blockquote>\n<p>Finalizerfinalizerfinalize</p>\n</blockquote>\n<p>finalizefinalizefinalize</p>\n<p>finalizefinalizebugJava</p>\n<p>finalizefinalizationJVMJVMfinalization</p>\n<p>FinalizeThreadCPUFinalizerffinalize</p>\n<p>fGCGCfinalizeGCGCFinalizerThread</p>\n<p>f<img src=\"./0190.png\" width=\"40\"></p>\n<p>fFinalizerfunfinalizedFinalizerFinalizer</p>\n<p>finalizeSystem.runFinalization</p>\n<h3 id=\"Finalizer-\"><a href=\"#Finalizer-\" class=\"headerlink\" title=\"Finalizer \"></a>Finalizer </h3><p>Finalizer<img src=\"./0012.png\" width=\"50\"></p>\n<p>FinalizernativaCmallocfinalizenativefree</p>\n<p>socketsFinalizerFinalizer</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ul>\n<li>FinalReferencefinalize</li>\n<li>ObjectfinalizefJVM</li>\n<li>fFinalizer</li>\n<li>fGC</li>\n<li>ffinalizefGCfinalizeGC</li>\n<li>FinalizerGCGCFinalizerunfinalizedfinalize</li>\n<li>ffinalize</li>\n<li>ffinalizefoldGCFull GCGC</li>\n</ul>\n<p>### </p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"FinalReference--Finalizer-\"><a href=\"#FinalReference--Finalizer-\" class=\"headerlink\" title=\"FinalReference  Finalizer \"></a>FinalReference  Finalizer </h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>FinalReferenceFinalizer</p>\n<p><img src=\"./0012.png\"></p>\n<p><img src=\"./0190.png\" width=\"40\"></p>\n<p>FinalReferenceReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FinalReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FinalReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>FinalReferenceJVMJVMObjectfinalize()FinalReference JVMFinalizerFinalizer</p>\n<h2 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h2><p>finalabstractpublicJVMfinalizerObjectfinalizefinalizerJVMfGCfinalize</p>\n<h2 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h2><p>java.lang.refFinalReferenceFinalizer<img src=\"./06.png\" width=\"40\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Finalizer</span> <span class=\"keyword\">extends</span> <span class=\"title\">FinalReference</span>&lt;<span class=\"title\">Object</span>&gt; </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emm.FinalizerFinalReferencefinal</p>\n<p>JVM</p>\n<p>finalizeJVMFinalizerJVMFinalizer.register()Finalizer</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Finalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Finalizer</span><br><span class=\"line\">        next = <span class=\"keyword\">null</span>,</span><br><span class=\"line\">        prev = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>Finalizernextprev</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object lock = <span class=\"keyword\">new</span> Object();</span><br></pre></td></tr></table></figure>\n<p>lock</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Finalizer unfinalized = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>unfinalizedffffinalizeGC</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>queueJVMFfqueueFinalizerThreadGCGC</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Finalizer</span><span class=\"params\">(Object finalizee)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(finalizee, queue);</span><br><span class=\"line\">    add();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>addFinalizerf</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>FinalizerFinalizerregisterFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">register</span><span class=\"params\">(Object finalizee)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Finalizer(finalizee);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>JVM</p>\n<p>JVMFinalizer.registerFinalizerf</p>\n<p>clonefcloneFinalizer.register</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (unfinalized != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.next = unfinalized;</span><br><span class=\"line\">            unfinalized.prev = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        unfinalized = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>addlockf</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (unfinalized == <span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                unfinalized = <span class=\"keyword\">this</span>.next;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                unfinalized = <span class=\"keyword\">this</span>.prev;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.next.prev = <span class=\"keyword\">this</span>.prev;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.prev != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.prev.next = <span class=\"keyword\">this</span>.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.next = <span class=\"keyword\">this</span>; </span><br><span class=\"line\">        <span class=\"keyword\">this</span>.prev = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>removelockfnextprevffinalize</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasBeenFinalized</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (next == <span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>hasBeenFinalizedffinalizenext == this</p>\n<h3 id=\"FinalizerThread\"><a href=\"#FinalizerThread\" class=\"headerlink\" title=\"FinalizerThread\"></a>FinalizerThread</h3><p>FinalizerFinalizerThread</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">         tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">         tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">    Thread finalizer = <span class=\"keyword\">new</span> FinalizerThread(tg);</span><br><span class=\"line\">    finalizer.setPriority(Thread.MAX_PRIORITY - <span class=\"number\">2</span>);</span><br><span class=\"line\">    finalizer.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    finalizer.start();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceHandler</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">finalizer.setPriority(Thread.MAX_PRIORITY - <span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n<p>CPU</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FinalizerThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">    FinalizerThread(ThreadGroup g) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(g, <span class=\"string\">\"Finalizer\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Finalizer System.initializeSystemClass </span></span><br><span class=\"line\">        <span class=\"comment\">// JVM</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                VM.awaitBooted();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">        running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                Finalizer f = (Finalizer)queue.remove();</span><br><span class=\"line\">                <span class=\"comment\">// runFinalizer</span></span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>JVMrunFinalizertrycatch<strong>finalize</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">runFinalizer</span><span class=\"params\">(JavaLangAccess jla)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// finalize</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (hasBeenFinalized()) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        remove();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        Object finalizee = <span class=\"keyword\">this</span>.get();</span><br><span class=\"line\">        <span class=\"comment\">// nullEnum</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (finalizee != <span class=\"keyword\">null</span> &amp;&amp; !(finalizee <span class=\"keyword\">instanceof</span> java.lang.Enum)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// finalize</span></span><br><span class=\"line\">            jla.invokeFinalize(finalizee);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// GC</span></span><br><span class=\"line\">            finalizee = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Throwable x) &#123; &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Referenceclear</span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>.clear();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>finalize<strong>finalize</strong>ffinalizefinalizeJVM</p>\n<p>Finalizerfinalizenull</p>\n<h3 id=\"SecondaryFinalizer\"><a href=\"#SecondaryFinalizer\" class=\"headerlink\" title=\"SecondaryFinalizer\"></a>SecondaryFinalizer</h3><p>emmm.runFinalizationrunAllFinalizersqueueFinalizerrunFinalizerfrunFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">runFinalization</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    forkSecondaryFinalizer(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">            running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">                Finalizer f = (Finalizer)queue.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (f == <span class=\"keyword\">null</span>) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>runFinalizationFinalizerThreadrunFinalizerRuntimeShutdownJVM</p>\n<p>System.runFinalizationRuntime.runFinalizationFinalizer.runFinalization</p>\n<p>runAllFinalizers</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">runAllFinalizers</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    forkSecondaryFinalizer(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">            running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">                Finalizer f;</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">                    f = unfinalized;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (f == <span class=\"keyword\">null</span>) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    unfinalized = f.next;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125;&#125;&#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>queueunfinalized</p>\n<p>java.lang.ShutDownsequencerunAllFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (rfoe) runAllFinalizers();</span><br></pre></td></tr></table></figure>\n<p>JVMFinalizerrunAllFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Wormhole for invoking java.lang.ref.Finalizer.runAllFinalizers */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> <span class=\"keyword\">void</span> <span class=\"title\">runAllFinalizers</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<p>forkSecondaryFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">forkSecondaryFinalizer</span><span class=\"params\">(<span class=\"keyword\">final</span> Runnable proc)</span> </span>&#123;</span><br><span class=\"line\">    AccessController.doPrivileged(</span><br><span class=\"line\">        <span class=\"keyword\">new</span> PrivilegedAction&lt;Void&gt;() &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> Void <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">                     tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                     tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">                Thread sft = <span class=\"keyword\">new</span> Thread(tg, proc, <span class=\"string\">\"Secondary finalizer\"</span>);</span><br><span class=\"line\">                sft.start();</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    sft.join();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;&#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>AccessController.doPrivileged<a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/\" target=\"_blank\" rel=\"noopener\">Java</a></p>\n<p>runrun</p>\n<h3 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h3><p>finalize</p>\n<p>finalizeJavaFinalizer;</p>\n<blockquote>\n<p>Finalizerfinalizerfinalize</p>\n</blockquote>\n<p>finalizefinalizefinalize</p>\n<p>finalizefinalizebugJava</p>\n<p>finalizefinalizationJVMJVMfinalization</p>\n<p>FinalizeThreadCPUFinalizerffinalize</p>\n<p>fGCGCfinalizeGCGCFinalizerThread</p>\n<p>f<img src=\"./0190.png\" width=\"40\"></p>\n<p>fFinalizerfunfinalizedFinalizerFinalizer</p>\n<p>finalizeSystem.runFinalization</p>\n<h3 id=\"Finalizer-\"><a href=\"#Finalizer-\" class=\"headerlink\" title=\"Finalizer \"></a>Finalizer </h3><p>Finalizer<img src=\"./0012.png\" width=\"50\"></p>\n<p>FinalizernativaCmallocfinalizenativefree</p>\n<p>socketsFinalizerFinalizer</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ul>\n<li>FinalReferencefinalize</li>\n<li>ObjectfinalizefJVM</li>\n<li>fFinalizer</li>\n<li>fGC</li>\n<li>ffinalizefGCfinalizeGC</li>\n<li>FinalizerGCGCFinalizerunfinalizedfinalize</li>\n<li>ffinalize</li>\n<li>ffinalizefoldGCFull GCGC</li>\n</ul>\n<p>### </p>\n"},{"prev":false,"next":"./strong-reference","_content":"\n# \n\n::: tip \nJDK1.2\n:::\n\nJavaJava\n\n<img src=\"./0046.png\" width=\"50\"/>\n\n## \n\nJavasocketOOM<img src=\"./0005.png\" width=\"50\"/>\n\nJavaJVM  \n\nJavaCC++JVMbug\n\nJVM[](../jvm/garbage-collection.md)\n\n## \n\nJDK 1.2reachable \n\nJVM\n\nJDK 1.2Java4\n\nJVMJVM\n\n4****************\n\n\n\n<img src=\"./148.png\" width=\"50\"/>\n\n## \n\n\n\n\n\n```java\npublic static Map<K, V> storedObjs = new HashMap<>();\n```\n\nOOM\n\n```java\npublic class OOMTest {\n    public static List<Integer> cachedObjs = new ArrayList<>();\n \n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000_000; i++) {\n            cachedObjs.add(i);\n        }\n    }\n}\n```\n\n\n\n```bash\nException in thread main java.lang.OutOfMemoryError: Java heap space\n```\n\n<img src=\"./0005.png\" width=\"50\"/>\n\nHashMap\n\n## \n\n \n\n+ <LabelBlock>    </LabelBlock>\n  + [](./strong-reference.md)\n  + [](./soft-reference.md)\n  + [](./weak-referecen.md)\n  + [](./phantom-reference.md)\n+ <LabelBlock>    </LabelBlock>\n  + [Reference](./reference-code-detail.md)\n  + [ReferenceQueue](./reference-queue-code-detail.md)\n  + [SoftReference](./soft-reference-code-detail.md)\n  + [WeakReference](./weak-reference-code-detail.md)\n  + [PhantomReference](./phantom-reference-code-detail.md)\n  + [FinalReferenceFinalizer](./final-reference-code-detail.md)\n+ <LabelBlock>    </LabelBlock>\n  + [](./reference-summary.md)\n\n::: warning \n`JDK1.8`  \n:::\n\n<img src=\"./0003.png\" width=\"50\"/>","source":"_posts/java/reference/four-kinds-of-reference.md","raw":"---\nprev: false\nnext: ./strong-reference\n\n---\n\n# \n\n::: tip \nJDK1.2\n:::\n\nJavaJava\n\n<img src=\"./0046.png\" width=\"50\"/>\n\n## \n\nJavasocketOOM<img src=\"./0005.png\" width=\"50\"/>\n\nJavaJVM  \n\nJavaCC++JVMbug\n\nJVM[](../jvm/garbage-collection.md)\n\n## \n\nJDK 1.2reachable \n\nJVM\n\nJDK 1.2Java4\n\nJVMJVM\n\n4****************\n\n\n\n<img src=\"./148.png\" width=\"50\"/>\n\n## \n\n\n\n\n\n```java\npublic static Map<K, V> storedObjs = new HashMap<>();\n```\n\nOOM\n\n```java\npublic class OOMTest {\n    public static List<Integer> cachedObjs = new ArrayList<>();\n \n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000_000; i++) {\n            cachedObjs.add(i);\n        }\n    }\n}\n```\n\n\n\n```bash\nException in thread main java.lang.OutOfMemoryError: Java heap space\n```\n\n<img src=\"./0005.png\" width=\"50\"/>\n\nHashMap\n\n## \n\n \n\n+ <LabelBlock>    </LabelBlock>\n  + [](./strong-reference.md)\n  + [](./soft-reference.md)\n  + [](./weak-referecen.md)\n  + [](./phantom-reference.md)\n+ <LabelBlock>    </LabelBlock>\n  + [Reference](./reference-code-detail.md)\n  + [ReferenceQueue](./reference-queue-code-detail.md)\n  + [SoftReference](./soft-reference-code-detail.md)\n  + [WeakReference](./weak-reference-code-detail.md)\n  + [PhantomReference](./phantom-reference-code-detail.md)\n  + [FinalReferenceFinalizer](./final-reference-code-detail.md)\n+ <LabelBlock>    </LabelBlock>\n  + [](./reference-summary.md)\n\n::: warning \n`JDK1.8`  \n:::\n\n<img src=\"./0003.png\" width=\"50\"/>","slug":"java/reference/four-kinds-of-reference","published":1,"date":"2019-01-02T14:25:23.444Z","updated":"2019-01-02T14:25:23.445Z","_id":"cjq7rm5rd002jwu9kvp7dyhm2","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>::: tip<br>JDK1.2<br>:::</p>\n<p>JavaJava</p>\n<p><img src=\"./0046.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavasocketOOM<img src=\"./0005.png\" width=\"50\"></p>\n<p>JavaJVM  </p>\n<p>JavaCC++JVMbug</p>\n<p>JVM<a href=\"../jvm/garbage-collection.md\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK 1.2reachable </p>\n<p>JVM</p>\n<p>JDK 1.2Java4</p>\n<p>JVMJVM</p>\n<p>4<strong></strong><strong></strong><strong></strong><strong></strong></p>\n<p></p>\n<p><img src=\"./148.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Map&lt;K, V&gt; storedObjs = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>OOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> List&lt;Integer&gt; cachedObjs = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000_000</span>; i++) &#123;</span><br><span class=\"line\">            cachedObjs.add(i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Exception <span class=\"keyword\">in</span> thread main java.lang.OutOfMemoryError: Java heap space</span><br></pre></td></tr></table></figure>\n<p><img src=\"./0005.png\" width=\"50\"></p>\n<p>HashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n<ul>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./strong-reference.md\"></a></li>\n<li><a href=\"./soft-reference.md\"></a></li>\n<li><a href=\"./weak-referecen.md\"></a></li>\n<li><a href=\"./phantom-reference.md\"></a></li>\n</ul>\n</li>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./reference-code-detail.md\">Reference</a></li>\n<li><a href=\"./reference-queue-code-detail.md\">ReferenceQueue</a></li>\n<li><a href=\"./soft-reference-code-detail.md\">SoftReference</a></li>\n<li><a href=\"./weak-reference-code-detail.md\">WeakReference</a></li>\n<li><a href=\"./phantom-reference-code-detail.md\">PhantomReference</a></li>\n<li><a href=\"./final-reference-code-detail.md\">FinalReferenceFinalizer</a></li>\n</ul>\n</li>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./reference-summary.md\"></a></li>\n</ul>\n</li>\n</ul>\n<p>::: warning <br><code>JDK1.8</code> <br>:::</p>\n<p><img src=\"./0003.png\" width=\"50\"></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>::: tip<br>JDK1.2<br>:::</p>\n<p>JavaJava</p>\n<p><img src=\"./0046.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavasocketOOM<img src=\"./0005.png\" width=\"50\"></p>\n<p>JavaJVM  </p>\n<p>JavaCC++JVMbug</p>\n<p>JVM<a href=\"../jvm/garbage-collection.md\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK 1.2reachable </p>\n<p>JVM</p>\n<p>JDK 1.2Java4</p>\n<p>JVMJVM</p>\n<p>4<strong></strong><strong></strong><strong></strong><strong></strong></p>\n<p></p>\n<p><img src=\"./148.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Map&lt;K, V&gt; storedObjs = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>OOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> List&lt;Integer&gt; cachedObjs = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000_000</span>; i++) &#123;</span><br><span class=\"line\">            cachedObjs.add(i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Exception <span class=\"keyword\">in</span> thread main java.lang.OutOfMemoryError: Java heap space</span><br></pre></td></tr></table></figure>\n<p><img src=\"./0005.png\" width=\"50\"></p>\n<p>HashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n<ul>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./strong-reference.md\"></a></li>\n<li><a href=\"./soft-reference.md\"></a></li>\n<li><a href=\"./weak-referecen.md\"></a></li>\n<li><a href=\"./phantom-reference.md\"></a></li>\n</ul>\n</li>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./reference-code-detail.md\">Reference</a></li>\n<li><a href=\"./reference-queue-code-detail.md\">ReferenceQueue</a></li>\n<li><a href=\"./soft-reference-code-detail.md\">SoftReference</a></li>\n<li><a href=\"./weak-reference-code-detail.md\">WeakReference</a></li>\n<li><a href=\"./phantom-reference-code-detail.md\">PhantomReference</a></li>\n<li><a href=\"./final-reference-code-detail.md\">FinalReferenceFinalizer</a></li>\n</ul>\n</li>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./reference-summary.md\"></a></li>\n</ul>\n</li>\n</ul>\n<p>::: warning <br><code>JDK1.8</code> <br>:::</p>\n<p><img src=\"./0003.png\" width=\"50\"></p>\n"},{"prev":"./weak-reference-code-detail","next":"./final-reference-code-detail","_content":"\n# PhantomReference\n\n## \n\n::: tip \nPhantomReference\n:::\n\n## \n\nPhantomReferenceWeakReference\n\n```java\npublic class PhantomReference<T> extends Reference<T> {\n    public T get() {\n        return null;\n    }\n\n    /**\n     * null\n     */\n    public PhantomReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n}\n```\n\ngetnull\n\n<img src=\"./06.png\" width=\"40\"/> ","source":"_posts/java/reference/phantom-reference-code-detail.md","raw":"---\nprev: ./weak-reference-code-detail\nnext: ./final-reference-code-detail\n---\n\n# PhantomReference\n\n## \n\n::: tip \nPhantomReference\n:::\n\n## \n\nPhantomReferenceWeakReference\n\n```java\npublic class PhantomReference<T> extends Reference<T> {\n    public T get() {\n        return null;\n    }\n\n    /**\n     * null\n     */\n    public PhantomReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n}\n```\n\ngetnull\n\n<img src=\"./06.png\" width=\"40\"/> ","slug":"java/reference/phantom-reference-code-detail","published":1,"date":"2019-01-02T14:25:23.446Z","updated":"2019-01-02T14:25:23.447Z","_id":"cjq7rm5re002lwu9kaa1i2q1i","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"PhantomReference\"><a href=\"#PhantomReference\" class=\"headerlink\" title=\"PhantomReference\"></a>PhantomReference</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>PhantomReference<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>PhantomReferenceWeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PhantomReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * null</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PhantomReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getnull</p>\n<p><img src=\"./06.png\" width=\"40\"> </p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"PhantomReference\"><a href=\"#PhantomReference\" class=\"headerlink\" title=\"PhantomReference\"></a>PhantomReference</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>PhantomReference<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>PhantomReferenceWeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PhantomReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * null</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PhantomReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getnull</p>\n<p><img src=\"./06.png\" width=\"40\"> </p>\n"},{"prev":"./weak-reference","next":"./reference-code-detail","_content":"\n# \n\n## \n\n::: tip \nPhantomReference\n:::\n\n## \n\n\n\n::: tip \nGC Roots`phantom reachable`\n:::\n\nget()null\n\n  \n\nfinalizefinalize\n\nfinalizenull\n\n\n\n```java\npublic class PhantomReferenceTest {\n    private static final List<Object> TEST_DATA = new LinkedList<>();\n    private static final ReferenceQueue<TestClass> QUEUE = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        TestClass obj = new TestClass(\"Test\");\n        PhantomReference<TestClass> phantomReference = new PhantomReference<>(obj, QUEUE);\n\n        // GC\n        new Thread(() -> {\n            while (true) {\n                TEST_DATA.add(new byte[1024 * 100]);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                    Thread.currentThread().interrupt();\n                }\n                System.out.println(phantomReference.get());\n            }\n        }).start();\n\n        // \n        new Thread(() -> {\n            while (true) {\n                Reference<? extends TestClass> poll = QUEUE.poll();\n                if (poll != null) {\n                    System.out.println(\"--- jvm ---- \" + poll);\n                    System.out.println(\"---  ---- \" + poll.get());\n                }\n            }\n        }).start();\n\n        obj = null;\n\n        try {\n            Thread.currentThread().join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n            System.exit(1);\n        }\n    }\n\n    static class TestClass {\n        private String name;\n\n        public TestClass(String name) {\n            this.name = name;\n        }\n\n        @Override\n        public String toString() {\n            return \"TestClass - \" + name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1024K->432K(3584K), 0.0113386 secs]\n[GC (Allocation Failure)  1455K->520K(3584K), 0.0133610 secs]\n[GC (Allocation Failure)  1544K->648K(3584K), 0.0008654 secs]\nnull\nnull\nnull\n[GC (Allocation Failure)  1655K->973K(3584K), 0.0008111 secs]\nnull\n...null\n[GC (Allocation Failure)  1980K->1997K(3584K), 0.0009289 secs]\n[Full GC (Ergonomics)  1997K->1870K(3584K), 0.0048483 secs]\n--- jvm ---- java.lang.ref.PhantomReference@74cbe23d\n---  ---- null\nnull\n...nullFull GC\n[Full GC (Ergonomics)  2971K->2971K(3584K), 0.0024850 secs]\n[Full GC (Allocation Failure)  2971K->2971K(3584K), 0.0022460 secs]\nException in thread \"Thread-0\" java.lang.OutOfMemoryError: Java heap space\n\tat weakhashmap.PhantomReferenceTest.lambda$main$0(PhantomReferenceTest.java:20)\n\tat weakhashmap.PhantomReferenceTest$$Lambda$1/2065951873.run(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\n100kFull GC\n\n## \n\nGC\n\nDirectByteBuffer \n\n## \n\n+ \n+ \n+ \n+ ","source":"_posts/java/reference/phantom-reference.md","raw":"---\nprev: ./weak-reference\nnext: ./reference-code-detail\n---\n\n# \n\n## \n\n::: tip \nPhantomReference\n:::\n\n## \n\n\n\n::: tip \nGC Roots`phantom reachable`\n:::\n\nget()null\n\n  \n\nfinalizefinalize\n\nfinalizenull\n\n\n\n```java\npublic class PhantomReferenceTest {\n    private static final List<Object> TEST_DATA = new LinkedList<>();\n    private static final ReferenceQueue<TestClass> QUEUE = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        TestClass obj = new TestClass(\"Test\");\n        PhantomReference<TestClass> phantomReference = new PhantomReference<>(obj, QUEUE);\n\n        // GC\n        new Thread(() -> {\n            while (true) {\n                TEST_DATA.add(new byte[1024 * 100]);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                    Thread.currentThread().interrupt();\n                }\n                System.out.println(phantomReference.get());\n            }\n        }).start();\n\n        // \n        new Thread(() -> {\n            while (true) {\n                Reference<? extends TestClass> poll = QUEUE.poll();\n                if (poll != null) {\n                    System.out.println(\"--- jvm ---- \" + poll);\n                    System.out.println(\"---  ---- \" + poll.get());\n                }\n            }\n        }).start();\n\n        obj = null;\n\n        try {\n            Thread.currentThread().join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n            System.exit(1);\n        }\n    }\n\n    static class TestClass {\n        private String name;\n\n        public TestClass(String name) {\n            this.name = name;\n        }\n\n        @Override\n        public String toString() {\n            return \"TestClass - \" + name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1024K->432K(3584K), 0.0113386 secs]\n[GC (Allocation Failure)  1455K->520K(3584K), 0.0133610 secs]\n[GC (Allocation Failure)  1544K->648K(3584K), 0.0008654 secs]\nnull\nnull\nnull\n[GC (Allocation Failure)  1655K->973K(3584K), 0.0008111 secs]\nnull\n...null\n[GC (Allocation Failure)  1980K->1997K(3584K), 0.0009289 secs]\n[Full GC (Ergonomics)  1997K->1870K(3584K), 0.0048483 secs]\n--- jvm ---- java.lang.ref.PhantomReference@74cbe23d\n---  ---- null\nnull\n...nullFull GC\n[Full GC (Ergonomics)  2971K->2971K(3584K), 0.0024850 secs]\n[Full GC (Allocation Failure)  2971K->2971K(3584K), 0.0022460 secs]\nException in thread \"Thread-0\" java.lang.OutOfMemoryError: Java heap space\n\tat weakhashmap.PhantomReferenceTest.lambda$main$0(PhantomReferenceTest.java:20)\n\tat weakhashmap.PhantomReferenceTest$$Lambda$1/2065951873.run(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\n100kFull GC\n\n## \n\nGC\n\nDirectByteBuffer \n\n## \n\n+ \n+ \n+ \n+ ","slug":"java/reference/phantom-reference","published":1,"date":"2019-01-02T14:25:23.448Z","updated":"2019-01-02T14:25:23.449Z","_id":"cjq7rm5rf002nwu9kot4wh3g2","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>PhantomReference<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>::: tip <br>GC Roots<code>phantom reachable</code><br>:::</p>\n<p>get()null</p>\n<p>  </p>\n<p>finalizefinalize</p>\n<p>finalizenull</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PhantomReferenceTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> List&lt;Object&gt; TEST_DATA = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;TestClass&gt; QUEUE = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        TestClass obj = <span class=\"keyword\">new</span> TestClass(<span class=\"string\">\"Test\"</span>);</span><br><span class=\"line\">        PhantomReference&lt;TestClass&gt; phantomReference = <span class=\"keyword\">new</span> PhantomReference&lt;&gt;(obj, QUEUE);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// GC</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                TEST_DATA.add(<span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>]);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(phantomReference.get());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                Reference&lt;? extends TestClass&gt; poll = QUEUE.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (poll != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"--- jvm ---- \"</span> + poll);</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"---  ---- \"</span> + poll.get());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        obj = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.currentThread().join();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestClass</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TestClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"TestClass - \"</span> + name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1024K-&gt;432K(3584K), 0.0113386 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1455K-&gt;520K(3584K), 0.0133610 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1544K-&gt;648K(3584K), 0.0008654 secs]</span><br><span class=\"line\">null</span><br><span class=\"line\">null</span><br><span class=\"line\">null</span><br><span class=\"line\">[GC (Allocation Failure)  1655K-&gt;973K(3584K), 0.0008111 secs]</span><br><span class=\"line\">null</span><br><span class=\"line\">...null</span><br><span class=\"line\">[GC (Allocation Failure)  1980K-&gt;1997K(3584K), 0.0009289 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  1997K-&gt;1870K(3584K), 0.0048483 secs]</span><br><span class=\"line\">--- jvm ---- java.lang.ref.PhantomReference@74cbe23d</span><br><span class=\"line\">---  ---- null</span><br><span class=\"line\">null</span><br><span class=\"line\">...nullFull GC</span><br><span class=\"line\">[Full GC (Ergonomics)  2971K-&gt;2971K(3584K), 0.0024850 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2971K-&gt;2971K(3584K), 0.0022460 secs]</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"Thread-0\"</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">\tat weakhashmap.PhantomReferenceTest.lambda<span class=\"variable\">$main</span><span class=\"variable\">$0</span>(PhantomReferenceTest.java:20)</span><br><span class=\"line\">\tat weakhashmap.PhantomReferenceTest$<span class=\"variable\">$Lambda</span><span class=\"variable\">$1</span>/2065951873.run(Unknown Source)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure>\n<p>100kFull GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC</p>\n<p>DirectByteBuffer </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>PhantomReference<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>::: tip <br>GC Roots<code>phantom reachable</code><br>:::</p>\n<p>get()null</p>\n<p>  </p>\n<p>finalizefinalize</p>\n<p>finalizenull</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PhantomReferenceTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> List&lt;Object&gt; TEST_DATA = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;TestClass&gt; QUEUE = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        TestClass obj = <span class=\"keyword\">new</span> TestClass(<span class=\"string\">\"Test\"</span>);</span><br><span class=\"line\">        PhantomReference&lt;TestClass&gt; phantomReference = <span class=\"keyword\">new</span> PhantomReference&lt;&gt;(obj, QUEUE);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// GC</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                TEST_DATA.add(<span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>]);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(phantomReference.get());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                Reference&lt;? extends TestClass&gt; poll = QUEUE.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (poll != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"--- jvm ---- \"</span> + poll);</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"---  ---- \"</span> + poll.get());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        obj = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.currentThread().join();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestClass</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TestClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"TestClass - \"</span> + name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1024K-&gt;432K(3584K), 0.0113386 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1455K-&gt;520K(3584K), 0.0133610 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1544K-&gt;648K(3584K), 0.0008654 secs]</span><br><span class=\"line\">null</span><br><span class=\"line\">null</span><br><span class=\"line\">null</span><br><span class=\"line\">[GC (Allocation Failure)  1655K-&gt;973K(3584K), 0.0008111 secs]</span><br><span class=\"line\">null</span><br><span class=\"line\">...null</span><br><span class=\"line\">[GC (Allocation Failure)  1980K-&gt;1997K(3584K), 0.0009289 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  1997K-&gt;1870K(3584K), 0.0048483 secs]</span><br><span class=\"line\">--- jvm ---- java.lang.ref.PhantomReference@74cbe23d</span><br><span class=\"line\">---  ---- null</span><br><span class=\"line\">null</span><br><span class=\"line\">...nullFull GC</span><br><span class=\"line\">[Full GC (Ergonomics)  2971K-&gt;2971K(3584K), 0.0024850 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2971K-&gt;2971K(3584K), 0.0022460 secs]</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"Thread-0\"</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">\tat weakhashmap.PhantomReferenceTest.lambda<span class=\"variable\">$main</span><span class=\"variable\">$0</span>(PhantomReferenceTest.java:20)</span><br><span class=\"line\">\tat weakhashmap.PhantomReferenceTest$<span class=\"variable\">$Lambda</span><span class=\"variable\">$1</span>/2065951873.run(Unknown Source)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure>\n<p>100kFull GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC</p>\n<p>DirectByteBuffer </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n"},{"prev":"./phantom-reference","next":"./reference-queue-code-detail","_content":"\n# Reference\n\n![Reference-relastionship](./reference-1.png)\n\n## \n\n::: tip \nReference\n:::\n\n::: warning \nreferencereferentreferencereferencereferent\n:::\n\n## \n\nReferenceReferenceReferenceReference\n\n::: tip \nFinalizer  FinalReferenceCleaner  PhantomReference\n:::\n\n## \n\nReference\n\nreferencereference<img src=\"./0003.png\" width=\"50\"/>\n\nreferencegetnull( phantomReferencegetnullqueue )\n\nweakHashMapqueueThreadLocalMapget()null\n\n```java\n/* -- Constructors -- */\nReference(T referent) {\n    this(referent, null);\n}\n\nReference(T referent, ReferenceQueue<? super T> queue) {\n    this.referent = referent;\n    this.queue = (queue == null) ? ReferenceQueue.NULL : queue;\n}\n```\n\n## \n\nReference\n\nreferentreference\n\n``` java\nprivate T referent;\n```\n\nqueuereference( referent )queuequeue\n\nqueue( ReferenceQueue )queueheadreferencenext\n\n```java\nvolatile ReferenceQueue<? super T> queue;\n```\n\nnextReference\n\n```java\nReference next;\n```\ndiscovered\n\n```java\n/* active: discovered\n * pending: pending\n * :   NULL\n */\ntransient private Reference<T> discovered;\n```\n\nlockpendingReference\n\n```java\nstatic private class Lock { }\nprivate static Lock lock = new Lock();\n```\n\npendingqueueReferencepending\n\n```java\n/* reference\n * Reference-handler\n * lockdiscovered\n */\nprivate static Reference<Object> pending = null;\n```\n\n::: warning \nqueuenextreferencependingdiscoveredreference\n:::\n\n## Reference\n\nReferencereferent\n\n> Active: \n> referencereferent()PendingInactive\n> Pendingpending-Reference\n>\n> Pending:\n> pending-ReferenceReference-handler\n>\n> Enqueued: \n> Inactive\n>\n> Inactive: \n> ()\n\nActivePendingEnqueuedInactivePendingEnqueued\n\nreferenceActivereferent\n\nreferencependingreferencependingqueuepending\n\nEnqueuedqueue\n\nInactive\n\nJVMnextqueue\n\n```bash\nActiveReferenceReferenceQueuequeue=ReferenceQueue.NULLqueueReferenceQueuenext == null\n\nPendingqueueReferenceQueuenext == this\n\nEnqueuequeue == ReferenceQueue.ENQUEUEDnextqueuereferencenext == this\n\nInactivequeue == ReferenceQueue.NULL; next == this.\n```\n\nnext==nullreferenceActive\n\nnext!=nullqueue == ReferenceQueue.NULLreferenceInactive\n\nnext!=nullqueue == ReferenceQueue.ENQUEUEDreferenceEnqueue\n\nnext != nullqueue != ReferenceQueue.NULL && queu != ReferenceQueue.ENQUEUED referencePending\n\n![Reference-relastionship](./reference-2.png)\n\n## ReferenceHandler\n\nReferenceReferenceHandlerpendingReferenceHandlerReferenceThreadReferenceHandler<img src=\"./0019.png\" width=\"50\"/>\n\n```java\nprivate static class ReferenceHandler extends Thread {\n    // \n    private static void ensureClassInitialized(Class<?> clazz) {\n        try {\n            Class.forName(clazz.getName(), true, clazz.getClassLoader());\n        } catch (ClassNotFoundException e) {\n            throw (Error) new NoClassDefFoundError(e.getMessage()).initCause(e);\n        }\n    }\n\n    static {\n        //  InterruptedException  Cleaner \n        // \t\t \n        ensureClassInitialized(InterruptedException.class);\n        ensureClassInitialized(Cleaner.class);\n    }\n\n    ReferenceHandler(ThreadGroup g, String name) {\n        super(g, name);\n    }\n\n    public void run() {\n        // \n        while (true) {\n            tryHandlePending(true);\n        }\n    }\n}\n```\n\nrunwhiletryHandlerPendingpending\n\n```java\nstatic {\n    ThreadGroup tg = Thread.currentThread().getThreadGroup();\n    for (ThreadGroup tgn = tg;\n         tgn != null;\n         tg = tgn, tgn = tg.getParent());\n    // handler\n    Thread handler = new ReferenceHandler(tg, \"Reference Handler\");\n    handler.setPriority(Thread.MAX_PRIORITY);\n    handler.setDaemon(true);\n    handler.start();\n\n    // jvm\n    SharedSecrets.setJavaLangRefAccess(new JavaLangRefAccess() {\n        @Override\n        public boolean tryHandlePendingReference() {\n            return tryHandlePending(false);\n        }\n    });\n}\n```\n\nReferenceHandlerJVMpending tryHandlePending(false) \n\n```java\nstatic boolean tryHandlePending(boolean waitForNotify) {\n    Reference<Object> r;\n    Cleaner c;\n    try {\n        synchronized (lock) {\n            // pendingnull\n            if (pending != null) {\n                r = pending;\n                //  'instanceof' OOM\n                // r\n                c = r instanceof Cleaner ? (Cleaner) r : null;\n                // pending\n                pending = r.discovered;\n                // rpending\n                r.discovered = null;\n            } else {\n                // OOMexception\n                if (waitForNotify) {\n                    lock.wait();\n                }\n                // \n                return waitForNotify;\n            }\n        }\n    } catch (OutOfMemoryError x) {\n        Thread.yield();\n        // \n        return true;\n    } catch (InterruptedException x) {\n        // \n        return true;\n    }\n\n    // Cleanerclean\n    if (c != null) {\n        c.clean();\n        return true;\n    }\n\n    ReferenceQueue<? super Object> q = r.queue;\n    // \n    if (q != ReferenceQueue.NULL) q.enqueue(r);\n    return true;\n}\n```\n\npendingCleanerclean\n\n## \n\n```java\n/**\n  * referentnull\n  */\npublic T get() {\n    return this.referent;\n}\n\n/**\n  * referentEnqueued\n  */\npublic void clear() {\n    this.referent = null;\n}\n\n/**\n  * reference\n  */\npublic boolean isEnqueued() {\n    return (this.queue == ReferenceQueue.ENQUEUED);\n}\n\n/**\n  * \n  * referencetruefalse\n  */\npublic boolean enqueue() {\n    return this.queue.enqueue(this);\n}\n```\n\nReferenceJVMJVMReference\n\n## \n\n+ Reference\n\n+ Reference\n\n+ Reference\n\n+ getnull \n\n\n\n\n\n\n\n\n\n","source":"_posts/java/reference/reference-code-detail.md","raw":"---\nprev: ./phantom-reference\nnext: ./reference-queue-code-detail\n---\n\n# Reference\n\n![Reference-relastionship](./reference-1.png)\n\n## \n\n::: tip \nReference\n:::\n\n::: warning \nreferencereferentreferencereferencereferent\n:::\n\n## \n\nReferenceReferenceReferenceReference\n\n::: tip \nFinalizer  FinalReferenceCleaner  PhantomReference\n:::\n\n## \n\nReference\n\nreferencereference<img src=\"./0003.png\" width=\"50\"/>\n\nreferencegetnull( phantomReferencegetnullqueue )\n\nweakHashMapqueueThreadLocalMapget()null\n\n```java\n/* -- Constructors -- */\nReference(T referent) {\n    this(referent, null);\n}\n\nReference(T referent, ReferenceQueue<? super T> queue) {\n    this.referent = referent;\n    this.queue = (queue == null) ? ReferenceQueue.NULL : queue;\n}\n```\n\n## \n\nReference\n\nreferentreference\n\n``` java\nprivate T referent;\n```\n\nqueuereference( referent )queuequeue\n\nqueue( ReferenceQueue )queueheadreferencenext\n\n```java\nvolatile ReferenceQueue<? super T> queue;\n```\n\nnextReference\n\n```java\nReference next;\n```\ndiscovered\n\n```java\n/* active: discovered\n * pending: pending\n * :   NULL\n */\ntransient private Reference<T> discovered;\n```\n\nlockpendingReference\n\n```java\nstatic private class Lock { }\nprivate static Lock lock = new Lock();\n```\n\npendingqueueReferencepending\n\n```java\n/* reference\n * Reference-handler\n * lockdiscovered\n */\nprivate static Reference<Object> pending = null;\n```\n\n::: warning \nqueuenextreferencependingdiscoveredreference\n:::\n\n## Reference\n\nReferencereferent\n\n> Active: \n> referencereferent()PendingInactive\n> Pendingpending-Reference\n>\n> Pending:\n> pending-ReferenceReference-handler\n>\n> Enqueued: \n> Inactive\n>\n> Inactive: \n> ()\n\nActivePendingEnqueuedInactivePendingEnqueued\n\nreferenceActivereferent\n\nreferencependingreferencependingqueuepending\n\nEnqueuedqueue\n\nInactive\n\nJVMnextqueue\n\n```bash\nActiveReferenceReferenceQueuequeue=ReferenceQueue.NULLqueueReferenceQueuenext == null\n\nPendingqueueReferenceQueuenext == this\n\nEnqueuequeue == ReferenceQueue.ENQUEUEDnextqueuereferencenext == this\n\nInactivequeue == ReferenceQueue.NULL; next == this.\n```\n\nnext==nullreferenceActive\n\nnext!=nullqueue == ReferenceQueue.NULLreferenceInactive\n\nnext!=nullqueue == ReferenceQueue.ENQUEUEDreferenceEnqueue\n\nnext != nullqueue != ReferenceQueue.NULL && queu != ReferenceQueue.ENQUEUED referencePending\n\n![Reference-relastionship](./reference-2.png)\n\n## ReferenceHandler\n\nReferenceReferenceHandlerpendingReferenceHandlerReferenceThreadReferenceHandler<img src=\"./0019.png\" width=\"50\"/>\n\n```java\nprivate static class ReferenceHandler extends Thread {\n    // \n    private static void ensureClassInitialized(Class<?> clazz) {\n        try {\n            Class.forName(clazz.getName(), true, clazz.getClassLoader());\n        } catch (ClassNotFoundException e) {\n            throw (Error) new NoClassDefFoundError(e.getMessage()).initCause(e);\n        }\n    }\n\n    static {\n        //  InterruptedException  Cleaner \n        // \t\t \n        ensureClassInitialized(InterruptedException.class);\n        ensureClassInitialized(Cleaner.class);\n    }\n\n    ReferenceHandler(ThreadGroup g, String name) {\n        super(g, name);\n    }\n\n    public void run() {\n        // \n        while (true) {\n            tryHandlePending(true);\n        }\n    }\n}\n```\n\nrunwhiletryHandlerPendingpending\n\n```java\nstatic {\n    ThreadGroup tg = Thread.currentThread().getThreadGroup();\n    for (ThreadGroup tgn = tg;\n         tgn != null;\n         tg = tgn, tgn = tg.getParent());\n    // handler\n    Thread handler = new ReferenceHandler(tg, \"Reference Handler\");\n    handler.setPriority(Thread.MAX_PRIORITY);\n    handler.setDaemon(true);\n    handler.start();\n\n    // jvm\n    SharedSecrets.setJavaLangRefAccess(new JavaLangRefAccess() {\n        @Override\n        public boolean tryHandlePendingReference() {\n            return tryHandlePending(false);\n        }\n    });\n}\n```\n\nReferenceHandlerJVMpending tryHandlePending(false) \n\n```java\nstatic boolean tryHandlePending(boolean waitForNotify) {\n    Reference<Object> r;\n    Cleaner c;\n    try {\n        synchronized (lock) {\n            // pendingnull\n            if (pending != null) {\n                r = pending;\n                //  'instanceof' OOM\n                // r\n                c = r instanceof Cleaner ? (Cleaner) r : null;\n                // pending\n                pending = r.discovered;\n                // rpending\n                r.discovered = null;\n            } else {\n                // OOMexception\n                if (waitForNotify) {\n                    lock.wait();\n                }\n                // \n                return waitForNotify;\n            }\n        }\n    } catch (OutOfMemoryError x) {\n        Thread.yield();\n        // \n        return true;\n    } catch (InterruptedException x) {\n        // \n        return true;\n    }\n\n    // Cleanerclean\n    if (c != null) {\n        c.clean();\n        return true;\n    }\n\n    ReferenceQueue<? super Object> q = r.queue;\n    // \n    if (q != ReferenceQueue.NULL) q.enqueue(r);\n    return true;\n}\n```\n\npendingCleanerclean\n\n## \n\n```java\n/**\n  * referentnull\n  */\npublic T get() {\n    return this.referent;\n}\n\n/**\n  * referentEnqueued\n  */\npublic void clear() {\n    this.referent = null;\n}\n\n/**\n  * reference\n  */\npublic boolean isEnqueued() {\n    return (this.queue == ReferenceQueue.ENQUEUED);\n}\n\n/**\n  * \n  * referencetruefalse\n  */\npublic boolean enqueue() {\n    return this.queue.enqueue(this);\n}\n```\n\nReferenceJVMJVMReference\n\n## \n\n+ Reference\n\n+ Reference\n\n+ Reference\n\n+ getnull \n\n\n\n\n\n\n\n\n\n","slug":"java/reference/reference-code-detail","published":1,"date":"2019-01-02T14:25:23.454Z","updated":"2019-01-02T14:25:23.454Z","_id":"cjq7rm5rg002pwu9k70um7ln0","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./reference-1.png\" alt=\"Reference-relastionship\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Reference-relastionship</div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>Reference<br>:::</p>\n<p>::: warning <br>referencereferentreferencereferencereferent<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceReferenceReferenceReference</p>\n<p>::: tip <br>Finalizer  FinalReferenceCleaner  PhantomReference<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Reference</p>\n<p>referencereference<img src=\"./0003.png\" width=\"50\"></p>\n<p>referencegetnull( phantomReferencegetnullqueue )</p>\n<p>weakHashMapqueueThreadLocalMapget()null</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* -- Constructors -- */</span></span><br><span class=\"line\">Reference(T referent) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(referent, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Reference(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; queue) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.referent = referent;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.queue = (queue == <span class=\"keyword\">null</span>) ? ReferenceQueue.NULL : queue;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Reference</p>\n<p>referentreference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> T referent;</span><br></pre></td></tr></table></figure>\n<p>queuereference( referent )queuequeue</p>\n<p>queue( ReferenceQueue )queueheadreferencenext</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">volatile</span> ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; queue;</span><br></pre></td></tr></table></figure>\n<p>nextReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Reference next;</span><br></pre></td></tr></table></figure>\n<p>discovered</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* active: discovered</span></span><br><span class=\"line\"><span class=\"comment\"> * pending: pending</span></span><br><span class=\"line\"><span class=\"comment\"> * :   NULL</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">transient</span> <span class=\"keyword\">private</span> Reference&lt;T&gt; discovered;</span><br></pre></td></tr></table></figure>\n<p>lockpendingReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Lock</span> </span>&#123; &#125;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Lock lock = <span class=\"keyword\">new</span> Lock();</span><br></pre></td></tr></table></figure>\n<p>pendingqueueReferencepending</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* reference</span></span><br><span class=\"line\"><span class=\"comment\"> * Reference-handler</span></span><br><span class=\"line\"><span class=\"comment\"> * lockdiscovered</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Reference&lt;Object&gt; pending = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>::: warning <br>queuenextreferencependingdiscoveredreference<br>:::</p>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p>Referencereferent</p>\n<blockquote>\n<p>Active:<br>referencereferent()PendingInactive<br>Pendingpending-Reference</p>\n<p>Pending:<br>pending-ReferenceReference-handler</p>\n<p>Enqueued:<br>Inactive</p>\n<p>Inactive:<br>()</p>\n</blockquote>\n<p>ActivePendingEnqueuedInactivePendingEnqueued</p>\n<p>referenceActivereferent</p>\n<p>referencependingreferencependingqueuepending</p>\n<p>Enqueuedqueue</p>\n<p>Inactive</p>\n<p>JVMnextqueue</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ActiveReferenceReferenceQueuequeue=ReferenceQueue.NULLqueueReferenceQueuenext == null</span><br><span class=\"line\"></span><br><span class=\"line\">PendingqueueReferenceQueuenext == this</span><br><span class=\"line\"></span><br><span class=\"line\">Enqueuequeue == ReferenceQueue.ENQUEUEDnextqueuereferencenext == this</span><br><span class=\"line\"></span><br><span class=\"line\">Inactivequeue == ReferenceQueue.NULL; next == this.</span><br></pre></td></tr></table></figure>\n<p>next==nullreferenceActive</p>\n<p>next!=nullqueue == ReferenceQueue.NULLreferenceInactive</p>\n<p>next!=nullqueue == ReferenceQueue.ENQUEUEDreferenceEnqueue</p>\n<p>next != nullqueue != ReferenceQueue.NULL &amp;&amp; queu != ReferenceQueue.ENQUEUED referencePending</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./reference-2.png\" alt=\"Reference-relastionship\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Reference-relastionship</div>\n            </figure>\n<h2 id=\"ReferenceHandler\"><a href=\"#ReferenceHandler\" class=\"headerlink\" title=\"ReferenceHandler\"></a>ReferenceHandler</h2><p>ReferenceReferenceHandlerpendingReferenceHandlerReferenceThreadReferenceHandler<img src=\"./0019.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReferenceHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureClassInitialized</span><span class=\"params\">(Class&lt;?&gt; clazz)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Class.forName(clazz.getName(), <span class=\"keyword\">true</span>, clazz.getClassLoader());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> (Error) <span class=\"keyword\">new</span> NoClassDefFoundError(e.getMessage()).initCause(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  InterruptedException  Cleaner </span></span><br><span class=\"line\">        <span class=\"comment\">// \t\t </span></span><br><span class=\"line\">        ensureClassInitialized(InterruptedException.class);</span><br><span class=\"line\">        ensureClassInitialized(Cleaner.class);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ReferenceHandler(ThreadGroup g, String name) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(g, name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">            tryHandlePending(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>runwhiletryHandlerPendingpending</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">         tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">         tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">    <span class=\"comment\">// handler</span></span><br><span class=\"line\">    Thread handler = <span class=\"keyword\">new</span> ReferenceHandler(tg, <span class=\"string\">\"Reference Handler\"</span>);</span><br><span class=\"line\">    handler.setPriority(Thread.MAX_PRIORITY);</span><br><span class=\"line\">    handler.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    handler.start();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// jvm</span></span><br><span class=\"line\">    SharedSecrets.setJavaLangRefAccess(<span class=\"keyword\">new</span> JavaLangRefAccess() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">tryHandlePendingReference</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> tryHandlePending(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceHandlerJVMpending tryHandlePending(false) </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">tryHandlePending</span><span class=\"params\">(<span class=\"keyword\">boolean</span> waitForNotify)</span> </span>&#123;</span><br><span class=\"line\">    Reference&lt;Object&gt; r;</span><br><span class=\"line\">    Cleaner c;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// pendingnull</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (pending != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                r = pending;</span><br><span class=\"line\">                <span class=\"comment\">//  'instanceof' OOM</span></span><br><span class=\"line\">                <span class=\"comment\">// r</span></span><br><span class=\"line\">                c = r <span class=\"keyword\">instanceof</span> Cleaner ? (Cleaner) r : <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                <span class=\"comment\">// pending</span></span><br><span class=\"line\">                pending = r.discovered;</span><br><span class=\"line\">                <span class=\"comment\">// rpending</span></span><br><span class=\"line\">                r.discovered = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// OOMexception</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (waitForNotify) &#123;</span><br><span class=\"line\">                    lock.wait();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> waitForNotify;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (OutOfMemoryError x) &#123;</span><br><span class=\"line\">        Thread.yield();</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Cleanerclean</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (c != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        c.clean();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ReferenceQueue&lt;? <span class=\"keyword\">super</span> Object&gt; q = r.queue;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (q != ReferenceQueue.NULL) q.enqueue(r);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pendingCleanerclean</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * referentnull</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.referent;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * referentEnqueued</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.referent = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * reference</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isEnqueued</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (<span class=\"keyword\">this</span>.queue == ReferenceQueue.ENQUEUED);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * </span></span><br><span class=\"line\"><span class=\"comment\">  * referencetruefalse</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.queue.enqueue(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceJVMJVMReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>Reference</p>\n</li>\n<li><p>Reference</p>\n</li>\n<li><p>Reference</p>\n</li>\n<li><p>getnull </p>\n</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./reference-1.png\" alt=\"Reference-relastionship\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Reference-relastionship</div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>Reference<br>:::</p>\n<p>::: warning <br>referencereferentreferencereferencereferent<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceReferenceReferenceReference</p>\n<p>::: tip <br>Finalizer  FinalReferenceCleaner  PhantomReference<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Reference</p>\n<p>referencereference<img src=\"./0003.png\" width=\"50\"></p>\n<p>referencegetnull( phantomReferencegetnullqueue )</p>\n<p>weakHashMapqueueThreadLocalMapget()null</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* -- Constructors -- */</span></span><br><span class=\"line\">Reference(T referent) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(referent, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Reference(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; queue) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.referent = referent;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.queue = (queue == <span class=\"keyword\">null</span>) ? ReferenceQueue.NULL : queue;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Reference</p>\n<p>referentreference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> T referent;</span><br></pre></td></tr></table></figure>\n<p>queuereference( referent )queuequeue</p>\n<p>queue( ReferenceQueue )queueheadreferencenext</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">volatile</span> ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; queue;</span><br></pre></td></tr></table></figure>\n<p>nextReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Reference next;</span><br></pre></td></tr></table></figure>\n<p>discovered</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* active: discovered</span></span><br><span class=\"line\"><span class=\"comment\"> * pending: pending</span></span><br><span class=\"line\"><span class=\"comment\"> * :   NULL</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">transient</span> <span class=\"keyword\">private</span> Reference&lt;T&gt; discovered;</span><br></pre></td></tr></table></figure>\n<p>lockpendingReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Lock</span> </span>&#123; &#125;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Lock lock = <span class=\"keyword\">new</span> Lock();</span><br></pre></td></tr></table></figure>\n<p>pendingqueueReferencepending</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* reference</span></span><br><span class=\"line\"><span class=\"comment\"> * Reference-handler</span></span><br><span class=\"line\"><span class=\"comment\"> * lockdiscovered</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Reference&lt;Object&gt; pending = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>::: warning <br>queuenextreferencependingdiscoveredreference<br>:::</p>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p>Referencereferent</p>\n<blockquote>\n<p>Active:<br>referencereferent()PendingInactive<br>Pendingpending-Reference</p>\n<p>Pending:<br>pending-ReferenceReference-handler</p>\n<p>Enqueued:<br>Inactive</p>\n<p>Inactive:<br>()</p>\n</blockquote>\n<p>ActivePendingEnqueuedInactivePendingEnqueued</p>\n<p>referenceActivereferent</p>\n<p>referencependingreferencependingqueuepending</p>\n<p>Enqueuedqueue</p>\n<p>Inactive</p>\n<p>JVMnextqueue</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ActiveReferenceReferenceQueuequeue=ReferenceQueue.NULLqueueReferenceQueuenext == null</span><br><span class=\"line\"></span><br><span class=\"line\">PendingqueueReferenceQueuenext == this</span><br><span class=\"line\"></span><br><span class=\"line\">Enqueuequeue == ReferenceQueue.ENQUEUEDnextqueuereferencenext == this</span><br><span class=\"line\"></span><br><span class=\"line\">Inactivequeue == ReferenceQueue.NULL; next == this.</span><br></pre></td></tr></table></figure>\n<p>next==nullreferenceActive</p>\n<p>next!=nullqueue == ReferenceQueue.NULLreferenceInactive</p>\n<p>next!=nullqueue == ReferenceQueue.ENQUEUEDreferenceEnqueue</p>\n<p>next != nullqueue != ReferenceQueue.NULL &amp;&amp; queu != ReferenceQueue.ENQUEUED referencePending</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./reference-2.png\" alt=\"Reference-relastionship\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Reference-relastionship</div>\n            </figure>\n<h2 id=\"ReferenceHandler\"><a href=\"#ReferenceHandler\" class=\"headerlink\" title=\"ReferenceHandler\"></a>ReferenceHandler</h2><p>ReferenceReferenceHandlerpendingReferenceHandlerReferenceThreadReferenceHandler<img src=\"./0019.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReferenceHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureClassInitialized</span><span class=\"params\">(Class&lt;?&gt; clazz)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Class.forName(clazz.getName(), <span class=\"keyword\">true</span>, clazz.getClassLoader());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> (Error) <span class=\"keyword\">new</span> NoClassDefFoundError(e.getMessage()).initCause(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  InterruptedException  Cleaner </span></span><br><span class=\"line\">        <span class=\"comment\">// \t\t </span></span><br><span class=\"line\">        ensureClassInitialized(InterruptedException.class);</span><br><span class=\"line\">        ensureClassInitialized(Cleaner.class);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ReferenceHandler(ThreadGroup g, String name) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(g, name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">            tryHandlePending(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>runwhiletryHandlerPendingpending</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">         tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">         tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">    <span class=\"comment\">// handler</span></span><br><span class=\"line\">    Thread handler = <span class=\"keyword\">new</span> ReferenceHandler(tg, <span class=\"string\">\"Reference Handler\"</span>);</span><br><span class=\"line\">    handler.setPriority(Thread.MAX_PRIORITY);</span><br><span class=\"line\">    handler.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    handler.start();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// jvm</span></span><br><span class=\"line\">    SharedSecrets.setJavaLangRefAccess(<span class=\"keyword\">new</span> JavaLangRefAccess() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">tryHandlePendingReference</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> tryHandlePending(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceHandlerJVMpending tryHandlePending(false) </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">tryHandlePending</span><span class=\"params\">(<span class=\"keyword\">boolean</span> waitForNotify)</span> </span>&#123;</span><br><span class=\"line\">    Reference&lt;Object&gt; r;</span><br><span class=\"line\">    Cleaner c;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// pendingnull</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (pending != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                r = pending;</span><br><span class=\"line\">                <span class=\"comment\">//  'instanceof' OOM</span></span><br><span class=\"line\">                <span class=\"comment\">// r</span></span><br><span class=\"line\">                c = r <span class=\"keyword\">instanceof</span> Cleaner ? (Cleaner) r : <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                <span class=\"comment\">// pending</span></span><br><span class=\"line\">                pending = r.discovered;</span><br><span class=\"line\">                <span class=\"comment\">// rpending</span></span><br><span class=\"line\">                r.discovered = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// OOMexception</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (waitForNotify) &#123;</span><br><span class=\"line\">                    lock.wait();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> waitForNotify;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (OutOfMemoryError x) &#123;</span><br><span class=\"line\">        Thread.yield();</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Cleanerclean</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (c != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        c.clean();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ReferenceQueue&lt;? <span class=\"keyword\">super</span> Object&gt; q = r.queue;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (q != ReferenceQueue.NULL) q.enqueue(r);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pendingCleanerclean</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * referentnull</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.referent;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * referentEnqueued</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.referent = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * reference</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isEnqueued</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (<span class=\"keyword\">this</span>.queue == ReferenceQueue.ENQUEUED);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * </span></span><br><span class=\"line\"><span class=\"comment\">  * referencetruefalse</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.queue.enqueue(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceJVMJVMReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>Reference</p>\n</li>\n<li><p>Reference</p>\n</li>\n<li><p>Reference</p>\n</li>\n<li><p>getnull </p>\n</li>\n</ul>\n"},{"prev":"./reference-code-detail","next":"./soft-reference-code-detail","_content":"\n# ReferenceQueue\n\n## \n\n::: tip \nReferenceQueue\n:::\n\n## \n\n \n\nreferencequeuequeue\n\n## \n\n```java\npublic class ReferenceQueueTest {\n    private static ReferenceQueue<byte[]> rq = new ReferenceQueue<>();\n    private static int _1M = 1024 * 1024;\n\n    public static void main(String[] args) {\n        Object value = new Object();\n        Map<WeakReference<byte[]>, Object> map = new HashMap<>();\n        Thread thread = new Thread(ReferenceQueueTest::run);\n        thread.setDaemon(true);\n        thread.start();\n\n        for(int i = 0;i < 100;i++) {\n            byte[] bytes = new byte[_1M];\n            WeakReference<byte[]> weakReference = new WeakReference<>(bytes, rq);\n            map.put(weakReference, value);\n        }\n        System.out.println(\"map.size->\" + map.size());\n        \n        int aliveNum = 0;\n        for (Map.Entry<WeakReference<byte[]>, Object> entry : map.entrySet()){\n            if (entry != null){\n                if (entry.getKey().get() != null){\n                    aliveNum++;\n                }\n            }\n        }\n        System.out.println(\"100\" + aliveNum);\n    }\n\n    private static void run() {\n        try {\n            int n = 0;\n            WeakReference k;\n            while ((k = (WeakReference) rq.remove()) != null) {\n                System.out.println((++n) + \":\" + k);\n            }\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n```\n\nmainmap100\n\n```java\n...\n85:java.lang.ref.WeakReference@7106e68e\n86:java.lang.ref.WeakReference@1f17ae12\n87:java.lang.ref.WeakReference@c4437c4\nmap.size->100\n10012\n```\n\nReferenceQueue\n\n## \n\nReferenceQueue\n\n```java\nstatic ReferenceQueue<Object> NULL = new Null<>();\nstatic ReferenceQueue<Object> ENQUEUED = new Null<>();\n```\n\nNULLENQUEUEReferenceQueue.NULLReferenceQueue.ENQUEUED\n\nNull\n\n```java\nprivate static class Null<S> extends ReferenceQueue<S> {\n    boolean enqueue(Reference<? extends S> r) {\n        return false;\n    }\n}\n```\n\nReferenceQueueemmmnewReferenceQueueReferenceQueueNULLENQUEUEDReferenceQueueenqueuelockfalse\n\n```java\nstatic private class Lock { };\nprivate Lock lock = new Lock();\n```\n\nReferencelock\n\n```java\nprivate volatile Reference<? extends T> head = null;\n```\n\nheadReference\n\n```java\nprivate long queueLength = 0;\n```\n\nqueueLength+1-1synchronized\n\n## \n\n```java\n// Reference\nboolean enqueue(Reference<? extends T> r) { \n    synchronized (lock) {\n        // Reference\n        ReferenceQueue<?> queue = r.queue;\n        if ((queue == NULL) || (queue == ENQUEUED)) {\n            return false;\n        }\n        assert queue == this;\n        // referencequeueENQUEUED\n        r.queue = ENQUEUED;\n        // r\n        r.next = (head == null) ? r : head;\n        head = r;\n        queueLength++;\n        // rFinalReferenceFinalRef+1\n        if (r instanceof FinalReference) {\n            sun.misc.VM.addFinalRefCount(1);\n        }\n        lock.notifyAll();\n        return true;\n    }\n}\n```\n\nlockr\n\n```java\npublic Reference<? extends T> poll() {\n    if (head == null)\n        return null;\n    synchronized (lock) {\n        return reallyPoll();\n    }\n}\n\nprivate Reference<? extends T> reallyPoll() {     \n    Reference<? extends T> r = head;\n    if (r != null) {\n        head = (r.next == r) ?\n            null : r.next;\n        r.queue = NULL;\n        r.next = r;\n        queueLength--;\n        if (r instanceof FinalReference) {\n            sun.misc.VM.addFinalRefCount(-1);\n        }\n        return r;\n    }\n    return null;\n}\n```\n\npollReferenceQueueReferenceStack<img src=\"./0001.png\" width=\"50\"/>\n\n```java\n/**\n  * Reference\n  * timeout\n  */\npublic Reference<? extends T> remove(long timeout)\n    throws IllegalArgumentException, InterruptedException{\n    if (timeout < 0) {\n        throw new IllegalArgumentException(\"Negative timeout value\");\n    }\n    synchronized (lock) {\n        Reference<? extends T> r = reallyPoll();\n        if (r != null) return r;\n        long start = (timeout == 0) ? 0 : System.nanoTime();\n        // \n        for (;;) {\n            lock.wait(timeout);\n            r = reallyPoll();\n            if (r != null) return r;\n            if (timeout != 0) {\n                // System.nanoTime1=1*1000*1000\n                long end = System.nanoTime();\n                timeout -= (end - start) / 1000_000;\n                if (timeout <= 0) return null;\n                start = end;\n            }\n        }\n    }\n}\n\n/**\n * Reference\n */\npublic Reference<? extends T> remove() throws InterruptedException {\n\treturn remove(0);\n}\n```\n\npollReference\n\nremovelock\n\nenqueueReferenceReferencepublicenqueueReferenceremove\n\n## \n\nReferenceQueueSoftReferenceWeakReferencePhantomReference\n\n\n\n1\n\n2\n\nReference\n\n```java\npublic class TestB {\n\n    private static ReferenceQueue<byte[]> referenceQueue = new ReferenceQueue<>();\n    private static int _1M = 1024 * 1024;\n\n    public static void main(String[] args) throws InterruptedException {\n        final Map<Object, MyWeakReference> hashMap = new HashMap<>();\n        Thread thread = new Thread(() -> {\n            try {\n                int n = 0;\n                MyWeakReference k;\n                while(null != (k = (MyWeakReference) referenceQueue.remove())) {\n                    System.out.println((++n) + \":\" + k);\n                    //entry\n                    hashMap.remove(k.key);\n                    //key\n                }\n            } catch(InterruptedException e) {\n                e.printStackTrace();\n            }\n        });\n        thread.setDaemon(true);\n        thread.start();\n\n        for(int i = 0;i < 10000;i++) {\n            byte[] bytesKey = new byte[_1M];\n            byte[] bytesValue = new byte[_1M];\n            hashMap.put(bytesKey, new MyWeakReference(bytesKey, bytesValue, referenceQueue));\n        }\n    }\n\n    static class MyWeakReference extends WeakReference<byte[]> {\n        private Object key;\n        MyWeakReference(Object key, byte[] referent, ReferenceQueue<? super byte[]> q) {\n            super(referent, q);\n            this.key = key;\n        }\n    }\n}\n```\n\nreferenceQueuemapvalue\n\n## \n\n+ ReferenceQueueReference\n+ ReferenceQueue\n+ ReferenceQueue\n\n\n\n\n\n\n\n\n\n","source":"_posts/java/reference/reference-queue-code-detail.md","raw":"---\nprev: ./reference-code-detail\nnext: ./soft-reference-code-detail\n---\n\n# ReferenceQueue\n\n## \n\n::: tip \nReferenceQueue\n:::\n\n## \n\n \n\nreferencequeuequeue\n\n## \n\n```java\npublic class ReferenceQueueTest {\n    private static ReferenceQueue<byte[]> rq = new ReferenceQueue<>();\n    private static int _1M = 1024 * 1024;\n\n    public static void main(String[] args) {\n        Object value = new Object();\n        Map<WeakReference<byte[]>, Object> map = new HashMap<>();\n        Thread thread = new Thread(ReferenceQueueTest::run);\n        thread.setDaemon(true);\n        thread.start();\n\n        for(int i = 0;i < 100;i++) {\n            byte[] bytes = new byte[_1M];\n            WeakReference<byte[]> weakReference = new WeakReference<>(bytes, rq);\n            map.put(weakReference, value);\n        }\n        System.out.println(\"map.size->\" + map.size());\n        \n        int aliveNum = 0;\n        for (Map.Entry<WeakReference<byte[]>, Object> entry : map.entrySet()){\n            if (entry != null){\n                if (entry.getKey().get() != null){\n                    aliveNum++;\n                }\n            }\n        }\n        System.out.println(\"100\" + aliveNum);\n    }\n\n    private static void run() {\n        try {\n            int n = 0;\n            WeakReference k;\n            while ((k = (WeakReference) rq.remove()) != null) {\n                System.out.println((++n) + \":\" + k);\n            }\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n```\n\nmainmap100\n\n```java\n...\n85:java.lang.ref.WeakReference@7106e68e\n86:java.lang.ref.WeakReference@1f17ae12\n87:java.lang.ref.WeakReference@c4437c4\nmap.size->100\n10012\n```\n\nReferenceQueue\n\n## \n\nReferenceQueue\n\n```java\nstatic ReferenceQueue<Object> NULL = new Null<>();\nstatic ReferenceQueue<Object> ENQUEUED = new Null<>();\n```\n\nNULLENQUEUEReferenceQueue.NULLReferenceQueue.ENQUEUED\n\nNull\n\n```java\nprivate static class Null<S> extends ReferenceQueue<S> {\n    boolean enqueue(Reference<? extends S> r) {\n        return false;\n    }\n}\n```\n\nReferenceQueueemmmnewReferenceQueueReferenceQueueNULLENQUEUEDReferenceQueueenqueuelockfalse\n\n```java\nstatic private class Lock { };\nprivate Lock lock = new Lock();\n```\n\nReferencelock\n\n```java\nprivate volatile Reference<? extends T> head = null;\n```\n\nheadReference\n\n```java\nprivate long queueLength = 0;\n```\n\nqueueLength+1-1synchronized\n\n## \n\n```java\n// Reference\nboolean enqueue(Reference<? extends T> r) { \n    synchronized (lock) {\n        // Reference\n        ReferenceQueue<?> queue = r.queue;\n        if ((queue == NULL) || (queue == ENQUEUED)) {\n            return false;\n        }\n        assert queue == this;\n        // referencequeueENQUEUED\n        r.queue = ENQUEUED;\n        // r\n        r.next = (head == null) ? r : head;\n        head = r;\n        queueLength++;\n        // rFinalReferenceFinalRef+1\n        if (r instanceof FinalReference) {\n            sun.misc.VM.addFinalRefCount(1);\n        }\n        lock.notifyAll();\n        return true;\n    }\n}\n```\n\nlockr\n\n```java\npublic Reference<? extends T> poll() {\n    if (head == null)\n        return null;\n    synchronized (lock) {\n        return reallyPoll();\n    }\n}\n\nprivate Reference<? extends T> reallyPoll() {     \n    Reference<? extends T> r = head;\n    if (r != null) {\n        head = (r.next == r) ?\n            null : r.next;\n        r.queue = NULL;\n        r.next = r;\n        queueLength--;\n        if (r instanceof FinalReference) {\n            sun.misc.VM.addFinalRefCount(-1);\n        }\n        return r;\n    }\n    return null;\n}\n```\n\npollReferenceQueueReferenceStack<img src=\"./0001.png\" width=\"50\"/>\n\n```java\n/**\n  * Reference\n  * timeout\n  */\npublic Reference<? extends T> remove(long timeout)\n    throws IllegalArgumentException, InterruptedException{\n    if (timeout < 0) {\n        throw new IllegalArgumentException(\"Negative timeout value\");\n    }\n    synchronized (lock) {\n        Reference<? extends T> r = reallyPoll();\n        if (r != null) return r;\n        long start = (timeout == 0) ? 0 : System.nanoTime();\n        // \n        for (;;) {\n            lock.wait(timeout);\n            r = reallyPoll();\n            if (r != null) return r;\n            if (timeout != 0) {\n                // System.nanoTime1=1*1000*1000\n                long end = System.nanoTime();\n                timeout -= (end - start) / 1000_000;\n                if (timeout <= 0) return null;\n                start = end;\n            }\n        }\n    }\n}\n\n/**\n * Reference\n */\npublic Reference<? extends T> remove() throws InterruptedException {\n\treturn remove(0);\n}\n```\n\npollReference\n\nremovelock\n\nenqueueReferenceReferencepublicenqueueReferenceremove\n\n## \n\nReferenceQueueSoftReferenceWeakReferencePhantomReference\n\n\n\n1\n\n2\n\nReference\n\n```java\npublic class TestB {\n\n    private static ReferenceQueue<byte[]> referenceQueue = new ReferenceQueue<>();\n    private static int _1M = 1024 * 1024;\n\n    public static void main(String[] args) throws InterruptedException {\n        final Map<Object, MyWeakReference> hashMap = new HashMap<>();\n        Thread thread = new Thread(() -> {\n            try {\n                int n = 0;\n                MyWeakReference k;\n                while(null != (k = (MyWeakReference) referenceQueue.remove())) {\n                    System.out.println((++n) + \":\" + k);\n                    //entry\n                    hashMap.remove(k.key);\n                    //key\n                }\n            } catch(InterruptedException e) {\n                e.printStackTrace();\n            }\n        });\n        thread.setDaemon(true);\n        thread.start();\n\n        for(int i = 0;i < 10000;i++) {\n            byte[] bytesKey = new byte[_1M];\n            byte[] bytesValue = new byte[_1M];\n            hashMap.put(bytesKey, new MyWeakReference(bytesKey, bytesValue, referenceQueue));\n        }\n    }\n\n    static class MyWeakReference extends WeakReference<byte[]> {\n        private Object key;\n        MyWeakReference(Object key, byte[] referent, ReferenceQueue<? super byte[]> q) {\n            super(referent, q);\n            this.key = key;\n        }\n    }\n}\n```\n\nreferenceQueuemapvalue\n\n## \n\n+ ReferenceQueueReference\n+ ReferenceQueue\n+ ReferenceQueue\n\n\n\n\n\n\n\n\n\n","slug":"java/reference/reference-queue-code-detail","published":1,"date":"2019-01-02T14:25:23.455Z","updated":"2019-01-02T14:25:23.455Z","_id":"cjq7rm5rh002qwu9kv9akoewi","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"ReferenceQueue\"><a href=\"#ReferenceQueue\" class=\"headerlink\" title=\"ReferenceQueue\"></a>ReferenceQueue</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>ReferenceQueue<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n<p>referencequeuequeue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReferenceQueueTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;<span class=\"keyword\">byte</span>[]&gt; rq = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> _1M = <span class=\"number\">1024</span> * <span class=\"number\">1024</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Object value = <span class=\"keyword\">new</span> Object();</span><br><span class=\"line\">        Map&lt;WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt;, Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        Thread thread = <span class=\"keyword\">new</span> Thread(ReferenceQueueTest::run);</span><br><span class=\"line\">        thread.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        thread.start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"number\">100</span>;i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytes = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt; weakReference = <span class=\"keyword\">new</span> WeakReference&lt;&gt;(bytes, rq);</span><br><span class=\"line\">            map.put(weakReference, value);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"map.size-&gt;\"</span> + map.size());</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">int</span> aliveNum = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Map.Entry&lt;WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt;, Object&gt; entry : map.entrySet())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (entry != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (entry.getKey().get() != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                    aliveNum++;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"100\"</span> + aliveNum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> n = <span class=\"number\">0</span>;</span><br><span class=\"line\">            WeakReference k;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> ((k = (WeakReference) rq.remove()) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                System.out.println((++n) + <span class=\"string\">\":\"</span> + k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>mainmap100</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"number\">85</span>:java.lang.ref.WeakReference@<span class=\"number\">7106e68</span>e</span><br><span class=\"line\"><span class=\"number\">86</span>:java.lang.ref.WeakReference@<span class=\"number\">1f</span>17ae12</span><br><span class=\"line\"><span class=\"number\">87</span>:java.lang.ref.WeakReference<span class=\"meta\">@c</span>4437c4</span><br><span class=\"line\">map.size-&gt;<span class=\"number\">100</span></span><br><span class=\"line\"><span class=\"number\">100</span><span class=\"number\">12</span></span><br></pre></td></tr></table></figure>\n<p>ReferenceQueue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceQueue</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; NULL = <span class=\"keyword\">new</span> Null&lt;&gt;();</span><br><span class=\"line\"><span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; ENQUEUED = <span class=\"keyword\">new</span> Null&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>NULLENQUEUEReferenceQueue.NULLReferenceQueue.ENQUEUED</p>\n<p>Null</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Null</span>&lt;<span class=\"title\">S</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">ReferenceQueue</span>&lt;<span class=\"title\">S</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">(Reference&lt;? extends S&gt; r)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceQueueemmmnewReferenceQueueReferenceQueueNULLENQUEUEDReferenceQueueenqueuelockfalse</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Lock</span> </span>&#123; &#125;;</span><br><span class=\"line\"><span class=\"keyword\">private</span> Lock lock = <span class=\"keyword\">new</span> Lock();</span><br></pre></td></tr></table></figure>\n<p>Referencelock</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> Reference&lt;? extends T&gt; head = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>headReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">long</span> queueLength = <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n<p>queueLength+1-1synchronized</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Reference</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">(Reference&lt;? extends T&gt; r)</span> </span>&#123; </span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Reference</span></span><br><span class=\"line\">        ReferenceQueue&lt;?&gt; queue = r.queue;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((queue == NULL) || (queue == ENQUEUED)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> queue == <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        <span class=\"comment\">// referencequeueENQUEUED</span></span><br><span class=\"line\">        r.queue = ENQUEUED;</span><br><span class=\"line\">        <span class=\"comment\">// r</span></span><br><span class=\"line\">        r.next = (head == <span class=\"keyword\">null</span>) ? r : head;</span><br><span class=\"line\">        head = r;</span><br><span class=\"line\">        queueLength++;</span><br><span class=\"line\">        <span class=\"comment\">// rFinalReferenceFinalRef+1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r <span class=\"keyword\">instanceof</span> FinalReference) &#123;</span><br><span class=\"line\">            sun.misc.VM.addFinalRefCount(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        lock.notifyAll();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>lockr</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; poll() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> reallyPoll();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> Reference&lt;? extends T&gt; reallyPoll() &#123;     </span><br><span class=\"line\">    Reference&lt;? extends T&gt; r = head;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        head = (r.next == r) ?</span><br><span class=\"line\">            <span class=\"keyword\">null</span> : r.next;</span><br><span class=\"line\">        r.queue = NULL;</span><br><span class=\"line\">        r.next = r;</span><br><span class=\"line\">        queueLength--;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r <span class=\"keyword\">instanceof</span> FinalReference) &#123;</span><br><span class=\"line\">            sun.misc.VM.addFinalRefCount(-<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pollReferenceQueueReferenceStack<img src=\"./0001.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * Reference</span></span><br><span class=\"line\"><span class=\"comment\">  * timeout</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; remove(<span class=\"keyword\">long</span> timeout)</span><br><span class=\"line\">    <span class=\"keyword\">throws</span> IllegalArgumentException, InterruptedException&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timeout &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Negative timeout value\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        Reference&lt;? extends T&gt; r = reallyPoll();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> start = (timeout == <span class=\"number\">0</span>) ? <span class=\"number\">0</span> : System.nanoTime();</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">            lock.wait(timeout);</span><br><span class=\"line\">            r = reallyPoll();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (timeout != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// System.nanoTime1=1*1000*1000</span></span><br><span class=\"line\">                <span class=\"keyword\">long</span> end = System.nanoTime();</span><br><span class=\"line\">                timeout -= (end - start) / <span class=\"number\">1000_000</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (timeout &lt;= <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                start = end;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Reference</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; remove() <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> remove(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pollReference</p>\n<p>removelock</p>\n<p>enqueueReferenceReferencepublicenqueueReferenceremove</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceQueueSoftReferenceWeakReferencePhantomReference</p>\n<p></p>\n<p>1</p>\n<p>2</p>\n<p>Reference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestB</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;<span class=\"keyword\">byte</span>[]&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> _1M = <span class=\"number\">1024</span> * <span class=\"number\">1024</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Map&lt;Object, MyWeakReference&gt; hashMap = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        Thread thread = <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> n = <span class=\"number\">0</span>;</span><br><span class=\"line\">                MyWeakReference k;</span><br><span class=\"line\">                <span class=\"keyword\">while</span>(<span class=\"keyword\">null</span> != (k = (MyWeakReference) referenceQueue.remove())) &#123;</span><br><span class=\"line\">                    System.out.println((++n) + <span class=\"string\">\":\"</span> + k);</span><br><span class=\"line\">                    <span class=\"comment\">//entry</span></span><br><span class=\"line\">                    hashMap.remove(k.key);</span><br><span class=\"line\">                    <span class=\"comment\">//key</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span>(InterruptedException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        thread.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        thread.start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"number\">10000</span>;i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytesKey = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytesValue = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            hashMap.put(bytesKey, <span class=\"keyword\">new</span> MyWeakReference(bytesKey, bytesValue, referenceQueue));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    static class MyWeakReference extends WeakReference&lt;byte[]&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> Object key;</span><br><span class=\"line\">        MyWeakReference(Object key, <span class=\"keyword\">byte</span>[] referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> <span class=\"keyword\">byte</span>[]&gt; q) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.key = key;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>referenceQueuemapvalue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>ReferenceQueueReference</li>\n<li>ReferenceQueue</li>\n<li>ReferenceQueue</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"ReferenceQueue\"><a href=\"#ReferenceQueue\" class=\"headerlink\" title=\"ReferenceQueue\"></a>ReferenceQueue</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>ReferenceQueue<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n<p>referencequeuequeue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReferenceQueueTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;<span class=\"keyword\">byte</span>[]&gt; rq = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> _1M = <span class=\"number\">1024</span> * <span class=\"number\">1024</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Object value = <span class=\"keyword\">new</span> Object();</span><br><span class=\"line\">        Map&lt;WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt;, Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        Thread thread = <span class=\"keyword\">new</span> Thread(ReferenceQueueTest::run);</span><br><span class=\"line\">        thread.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        thread.start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"number\">100</span>;i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytes = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt; weakReference = <span class=\"keyword\">new</span> WeakReference&lt;&gt;(bytes, rq);</span><br><span class=\"line\">            map.put(weakReference, value);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"map.size-&gt;\"</span> + map.size());</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">int</span> aliveNum = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Map.Entry&lt;WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt;, Object&gt; entry : map.entrySet())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (entry != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (entry.getKey().get() != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                    aliveNum++;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"100\"</span> + aliveNum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> n = <span class=\"number\">0</span>;</span><br><span class=\"line\">            WeakReference k;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> ((k = (WeakReference) rq.remove()) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                System.out.println((++n) + <span class=\"string\">\":\"</span> + k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>mainmap100</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"number\">85</span>:java.lang.ref.WeakReference@<span class=\"number\">7106e68</span>e</span><br><span class=\"line\"><span class=\"number\">86</span>:java.lang.ref.WeakReference@<span class=\"number\">1f</span>17ae12</span><br><span class=\"line\"><span class=\"number\">87</span>:java.lang.ref.WeakReference<span class=\"meta\">@c</span>4437c4</span><br><span class=\"line\">map.size-&gt;<span class=\"number\">100</span></span><br><span class=\"line\"><span class=\"number\">100</span><span class=\"number\">12</span></span><br></pre></td></tr></table></figure>\n<p>ReferenceQueue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceQueue</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; NULL = <span class=\"keyword\">new</span> Null&lt;&gt;();</span><br><span class=\"line\"><span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; ENQUEUED = <span class=\"keyword\">new</span> Null&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>NULLENQUEUEReferenceQueue.NULLReferenceQueue.ENQUEUED</p>\n<p>Null</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Null</span>&lt;<span class=\"title\">S</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">ReferenceQueue</span>&lt;<span class=\"title\">S</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">(Reference&lt;? extends S&gt; r)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceQueueemmmnewReferenceQueueReferenceQueueNULLENQUEUEDReferenceQueueenqueuelockfalse</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Lock</span> </span>&#123; &#125;;</span><br><span class=\"line\"><span class=\"keyword\">private</span> Lock lock = <span class=\"keyword\">new</span> Lock();</span><br></pre></td></tr></table></figure>\n<p>Referencelock</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> Reference&lt;? extends T&gt; head = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>headReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">long</span> queueLength = <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n<p>queueLength+1-1synchronized</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Reference</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">(Reference&lt;? extends T&gt; r)</span> </span>&#123; </span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Reference</span></span><br><span class=\"line\">        ReferenceQueue&lt;?&gt; queue = r.queue;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((queue == NULL) || (queue == ENQUEUED)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> queue == <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        <span class=\"comment\">// referencequeueENQUEUED</span></span><br><span class=\"line\">        r.queue = ENQUEUED;</span><br><span class=\"line\">        <span class=\"comment\">// r</span></span><br><span class=\"line\">        r.next = (head == <span class=\"keyword\">null</span>) ? r : head;</span><br><span class=\"line\">        head = r;</span><br><span class=\"line\">        queueLength++;</span><br><span class=\"line\">        <span class=\"comment\">// rFinalReferenceFinalRef+1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r <span class=\"keyword\">instanceof</span> FinalReference) &#123;</span><br><span class=\"line\">            sun.misc.VM.addFinalRefCount(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        lock.notifyAll();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>lockr</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; poll() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> reallyPoll();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> Reference&lt;? extends T&gt; reallyPoll() &#123;     </span><br><span class=\"line\">    Reference&lt;? extends T&gt; r = head;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        head = (r.next == r) ?</span><br><span class=\"line\">            <span class=\"keyword\">null</span> : r.next;</span><br><span class=\"line\">        r.queue = NULL;</span><br><span class=\"line\">        r.next = r;</span><br><span class=\"line\">        queueLength--;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r <span class=\"keyword\">instanceof</span> FinalReference) &#123;</span><br><span class=\"line\">            sun.misc.VM.addFinalRefCount(-<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pollReferenceQueueReferenceStack<img src=\"./0001.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * Reference</span></span><br><span class=\"line\"><span class=\"comment\">  * timeout</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; remove(<span class=\"keyword\">long</span> timeout)</span><br><span class=\"line\">    <span class=\"keyword\">throws</span> IllegalArgumentException, InterruptedException&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timeout &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Negative timeout value\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        Reference&lt;? extends T&gt; r = reallyPoll();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> start = (timeout == <span class=\"number\">0</span>) ? <span class=\"number\">0</span> : System.nanoTime();</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">            lock.wait(timeout);</span><br><span class=\"line\">            r = reallyPoll();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (timeout != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// System.nanoTime1=1*1000*1000</span></span><br><span class=\"line\">                <span class=\"keyword\">long</span> end = System.nanoTime();</span><br><span class=\"line\">                timeout -= (end - start) / <span class=\"number\">1000_000</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (timeout &lt;= <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                start = end;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Reference</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; remove() <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> remove(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pollReference</p>\n<p>removelock</p>\n<p>enqueueReferenceReferencepublicenqueueReferenceremove</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceQueueSoftReferenceWeakReferencePhantomReference</p>\n<p></p>\n<p>1</p>\n<p>2</p>\n<p>Reference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestB</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;<span class=\"keyword\">byte</span>[]&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> _1M = <span class=\"number\">1024</span> * <span class=\"number\">1024</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Map&lt;Object, MyWeakReference&gt; hashMap = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        Thread thread = <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> n = <span class=\"number\">0</span>;</span><br><span class=\"line\">                MyWeakReference k;</span><br><span class=\"line\">                <span class=\"keyword\">while</span>(<span class=\"keyword\">null</span> != (k = (MyWeakReference) referenceQueue.remove())) &#123;</span><br><span class=\"line\">                    System.out.println((++n) + <span class=\"string\">\":\"</span> + k);</span><br><span class=\"line\">                    <span class=\"comment\">//entry</span></span><br><span class=\"line\">                    hashMap.remove(k.key);</span><br><span class=\"line\">                    <span class=\"comment\">//key</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span>(InterruptedException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        thread.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        thread.start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"number\">10000</span>;i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytesKey = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytesValue = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            hashMap.put(bytesKey, <span class=\"keyword\">new</span> MyWeakReference(bytesKey, bytesValue, referenceQueue));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    static class MyWeakReference extends WeakReference&lt;byte[]&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> Object key;</span><br><span class=\"line\">        MyWeakReference(Object key, <span class=\"keyword\">byte</span>[] referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> <span class=\"keyword\">byte</span>[]&gt; q) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.key = key;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>referenceQueuemapvalue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>ReferenceQueueReference</li>\n<li>ReferenceQueue</li>\n<li>ReferenceQueue</li>\n</ul>\n"},{"prev":"./final-reference-code-detail","next":"./four-kinds-of-reference","_content":"# \n\n::: tip \n >  >  > \n:::\n\n## \n\nGC\n\nJVMGC\n\nJVM\n\nGC\n\nJVM\n\n## \n\n|  |                         |                                        |  |                        |\n| :------- | ----------------------------------------------- | ------------------------------------------ | ------------------ | ------------------------------ |\n|    |                                         |                  |                |                            |\n|    | GCJVM |          |                | SoftReference                  |\n|    |             |    |                | WeakReference<br />WeakHashMap |\n|    |                                   | GC |              | PhantomReference               |\n\n## \n\nemmmm.StrongReference \n\nStrongReferenceguavaLocalCache[StrongValueReference](https://github.com/google/guava/blob/1670960e088fe9c1e78b5d7dd7c0505741bf2988/guava/src/com/google/common/cache/LocalCache.java#L1676)\n\n<img src=\"./0003.png\" width=\"50\"/>\n\n\n\n<img src=\"./94.png\" width=\"50\"/>\n\nB","source":"_posts/java/reference/reference-summary.md","raw":"---\nprev: ./final-reference-code-detail\nnext: ./four-kinds-of-reference\n---\n# \n\n::: tip \n >  >  > \n:::\n\n## \n\nGC\n\nJVMGC\n\nJVM\n\nGC\n\nJVM\n\n## \n\n|  |                         |                                        |  |                        |\n| :------- | ----------------------------------------------- | ------------------------------------------ | ------------------ | ------------------------------ |\n|    |                                         |                  |                |                            |\n|    | GCJVM |          |                | SoftReference                  |\n|    |             |    |                | WeakReference<br />WeakHashMap |\n|    |                                   | GC |              | PhantomReference               |\n\n## \n\nemmmm.StrongReference \n\nStrongReferenceguavaLocalCache[StrongValueReference](https://github.com/google/guava/blob/1670960e088fe9c1e78b5d7dd7c0505741bf2988/guava/src/com/google/common/cache/LocalCache.java#L1676)\n\n<img src=\"./0003.png\" width=\"50\"/>\n\n\n\n<img src=\"./94.png\" width=\"50\"/>\n\nB","slug":"java/reference/reference-summary","published":1,"date":"2019-01-02T14:25:23.457Z","updated":"2019-01-02T14:25:23.457Z","_id":"cjq7rm5rj002rwu9k7lzeninp","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>::: tip<br> &gt;  &gt;  &gt; <br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC</p>\n<p>JVMGC</p>\n<p>JVM</p>\n<p>GC</p>\n<p>JVM</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td>GCJVM</td>\n<td></td>\n<td></td>\n<td>SoftReference</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td></td>\n<td></td>\n<td>WeakReference<br>WeakHashMap</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td>GC</td>\n<td></td>\n<td>PhantomReference</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>emmmm.StrongReference </p>\n<p>StrongReferenceguavaLocalCache<a href=\"https://github.com/google/guava/blob/1670960e088fe9c1e78b5d7dd7c0505741bf2988/guava/src/com/google/common/cache/LocalCache.java#L1676\" target=\"_blank\" rel=\"noopener\">StrongValueReference</a></p>\n<p><img src=\"./0003.png\" width=\"50\"></p>\n<p></p>\n<p><img src=\"./94.png\" width=\"50\"></p>\n<p>B</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>::: tip<br> &gt;  &gt;  &gt; <br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC</p>\n<p>JVMGC</p>\n<p>JVM</p>\n<p>GC</p>\n<p>JVM</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td>GCJVM</td>\n<td></td>\n<td></td>\n<td>SoftReference</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td></td>\n<td></td>\n<td>WeakReference<br>WeakHashMap</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td>GC</td>\n<td></td>\n<td>PhantomReference</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>emmmm.StrongReference </p>\n<p>StrongReferenceguavaLocalCache<a href=\"https://github.com/google/guava/blob/1670960e088fe9c1e78b5d7dd7c0505741bf2988/guava/src/com/google/common/cache/LocalCache.java#L1676\" target=\"_blank\" rel=\"noopener\">StrongValueReference</a></p>\n<p><img src=\"./0003.png\" width=\"50\"></p>\n<p></p>\n<p><img src=\"./94.png\" width=\"50\"></p>\n<p>B</p>\n"},{"prev":"./reference-queue-code-detail","next":"./weak-reference-code-detail","_content":"\n# SoftReference\n\n## \n\n::: tip \nSoftReferencesoftly-reachable\n:::\n\n## \n\nOOM\n\n\n\nJVMsoftly-reachablereferentreferentSoftReferencememory-sensitive cachesJVM\n\nJVMreferentreferent\n\nSoftReferencereferent\n\n```ba&#39;sh\nSoft reference objects, which are cleared at the discretion of the garbage collector in response to memory demand. \n```\n\n\n\n## SoftReference\n\n```java\npublic class SoftReference<T> extends Reference<T> {\n    /**\n     * \n     */\n    static private long clock;\n\n    /**\n     * get\n     */\n    private long timestamp;\n\n    public SoftReference(T referent) {\n        super(referent);\n        this.timestamp = clock;\n    }\n\n    public SoftReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n        this.timestamp = clock;\n    }\n\n    /**\n     * referentnull\n     */\n    public T get() {\n        T o = super.get();\n        if (o != null && this.timestamp != clock)\n            this.timestamp = clock;\n        return o;\n    }\n}\n```\n\nSoftReferenceclockJVMclockJVMGCclockclockGC\n\ntimestampclocktimestamp\n\nSoftReferencetimestampclockget super.get() nulltimestamp\n\n## \n\n\n\nHotSpotOracle\n\n```java\nThe default value is 1000 ms per megabyte, which means that a soft reference will survive (after the last strong reference to the object has been collected) for 1 second for each megabyte of free space in the heap\n```\n\n1000ms/Mb\n\n512Mb400Mbobject AAcacheobject B object ABAA\n\n![soft-reference-1](./soft-reference-3.png)\n\nBAcacheA400s\n\n![soft-reference-2](./soft-reference-2.png)\n\n\n\n```java\npublic class SoftRefTest {\n    public static class A{\n    }\n    public static class B{\n        private A strongRef;\n \n        public void setStrongRef(A ref) {\n            this.strongRef = ref;\n        }\n    }\n    public static SoftReference<A> cache;\n \n    public static void main(String[] args) throws InterruptedException{\n        //Acache\n        SoftRefTest.A instanceA = new SoftRefTest.A();\n        cache = new SoftReference<SoftRefTest.A>(instanceA);\n        instanceA = null;\n        // instanceA \n        Thread.sleep(10000);\n \n        ...\n        SoftRefTest.B instanceB = new SoftRefTest.B();\n        //cacheinstanceAinstanceA\n        instanceA = cache.get();\n        if (instanceA == null){\n            instanceA = new SoftRefTest.A();\n            cache = new SoftReference<SoftRefTest.A>(instanceA);\n        }\n        instanceB.setStrongRef(instanceA);\n        instanceA = null;\n        // instanceAcacheB\n \n        ...\n    }\n}\n```\n\n[](./soft-reference.md#)\n\nOOM\n\n```java\npublic class SoftReferenceTest{\n\n    public static class MyBigObject{\n        int[] data = new int[128];\n    }\n\n    public static int CACHE_INITIAL_CAPACITY = 100_000;\n    // \n    public static Set<SoftReference<MyBigObject>> cache = new HashSet<>(CACHE_INITIAL_CAPACITY);\n\n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000; i++) {\n            MyBigObject obj = new MyBigObject();\n            cache.add(new SoftReference<>(obj));\n            if (i%10_000 == 0){\n                System.out.println(\"size of cache:\" + cache.size());\n            }\n        }\n        System.out.println(\"End\");\n    }\n}\n```\n\n\n\n```java\n-Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\nsize of cache:1\nsize of cache:10001\nsize of cache:20001\nsize of cache:30001\nException in thread \"main\" java.lang.OutOfMemoryError: GC overhead limit exceeded\n```\n\nOOM`Java heap space`` GC overhead limit exceeded ` cpu98%2%\n\ncache\n\n```java\npublic class SoftReferenceTest{\n\n    public static int removedSoftRefs = 0;\n\n    public static class MyBigObject{\n        int[] data = new int[128];\n    }\n\n    public static int CACHE_INITIAL_CAPACITY = 100_000;\n    // \n    public static Set<SoftReference<MyBigObject>> cache = new HashSet<>(CACHE_INITIAL_CAPACITY);\n    public static ReferenceQueue<MyBigObject> referenceQueue = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000; i++) {\n            MyBigObject obj = new MyBigObject();\n            cache.add(new SoftReference<>(obj, referenceQueue));\n            clearUselessReferences();\n        }\n        System.out.println(\"End, removed soft references=\" + removedSoftRefs);\n    }\n\n    public static void clearUselessReferences() {\n        Reference<? extends MyBigObject> ref = referenceQueue.poll();\n        while (ref != null) {\n            if (cache.remove(ref)) {\n                removedSoftRefs++;\n            }\n            ref = referenceQueue.poll();\n        }\n    }\n}\n```\n\n\n\n```bash\nEnd, removed soft references=97319\n```\n\n## HotSpot\n\nHotSpotLRULRUCurrentHeapPolicyclocktimestamp\n\n```c++\nbool LRUCurrentHeapPolicy::should_clear_reference(oop p,\n                                                  jlong timestamp_clock) {\n  jlong interval = timestamp_clock - java_lang_ref_SoftReference::timestamp(p);\n  assert(interval >= 0, \"Sanity check\");\n\n  if(interval <= _max_interval) {\n    return false;\n  }\n\n  return true;\n}\n```\n\n `timestamp_clock` SoftReferenceclockGCjava_lang_ref_SoftReference::timestamp(p)timestamp\n\n `_max_interval`\n\n```c++\nvoid LRUCurrentHeapPolicy::setup() {\n  _max_interval = (Universe::get_heap_free_at_last_gc() / M) * SoftRefLRUPolicyMSPerMB;\n  assert(_max_interval >= 0,\"Sanity check\");\n}\n```\n\n`SoftRefLRUPolicyMSPerMB`1000GC`_max_interval`\n\nGCSoftReferenceGCSoftReference\n\nSoftReferencereferentJVMOutOfMemoryErrorFull GC \n\n## \n\n+ \n+ gettimestamp\n+ hotspotLRU\n\n","source":"_posts/java/reference/soft-reference-code-detail.md","raw":"---\nprev: ./reference-queue-code-detail\nnext: ./weak-reference-code-detail\n---\n\n# SoftReference\n\n## \n\n::: tip \nSoftReferencesoftly-reachable\n:::\n\n## \n\nOOM\n\n\n\nJVMsoftly-reachablereferentreferentSoftReferencememory-sensitive cachesJVM\n\nJVMreferentreferent\n\nSoftReferencereferent\n\n```ba&#39;sh\nSoft reference objects, which are cleared at the discretion of the garbage collector in response to memory demand. \n```\n\n\n\n## SoftReference\n\n```java\npublic class SoftReference<T> extends Reference<T> {\n    /**\n     * \n     */\n    static private long clock;\n\n    /**\n     * get\n     */\n    private long timestamp;\n\n    public SoftReference(T referent) {\n        super(referent);\n        this.timestamp = clock;\n    }\n\n    public SoftReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n        this.timestamp = clock;\n    }\n\n    /**\n     * referentnull\n     */\n    public T get() {\n        T o = super.get();\n        if (o != null && this.timestamp != clock)\n            this.timestamp = clock;\n        return o;\n    }\n}\n```\n\nSoftReferenceclockJVMclockJVMGCclockclockGC\n\ntimestampclocktimestamp\n\nSoftReferencetimestampclockget super.get() nulltimestamp\n\n## \n\n\n\nHotSpotOracle\n\n```java\nThe default value is 1000 ms per megabyte, which means that a soft reference will survive (after the last strong reference to the object has been collected) for 1 second for each megabyte of free space in the heap\n```\n\n1000ms/Mb\n\n512Mb400Mbobject AAcacheobject B object ABAA\n\n![soft-reference-1](./soft-reference-3.png)\n\nBAcacheA400s\n\n![soft-reference-2](./soft-reference-2.png)\n\n\n\n```java\npublic class SoftRefTest {\n    public static class A{\n    }\n    public static class B{\n        private A strongRef;\n \n        public void setStrongRef(A ref) {\n            this.strongRef = ref;\n        }\n    }\n    public static SoftReference<A> cache;\n \n    public static void main(String[] args) throws InterruptedException{\n        //Acache\n        SoftRefTest.A instanceA = new SoftRefTest.A();\n        cache = new SoftReference<SoftRefTest.A>(instanceA);\n        instanceA = null;\n        // instanceA \n        Thread.sleep(10000);\n \n        ...\n        SoftRefTest.B instanceB = new SoftRefTest.B();\n        //cacheinstanceAinstanceA\n        instanceA = cache.get();\n        if (instanceA == null){\n            instanceA = new SoftRefTest.A();\n            cache = new SoftReference<SoftRefTest.A>(instanceA);\n        }\n        instanceB.setStrongRef(instanceA);\n        instanceA = null;\n        // instanceAcacheB\n \n        ...\n    }\n}\n```\n\n[](./soft-reference.md#)\n\nOOM\n\n```java\npublic class SoftReferenceTest{\n\n    public static class MyBigObject{\n        int[] data = new int[128];\n    }\n\n    public static int CACHE_INITIAL_CAPACITY = 100_000;\n    // \n    public static Set<SoftReference<MyBigObject>> cache = new HashSet<>(CACHE_INITIAL_CAPACITY);\n\n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000; i++) {\n            MyBigObject obj = new MyBigObject();\n            cache.add(new SoftReference<>(obj));\n            if (i%10_000 == 0){\n                System.out.println(\"size of cache:\" + cache.size());\n            }\n        }\n        System.out.println(\"End\");\n    }\n}\n```\n\n\n\n```java\n-Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\nsize of cache:1\nsize of cache:10001\nsize of cache:20001\nsize of cache:30001\nException in thread \"main\" java.lang.OutOfMemoryError: GC overhead limit exceeded\n```\n\nOOM`Java heap space`` GC overhead limit exceeded ` cpu98%2%\n\ncache\n\n```java\npublic class SoftReferenceTest{\n\n    public static int removedSoftRefs = 0;\n\n    public static class MyBigObject{\n        int[] data = new int[128];\n    }\n\n    public static int CACHE_INITIAL_CAPACITY = 100_000;\n    // \n    public static Set<SoftReference<MyBigObject>> cache = new HashSet<>(CACHE_INITIAL_CAPACITY);\n    public static ReferenceQueue<MyBigObject> referenceQueue = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000; i++) {\n            MyBigObject obj = new MyBigObject();\n            cache.add(new SoftReference<>(obj, referenceQueue));\n            clearUselessReferences();\n        }\n        System.out.println(\"End, removed soft references=\" + removedSoftRefs);\n    }\n\n    public static void clearUselessReferences() {\n        Reference<? extends MyBigObject> ref = referenceQueue.poll();\n        while (ref != null) {\n            if (cache.remove(ref)) {\n                removedSoftRefs++;\n            }\n            ref = referenceQueue.poll();\n        }\n    }\n}\n```\n\n\n\n```bash\nEnd, removed soft references=97319\n```\n\n## HotSpot\n\nHotSpotLRULRUCurrentHeapPolicyclocktimestamp\n\n```c++\nbool LRUCurrentHeapPolicy::should_clear_reference(oop p,\n                                                  jlong timestamp_clock) {\n  jlong interval = timestamp_clock - java_lang_ref_SoftReference::timestamp(p);\n  assert(interval >= 0, \"Sanity check\");\n\n  if(interval <= _max_interval) {\n    return false;\n  }\n\n  return true;\n}\n```\n\n `timestamp_clock` SoftReferenceclockGCjava_lang_ref_SoftReference::timestamp(p)timestamp\n\n `_max_interval`\n\n```c++\nvoid LRUCurrentHeapPolicy::setup() {\n  _max_interval = (Universe::get_heap_free_at_last_gc() / M) * SoftRefLRUPolicyMSPerMB;\n  assert(_max_interval >= 0,\"Sanity check\");\n}\n```\n\n`SoftRefLRUPolicyMSPerMB`1000GC`_max_interval`\n\nGCSoftReferenceGCSoftReference\n\nSoftReferencereferentJVMOutOfMemoryErrorFull GC \n\n## \n\n+ \n+ gettimestamp\n+ hotspotLRU\n\n","slug":"java/reference/soft-reference-code-detail","published":1,"date":"2019-01-02T14:25:23.464Z","updated":"2019-01-02T14:25:23.465Z","_id":"cjq7rm5rk002swu9k851unk0x","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"SoftReference\"><a href=\"#SoftReference\" class=\"headerlink\" title=\"SoftReference\"></a>SoftReference</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>SoftReferencesoftly-reachable<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>OOM</p>\n<p></p>\n<p>JVMsoftly-reachablereferentreferentSoftReferencememory-sensitive cachesJVM</p>\n<p>JVMreferentreferent</p>\n<p>SoftReferencereferent</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Soft reference objects, which are cleared at the discretion of the garbage collector in response to memory demand.</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"SoftReference\"><a href=\"#SoftReference\" class=\"headerlink\" title=\"SoftReference\"></a>SoftReference</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> clock;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * get</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> timestamp;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SoftReference</span><span class=\"params\">(T referent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SoftReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * referentnull</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        T o = <span class=\"keyword\">super</span>.get();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (o != <span class=\"keyword\">null</span> &amp;&amp; <span class=\"keyword\">this</span>.timestamp != clock)</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> o;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>SoftReferenceclockJVMclockJVMGCclockclockGC</p>\n<p>timestampclocktimestamp</p>\n<p>SoftReferencetimestampclockget super.get() nulltimestamp</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>HotSpotOracle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The <span class=\"keyword\">default</span> value is <span class=\"number\">1000</span> ms per megabyte, <span class=\"function\">which means that a soft reference will <span class=\"title\">survive</span> <span class=\"params\">(after the last strong reference to the object has been collected)</span> <span class=\"keyword\">for</span> 1 second <span class=\"keyword\">for</span> each megabyte of free space in the heap</span></span><br></pre></td></tr></table></figure>\n<p>1000ms/Mb</p>\n<p>512Mb400Mbobject AAcacheobject B object ABAA</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./soft-reference-3.png\" alt=\"soft-reference-1\" title=\"\">\n                </div>\n                <div class=\"image-caption\">soft-reference-1</div>\n            </figure>\n<p>BAcacheA400s</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./soft-reference-2.png\" alt=\"soft-reference-2\" title=\"\">\n                </div>\n                <div class=\"image-caption\">soft-reference-2</div>\n            </figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftRefTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> A strongRef;</span><br><span class=\"line\"> </span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setStrongRef</span><span class=\"params\">(A ref)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.strongRef = ref;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SoftReference&lt;A&gt; cache;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//Acache</span></span><br><span class=\"line\">        SoftRefTest.A instanceA = <span class=\"keyword\">new</span> SoftRefTest.A();</span><br><span class=\"line\">        cache = <span class=\"keyword\">new</span> SoftReference&lt;SoftRefTest.A&gt;(instanceA);</span><br><span class=\"line\">        instanceA = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"comment\">// instanceA </span></span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">10000</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">        ...</span><br><span class=\"line\">        SoftRefTest.B instanceB = <span class=\"keyword\">new</span> SoftRefTest.B();</span><br><span class=\"line\">        <span class=\"comment\">//cacheinstanceAinstanceA</span></span><br><span class=\"line\">        instanceA = cache.get();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (instanceA == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            instanceA = <span class=\"keyword\">new</span> SoftRefTest.A();</span><br><span class=\"line\">            cache = <span class=\"keyword\">new</span> SoftReference&lt;SoftRefTest.A&gt;(instanceA);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        instanceB.setStrongRef(instanceA);</span><br><span class=\"line\">        instanceA = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"comment\">// instanceAcacheB</span></span><br><span class=\"line\"> </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"./soft-reference.md#\"></a></p>\n<p>OOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReferenceTest</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBigObject</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] data = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">128</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> CACHE_INITIAL_CAPACITY = <span class=\"number\">100_000</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Set&lt;SoftReference&lt;MyBigObject&gt;&gt; cache = <span class=\"keyword\">new</span> HashSet&lt;&gt;(CACHE_INITIAL_CAPACITY);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000</span>; i++) &#123;</span><br><span class=\"line\">            MyBigObject obj = <span class=\"keyword\">new</span> MyBigObject();</span><br><span class=\"line\">            cache.add(<span class=\"keyword\">new</span> SoftReference&lt;&gt;(obj));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i%<span class=\"number\">10_000</span> == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">\"size of cache:\"</span> + cache.size());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"End\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">size of cache:1</span><br><span class=\"line\">size of cache:10001</span><br><span class=\"line\">size of cache:20001</span><br><span class=\"line\">size of cache:30001</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"main\"</span> java.lang.OutOfMemoryError: GC overhead <span class=\"built_in\">limit</span> exceeded</span><br></pre></td></tr></table></figure>\n<p>OOM<code>Java heap space</code><code>GC overhead limit exceeded</code> cpu98%2%</p>\n<p>cache</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReferenceTest</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> removedSoftRefs = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBigObject</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] data = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">128</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> CACHE_INITIAL_CAPACITY = <span class=\"number\">100_000</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Set&lt;SoftReference&lt;MyBigObject&gt;&gt; cache = <span class=\"keyword\">new</span> HashSet&lt;&gt;(CACHE_INITIAL_CAPACITY);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;MyBigObject&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000</span>; i++) &#123;</span><br><span class=\"line\">            MyBigObject obj = <span class=\"keyword\">new</span> MyBigObject();</span><br><span class=\"line\">            cache.add(<span class=\"keyword\">new</span> SoftReference&lt;&gt;(obj, referenceQueue));</span><br><span class=\"line\">            clearUselessReferences();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"End, removed soft references=\"</span> + removedSoftRefs);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">clearUselessReferences</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Reference&lt;? extends MyBigObject&gt; ref = referenceQueue.poll();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (ref != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (cache.remove(ref)) &#123;</span><br><span class=\"line\">                removedSoftRefs++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ref = referenceQueue.poll();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">End, removed soft references=97319</span><br></pre></td></tr></table></figure>\n<h2 id=\"HotSpot\"><a href=\"#HotSpot\" class=\"headerlink\" title=\"HotSpot\"></a>HotSpot</h2><p>HotSpotLRULRUCurrentHeapPolicyclocktimestamp</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">bool</span> LRUCurrentHeapPolicy::should_clear_reference(oop p,</span><br><span class=\"line\">                                                  jlong timestamp_clock) &#123;</span><br><span class=\"line\">  jlong interval = timestamp_clock - java_lang_ref_SoftReference::timestamp(p);</span><br><span class=\"line\">  assert(interval &gt;= <span class=\"number\">0</span>, <span class=\"string\">\"Sanity check\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(interval &lt;= _max_interval) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>timestamp_clock</code> SoftReferenceclockGCjava_lang_ref_SoftReference::timestamp(p)timestamp</p>\n<p> <code>_max_interval</code></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> LRUCurrentHeapPolicy::setup() &#123;</span><br><span class=\"line\">  _max_interval = (Universe::get_heap_free_at_last_gc() / M) * SoftRefLRUPolicyMSPerMB;</span><br><span class=\"line\">  assert(_max_interval &gt;= <span class=\"number\">0</span>,<span class=\"string\">\"Sanity check\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>SoftRefLRUPolicyMSPerMB</code>1000GC<code>_max_interval</code></p>\n<p>GCSoftReferenceGCSoftReference</p>\n<p>SoftReferencereferentJVMOutOfMemoryErrorFull GC </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li>gettimestamp</li>\n<li>hotspotLRU</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"SoftReference\"><a href=\"#SoftReference\" class=\"headerlink\" title=\"SoftReference\"></a>SoftReference</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>SoftReferencesoftly-reachable<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>OOM</p>\n<p></p>\n<p>JVMsoftly-reachablereferentreferentSoftReferencememory-sensitive cachesJVM</p>\n<p>JVMreferentreferent</p>\n<p>SoftReferencereferent</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Soft reference objects, which are cleared at the discretion of the garbage collector in response to memory demand.</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"SoftReference\"><a href=\"#SoftReference\" class=\"headerlink\" title=\"SoftReference\"></a>SoftReference</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> clock;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * get</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> timestamp;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SoftReference</span><span class=\"params\">(T referent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SoftReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * referentnull</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        T o = <span class=\"keyword\">super</span>.get();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (o != <span class=\"keyword\">null</span> &amp;&amp; <span class=\"keyword\">this</span>.timestamp != clock)</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> o;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>SoftReferenceclockJVMclockJVMGCclockclockGC</p>\n<p>timestampclocktimestamp</p>\n<p>SoftReferencetimestampclockget super.get() nulltimestamp</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>HotSpotOracle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The <span class=\"keyword\">default</span> value is <span class=\"number\">1000</span> ms per megabyte, <span class=\"function\">which means that a soft reference will <span class=\"title\">survive</span> <span class=\"params\">(after the last strong reference to the object has been collected)</span> <span class=\"keyword\">for</span> 1 second <span class=\"keyword\">for</span> each megabyte of free space in the heap</span></span><br></pre></td></tr></table></figure>\n<p>1000ms/Mb</p>\n<p>512Mb400Mbobject AAcacheobject B object ABAA</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./soft-reference-3.png\" alt=\"soft-reference-1\" title=\"\">\n                </div>\n                <div class=\"image-caption\">soft-reference-1</div>\n            </figure>\n<p>BAcacheA400s</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"./soft-reference-2.png\" alt=\"soft-reference-2\" title=\"\">\n                </div>\n                <div class=\"image-caption\">soft-reference-2</div>\n            </figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftRefTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> A strongRef;</span><br><span class=\"line\"> </span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setStrongRef</span><span class=\"params\">(A ref)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.strongRef = ref;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SoftReference&lt;A&gt; cache;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//Acache</span></span><br><span class=\"line\">        SoftRefTest.A instanceA = <span class=\"keyword\">new</span> SoftRefTest.A();</span><br><span class=\"line\">        cache = <span class=\"keyword\">new</span> SoftReference&lt;SoftRefTest.A&gt;(instanceA);</span><br><span class=\"line\">        instanceA = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"comment\">// instanceA </span></span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">10000</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">        ...</span><br><span class=\"line\">        SoftRefTest.B instanceB = <span class=\"keyword\">new</span> SoftRefTest.B();</span><br><span class=\"line\">        <span class=\"comment\">//cacheinstanceAinstanceA</span></span><br><span class=\"line\">        instanceA = cache.get();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (instanceA == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            instanceA = <span class=\"keyword\">new</span> SoftRefTest.A();</span><br><span class=\"line\">            cache = <span class=\"keyword\">new</span> SoftReference&lt;SoftRefTest.A&gt;(instanceA);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        instanceB.setStrongRef(instanceA);</span><br><span class=\"line\">        instanceA = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"comment\">// instanceAcacheB</span></span><br><span class=\"line\"> </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"./soft-reference.md#\"></a></p>\n<p>OOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReferenceTest</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBigObject</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] data = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">128</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> CACHE_INITIAL_CAPACITY = <span class=\"number\">100_000</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Set&lt;SoftReference&lt;MyBigObject&gt;&gt; cache = <span class=\"keyword\">new</span> HashSet&lt;&gt;(CACHE_INITIAL_CAPACITY);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000</span>; i++) &#123;</span><br><span class=\"line\">            MyBigObject obj = <span class=\"keyword\">new</span> MyBigObject();</span><br><span class=\"line\">            cache.add(<span class=\"keyword\">new</span> SoftReference&lt;&gt;(obj));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i%<span class=\"number\">10_000</span> == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">\"size of cache:\"</span> + cache.size());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"End\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">size of cache:1</span><br><span class=\"line\">size of cache:10001</span><br><span class=\"line\">size of cache:20001</span><br><span class=\"line\">size of cache:30001</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"main\"</span> java.lang.OutOfMemoryError: GC overhead <span class=\"built_in\">limit</span> exceeded</span><br></pre></td></tr></table></figure>\n<p>OOM<code>Java heap space</code><code>GC overhead limit exceeded</code> cpu98%2%</p>\n<p>cache</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReferenceTest</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> removedSoftRefs = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBigObject</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] data = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">128</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> CACHE_INITIAL_CAPACITY = <span class=\"number\">100_000</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Set&lt;SoftReference&lt;MyBigObject&gt;&gt; cache = <span class=\"keyword\">new</span> HashSet&lt;&gt;(CACHE_INITIAL_CAPACITY);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;MyBigObject&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000</span>; i++) &#123;</span><br><span class=\"line\">            MyBigObject obj = <span class=\"keyword\">new</span> MyBigObject();</span><br><span class=\"line\">            cache.add(<span class=\"keyword\">new</span> SoftReference&lt;&gt;(obj, referenceQueue));</span><br><span class=\"line\">            clearUselessReferences();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"End, removed soft references=\"</span> + removedSoftRefs);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">clearUselessReferences</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Reference&lt;? extends MyBigObject&gt; ref = referenceQueue.poll();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (ref != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (cache.remove(ref)) &#123;</span><br><span class=\"line\">                removedSoftRefs++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ref = referenceQueue.poll();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">End, removed soft references=97319</span><br></pre></td></tr></table></figure>\n<h2 id=\"HotSpot\"><a href=\"#HotSpot\" class=\"headerlink\" title=\"HotSpot\"></a>HotSpot</h2><p>HotSpotLRULRUCurrentHeapPolicyclocktimestamp</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">bool</span> LRUCurrentHeapPolicy::should_clear_reference(oop p,</span><br><span class=\"line\">                                                  jlong timestamp_clock) &#123;</span><br><span class=\"line\">  jlong interval = timestamp_clock - java_lang_ref_SoftReference::timestamp(p);</span><br><span class=\"line\">  assert(interval &gt;= <span class=\"number\">0</span>, <span class=\"string\">\"Sanity check\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(interval &lt;= _max_interval) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>timestamp_clock</code> SoftReferenceclockGCjava_lang_ref_SoftReference::timestamp(p)timestamp</p>\n<p> <code>_max_interval</code></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> LRUCurrentHeapPolicy::setup() &#123;</span><br><span class=\"line\">  _max_interval = (Universe::get_heap_free_at_last_gc() / M) * SoftRefLRUPolicyMSPerMB;</span><br><span class=\"line\">  assert(_max_interval &gt;= <span class=\"number\">0</span>,<span class=\"string\">\"Sanity check\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>SoftRefLRUPolicyMSPerMB</code>1000GC<code>_max_interval</code></p>\n<p>GCSoftReferenceGCSoftReference</p>\n<p>SoftReferencereferentJVMOutOfMemoryErrorFull GC </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li>gettimestamp</li>\n<li>hotspotLRU</li>\n</ul>\n"},{"prev":"./strong-reference","next":"./weak-reference","_content":"\n# \n\n## \n\n::: tip \nSoftReference\n:::\n\n## \n\n<img src=\"./0003.png\" width=\"50\"/>\n\nGC RootsGCGC Roots<img src=\"./0005.png\" width=\"50\"/>\n\n::: tip \nGC Roots`soft reachable`\n:::\n\n\n\n```java\nString s = new String(\"Frank\");    // StringString\nSoftReference<String> softRef = new SoftReference<String>(s);     // \ns = null;        // String\ns = softRef.get();  // \n```\n\nssoftRefs = nullFull GC\n\n::: warning \nSoftReferencegetJavagetnullnullNullPointerException<img src=\"./2030.png\" width=\"50\"/>\n:::\n\ns\n\n```java\ns = softRef.get();\n```\n\nsoftRef\n\nSoftReference\n\n```java\npublic class TestA {\n    static class OOMClass{\n        private int[] oom = new int[1024 * 100];// 100KB\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        ReferenceQueue<OOMClass> queue = new ReferenceQueue<>();\n        List<SoftReference> list = new ArrayList<>();\n        while(true){\n            for (int i = 0; i < 100; i++) {\n                list.add(new SoftReference<OOMClass>(new OOMClass(), queue));\n            }\n            Thread.sleep(500);\n        }\n    }\n}\n```\n\n::: warning \nReferenceQueueOOMClassSoftReference\n:::\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1017K->432K(3584K), 0.0017239 secs]\n[GC (Allocation Failure)  1072K->472K(3584K), 0.0099237 secs]\n[GC (Allocation Failure)  1323K->1296K(3584K), 0.0009528 secs]\n[GC (Allocation Failure)  2114K->2136K(3584K), 0.0009951 secs]\n[Full GC (Ergonomics)  2136K->1992K(3584K), 0.0040658 secs]\n[Full GC (Ergonomics)  2807K->2791K(3584K), 0.0036280 secs]\n[Full GC (Allocation Failure)  2791K->373K(3584K), 0.0032477 secs]\n[Full GC (Ergonomics)  2786K->2773K(3584K), 0.0034554 secs]\n[Full GC (Allocation Failure)  2773K->373K(3584K), 0.0032667 secs]\n[Full GC (Ergonomics)  2798K->2775K(3584K), 0.0036231 secs]\n[Full GC (Allocation Failure)  2775K->375K(3584K), 0.0055482 secs]\n[Full GC (Ergonomics)  2799K->2776K(3584K), 0.0031358 secs]\n...nGC\n```\n\nTestAlistOOM4M100KB10010MJVM\n\n```bash\n[Full GC (Allocation Failure)  2791K->373K(3584K), 0.0032477 secs]\n```\n\nFull GC\n\n2MGC100010000100000<img src=\"./141.png\" width=\"50\"/>\n\n## \n\nJVMOOM \n\n QQ\n\nOOM<img src=\"./0009.png\" width=\"50\"/>\n\n::: warning \nSoftReferenceJavaSoftReferenceget()nullSoftReferencenullSoftReferenceSoftReference\n:::\n\nReferenceQueueReferenceQueueJava\n\nSoftReference\n\n```java\npublic class SoftCache<T> {\n    // \n    private ReferenceQueue<T> referenceQueue = new ReferenceQueue<>();\n    // \n    private List<Reference<T>> list = new ArrayList<>();\n\n    // \n    public synchronized void add(T obj){\n        // \n        Reference<T> reference = new SoftReference<T>(obj, referenceQueue);\n        // \n        list.add(reference);\n    }\n\n    // \n    public synchronized T get(int index){\n        // \n        clear();\n        if (index < 0 || list.size() < index){\n            return null;\n        }\n        Reference<T> reference = list.get(index);\n        return reference == null ? null : reference.get();\n    }\n\n    public int size(){\n        return list.size();\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    private void clear(){\n        Reference<T> reference;\n        while (null != (reference = (Reference<T>) referenceQueue.poll())){\n            list.remove(reference);\n        }\n    }\n}\n```\n\n\n\n```java\npublic class SoftCacheTest {\n    private static int num = 0;\n\n    public static void main(String[] args){\n        SoftCache<OOMClass> softCache = new SoftCache<>();\n        for (int i = 0; i < 40; i++) {\n            softCache.add(new OOMClass(\"OOM Obj-\" + ++num));\n        }\n        System.out.println(softCache.size());\n        for (int i = 0; i < softCache.size(); i++) {\n            OOMClass obj = softCache.get(i);\n            System.out.println(obj == null ? \"null\" : obj.name);\n        }\n        System.out.println(softCache.size());\n    }\n\n    static class OOMClass{\n        private String name;\n        private int[] oom = new int[1024 * 100];// 100KB\n\n        public OOMClass(String name) {\n            this.name = name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```java\n[GC (Allocation Failure)  1017K->432K(3584K), 0.0012236 secs]\n[GC (Allocation Failure)  1117K->496K(3584K), 0.0016875 secs]\n[GC (Allocation Failure)  1347K->1229K(3584K), 0.0015059 secs]\n[GC (Allocation Failure)  2047K->2125K(3584K), 0.0018090 secs]\n[Full GC (Ergonomics)  2125K->1994K(3584K), 0.0054759 secs]\n[Full GC (Ergonomics)  2822K->2794K(3584K), 0.0023167 secs]\n[Full GC (Allocation Failure)  2794K->376K(3584K), 0.0036056 secs]\n[Full GC (Ergonomics)  2795K->2776K(3584K), 0.0042365 secs]\n[Full GC (Allocation Failure)  2776K->376K(3584K), 0.0035122 secs]\n[Full GC (Ergonomics)  2795K->2776K(3584K), 0.0054760 secs]\n[Full GC (Allocation Failure)  2776K->376K(3584K), 0.0036965 secs]\n[Full GC (Ergonomics)  2802K->2777K(3584K), 0.0044513 secs]\n[Full GC (Allocation Failure)  2777K->376K(3584K), 0.0041400 secs]\n[Full GC (Ergonomics)  2796K->2777K(3584K), 0.0025255 secs]\n[Full GC (Allocation Failure)  2777K->376K(3584K), 0.0037690 secs]\n[Full GC (Ergonomics)  2817K->2777K(3584K), 0.0037759 secs]\n[Full GC (Allocation Failure)  2777K->377K(3584K), 0.0042416 secs]\n40\nOOM Obj-37\nOOM Obj-38\nOOM Obj-39\nOOM Obj-40\n4\n```\n\n40GC4\n\n## \n\n\n\n```java\npublic class Test {\n\n    static class OOMClass{\n        private int[] oom = new int[1024];\n    }\n\n    public static void main(String[] args) {\n        testStrongReference();\n        //testSoftReference();\n    }\n\n    public static void testStrongReference(){\n        List<OOMClass> list = new ArrayList<>();\n        for (int i = 0; i < 1000; i++) {\n            list.add(new OOMClass());\n        }\n    }\n\n    public static void testSoftReference(){\n        ReferenceQueue<OOMClass> referenceQueue = new ReferenceQueue<>();\n        List<SoftReference> list = new ArrayList<>();\n        for (int i = 0; i < 1000; i++) {\n            OOMClass oomClass = new OOMClass();\n            list.add(new SoftReference(oomClass, referenceQueue));\n            oomClass = null;\n        }\n    }\n}\n```\n\ntestStrongReference\n\n```java\n[GC (Allocation Failure)  1019K->384K(3584K), 0.0033595 secs]\n[GC (Allocation Failure)  1406K->856K(3584K), 0.0013098 secs]\n[GC (Allocation Failure)  1880K->1836K(3584K), 0.0014382 secs]\n[Full GC (Ergonomics)  1836K->1756K(3584K), 0.0039761 secs]\n[Full GC (Ergonomics)  2778K->2758K(3584K), 0.0021269 secs]\n[Full GC (Ergonomics)  2779K->2770K(3584K), 0.0016329 secs]\n[Full GC (Ergonomics)  2779K->2775K(3584K), 0.0023157 secs]\n[Full GC (Ergonomics)  2775K->2775K(3584K), 0.0015927 secs]\n[Full GC (Ergonomics)  3037K->3029K(3584K), 0.0025071 secs]\n[Full GC (Ergonomics)  3067K->3065K(3584K), 0.0017529 secs]\n[Full GC (Allocation Failure)  3065K->3047K(3584K), 0.0033445 secs]\n[Full GC (Ergonomics)  3068K->3059K(3584K), 0.0016623 secs]\n[Full GC (Ergonomics)  3070K->3068K(3584K), 0.0028357 secs]\n[Full GC (Allocation Failure)  3068K->3068K(3584K), 0.0017616 secs]\njava.lang.OutOfMemoryError: Java heap space\nDumping heap to java_pid3352.hprof ...\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\nHeap dump file created [3855956 bytes in 0.017 secs]\n[Full GC (Ergonomics)  3071K->376K(3584K), 0.0032068 secs]\n\tat reference.Test$OOMClass.<init>(Test.java:11)\n\tat reference.Test.testStrongReference(Test.java:22)\n\tat reference.Test.main(Test.java:15)\n\nProcess finished with exit code 1\n```\n\nOOMJava heap space\n\ntestSoftReference\n\n```java\n[GC (Allocation Failure)  1019K->464K(3584K), 0.0019850 secs]\n[GC (Allocation Failure)  1484K->844K(3584K), 0.0015920 secs]\n[GC (Allocation Failure)  1868K->1860K(3584K), 0.0043236 secs]\n[Full GC (Ergonomics)  1860K->1781K(3584K), 0.0044581 secs]\n[Full GC (Ergonomics)  2802K->2754K(3584K), 0.0041726 secs]\n[Full GC (Ergonomics)  2802K->2799K(3584K), 0.0031293 secs]\n[Full GC (Ergonomics)  3023K->3023K(3584K), 0.0024830 secs]\n[Full GC (Ergonomics)  3071K->3068K(3584K), 0.0035025 secs]\n[Full GC (Allocation Failure)  3068K->405K(3584K), 0.0040672 secs]\n[GC (Allocation Failure)  1512K->1567K(3584K), 0.0011170 secs]\n[Full GC (Ergonomics)  1567K->1496K(3584K), 0.0048438 secs]\n```\n\nOOMGC\n\n```bash\n[Full GC (Allocation Failure)  3068K->405K(3584K), 0.0040672 secs]\n```\n\nFull GC\n\n## \n\n+ \n+ \n+ JVM\n+ OOM\n+ \n\n \n\n\n\n","source":"_posts/java/reference/soft-reference.md","raw":"---\nprev: ./strong-reference\nnext: ./weak-reference\n---\n\n# \n\n## \n\n::: tip \nSoftReference\n:::\n\n## \n\n<img src=\"./0003.png\" width=\"50\"/>\n\nGC RootsGCGC Roots<img src=\"./0005.png\" width=\"50\"/>\n\n::: tip \nGC Roots`soft reachable`\n:::\n\n\n\n```java\nString s = new String(\"Frank\");    // StringString\nSoftReference<String> softRef = new SoftReference<String>(s);     // \ns = null;        // String\ns = softRef.get();  // \n```\n\nssoftRefs = nullFull GC\n\n::: warning \nSoftReferencegetJavagetnullnullNullPointerException<img src=\"./2030.png\" width=\"50\"/>\n:::\n\ns\n\n```java\ns = softRef.get();\n```\n\nsoftRef\n\nSoftReference\n\n```java\npublic class TestA {\n    static class OOMClass{\n        private int[] oom = new int[1024 * 100];// 100KB\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        ReferenceQueue<OOMClass> queue = new ReferenceQueue<>();\n        List<SoftReference> list = new ArrayList<>();\n        while(true){\n            for (int i = 0; i < 100; i++) {\n                list.add(new SoftReference<OOMClass>(new OOMClass(), queue));\n            }\n            Thread.sleep(500);\n        }\n    }\n}\n```\n\n::: warning \nReferenceQueueOOMClassSoftReference\n:::\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1017K->432K(3584K), 0.0017239 secs]\n[GC (Allocation Failure)  1072K->472K(3584K), 0.0099237 secs]\n[GC (Allocation Failure)  1323K->1296K(3584K), 0.0009528 secs]\n[GC (Allocation Failure)  2114K->2136K(3584K), 0.0009951 secs]\n[Full GC (Ergonomics)  2136K->1992K(3584K), 0.0040658 secs]\n[Full GC (Ergonomics)  2807K->2791K(3584K), 0.0036280 secs]\n[Full GC (Allocation Failure)  2791K->373K(3584K), 0.0032477 secs]\n[Full GC (Ergonomics)  2786K->2773K(3584K), 0.0034554 secs]\n[Full GC (Allocation Failure)  2773K->373K(3584K), 0.0032667 secs]\n[Full GC (Ergonomics)  2798K->2775K(3584K), 0.0036231 secs]\n[Full GC (Allocation Failure)  2775K->375K(3584K), 0.0055482 secs]\n[Full GC (Ergonomics)  2799K->2776K(3584K), 0.0031358 secs]\n...nGC\n```\n\nTestAlistOOM4M100KB10010MJVM\n\n```bash\n[Full GC (Allocation Failure)  2791K->373K(3584K), 0.0032477 secs]\n```\n\nFull GC\n\n2MGC100010000100000<img src=\"./141.png\" width=\"50\"/>\n\n## \n\nJVMOOM \n\n QQ\n\nOOM<img src=\"./0009.png\" width=\"50\"/>\n\n::: warning \nSoftReferenceJavaSoftReferenceget()nullSoftReferencenullSoftReferenceSoftReference\n:::\n\nReferenceQueueReferenceQueueJava\n\nSoftReference\n\n```java\npublic class SoftCache<T> {\n    // \n    private ReferenceQueue<T> referenceQueue = new ReferenceQueue<>();\n    // \n    private List<Reference<T>> list = new ArrayList<>();\n\n    // \n    public synchronized void add(T obj){\n        // \n        Reference<T> reference = new SoftReference<T>(obj, referenceQueue);\n        // \n        list.add(reference);\n    }\n\n    // \n    public synchronized T get(int index){\n        // \n        clear();\n        if (index < 0 || list.size() < index){\n            return null;\n        }\n        Reference<T> reference = list.get(index);\n        return reference == null ? null : reference.get();\n    }\n\n    public int size(){\n        return list.size();\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    private void clear(){\n        Reference<T> reference;\n        while (null != (reference = (Reference<T>) referenceQueue.poll())){\n            list.remove(reference);\n        }\n    }\n}\n```\n\n\n\n```java\npublic class SoftCacheTest {\n    private static int num = 0;\n\n    public static void main(String[] args){\n        SoftCache<OOMClass> softCache = new SoftCache<>();\n        for (int i = 0; i < 40; i++) {\n            softCache.add(new OOMClass(\"OOM Obj-\" + ++num));\n        }\n        System.out.println(softCache.size());\n        for (int i = 0; i < softCache.size(); i++) {\n            OOMClass obj = softCache.get(i);\n            System.out.println(obj == null ? \"null\" : obj.name);\n        }\n        System.out.println(softCache.size());\n    }\n\n    static class OOMClass{\n        private String name;\n        private int[] oom = new int[1024 * 100];// 100KB\n\n        public OOMClass(String name) {\n            this.name = name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```java\n[GC (Allocation Failure)  1017K->432K(3584K), 0.0012236 secs]\n[GC (Allocation Failure)  1117K->496K(3584K), 0.0016875 secs]\n[GC (Allocation Failure)  1347K->1229K(3584K), 0.0015059 secs]\n[GC (Allocation Failure)  2047K->2125K(3584K), 0.0018090 secs]\n[Full GC (Ergonomics)  2125K->1994K(3584K), 0.0054759 secs]\n[Full GC (Ergonomics)  2822K->2794K(3584K), 0.0023167 secs]\n[Full GC (Allocation Failure)  2794K->376K(3584K), 0.0036056 secs]\n[Full GC (Ergonomics)  2795K->2776K(3584K), 0.0042365 secs]\n[Full GC (Allocation Failure)  2776K->376K(3584K), 0.0035122 secs]\n[Full GC (Ergonomics)  2795K->2776K(3584K), 0.0054760 secs]\n[Full GC (Allocation Failure)  2776K->376K(3584K), 0.0036965 secs]\n[Full GC (Ergonomics)  2802K->2777K(3584K), 0.0044513 secs]\n[Full GC (Allocation Failure)  2777K->376K(3584K), 0.0041400 secs]\n[Full GC (Ergonomics)  2796K->2777K(3584K), 0.0025255 secs]\n[Full GC (Allocation Failure)  2777K->376K(3584K), 0.0037690 secs]\n[Full GC (Ergonomics)  2817K->2777K(3584K), 0.0037759 secs]\n[Full GC (Allocation Failure)  2777K->377K(3584K), 0.0042416 secs]\n40\nOOM Obj-37\nOOM Obj-38\nOOM Obj-39\nOOM Obj-40\n4\n```\n\n40GC4\n\n## \n\n\n\n```java\npublic class Test {\n\n    static class OOMClass{\n        private int[] oom = new int[1024];\n    }\n\n    public static void main(String[] args) {\n        testStrongReference();\n        //testSoftReference();\n    }\n\n    public static void testStrongReference(){\n        List<OOMClass> list = new ArrayList<>();\n        for (int i = 0; i < 1000; i++) {\n            list.add(new OOMClass());\n        }\n    }\n\n    public static void testSoftReference(){\n        ReferenceQueue<OOMClass> referenceQueue = new ReferenceQueue<>();\n        List<SoftReference> list = new ArrayList<>();\n        for (int i = 0; i < 1000; i++) {\n            OOMClass oomClass = new OOMClass();\n            list.add(new SoftReference(oomClass, referenceQueue));\n            oomClass = null;\n        }\n    }\n}\n```\n\ntestStrongReference\n\n```java\n[GC (Allocation Failure)  1019K->384K(3584K), 0.0033595 secs]\n[GC (Allocation Failure)  1406K->856K(3584K), 0.0013098 secs]\n[GC (Allocation Failure)  1880K->1836K(3584K), 0.0014382 secs]\n[Full GC (Ergonomics)  1836K->1756K(3584K), 0.0039761 secs]\n[Full GC (Ergonomics)  2778K->2758K(3584K), 0.0021269 secs]\n[Full GC (Ergonomics)  2779K->2770K(3584K), 0.0016329 secs]\n[Full GC (Ergonomics)  2779K->2775K(3584K), 0.0023157 secs]\n[Full GC (Ergonomics)  2775K->2775K(3584K), 0.0015927 secs]\n[Full GC (Ergonomics)  3037K->3029K(3584K), 0.0025071 secs]\n[Full GC (Ergonomics)  3067K->3065K(3584K), 0.0017529 secs]\n[Full GC (Allocation Failure)  3065K->3047K(3584K), 0.0033445 secs]\n[Full GC (Ergonomics)  3068K->3059K(3584K), 0.0016623 secs]\n[Full GC (Ergonomics)  3070K->3068K(3584K), 0.0028357 secs]\n[Full GC (Allocation Failure)  3068K->3068K(3584K), 0.0017616 secs]\njava.lang.OutOfMemoryError: Java heap space\nDumping heap to java_pid3352.hprof ...\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\nHeap dump file created [3855956 bytes in 0.017 secs]\n[Full GC (Ergonomics)  3071K->376K(3584K), 0.0032068 secs]\n\tat reference.Test$OOMClass.<init>(Test.java:11)\n\tat reference.Test.testStrongReference(Test.java:22)\n\tat reference.Test.main(Test.java:15)\n\nProcess finished with exit code 1\n```\n\nOOMJava heap space\n\ntestSoftReference\n\n```java\n[GC (Allocation Failure)  1019K->464K(3584K), 0.0019850 secs]\n[GC (Allocation Failure)  1484K->844K(3584K), 0.0015920 secs]\n[GC (Allocation Failure)  1868K->1860K(3584K), 0.0043236 secs]\n[Full GC (Ergonomics)  1860K->1781K(3584K), 0.0044581 secs]\n[Full GC (Ergonomics)  2802K->2754K(3584K), 0.0041726 secs]\n[Full GC (Ergonomics)  2802K->2799K(3584K), 0.0031293 secs]\n[Full GC (Ergonomics)  3023K->3023K(3584K), 0.0024830 secs]\n[Full GC (Ergonomics)  3071K->3068K(3584K), 0.0035025 secs]\n[Full GC (Allocation Failure)  3068K->405K(3584K), 0.0040672 secs]\n[GC (Allocation Failure)  1512K->1567K(3584K), 0.0011170 secs]\n[Full GC (Ergonomics)  1567K->1496K(3584K), 0.0048438 secs]\n```\n\nOOMGC\n\n```bash\n[Full GC (Allocation Failure)  3068K->405K(3584K), 0.0040672 secs]\n```\n\nFull GC\n\n## \n\n+ \n+ \n+ JVM\n+ OOM\n+ \n\n \n\n\n\n","slug":"java/reference/soft-reference","published":1,"date":"2019-01-02T14:25:23.466Z","updated":"2019-01-02T14:25:23.466Z","_id":"cjq7rm5rm002twu9kh99bbgia","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>SoftReference<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"./0003.png\" width=\"50\"></p>\n<p>GC RootsGCGC Roots<img src=\"./0005.png\" width=\"50\"></p>\n<p>::: tip <br>GC Roots<code>soft reachable</code><br>:::</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Frank\"</span>);    <span class=\"comment\">// StringString</span></span><br><span class=\"line\">SoftReference&lt;String&gt; softRef = <span class=\"keyword\">new</span> SoftReference&lt;String&gt;(s);     <span class=\"comment\">// </span></span><br><span class=\"line\">s = <span class=\"keyword\">null</span>;        <span class=\"comment\">// String</span></span><br><span class=\"line\">s = softRef.get();  <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n<p>ssoftRefs = nullFull GC</p>\n<p>::: warning <br>SoftReferencegetJavagetnullnullNullPointerException<img src=\"./2030.png\" width=\"50\"><br>:::</p>\n<p>s</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = softRef.get();</span><br></pre></td></tr></table></figure>\n<p>softRef</p>\n<p>SoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestA</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>];<span class=\"comment\">// 100KB</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        ReferenceQueue&lt;OOMClass&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">        List&lt;SoftReference&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"keyword\">true</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</span><br><span class=\"line\">                list.add(<span class=\"keyword\">new</span> SoftReference&lt;OOMClass&gt;(<span class=\"keyword\">new</span> OOMClass(), queue));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">500</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>::: warning <br>ReferenceQueueOOMClassSoftReference<br>:::</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1017K-&gt;432K(3584K), 0.0017239 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1072K-&gt;472K(3584K), 0.0099237 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1323K-&gt;1296K(3584K), 0.0009528 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  2114K-&gt;2136K(3584K), 0.0009951 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2136K-&gt;1992K(3584K), 0.0040658 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2807K-&gt;2791K(3584K), 0.0036280 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2791K-&gt;373K(3584K), 0.0032477 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2786K-&gt;2773K(3584K), 0.0034554 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2773K-&gt;373K(3584K), 0.0032667 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2798K-&gt;2775K(3584K), 0.0036231 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2775K-&gt;375K(3584K), 0.0055482 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2799K-&gt;2776K(3584K), 0.0031358 secs]</span><br><span class=\"line\">...nGC</span><br></pre></td></tr></table></figure>\n<p>TestAlistOOM4M100KB10010MJVM</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Full GC (Allocation Failure)  2791K-&gt;373K(3584K), 0.0032477 secs]</span><br></pre></td></tr></table></figure>\n<p>Full GC</p>\n<p>2MGC100010000100000<img src=\"./141.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JVMOOM </p>\n<p> QQ</p>\n<p>OOM<img src=\"./0009.png\" width=\"50\"></p>\n<p>::: warning <br>SoftReferenceJavaSoftReferenceget()nullSoftReferencenullSoftReferenceSoftReference<br>:::</p>\n<p>ReferenceQueueReferenceQueueJava</p>\n<p>SoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftCache</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ReferenceQueue&lt;T&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Reference&lt;T&gt;&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(T obj)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        Reference&lt;T&gt; reference = <span class=\"keyword\">new</span> SoftReference&lt;T&gt;(obj, referenceQueue);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        list.add(reference);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> T <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        clear();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index &lt; <span class=\"number\">0</span> || list.size() &lt; index)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Reference&lt;T&gt; reference = list.get(index);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> reference == <span class=\"keyword\">null</span> ? <span class=\"keyword\">null</span> : reference.get();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">size</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> list.size();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Reference&lt;T&gt; reference;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"keyword\">null</span> != (reference = (Reference&lt;T&gt;) referenceQueue.poll()))&#123;</span><br><span class=\"line\">            list.remove(reference);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftCacheTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> num = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        SoftCache&lt;OOMClass&gt; softCache = <span class=\"keyword\">new</span> SoftCache&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">40</span>; i++) &#123;</span><br><span class=\"line\">            softCache.add(<span class=\"keyword\">new</span> OOMClass(<span class=\"string\">\"OOM Obj-\"</span> + ++num));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(softCache.size());</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; softCache.size(); i++) &#123;</span><br><span class=\"line\">            OOMClass obj = softCache.get(i);</span><br><span class=\"line\">            System.out.println(obj == <span class=\"keyword\">null</span> ? <span class=\"string\">\"null\"</span> : obj.name);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(softCache.size());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>];<span class=\"comment\">// 100KB</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">OOMClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1017</span>K-&gt;<span class=\"number\">432</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0012236</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1117</span>K-&gt;<span class=\"number\">496</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0016875</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1347</span>K-&gt;<span class=\"number\">1229</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0015059</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">2047</span>K-&gt;<span class=\"number\">2125</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0018090</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2125K-&gt;1994<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0054759 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2822K-&gt;2794<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0023167 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2794K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0036056 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2795K-&gt;2776<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0042365 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2776K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0035122 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2795K-&gt;2776<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0054760 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2776K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0036965 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0044513 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0041400 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2796K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0025255 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0037690 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2817K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0037759 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;377<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0042416 secs]</span></span><br><span class=\"line\"><span class=\"function\">40</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-37</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-38</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-39</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-40</span></span><br><span class=\"line\"><span class=\"function\">4</span></span><br></pre></td></tr></table></figure>\n<p>40GC4</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        testStrongReference();</span><br><span class=\"line\">        <span class=\"comment\">//testSoftReference();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testStrongReference</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        List&lt;OOMClass&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000</span>; i++) &#123;</span><br><span class=\"line\">            list.add(<span class=\"keyword\">new</span> OOMClass());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testSoftReference</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        ReferenceQueue&lt;OOMClass&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">        List&lt;SoftReference&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000</span>; i++) &#123;</span><br><span class=\"line\">            OOMClass oomClass = <span class=\"keyword\">new</span> OOMClass();</span><br><span class=\"line\">            list.add(<span class=\"keyword\">new</span> SoftReference(oomClass, referenceQueue));</span><br><span class=\"line\">            oomClass = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>testStrongReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1019</span>K-&gt;<span class=\"number\">384</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0033595</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1406</span>K-&gt;<span class=\"number\">856</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0013098</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1880</span>K-&gt;<span class=\"number\">1836</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0014382</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1836K-&gt;1756<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0039761 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2778K-&gt;2758<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0021269 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2779K-&gt;2770<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0016329 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2779K-&gt;2775<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0023157 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2775K-&gt;2775<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0015927 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3037K-&gt;3029<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0025071 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3067K-&gt;3065<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0017529 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3065K-&gt;3047<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0033445 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3068K-&gt;3059<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0016623 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3070K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0028357 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3068K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0017616 secs]</span></span><br><span class=\"line\"><span class=\"function\">java.lang.OutOfMemoryError: Java heap space</span></span><br><span class=\"line\"><span class=\"function\">Dumping heap to java_pid3352.hprof ...</span></span><br><span class=\"line\"><span class=\"function\">Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space</span></span><br><span class=\"line\"><span class=\"function\">Heap dump file created [3855956 bytes in 0.017 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3071K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0032068 secs]</span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test$OOMClass.&lt;init&gt;<span class=\"params\">(Test.java:<span class=\"number\">11</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test.<span class=\"title\">testStrongReference</span><span class=\"params\">(Test.java:<span class=\"number\">22</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test.<span class=\"title\">main</span><span class=\"params\">(Test.java:<span class=\"number\">15</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\">Process finished with exit code 1</span></span><br></pre></td></tr></table></figure>\n<p>OOMJava heap space</p>\n<p>testSoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1019</span>K-&gt;<span class=\"number\">464</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0019850</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1484</span>K-&gt;<span class=\"number\">844</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0015920</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1868</span>K-&gt;<span class=\"number\">1860</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0043236</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1860K-&gt;1781<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0044581 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2754<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0041726 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2799<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0031293 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3023K-&gt;3023<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0024830 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3071K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0035025 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3068K-&gt;405<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0040672 secs]</span></span><br><span class=\"line\"><span class=\"function\">[<span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  1512K-&gt;1567<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0011170 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1567K-&gt;1496<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0048438 secs]</span></span><br></pre></td></tr></table></figure>\n<p>OOMGC</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Full GC (Allocation Failure)  3068K-&gt;405K(3584K), 0.0040672 secs]</span><br></pre></td></tr></table></figure>\n<p>Full GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li>OOM</li>\n<li></li>\n</ul>\n<p> </p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>SoftReference<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"./0003.png\" width=\"50\"></p>\n<p>GC RootsGCGC Roots<img src=\"./0005.png\" width=\"50\"></p>\n<p>::: tip <br>GC Roots<code>soft reachable</code><br>:::</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Frank\"</span>);    <span class=\"comment\">// StringString</span></span><br><span class=\"line\">SoftReference&lt;String&gt; softRef = <span class=\"keyword\">new</span> SoftReference&lt;String&gt;(s);     <span class=\"comment\">// </span></span><br><span class=\"line\">s = <span class=\"keyword\">null</span>;        <span class=\"comment\">// String</span></span><br><span class=\"line\">s = softRef.get();  <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n<p>ssoftRefs = nullFull GC</p>\n<p>::: warning <br>SoftReferencegetJavagetnullnullNullPointerException<img src=\"./2030.png\" width=\"50\"><br>:::</p>\n<p>s</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = softRef.get();</span><br></pre></td></tr></table></figure>\n<p>softRef</p>\n<p>SoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestA</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>];<span class=\"comment\">// 100KB</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        ReferenceQueue&lt;OOMClass&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">        List&lt;SoftReference&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"keyword\">true</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</span><br><span class=\"line\">                list.add(<span class=\"keyword\">new</span> SoftReference&lt;OOMClass&gt;(<span class=\"keyword\">new</span> OOMClass(), queue));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">500</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>::: warning <br>ReferenceQueueOOMClassSoftReference<br>:::</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1017K-&gt;432K(3584K), 0.0017239 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1072K-&gt;472K(3584K), 0.0099237 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1323K-&gt;1296K(3584K), 0.0009528 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  2114K-&gt;2136K(3584K), 0.0009951 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2136K-&gt;1992K(3584K), 0.0040658 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2807K-&gt;2791K(3584K), 0.0036280 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2791K-&gt;373K(3584K), 0.0032477 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2786K-&gt;2773K(3584K), 0.0034554 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2773K-&gt;373K(3584K), 0.0032667 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2798K-&gt;2775K(3584K), 0.0036231 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2775K-&gt;375K(3584K), 0.0055482 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2799K-&gt;2776K(3584K), 0.0031358 secs]</span><br><span class=\"line\">...nGC</span><br></pre></td></tr></table></figure>\n<p>TestAlistOOM4M100KB10010MJVM</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Full GC (Allocation Failure)  2791K-&gt;373K(3584K), 0.0032477 secs]</span><br></pre></td></tr></table></figure>\n<p>Full GC</p>\n<p>2MGC100010000100000<img src=\"./141.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JVMOOM </p>\n<p> QQ</p>\n<p>OOM<img src=\"./0009.png\" width=\"50\"></p>\n<p>::: warning <br>SoftReferenceJavaSoftReferenceget()nullSoftReferencenullSoftReferenceSoftReference<br>:::</p>\n<p>ReferenceQueueReferenceQueueJava</p>\n<p>SoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftCache</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ReferenceQueue&lt;T&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Reference&lt;T&gt;&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(T obj)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        Reference&lt;T&gt; reference = <span class=\"keyword\">new</span> SoftReference&lt;T&gt;(obj, referenceQueue);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        list.add(reference);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> T <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        clear();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index &lt; <span class=\"number\">0</span> || list.size() &lt; index)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Reference&lt;T&gt; reference = list.get(index);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> reference == <span class=\"keyword\">null</span> ? <span class=\"keyword\">null</span> : reference.get();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">size</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> list.size();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Reference&lt;T&gt; reference;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"keyword\">null</span> != (reference = (Reference&lt;T&gt;) referenceQueue.poll()))&#123;</span><br><span class=\"line\">            list.remove(reference);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftCacheTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> num = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        SoftCache&lt;OOMClass&gt; softCache = <span class=\"keyword\">new</span> SoftCache&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">40</span>; i++) &#123;</span><br><span class=\"line\">            softCache.add(<span class=\"keyword\">new</span> OOMClass(<span class=\"string\">\"OOM Obj-\"</span> + ++num));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(softCache.size());</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; softCache.size(); i++) &#123;</span><br><span class=\"line\">            OOMClass obj = softCache.get(i);</span><br><span class=\"line\">            System.out.println(obj == <span class=\"keyword\">null</span> ? <span class=\"string\">\"null\"</span> : obj.name);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(softCache.size());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>];<span class=\"comment\">// 100KB</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">OOMClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1017</span>K-&gt;<span class=\"number\">432</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0012236</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1117</span>K-&gt;<span class=\"number\">496</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0016875</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1347</span>K-&gt;<span class=\"number\">1229</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0015059</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">2047</span>K-&gt;<span class=\"number\">2125</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0018090</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2125K-&gt;1994<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0054759 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2822K-&gt;2794<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0023167 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2794K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0036056 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2795K-&gt;2776<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0042365 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2776K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0035122 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2795K-&gt;2776<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0054760 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2776K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0036965 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0044513 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0041400 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2796K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0025255 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0037690 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2817K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0037759 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;377<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0042416 secs]</span></span><br><span class=\"line\"><span class=\"function\">40</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-37</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-38</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-39</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-40</span></span><br><span class=\"line\"><span class=\"function\">4</span></span><br></pre></td></tr></table></figure>\n<p>40GC4</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        testStrongReference();</span><br><span class=\"line\">        <span class=\"comment\">//testSoftReference();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testStrongReference</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        List&lt;OOMClass&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000</span>; i++) &#123;</span><br><span class=\"line\">            list.add(<span class=\"keyword\">new</span> OOMClass());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testSoftReference</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        ReferenceQueue&lt;OOMClass&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">        List&lt;SoftReference&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000</span>; i++) &#123;</span><br><span class=\"line\">            OOMClass oomClass = <span class=\"keyword\">new</span> OOMClass();</span><br><span class=\"line\">            list.add(<span class=\"keyword\">new</span> SoftReference(oomClass, referenceQueue));</span><br><span class=\"line\">            oomClass = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>testStrongReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1019</span>K-&gt;<span class=\"number\">384</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0033595</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1406</span>K-&gt;<span class=\"number\">856</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0013098</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1880</span>K-&gt;<span class=\"number\">1836</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0014382</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1836K-&gt;1756<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0039761 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2778K-&gt;2758<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0021269 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2779K-&gt;2770<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0016329 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2779K-&gt;2775<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0023157 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2775K-&gt;2775<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0015927 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3037K-&gt;3029<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0025071 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3067K-&gt;3065<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0017529 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3065K-&gt;3047<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0033445 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3068K-&gt;3059<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0016623 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3070K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0028357 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3068K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0017616 secs]</span></span><br><span class=\"line\"><span class=\"function\">java.lang.OutOfMemoryError: Java heap space</span></span><br><span class=\"line\"><span class=\"function\">Dumping heap to java_pid3352.hprof ...</span></span><br><span class=\"line\"><span class=\"function\">Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space</span></span><br><span class=\"line\"><span class=\"function\">Heap dump file created [3855956 bytes in 0.017 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3071K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0032068 secs]</span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test$OOMClass.&lt;init&gt;<span class=\"params\">(Test.java:<span class=\"number\">11</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test.<span class=\"title\">testStrongReference</span><span class=\"params\">(Test.java:<span class=\"number\">22</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test.<span class=\"title\">main</span><span class=\"params\">(Test.java:<span class=\"number\">15</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\">Process finished with exit code 1</span></span><br></pre></td></tr></table></figure>\n<p>OOMJava heap space</p>\n<p>testSoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1019</span>K-&gt;<span class=\"number\">464</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0019850</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1484</span>K-&gt;<span class=\"number\">844</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0015920</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1868</span>K-&gt;<span class=\"number\">1860</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0043236</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1860K-&gt;1781<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0044581 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2754<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0041726 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2799<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0031293 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3023K-&gt;3023<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0024830 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3071K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0035025 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3068K-&gt;405<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0040672 secs]</span></span><br><span class=\"line\"><span class=\"function\">[<span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  1512K-&gt;1567<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0011170 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1567K-&gt;1496<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0048438 secs]</span></span><br></pre></td></tr></table></figure>\n<p>OOMGC</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Full GC (Allocation Failure)  3068K-&gt;405K(3584K), 0.0040672 secs]</span><br></pre></td></tr></table></figure>\n<p>Full GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li>OOM</li>\n<li></li>\n</ul>\n<p> </p>\n"},{"prev":"./soft-reference-code-detail","next":"./phantom-reference-code-detail","_content":"\n# WeakReference\n\n## \n\n::: tip \nWeakReference\n:::\n\n## \n\nweakly-reachablefinalizable\n\n[](./weak-reference.md)WeakReferenceWeakReference\n\n## \n\n```java\npublic class WeakReference<T> extends Reference<T> {\n    public WeakReference(T referent) {\n        super(referent);\n    }\n    \n    public WeakReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n    \n}\n```\n\nReference\n\n## WeakHashMap\n\nWeakReferenceWeakHashMapmaphashmapkeySoftReference\n\nWeakHashMap[](../collections/weakhashmap-code-detail.md)\n\n<img src=\"./06.png\" width=\"40\"/> ","source":"_posts/java/reference/weak-reference-code-detail.md","raw":"---\nprev: ./soft-reference-code-detail\nnext: ./phantom-reference-code-detail\n---\n\n# WeakReference\n\n## \n\n::: tip \nWeakReference\n:::\n\n## \n\nweakly-reachablefinalizable\n\n[](./weak-reference.md)WeakReferenceWeakReference\n\n## \n\n```java\npublic class WeakReference<T> extends Reference<T> {\n    public WeakReference(T referent) {\n        super(referent);\n    }\n    \n    public WeakReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n    \n}\n```\n\nReference\n\n## WeakHashMap\n\nWeakReferenceWeakHashMapmaphashmapkeySoftReference\n\nWeakHashMap[](../collections/weakhashmap-code-detail.md)\n\n<img src=\"./06.png\" width=\"40\"/> ","slug":"java/reference/weak-reference-code-detail","published":1,"date":"2019-01-02T14:25:23.469Z","updated":"2019-01-02T14:25:23.469Z","_id":"cjq7rm5rm002uwu9k9q3997i1","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"WeakReference\"><a href=\"#WeakReference\" class=\"headerlink\" title=\"WeakReference\"></a>WeakReference</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>WeakReference<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>weakly-reachablefinalizable</p>\n<p><a href=\"./weak-reference.md\"></a>WeakReferenceWeakReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakReference</span><span class=\"params\">(T referent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Reference</p>\n<h2 id=\"WeakHashMap\"><a href=\"#WeakHashMap\" class=\"headerlink\" title=\"WeakHashMap\"></a>WeakHashMap</h2><p>WeakReferenceWeakHashMapmaphashmapkeySoftReference</p>\n<p>WeakHashMap<a href=\"../collections/weakhashmap-code-detail.md\"></a></p>\n<p><img src=\"./06.png\" width=\"40\"> </p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"WeakReference\"><a href=\"#WeakReference\" class=\"headerlink\" title=\"WeakReference\"></a>WeakReference</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>WeakReference<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>weakly-reachablefinalizable</p>\n<p><a href=\"./weak-reference.md\"></a>WeakReferenceWeakReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakReference</span><span class=\"params\">(T referent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Reference</p>\n<h2 id=\"WeakHashMap\"><a href=\"#WeakHashMap\" class=\"headerlink\" title=\"WeakHashMap\"></a>WeakHashMap</h2><p>WeakReferenceWeakHashMapmaphashmapkeySoftReference</p>\n<p>WeakHashMap<a href=\"../collections/weakhashmap-code-detail.md\"></a></p>\n<p><img src=\"./06.png\" width=\"40\"> </p>\n"},{"prev":"./four-kinds-of-reference","next":"./soft-reference","_content":"\n# \n\n## \n\n::: tip \nOOMOutOfMemoryError\n:::\n\n## \n\n``<img src=\"./0009.png\" width=\"50\"/>\n\n```java\nString s = new String(\"Hello Frank!\");\n```\n\n::: tip \nGC Roots`strong reachable`\n:::\n\n[](../jvm/reachable.md)\n\n<img src=\"./0003.png\" width=\"50\"/>\n\nJVMGC\n\n::: tip \n\n:::\n\nnullOOM\n\n```java\ns = null;\n```\n\nJVMGC\n\nsObjectsobjectsobjectGCssnullobject<img src=\"./0013.png\" width=\"50\"/>\n\n\n\n```java\nA a = new A();\nB b = new B(a);\na = null;\n```\n\nab a = null  a  A A a = null A B[](../jvm/memory-leak.md)<img src=\"./8111.png\" width=\"50\"/>\n\n\n\n```java\npublic static ArrayList<Object> list = new ArrayList<Object>();\npublic void stackOverflowTest(Object object){\n    list.add(object);\n    object = null;\n}\n```\n\nGC\n\nlistnullobjectlist[](../jvm/memory-leak.md) \n\n## \n\n\n\n- \n- \n- \n- \n- OOM\n\n","source":"_posts/java/reference/strong-reference.md","raw":"---\nprev: ./four-kinds-of-reference\nnext: ./soft-reference\n---\n\n# \n\n## \n\n::: tip \nOOMOutOfMemoryError\n:::\n\n## \n\n``<img src=\"./0009.png\" width=\"50\"/>\n\n```java\nString s = new String(\"Hello Frank!\");\n```\n\n::: tip \nGC Roots`strong reachable`\n:::\n\n[](../jvm/reachable.md)\n\n<img src=\"./0003.png\" width=\"50\"/>\n\nJVMGC\n\n::: tip \n\n:::\n\nnullOOM\n\n```java\ns = null;\n```\n\nJVMGC\n\nsObjectsobjectsobjectGCssnullobject<img src=\"./0013.png\" width=\"50\"/>\n\n\n\n```java\nA a = new A();\nB b = new B(a);\na = null;\n```\n\nab a = null  a  A A a = null A B[](../jvm/memory-leak.md)<img src=\"./8111.png\" width=\"50\"/>\n\n\n\n```java\npublic static ArrayList<Object> list = new ArrayList<Object>();\npublic void stackOverflowTest(Object object){\n    list.add(object);\n    object = null;\n}\n```\n\nGC\n\nlistnullobjectlist[](../jvm/memory-leak.md) \n\n## \n\n\n\n- \n- \n- \n- \n- OOM\n\n","slug":"java/reference/strong-reference","published":1,"date":"2019-01-02T14:25:23.467Z","updated":"2019-01-02T14:25:23.468Z","_id":"cjq7rm5rn002vwu9krlo78nqx","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>OOMOutOfMemoryError<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><img src=\"./0009.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Hello Frank!\"</span>);</span><br></pre></td></tr></table></figure>\n<p>::: tip <br>GC Roots<code>strong reachable</code><br>:::</p>\n<p><a href=\"../jvm/reachable.md\"></a></p>\n<p><img src=\"./0003.png\" width=\"50\"></p>\n<p>JVMGC</p>\n<p>::: tip <br><br>:::</p>\n<p>nullOOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>JVMGC</p>\n<p>sObjectsobjectsobjectGCssnullobject<img src=\"./0013.png\" width=\"50\"></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A a = <span class=\"keyword\">new</span> A();</span><br><span class=\"line\">B b = <span class=\"keyword\">new</span> B(a);</span><br><span class=\"line\">a = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>ab a = null  a  A A a = null A B<a href=\"../jvm/memory-leak.md\"></a><img src=\"./8111.png\" width=\"50\"></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ArrayList&lt;Object&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;Object&gt;();</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">stackOverflowTest</span><span class=\"params\">(Object object)</span></span>&#123;</span><br><span class=\"line\">    list.add(object);</span><br><span class=\"line\">    object = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>GC</p>\n<p>listnullobjectlist<a href=\"../jvm/memory-leak.md\"></a> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>OOM</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>OOMOutOfMemoryError<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><img src=\"./0009.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Hello Frank!\"</span>);</span><br></pre></td></tr></table></figure>\n<p>::: tip <br>GC Roots<code>strong reachable</code><br>:::</p>\n<p><a href=\"../jvm/reachable.md\"></a></p>\n<p><img src=\"./0003.png\" width=\"50\"></p>\n<p>JVMGC</p>\n<p>::: tip <br><br>:::</p>\n<p>nullOOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>JVMGC</p>\n<p>sObjectsobjectsobjectGCssnullobject<img src=\"./0013.png\" width=\"50\"></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A a = <span class=\"keyword\">new</span> A();</span><br><span class=\"line\">B b = <span class=\"keyword\">new</span> B(a);</span><br><span class=\"line\">a = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>ab a = null  a  A A a = null A B<a href=\"../jvm/memory-leak.md\"></a><img src=\"./8111.png\" width=\"50\"></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ArrayList&lt;Object&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;Object&gt;();</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">stackOverflowTest</span><span class=\"params\">(Object object)</span></span>&#123;</span><br><span class=\"line\">    list.add(object);</span><br><span class=\"line\">    object = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>GC</p>\n<p>listnullobjectlist<a href=\"../jvm/memory-leak.md\"></a> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>OOM</li>\n</ul>\n"},{"prev":"./soft-reference","next":"./phantom-reference","_content":"\n# \n\n## \n\n::: tip \nWeakReferenceGC\n:::\n\n## \n\nGC<img src=\"./0040.png\" width=\"50\"/>\n\nFull GC\n\nWeakReference\n\n```java\nString s = new String(\"Frank\");    \nWeakReference<String> weakRef = new WeakReference<String>(s);\ns = null;\n```\n\nsnull\n\n::: tip \nGC Roots`(weakly reachable)`\n:::\n\n::: warning \nWeakReferencegetgetnullnullNullPointerException<img src=\"./0019.png\" width=\"50\"/>\n:::\n\ns\n\n```java\ns = weakRef.get();\n```\n\nweakRef\n\nWeakReference\n\n```java\npublic class WeakReferenceTest {\n    private static final List<Object> TEST_DATA = new LinkedList<>();\n    private static final ReferenceQueue<TestClass> QUEUE = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        TestClass obj = new TestClass(\"Test\");\n        WeakReference<TestClass> weakRef = new WeakReference<>(obj, QUEUE);\n        //OOMClass\n        //oomObj = weakRef.get();\n\n        // GC\n        new Thread(() -> {\n            while (true) {\n                TEST_DATA.add(new byte[1024 * 100]);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                    Thread.currentThread().interrupt();\n                }\n                System.out.println(weakRef.get());\n            }\n        }).start();\n\n        // \n        new Thread(() -> {\n            while (true) {\n                Reference<? extends TestClass> poll = QUEUE.poll();\n                if (poll != null) {\n                    System.out.println(\"--- jvm ---- \" + poll);\n                    System.out.println(\"---  ---- \" + poll.get());\n                }\n            }\n        }).start();\n\n        // TestClass\n        obj = null;\n\n        try {\n            Thread.currentThread().join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n            System.exit(1);\n        }\n    }\n\n    static class TestClass {\n        private String name;\n\n        public TestClass(String name) {\n            this.name = name;\n        }\n\n        @Override\n        public String toString() {\n            return \"TestClass - \" + name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1017K->464K(3584K), 0.0014345 secs]\n[GC (Allocation Failure)  1483K->536K(3584K), 0.0017221 secs]\n[GC (Allocation Failure)  1560K->648K(3584K), 0.0036572 secs]\nTestClass - Test\nTestClass - Test\nTestClass - Test\n[GC (Allocation Failure)  1621K->984K(3584K), 0.0011455 secs]\n--- jvm ---- java.lang.ref.WeakReference@51a947fe\n---  ---- null\nnull\n...nnullGC\n[Full GC (Ergonomics)  2964K->2964K(3584K), 0.0025450 secs]\n[Full GC (Allocation Failure)  2964K->2964K(3584K), 0.0021907 secs]\njava.lang.OutOfMemoryError: Java heap space\nDumping heap to java_pid6860.hprof ...\nHeap dump file created [3912229 bytes in 0.011 secs]\nException in thread \"Thread-0\" java.lang.OutOfMemoryError: Java heap space\n\tat weakhashmap.WeakReferenceTest.lambda$main$0(WeakReferenceTest.java:22)\n\tat weakhashmap.WeakReferenceTest$$Lambda$1/764977973.run(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\nGC\n\n## \n\n WeakReference  \n\nReferenceQueueJava\n\nWeakReferenceWeakHashMapWeakHashMapWeakReference\n\nTomcatWeakHashMap\n\n```java\npublic final class ConcurrentCache<K,V> {\n    private final int size;\n    private final Map<K,V> eden;\n    private final Map<K,V> longterm;\n\n    public ConcurrentCache(int size) {\n        this.size = size;\n        this.eden = new ConcurrentHashMap<>(size);\n        this.longterm = new WeakHashMap<>(size);\n    }\n\n    public V get(K k) {\n        // eden\n        V v = this.eden.get(k);\n        if (v == null) {\n            // longterm\n            synchronized (longterm) {\n                v = this.longterm.get(k);\n            }\n            // eden\n            if (v != null) {\n                this.eden.put(k, v);\n            }\n        }\n        return v;\n    }\n\n    public void put(K k, V v) {\n        if (this.eden.size() >= size) {\n            // edenlongterm\n            synchronized (longterm) {\n                this.longterm.putAll(this.eden);\n            }\n            this.eden.clear();\n        }\n        this.eden.put(k, v);\n    }\n}\n```\n\nedenlongtermmapjvmtomcatConcurrentHashMapWeakHashMap\n\nputedenedenlongtermedenlongtermeden\n\ngetedenkeylongtermeden \n\nedenlongtermlongtermkeygcheap\n\n## \n\n\n\n1. \n2. \n3. GCGC\n\n\n\nSoftReferenceWeakReference\n\nSoftReference\n\nWeakReference\n\nWeakHashMap<img src=\"./195.png\" width=\"50\"/>\n\n## \n\n+  \n+ \n+ \n+ \n\n\n\n\n\n\n\n\n\n","source":"_posts/java/reference/weak-reference.md","raw":"---\nprev: ./soft-reference\nnext: ./phantom-reference\n---\n\n# \n\n## \n\n::: tip \nWeakReferenceGC\n:::\n\n## \n\nGC<img src=\"./0040.png\" width=\"50\"/>\n\nFull GC\n\nWeakReference\n\n```java\nString s = new String(\"Frank\");    \nWeakReference<String> weakRef = new WeakReference<String>(s);\ns = null;\n```\n\nsnull\n\n::: tip \nGC Roots`(weakly reachable)`\n:::\n\n::: warning \nWeakReferencegetgetnullnullNullPointerException<img src=\"./0019.png\" width=\"50\"/>\n:::\n\ns\n\n```java\ns = weakRef.get();\n```\n\nweakRef\n\nWeakReference\n\n```java\npublic class WeakReferenceTest {\n    private static final List<Object> TEST_DATA = new LinkedList<>();\n    private static final ReferenceQueue<TestClass> QUEUE = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        TestClass obj = new TestClass(\"Test\");\n        WeakReference<TestClass> weakRef = new WeakReference<>(obj, QUEUE);\n        //OOMClass\n        //oomObj = weakRef.get();\n\n        // GC\n        new Thread(() -> {\n            while (true) {\n                TEST_DATA.add(new byte[1024 * 100]);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                    Thread.currentThread().interrupt();\n                }\n                System.out.println(weakRef.get());\n            }\n        }).start();\n\n        // \n        new Thread(() -> {\n            while (true) {\n                Reference<? extends TestClass> poll = QUEUE.poll();\n                if (poll != null) {\n                    System.out.println(\"--- jvm ---- \" + poll);\n                    System.out.println(\"---  ---- \" + poll.get());\n                }\n            }\n        }).start();\n\n        // TestClass\n        obj = null;\n\n        try {\n            Thread.currentThread().join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n            System.exit(1);\n        }\n    }\n\n    static class TestClass {\n        private String name;\n\n        public TestClass(String name) {\n            this.name = name;\n        }\n\n        @Override\n        public String toString() {\n            return \"TestClass - \" + name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1017K->464K(3584K), 0.0014345 secs]\n[GC (Allocation Failure)  1483K->536K(3584K), 0.0017221 secs]\n[GC (Allocation Failure)  1560K->648K(3584K), 0.0036572 secs]\nTestClass - Test\nTestClass - Test\nTestClass - Test\n[GC (Allocation Failure)  1621K->984K(3584K), 0.0011455 secs]\n--- jvm ---- java.lang.ref.WeakReference@51a947fe\n---  ---- null\nnull\n...nnullGC\n[Full GC (Ergonomics)  2964K->2964K(3584K), 0.0025450 secs]\n[Full GC (Allocation Failure)  2964K->2964K(3584K), 0.0021907 secs]\njava.lang.OutOfMemoryError: Java heap space\nDumping heap to java_pid6860.hprof ...\nHeap dump file created [3912229 bytes in 0.011 secs]\nException in thread \"Thread-0\" java.lang.OutOfMemoryError: Java heap space\n\tat weakhashmap.WeakReferenceTest.lambda$main$0(WeakReferenceTest.java:22)\n\tat weakhashmap.WeakReferenceTest$$Lambda$1/764977973.run(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\nGC\n\n## \n\n WeakReference  \n\nReferenceQueueJava\n\nWeakReferenceWeakHashMapWeakHashMapWeakReference\n\nTomcatWeakHashMap\n\n```java\npublic final class ConcurrentCache<K,V> {\n    private final int size;\n    private final Map<K,V> eden;\n    private final Map<K,V> longterm;\n\n    public ConcurrentCache(int size) {\n        this.size = size;\n        this.eden = new ConcurrentHashMap<>(size);\n        this.longterm = new WeakHashMap<>(size);\n    }\n\n    public V get(K k) {\n        // eden\n        V v = this.eden.get(k);\n        if (v == null) {\n            // longterm\n            synchronized (longterm) {\n                v = this.longterm.get(k);\n            }\n            // eden\n            if (v != null) {\n                this.eden.put(k, v);\n            }\n        }\n        return v;\n    }\n\n    public void put(K k, V v) {\n        if (this.eden.size() >= size) {\n            // edenlongterm\n            synchronized (longterm) {\n                this.longterm.putAll(this.eden);\n            }\n            this.eden.clear();\n        }\n        this.eden.put(k, v);\n    }\n}\n```\n\nedenlongtermmapjvmtomcatConcurrentHashMapWeakHashMap\n\nputedenedenlongtermedenlongtermeden\n\ngetedenkeylongtermeden \n\nedenlongtermlongtermkeygcheap\n\n## \n\n\n\n1. \n2. \n3. GCGC\n\n\n\nSoftReferenceWeakReference\n\nSoftReference\n\nWeakReference\n\nWeakHashMap<img src=\"./195.png\" width=\"50\"/>\n\n## \n\n+  \n+ \n+ \n+ \n\n\n\n\n\n\n\n\n\n","slug":"java/reference/weak-reference","published":1,"date":"2019-01-02T14:25:23.470Z","updated":"2019-01-02T14:25:23.471Z","_id":"cjq7rm5ro002wwu9klurjauep","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>WeakReferenceGC<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC<img src=\"./0040.png\" width=\"50\"></p>\n<p>Full GC</p>\n<p>WeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Frank\"</span>);    </span><br><span class=\"line\">WeakReference&lt;String&gt; weakRef = <span class=\"keyword\">new</span> WeakReference&lt;String&gt;(s);</span><br><span class=\"line\">s = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>snull</p>\n<p>::: tip <br>GC Roots<code>(weakly reachable)</code><br>:::</p>\n<p>::: warning <br>WeakReferencegetgetnullnullNullPointerException<img src=\"./0019.png\" width=\"50\"><br>:::</p>\n<p>s</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = weakRef.get();</span><br></pre></td></tr></table></figure>\n<p>weakRef</p>\n<p>WeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakReferenceTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> List&lt;Object&gt; TEST_DATA = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;TestClass&gt; QUEUE = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        TestClass obj = <span class=\"keyword\">new</span> TestClass(<span class=\"string\">\"Test\"</span>);</span><br><span class=\"line\">        WeakReference&lt;TestClass&gt; weakRef = <span class=\"keyword\">new</span> WeakReference&lt;&gt;(obj, QUEUE);</span><br><span class=\"line\">        <span class=\"comment\">//OOMClass</span></span><br><span class=\"line\">        <span class=\"comment\">//oomObj = weakRef.get();</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// GC</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                TEST_DATA.add(<span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>]);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(weakRef.get());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                Reference&lt;? extends TestClass&gt; poll = QUEUE.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (poll != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"--- jvm ---- \"</span> + poll);</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"---  ---- \"</span> + poll.get());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// TestClass</span></span><br><span class=\"line\">        obj = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.currentThread().join();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestClass</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TestClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"TestClass - \"</span> + name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1017K-&gt;464K(3584K), 0.0014345 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1483K-&gt;536K(3584K), 0.0017221 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1560K-&gt;648K(3584K), 0.0036572 secs]</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">[GC (Allocation Failure)  1621K-&gt;984K(3584K), 0.0011455 secs]</span><br><span class=\"line\">--- jvm ---- java.lang.ref.WeakReference@51a947fe</span><br><span class=\"line\">---  ---- null</span><br><span class=\"line\">null</span><br><span class=\"line\">...nnullGC</span><br><span class=\"line\">[Full GC (Ergonomics)  2964K-&gt;2964K(3584K), 0.0025450 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2964K-&gt;2964K(3584K), 0.0021907 secs]</span><br><span class=\"line\">java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">Dumping heap to java_pid6860.hprof ...</span><br><span class=\"line\">Heap dump file created [3912229 bytes <span class=\"keyword\">in</span> 0.011 secs]</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"Thread-0\"</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">\tat weakhashmap.WeakReferenceTest.lambda<span class=\"variable\">$main</span><span class=\"variable\">$0</span>(WeakReferenceTest.java:22)</span><br><span class=\"line\">\tat weakhashmap.WeakReferenceTest$<span class=\"variable\">$Lambda</span><span class=\"variable\">$1</span>/764977973.run(Unknown Source)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure>\n<p>GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> WeakReference  </p>\n<p>ReferenceQueueJava</p>\n<p>WeakReferenceWeakHashMapWeakHashMapWeakReference</p>\n<p>TomcatWeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcurrentCache</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; eden;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; longterm;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ConcurrentCache</span><span class=\"params\">(<span class=\"keyword\">int</span> size)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.size = size;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden = <span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(size);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.longterm = <span class=\"keyword\">new</span> WeakHashMap&lt;&gt;(size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(K k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// eden</span></span><br><span class=\"line\">        V v = <span class=\"keyword\">this</span>.eden.get(k);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// longterm</span></span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                v = <span class=\"keyword\">this</span>.longterm.get(k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// eden</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (v != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> v;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(K k, V v)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.eden.size() &gt;= size) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// edenlongterm</span></span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.longterm.putAll(<span class=\"keyword\">this</span>.eden);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.eden.clear();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>edenlongtermmapjvmtomcatConcurrentHashMapWeakHashMap</p>\n<p>putedenedenlongtermedenlongtermeden</p>\n<p>getedenkeylongtermeden </p>\n<p>edenlongtermlongtermkeygcheap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li></li>\n<li></li>\n<li>GCGC</li>\n</ol>\n<p></p>\n<p>SoftReferenceWeakReference</p>\n<p>SoftReference</p>\n<p>WeakReference</p>\n<p>WeakHashMap<img src=\"./195.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li> </li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip<br>WeakReferenceGC<br>:::</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC<img src=\"./0040.png\" width=\"50\"></p>\n<p>Full GC</p>\n<p>WeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Frank\"</span>);    </span><br><span class=\"line\">WeakReference&lt;String&gt; weakRef = <span class=\"keyword\">new</span> WeakReference&lt;String&gt;(s);</span><br><span class=\"line\">s = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>snull</p>\n<p>::: tip <br>GC Roots<code>(weakly reachable)</code><br>:::</p>\n<p>::: warning <br>WeakReferencegetgetnullnullNullPointerException<img src=\"./0019.png\" width=\"50\"><br>:::</p>\n<p>s</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = weakRef.get();</span><br></pre></td></tr></table></figure>\n<p>weakRef</p>\n<p>WeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakReferenceTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> List&lt;Object&gt; TEST_DATA = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;TestClass&gt; QUEUE = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        TestClass obj = <span class=\"keyword\">new</span> TestClass(<span class=\"string\">\"Test\"</span>);</span><br><span class=\"line\">        WeakReference&lt;TestClass&gt; weakRef = <span class=\"keyword\">new</span> WeakReference&lt;&gt;(obj, QUEUE);</span><br><span class=\"line\">        <span class=\"comment\">//OOMClass</span></span><br><span class=\"line\">        <span class=\"comment\">//oomObj = weakRef.get();</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// GC</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                TEST_DATA.add(<span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>]);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(weakRef.get());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                Reference&lt;? extends TestClass&gt; poll = QUEUE.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (poll != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"--- jvm ---- \"</span> + poll);</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"---  ---- \"</span> + poll.get());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// TestClass</span></span><br><span class=\"line\">        obj = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.currentThread().join();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestClass</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TestClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"TestClass - \"</span> + name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1017K-&gt;464K(3584K), 0.0014345 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1483K-&gt;536K(3584K), 0.0017221 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1560K-&gt;648K(3584K), 0.0036572 secs]</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">[GC (Allocation Failure)  1621K-&gt;984K(3584K), 0.0011455 secs]</span><br><span class=\"line\">--- jvm ---- java.lang.ref.WeakReference@51a947fe</span><br><span class=\"line\">---  ---- null</span><br><span class=\"line\">null</span><br><span class=\"line\">...nnullGC</span><br><span class=\"line\">[Full GC (Ergonomics)  2964K-&gt;2964K(3584K), 0.0025450 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2964K-&gt;2964K(3584K), 0.0021907 secs]</span><br><span class=\"line\">java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">Dumping heap to java_pid6860.hprof ...</span><br><span class=\"line\">Heap dump file created [3912229 bytes <span class=\"keyword\">in</span> 0.011 secs]</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"Thread-0\"</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">\tat weakhashmap.WeakReferenceTest.lambda<span class=\"variable\">$main</span><span class=\"variable\">$0</span>(WeakReferenceTest.java:22)</span><br><span class=\"line\">\tat weakhashmap.WeakReferenceTest$<span class=\"variable\">$Lambda</span><span class=\"variable\">$1</span>/764977973.run(Unknown Source)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure>\n<p>GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> WeakReference  </p>\n<p>ReferenceQueueJava</p>\n<p>WeakReferenceWeakHashMapWeakHashMapWeakReference</p>\n<p>TomcatWeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcurrentCache</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; eden;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; longterm;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ConcurrentCache</span><span class=\"params\">(<span class=\"keyword\">int</span> size)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.size = size;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden = <span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(size);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.longterm = <span class=\"keyword\">new</span> WeakHashMap&lt;&gt;(size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(K k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// eden</span></span><br><span class=\"line\">        V v = <span class=\"keyword\">this</span>.eden.get(k);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// longterm</span></span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                v = <span class=\"keyword\">this</span>.longterm.get(k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// eden</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (v != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> v;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(K k, V v)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.eden.size() &gt;= size) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// edenlongterm</span></span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.longterm.putAll(<span class=\"keyword\">this</span>.eden);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.eden.clear();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>edenlongtermmapjvmtomcatConcurrentHashMapWeakHashMap</p>\n<p>putedenedenlongtermedenlongtermeden</p>\n<p>getedenkeylongtermeden </p>\n<p>edenlongtermlongtermkeygcheap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li></li>\n<li></li>\n<li>GCGC</li>\n</ol>\n<p></p>\n<p>SoftReferenceWeakReference</p>\n<p>SoftReference</p>\n<p>WeakReference</p>\n<p>WeakHashMap<img src=\"./195.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li> </li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n"},{"title":"Java packageimport","date":"2018-12-28T16:03:00.000Z","_content":"\n>   -- \n\n## \n\nJava\n\nJavapackageimport\n\n\n\n## package\n\nSimpleCalculatorSimpleCalculator.java\n\n\n\n```java\npackage hello;\n```\n\nhello\n\n## package\n\npackage\n\npackage\n\npackageJava\n\n## package\n\n\n\npackage`.//..`indionempersprivteamcom\n\n\n\ncom.frank.hello.controllerfrankfrank.comhellocontroller\n\n\n\nok\n\n## package\n\n1. package\n2. package\n3. package\n4. package`.``package com.frank.hello;`comfrankcomhellofrank\n5. \n6. package,java(java.lang)\n\n## import\n\n`SimpleCalculator`\n\n```java\nimport java.util.Scanner;\n```\n\nimport\n\nimportjava\n\nJDKimportScannerSystemSystem\n\njava.langimportjava.lang\n\n\n\n`*`\n\n```java\nimport java.util.*\n```\n\n`java.util`\n\n`*``*`\n\npackageimport","source":"_posts/java/basic/java-package.md","raw":"---\ntitle: Java packageimport\ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-29 00:03:00\n---\n\n>   -- \n\n## \n\nJava\n\nJavapackageimport\n\n\n\n## package\n\nSimpleCalculatorSimpleCalculator.java\n\n\n\n```java\npackage hello;\n```\n\nhello\n\n## package\n\npackage\n\npackage\n\npackageJava\n\n## package\n\n\n\npackage`.//..`indionempersprivteamcom\n\n\n\ncom.frank.hello.controllerfrankfrank.comhellocontroller\n\n\n\nok\n\n## package\n\n1. package\n2. package\n3. package\n4. package`.``package com.frank.hello;`comfrankcomhellofrank\n5. \n6. package,java(java.lang)\n\n## import\n\n`SimpleCalculator`\n\n```java\nimport java.util.Scanner;\n```\n\nimport\n\nimportjava\n\nJDKimportScannerSystemSystem\n\njava.langimportjava.lang\n\n\n\n`*`\n\n```java\nimport java.util.*\n```\n\n`java.util`\n\n`*``*`\n\npackageimport","slug":"java/basic/java-package","published":1,"updated":"2019-01-02T14:25:23.238Z","_id":"cjq7ujnyj000eeg9k1wmsn4bc","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>   </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>Javapackageimport</p>\n<p></p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p>SimpleCalculatorSimpleCalculator.java</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br></pre></td></tr></table></figure>\n<p>hello</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p>package</p>\n<p>package</p>\n<p>packageJava</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p></p>\n<p>package<code>.//..</code>indionempersprivteamcom</p>\n<p></p>\n<p>com.frank.hello.controllerfrankfrank.comhellocontroller</p>\n<p></p>\n<p>ok</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><ol>\n<li>package</li>\n<li>package</li>\n<li>package</li>\n<li>package<code>.</code><code>package com.frank.hello;</code>comfrankcomhellofrank</li>\n<li></li>\n<li>package,java(java.lang)</li>\n</ol>\n<h2 id=\"import\"><a href=\"#import\" class=\"headerlink\" title=\"import\"></a>import</h2><p><code>SimpleCalculator</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br></pre></td></tr></table></figure>\n<p>import</p>\n<p>importjava</p>\n<p>JDKimportScannerSystemSystem</p>\n<p>java.langimportjava.lang</p>\n<p></p>\n<p><code>*</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.*</span><br></pre></td></tr></table></figure>\n<p><code>java.util</code></p>\n<p><code>*</code><code>*</code></p>\n<p>packageimport</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>   </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>Javapackageimport</p>\n<p></p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p>SimpleCalculatorSimpleCalculator.java</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br></pre></td></tr></table></figure>\n<p>hello</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p>package</p>\n<p>package</p>\n<p>packageJava</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p></p>\n<p>package<code>.//..</code>indionempersprivteamcom</p>\n<p></p>\n<p>com.frank.hello.controllerfrankfrank.comhellocontroller</p>\n<p></p>\n<p>ok</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><ol>\n<li>package</li>\n<li>package</li>\n<li>package</li>\n<li>package<code>.</code><code>package com.frank.hello;</code>comfrankcomhellofrank</li>\n<li></li>\n<li>package,java(java.lang)</li>\n</ol>\n<h2 id=\"import\"><a href=\"#import\" class=\"headerlink\" title=\"import\"></a>import</h2><p><code>SimpleCalculator</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br></pre></td></tr></table></figure>\n<p>import</p>\n<p>importjava</p>\n<p>JDKimportScannerSystemSystem</p>\n<p>java.langimportjava.lang</p>\n<p></p>\n<p><code>*</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.*</span><br></pre></td></tr></table></figure>\n<p><code>java.util</code></p>\n<p><code>*</code><code>*</code></p>\n<p>packageimport</p>\n"},{"title":"Java","date":"2019-01-02T00:00:00.000Z","_content":"\n## \n\n``\n\nJava\n\n****\n\n## \n\nJava\n\n\n\n1. JDK\n2. \n3. JVM\n4. Spring\n5. Dubbo\n6. \n7. \n8. Mysql\n9. Redis\n10. \n\nbug.jpg\n\n","source":"_posts/java/interview/daily-interview-test.md","raw":"---\ntitle: Java\ntags: \n - Java\n - \ncategories: \ndate: 2019-01-02 08:00:00\n---\n\n## \n\n``\n\nJava\n\n****\n\n## \n\nJava\n\n\n\n1. JDK\n2. \n3. JVM\n4. Spring\n5. Dubbo\n6. \n7. \n8. Mysql\n9. Redis\n10. \n\nbug.jpg\n\n","slug":"java/interview/daily-interview-test","published":1,"updated":"2019-01-02T14:25:23.258Z","_id":"cjqemrt470000y39kapbdi98h","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<p>Java</p>\n<p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p></p>\n<ol>\n<li>JDK</li>\n<li></li>\n<li>JVM</li>\n<li>Spring</li>\n<li>Dubbo</li>\n<li></li>\n<li></li>\n<li>Mysql</li>\n<li>Redis</li>\n<li></li>\n</ol>\n<p>bug.jpg</p>\n<p></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<p>Java</p>\n<p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p></p>\n<ol>\n<li>JDK</li>\n<li></li>\n<li>JVM</li>\n<li>Spring</li>\n<li>Dubbo</li>\n<li></li>\n<li></li>\n<li>Mysql</li>\n<li>Redis</li>\n<li></li>\n</ol>\n<p>bug.jpg</p>\n<p></p>\n"}],"PostAsset":[{"_id":"source/_posts/java/introduction/java-started/java-started-1.png","slug":"java-started-1.png","post":"cjq7rm5qx001ywu9k4mtml6ht","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/1-jdk-windows.png","slug":"1-jdk-windows.png","post":"cjq7rm5q7001lwu9k4tkaf5qu","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/7-jdk-windows.png","slug":"7-jdk-windows.png","post":"cjq7rm5q7001lwu9k4tkaf5qu","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/2-jdk-windows.png","slug":"2-jdk-windows.png","post":"cjq7rm5q7001lwu9k4tkaf5qu","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/3-jdk-windows.png","slug":"3-jdk-windows.png","post":"cjq7rm5q7001lwu9k4tkaf5qu","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/4-jdk-windows.png","slug":"4-jdk-windows.png","post":"cjq7rm5q7001lwu9k4tkaf5qu","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/5-jdk-windows.png","slug":"5-jdk-windows.png","post":"cjq7rm5q7001lwu9k4tkaf5qu","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/6-jdk-windows.png","slug":"6-jdk-windows.png","post":"cjq7rm5q7001lwu9k4tkaf5qu","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/8-jdk-windows.png","slug":"8-jdk-windows.png","post":"cjq7rm5q7001lwu9k4tkaf5qu","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/9-jdk-windows.png","slug":"9-jdk-windows.png","post":"cjq7rm5q7001lwu9k4tkaf5qu","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/3-jdk-mac.png","slug":"3-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/4-jdk-mac.png","slug":"4-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/5-jdk-mac.png","slug":"5-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/6-jdk-mac.png","slug":"6-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/7-jdk-mac.png","slug":"7-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/8-jdk-mac.png","slug":"8-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/9-jdk-mac.png","slug":"9-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/10-jdk-mac.png","slug":"10-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/11-jdk-mac.png","slug":"11-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/12-jdk-mac.png","slug":"12-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/13-jdk-mac.png","slug":"13-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/15-jdk-mac.png","slug":"15-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/14-jdk-mac.png","slug":"14-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/1-jdk-mac.png","slug":"1-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/16-jdk-mac.png","slug":"16-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/2-jdk-mac.png","slug":"2-jdk-mac.png","post":"cjq7rm5q9001mwu9k0gis50on","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-2.png","slug":"java-ide-2.png","post":"cjq7rm5qj001owu9kfjshu6n6","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-3.png","slug":"java-ide-3.png","post":"cjq7rm5qj001owu9kfjshu6n6","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-4.png","slug":"java-ide-4.png","post":"cjq7rm5qj001owu9kfjshu6n6","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-6.png","slug":"java-ide-6.png","post":"cjq7rm5qj001owu9kfjshu6n6","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-7.png","slug":"java-ide-7.png","post":"cjq7rm5qj001owu9kfjshu6n6","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-5.png","slug":"java-ide-5.png","post":"cjq7rm5qj001owu9kfjshu6n6","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-8.png","slug":"java-ide-8.png","post":"cjq7rm5qj001owu9kfjshu6n6","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-9.png","slug":"java-ide-9.png","post":"cjq7rm5qj001owu9kfjshu6n6","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-1.png","slug":"java-ide-1.png","post":"cjq7rm5qj001owu9kfjshu6n6","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-2.png","slug":"java-simple-example-2.png","post":"cjq7rm5qv001uwu9kq9zp27ef","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-3.png","slug":"java-simple-example-3.png","post":"cjq7rm5qv001uwu9kq9zp27ef","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-1.png","slug":"java-simple-example-1.png","post":"cjq7rm5qv001uwu9kq9zp27ef","modified":0,"renderable":0}],"PostCategory":[{"post_id":"cjq7rm5kj0002wu9kz30r3imr","category_id":"cjq7rm5ko0004wu9k3p01mvob","_id":"cjq7rm5kx0005wu9kryzahgyn"},{"post_id":"cjq7rm5nf000lwu9ky8vczfeb","category_id":"cjq7rm5nd000iwu9kpejg8xaf","_id":"cjq7rm5nk000qwu9k6imiu7ca"},{"post_id":"cjq7rm5na000gwu9kls1nhb94","category_id":"cjq7rm5nd000iwu9kpejg8xaf","_id":"cjq7rm5nl000twu9kvyb5wno6"},{"post_id":"cjq7rm5nc000hwu9kka9batrn","category_id":"cjq7rm5nd000iwu9kpejg8xaf","_id":"cjq7rm5nl000uwu9kl2uxx06i"},{"post_id":"cjq7rm5ne000kwu9kl9gfe3dh","category_id":"cjq7rm5nd000iwu9kpejg8xaf","_id":"cjq7rm5nn000xwu9ku7tj8417"},{"post_id":"cjq7rm5pi001cwu9kql8olmid","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7rm5pv001kwu9kn08pcyzd"},{"post_id":"cjq7rm5qj001owu9kfjshu6n6","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7rm5qu001twu9k928wd9pb"},{"post_id":"cjq7rm5qq001pwu9koyeuujma","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7rm5qw001vwu9kkbce8hvp"},{"post_id":"cjq7rm5qs001rwu9k8k2w6pfh","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7rm5qy001zwu9kj808swg6"},{"post_id":"cjq7rm5qv001uwu9kq9zp27ef","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7rm5r20026wu9k763qi22i"},{"post_id":"cjq7rm5qx001ywu9k4mtml6ht","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7rm5r40029wu9k086kpd58"},{"post_id":"cjq7rm5q9001nwu9k7t34u2tz","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7rt4r50002eg9k1javb71x"},{"post_id":"cjq7rm5q7001lwu9k4tkaf5qu","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7rzd9x0005eg9koo518hmh"},{"post_id":"cjq7rm5q9001mwu9k0gis50on","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7tbkq70007eg9kmhz9vmi0"},{"post_id":"cjq7ujnyj000eeg9k1wmsn4bc","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7ujnyl000heg9kkksjyib9"},{"post_id":"cjq7rm5ps001hwu9k02afcstq","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7we8b60003pw9ka93w20jz"},{"post_id":"cjq7rm5pq001gwu9k5ehnulqr","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7wjht80006pw9k8vuoc1pc"},{"post_id":"cjq7rm5pp001dwu9kiqywhhqh","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjq7wjhta0009pw9kpdkxfy3p"},{"post_id":"cjqemrt470000y39kapbdi98h","category_id":"cjq7rm5pq001ewu9k8jvdop1y","_id":"cjqemrt4z0002y39kkm8zfxt8"},{"post_id":"cjq7rm5r00021wu9ke0vbs3ft","category_id":"cjq7rm5nd000iwu9kpejg8xaf","_id":"cjqfeyhe60002rgvwvi31qczr"}],"PostTag":[{"post_id":"cjq7rm5na000gwu9kls1nhb94","tag_id":"cjq7rm5nd000jwu9kweybdxno","_id":"cjq7rm5nm000wwu9kw29uuqah"},{"post_id":"cjq7rm5na000gwu9kls1nhb94","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7rm5nn000ywu9kjikxggns"},{"post_id":"cjq7rm5na000gwu9kls1nhb94","tag_id":"cjq7rm5nk000swu9kljihz49f","_id":"cjq7rm5nn0010wu9kd7pjofs1"},{"post_id":"cjq7rm5nc000hwu9kka9batrn","tag_id":"cjq7rm5nd000jwu9kweybdxno","_id":"cjq7rm5o50013wu9kdzcw7g7r"},{"post_id":"cjq7rm5nc000hwu9kka9batrn","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7rm5o50014wu9k2e25u26x"},{"post_id":"cjq7rm5nc000hwu9kka9batrn","tag_id":"cjq7rm5nk000swu9kljihz49f","_id":"cjq7rm5o50016wu9kpqvdxcm0"},{"post_id":"cjq7rm5ne000kwu9kl9gfe3dh","tag_id":"cjq7rm5nd000jwu9kweybdxno","_id":"cjq7rm5o60017wu9k017t7co1"},{"post_id":"cjq7rm5nf000lwu9ky8vczfeb","tag_id":"cjq7rm5o50015wu9kx5h0h87t","_id":"cjq7rm5o60018wu9k4j2d5bgc"},{"post_id":"cjq7rm5pi001cwu9kql8olmid","tag_id":"cjq7rm5pq001fwu9kyibebbv9","_id":"cjq7rm5pu001jwu9k4i3t893d"},{"post_id":"cjq7rm5qj001owu9kfjshu6n6","tag_id":"cjq7rm5qs001qwu9kqfvh1gzp","_id":"cjq7rm5r20024wu9k02a05xcl"},{"post_id":"cjq7rm5qj001owu9kfjshu6n6","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7rm5r30027wu9khgvxj0kl"},{"post_id":"cjq7rm5qv001uwu9kq9zp27ef","tag_id":"cjq7rm5qs001qwu9kqfvh1gzp","_id":"cjq7rm5r4002awu9k6wnkgkty"},{"post_id":"cjq7rm5qv001uwu9kq9zp27ef","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7rm5r5002cwu9kkefo0is0"},{"post_id":"cjq7rm5qx001ywu9k4mtml6ht","tag_id":"cjq7rm5qs001qwu9kqfvh1gzp","_id":"cjq7rm5r6002ewu9kdmwk97l0"},{"post_id":"cjq7rm5qx001ywu9k4mtml6ht","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7rm5r9002gwu9k78w8w25j"},{"post_id":"cjq7rm5qq001pwu9koyeuujma","tag_id":"cjq7rm5qs001qwu9kqfvh1gzp","_id":"cjq7rm5rd002iwu9k6zcyj0gr"},{"post_id":"cjq7rm5qq001pwu9koyeuujma","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7rm5re002kwu9kxjhjlg5v"},{"post_id":"cjq7rm5qs001rwu9k8k2w6pfh","tag_id":"cjq7rm5qs001qwu9kqfvh1gzp","_id":"cjq7rm5rf002mwu9kl3cknpf4"},{"post_id":"cjq7rm5qs001rwu9k8k2w6pfh","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7rm5rg002owu9kod1f929o"},{"post_id":"cjq7rm5q9001nwu9k7t34u2tz","tag_id":"cjq7rm5qs001qwu9kqfvh1gzp","_id":"cjq7rt4r50000eg9kug6c4gwq"},{"post_id":"cjq7rm5q9001nwu9k7t34u2tz","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7rt4r50001eg9keh2012l6"},{"post_id":"cjq7rm5q7001lwu9k4tkaf5qu","tag_id":"cjq7rm5qs001qwu9kqfvh1gzp","_id":"cjq7rzd9x0003eg9kkhcydh38"},{"post_id":"cjq7rm5q7001lwu9k4tkaf5qu","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7rzd9x0004eg9ke1na93hs"},{"post_id":"cjq7rm5q9001mwu9k0gis50on","tag_id":"cjq7rm5qs001qwu9kqfvh1gzp","_id":"cjq7tbkq70008eg9ko93tvt14"},{"post_id":"cjq7rm5q9001mwu9k0gis50on","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7tbkq80009eg9kky6zt354"},{"post_id":"cjq7rm5q9001mwu9k0gis50on","tag_id":"cjq7tbkq70006eg9k6gqqupjv","_id":"cjq7tbkq8000aeg9kurly5a7w"},{"post_id":"cjq7rm5q7001lwu9k4tkaf5qu","tag_id":"cjq7tbkq70006eg9k6gqqupjv","_id":"cjq7tesus000beg9ki1az5xj1"},{"post_id":"cjq7rm5q9001nwu9k7t34u2tz","tag_id":"cjq7tbkq70006eg9k6gqqupjv","_id":"cjq7tez29000ceg9kn97j0pvn"},{"post_id":"cjq7rm5qj001owu9kfjshu6n6","tag_id":"cjq7tbkq70006eg9k6gqqupjv","_id":"cjq7tj8hq000deg9k2lyslkrh"},{"post_id":"cjq7ujnyj000eeg9k1wmsn4bc","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7ujnyk000geg9kou3zmezi"},{"post_id":"cjq7rm5pi001cwu9kql8olmid","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7v86h5000ieg9kabojh9zv"},{"post_id":"cjq7ujnyj000eeg9k1wmsn4bc","tag_id":"cjq7rm5pq001fwu9kyibebbv9","_id":"cjq7vz86c0000pw9kwwcewtxw"},{"post_id":"cjq7rm5ps001hwu9k02afcstq","tag_id":"cjq7rm5pq001fwu9kyibebbv9","_id":"cjq7we8b60001pw9kcpuvviis"},{"post_id":"cjq7rm5ps001hwu9k02afcstq","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7we8b60002pw9krsr2ztir"},{"post_id":"cjq7rm5pq001gwu9k5ehnulqr","tag_id":"cjq7rm5pq001fwu9kyibebbv9","_id":"cjq7wjht80004pw9km4dymlzb"},{"post_id":"cjq7rm5pq001gwu9k5ehnulqr","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7wjht80005pw9k4ibjhc9o"},{"post_id":"cjq7rm5pp001dwu9kiqywhhqh","tag_id":"cjq7rm5pq001fwu9kyibebbv9","_id":"cjq7wjhta0007pw9k5ayuryp5"},{"post_id":"cjq7rm5pp001dwu9kiqywhhqh","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjq7wjhta0008pw9k4hya678f"},{"post_id":"cjqemrt470000y39kapbdi98h","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjqemrt500003y39kv2cin1tw"},{"post_id":"cjqemrt470000y39kapbdi98h","tag_id":"cjqemrt4u0001y39kropqp4qx","_id":"cjqemrt500004y39k38jauqmi"},{"post_id":"cjq7rm5r00021wu9ke0vbs3ft","tag_id":"cjq7rm5nd000jwu9kweybdxno","_id":"cjqfeyhe50000rgvw13ot8itc"},{"post_id":"cjq7rm5r00021wu9ke0vbs3ft","tag_id":"cjq7rm5ng000owu9kcxq7m9uy","_id":"cjqfeyhe60001rgvw0em8llmk"},{"post_id":"cjq7rm5r00021wu9ke0vbs3ft","tag_id":"cjq7rm5nk000swu9kljihz49f","_id":"cjqfeyhe60003rgvwia45v865"}],"Tag":[{"name":"","_id":"cjq7rm5nd000jwu9kweybdxno"},{"name":"Java","_id":"cjq7rm5ng000owu9kcxq7m9uy"},{"name":"","_id":"cjq7rm5nk000swu9kljihz49f"},{"name":"","_id":"cjq7rm5o50015wu9kx5h0h87t"},{"name":"Java","_id":"cjq7rm5pq001fwu9kyibebbv9"},{"name":"Java","_id":"cjq7rm5qs001qwu9kqfvh1gzp"},{"name":"","_id":"cjq7tbkq70006eg9k6gqqupjv"},{"name":"","_id":"cjqemrt4u0001y39kropqp4qx"}]}}