<<<<<<< HEAD
{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/0001.png","path":"images/0001.png","modified":0,"renderable":0},{"_id":"source/images/0002.png","path":"images/0002.png","modified":0,"renderable":0},{"_id":"source/images/0005.png","path":"images/0005.png","modified":0,"renderable":0},{"_id":"source/images/0003.png","path":"images/0003.png","modified":0,"renderable":0},{"_id":"source/images/0009.png","path":"images/0009.png","modified":0,"renderable":0},{"_id":"source/images/0012.png","path":"images/0012.png","modified":0,"renderable":0},{"_id":"source/images/0013.png","path":"images/0013.png","modified":0,"renderable":0},{"_id":"source/images/0040.png","path":"images/0040.png","modified":0,"renderable":0},{"_id":"source/images/0019.png","path":"images/0019.png","modified":0,"renderable":0},{"_id":"source/images/0046.png","path":"images/0046.png","modified":0,"renderable":0},{"_id":"source/images/06.png","path":"images/06.png","modified":0,"renderable":0},{"_id":"source/images/0190.png","path":"images/0190.png","modified":0,"renderable":0},{"_id":"source/images/105.png","path":"images/105.png","modified":0,"renderable":0},{"_id":"source/images/148.png","path":"images/148.png","modified":0,"renderable":0},{"_id":"source/images/141.png","path":"images/141.png","modified":0,"renderable":0},{"_id":"source/images/195.png","path":"images/195.png","modified":0,"renderable":0},{"_id":"source/images/2030.png","path":"images/2030.png","modified":0,"renderable":0},{"_id":"source/images/94.png","path":"images/94.png","modified":0,"renderable":0},{"_id":"source/images/8111.png","path":"images/8111.png","modified":0,"renderable":0},{"_id":"source/images/black_smile.png","path":"images/black_smile.png","modified":0,"renderable":0},{"_id":"source/images/black_smile-2.png","path":"images/black_smile-2.png","modified":0,"renderable":0},{"_id":"themes/indigos/source/css/style.less","path":"css/style.less","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/favicon.ico","path":"img/favicon.ico","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/cc.png","path":"img/cc.png","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/avatar.jpg","path":"img/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/img-loading.png","path":"img/img-loading.png","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/brand.jpg","path":"img/brand.jpg","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/img-err.png","path":"img/img-err.png","modified":0,"renderable":1},{"_id":"themes/indigos/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/indigos/source/js/main.min.js","path":"js/main.min.js","modified":0,"renderable":1},{"_id":"themes/indigos/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"themes/indigos/source/js/search.min.js","path":"js/search.min.js","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/alipay.jpg","path":"img/alipay.jpg","modified":0,"renderable":1},{"_id":"themes/indigos/source/img/wechat.jpg","path":"img/wechat.jpg","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.eot","path":"css/fonts/roboto/Roboto-Bold.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.woff","path":"css/fonts/roboto/Roboto-Bold.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.woff2","path":"css/fonts/roboto/Roboto-Bold.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.eot","path":"css/fonts/roboto/Roboto-Light.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.woff2","path":"css/fonts/roboto/Roboto-Light.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.eot","path":"css/fonts/roboto/Roboto-Medium.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.woff2","path":"css/fonts/roboto/Roboto-Medium.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.eot","path":"css/fonts/roboto/Roboto-Regular.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.woff","path":"css/fonts/roboto/Roboto-Light.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.woff","path":"css/fonts/roboto/Roboto-Medium.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.woff2","path":"css/fonts/roboto/Roboto-Regular.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.eot","path":"css/fonts/roboto/Roboto-Thin.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.woff2","path":"css/fonts/roboto/Roboto-Thin.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.woff","path":"css/fonts/roboto/Roboto-Regular.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.woff","path":"css/fonts/roboto/Roboto-Thin.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.woff","path":"css/fonts/fontawesome/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.woff2","path":"css/fonts/fontawesome/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.ttf","path":"css/fonts/roboto/Roboto-Light.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.ttf","path":"css/fonts/roboto/Roboto-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.ttf","path":"css/fonts/roboto/Roboto-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.ttf","path":"css/fonts/roboto/Roboto-Medium.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/FontAwesome.otf","path":"css/fonts/fontawesome/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.ttf","path":"css/fonts/fontawesome/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.ttf","path":"css/fonts/roboto/Roboto-Thin.ttf","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.eot","path":"css/fonts/fontawesome/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.svg","path":"css/fonts/fontawesome/fontawesome-webfont.svg","modified":0,"renderable":1}],"Cache":[{"_id":"themes/indigos/.editorconfig","hash":"9b0445427777519defe360ea38c61729d847b3d3","modified":1559611797645},{"_id":"themes/indigos/package.json","hash":"c795e3100ae3655bfa8b39adcca7333a7925b47f","modified":1559611797660},{"_id":"source/_data/menu.yml","hash":"c37664eeeb90a1a1d6042e423ccae431fe040164","modified":1559611797092},{"_id":"themes/indigos/_config.yml","hash":"20fc84d1de1ee68dde2a944de132749e71178540","modified":1559611797645},{"_id":"themes/indigos/README.md","hash":"4bf26d9b43bf24b8e0a1a0d058437a347972f5e6","modified":1559611797645},{"_id":"source/images/0001.png","hash":"5646e88cc49bea8fb2744a8a131c94b2b55b266f","modified":1546533806575},{"_id":"themes/indigos/LICENSE","hash":"24944bf7920108f5a4790e6071c32e9102760c37","modified":1559611797645},{"_id":"source/images/0002.png","hash":"54f015dd14356d46b4a5eb4c42bb0b296f3c2b68","modified":1546533806575},{"_id":"source/images/0005.png","hash":"fcfdff32f6d724be3c3d12e709f9f3a460a3e274","modified":1546533806575},{"_id":"source/images/0003.png","hash":"7efe69ed1c19533b6bc5b6cb7cb7356303702513","modified":1546533806575},{"_id":"source/images/0009.png","hash":"785e1957c7aea321a1933bbaf37a7e7b834212e6","modified":1546533806575},{"_id":"source/images/0012.png","hash":"15a7c4e801630c8a3f6bb67d0fd18e69eb8eacc7","modified":1546533806575},{"_id":"source/images/0013.png","hash":"7b5bda6e7d94dbeacef12ef060e5e0d8e2fa4d32","modified":1546533806575},{"_id":"source/images/0040.png","hash":"3a4142e60fcb16d71ee8f2eb5e4de31091d2676f","modified":1546533806575},{"_id":"source/images/0019.png","hash":"013380c072a2fe829f2e10dbee5a76554ff20509","modified":1546533806575},{"_id":"source/images/0046.png","hash":"e07f0c042e640e7cd71e132f7f48d6360f09e3ca","modified":1546533806575},{"_id":"source/images/06.png","hash":"54707910862fdf7b148c90e36fa832f10c0d22fb","modified":1546533806575},{"_id":"source/images/0190.png","hash":"c5929d6f6445ef0d9aa017a313d10dff0e6fa553","modified":1546533806575},{"_id":"source/images/105.png","hash":"be0006708b897b95df1253186474048473bb8bbe","modified":1546533806575},{"_id":"source/images/148.png","hash":"5533113be8fff9946f3ebca68666478732c18203","modified":1546533806582},{"_id":"source/images/141.png","hash":"accf4d56385ac11f9ae611c005ee807214bfc1af","modified":1546533806575},{"_id":"source/images/195.png","hash":"240ea388434d019a8cddf1df5f986ec1877bda14","modified":1546533806581},{"_id":"source/images/2030.png","hash":"01e87e34ca69f7d33403860a9d59d0ac809162eb","modified":1546533806834},{"_id":"source/images/94.png","hash":"5da31bf5172d88b611f6c4706effecb82420ea47","modified":1546533806575},{"_id":"source/images/8111.png","hash":"3ee2a0a45a1121730ece4ce28b1f5208063e4c8a","modified":1546533806575},{"_id":"source/images/black_smile.png","hash":"10b24e9659ecc8748fe100c8e97a19dd47e7777b","modified":1546880442646},{"_id":"source/categories/index.md","hash":"1f6f9db5cf4cba5be4d91278021eb9873b80d376","modified":1559611797638},{"_id":"source/tags/index.md","hash":"7c33368714c02998c88ee12fd0c129599c478fa5","modified":1559611797644},{"_id":"themes/indigos/layout/category.ejs","hash":"7ea26a8a935886963eda82f41c7bd5270cf780d9","modified":1559611797659},{"_id":"themes/indigos/layout/index.ejs","hash":"39477807b98b2d2df78f3b82498a11e90be8222c","modified":1559611797659},{"_id":"themes/indigos/layout/layout.ejs","hash":"d52f43fa9572d70cae834e4887c8897b43744805","modified":1559611797659},{"_id":"source/images/black_smile-2.png","hash":"52f607e15843e2dc2a3ccde055811646bdc75e2f","modified":1546880442644},{"_id":"themes/indigos/layout/post.ejs","hash":"afbf8532dc8d148ca4dff2ca127a3382907cf2f5","modified":1559611797660},{"_id":"themes/indigos/layout/tag.ejs","hash":"36786a3de7f6cad58209603f7d84ba23addea174","modified":1559611797660},{"_id":"themes/indigos/layout/categories.ejs","hash":"41783d2069d5080566a99e6312aa2113105f8b41","modified":1559611797658},{"_id":"themes/indigos/scripts/plugins.js","hash":"e439d717513616bedeed37ba9b05117470809b21","modified":1559611797660},{"_id":"themes/indigos/languages/en.yml","hash":"1957d2bfc3a4cef299f4f169b431e9b1128ba162","modified":1559611797646},{"_id":"themes/indigos/languages/ja.yml","hash":"74fd480874bf5e773ba7f9d2a94697cda979091f","modified":1559611797646},{"_id":"themes/indigos/languages/nl-NL","hash":"9085c04491f93066f2369911cc2175b59ae596ad","modified":1559611797646},{"_id":"themes/indigos/languages/zh-CN.yml","hash":"7dc6ae434dde390b6768d244132e23cc78c33817","modified":1559611797646},{"_id":"themes/indigos/languages/zh-TW.yml","hash":"6a9e820be66eb12ae746f2527e0dc1adf927c685","modified":1559611797647},{"_id":"themes/indigos/layout/tags.ejs","hash":"20466446c41409d14a3d42ccaec24a65a045efef","modified":1559611797660},{"_id":"themes/indigos/layout/page.ejs","hash":"afb98face24d39a21ebbbde6592a9afc98572aa4","modified":1559611797659},{"_id":"themes/indigos/layout/archive.ejs","hash":"d039719e21f6a6fa2925b00aaa623a180a78c818","modified":1559611797658},{"_id":"source/_posts/guide/8100.png","hash":"4b620036807df794bb9b8ffed9006704bfbfbbe3","modified":1546439123188},{"_id":"source/_posts/guide/background-skill.md","hash":"dae63e353bf1e3fce1b19380a3a505335c76a33b","modified":1559611797094},{"_id":"source/_posts/guide/8101.png","hash":"985f8790a13d24c512910d43eec74b4fd27a0b29","modified":1546439123188},{"_id":"source/_posts/java/README.md","hash":"e2d55e9c5228873f5a160c3538eb75661a05e800","modified":1559611797094},{"_id":"source/_posts/leetcode/day1-two-sum.md","hash":"3866438a69877182bcb9a56a63a5de60e9ab8f1b","modified":1559611797428},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters.md","hash":"62f12547aaab54dcf123116d8153c4f636663ae2","modified":1559611797433},{"_id":"source/_posts/leetcode/complete-knapsack-problem.md","hash":"2ddafe64526c434c894f87ad686bfed261e51365","modified":1559611797423},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem.md","hash":"db605e52222bf8778710967c5e9e396583b7b203","modified":1559611797465},{"_id":"source/_posts/leetcode/day2-add-two-numbers.md","hash":"06ba569efabb399c84182a5eef332ee86a38e2f8","modified":1559611797430},{"_id":"source/_posts/leetcode/leetcode-solo-rank-begin.md","hash":"21a3df500df6300374c1285f060504861c435785","modified":1559611797493},{"_id":"source/_posts/leetcode/multi-knapsack-problem-md.md","hash":"3b665ab46beb6ffa456cd74426b1aecf9c7ffb0e","modified":1559611797493},{"_id":"source/_posts/mysql/mysql-index-introduction.md","hash":"6c4c0d81656aa6809ceecc7f436d84775f903124","modified":1562892719674},{"_id":"source/_posts/leetcode/knapsack-problem-conclusion-md.md","hash":"00bfa02e6140c5831cad7a1be26b4693101ba642","modified":1559611797483},{"_id":"source/_posts/rabbitmq/rabbitmq-how-to-use-dead-letter-queue.md","hash":"3ee32db39964a6e15cf0477646cdc081504f2edb","modified":1562892890853},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem-optimization.md","hash":"00fe177991a1fc9cb4e8a1fa9d42bb8f61d75b2d","modified":1559611797465},{"_id":"source/_posts/reading/java-multithread-programming-guide-in-action-notes.md","hash":"4477b8cf7ded062154ce4741398e369a88461be6","modified":1559611797498},{"_id":"source/_posts/reading/reading-notes.md","hash":"55134d871250639ab3c3d567fb5c57e4d7ce406a","modified":1559611797498},{"_id":"source/_posts/ops/deploy-vuepress-on-centos7.md","hash":"5f392099452f97ee01e91b0df90019385888aca4","modified":1559611797497},{"_id":"source/_posts/reading/the-power-of-habit-digest.md","hash":"d0825c3ecfda83060fbf130215344ab6f964c95a","modified":1559611797588},{"_id":"source/_posts/reading/the-power-of-habit.md","hash":"ac0ea18e07512bc399c19e44b89daaef7d4b9a60","modified":1559611797588},{"_id":"source/_posts/reading/the-art-of-java-multithread-notes.md","hash":"19f09ae18ee064e3567bc2fd6a386ef6cda01411","modified":1559611797499},{"_id":"source/_posts/leetcode/day4-regular-expression-matching.md","hash":"5500948794afa7379235fa6c63b7fe0dbc23ad6f","modified":1559611797438},{"_id":"source/_posts/shell/shell-gotossh.md","hash":"4248f0f6f2dbc6012c3a0b46d91b67a06a517f56","modified":1559611797638},{"_id":"themes/indigos/layout/_partial/archive.ejs","hash":"55cd81ef9183426d6d99fd91550fce0a9cc92aa0","modified":1559611797647},{"_id":"themes/indigos/layout/_partial/after-footer.ejs","hash":"9ac30b9439fab69973cf4722dbf2945a18fd3804","modified":1559611797647},{"_id":"themes/indigos/layout/_partial/footer.ejs","hash":"fdfc37e2a63fec8a258c6ec7059b7f103bd15c3b","modified":1559611797648},{"_id":"themes/indigos/layout/_partial/head.ejs","hash":"02a95a88774cc50dbcc32242b6c8ac7e9d9028bb","modified":1559611797648},{"_id":"source/_posts/shell/gotossh-update.md","hash":"c4dde87c3813fbbb207f201709dc06dc98b3e89a","modified":1559611797588},{"_id":"themes/indigos/layout/_partial/loading.ejs","hash":"bc4cb19b20de55a0332647f4dca9684184383685","modified":1559611797648},{"_id":"themes/indigos/layout/_partial/index-item.ejs","hash":"ec7b3ec79bbbead9c7e43e2e6c6b5c8bef509410","modified":1559611797648},{"_id":"themes/indigos/layout/_partial/paginator.ejs","hash":"dc27242927890f130a64400596b9b7ad5fca8972","modified":1559611797649},{"_id":"themes/indigos/layout/_partial/header.ejs","hash":"6156bf20791e46fc1c5872113276c1c1f5c13773","modified":1559611797648},{"_id":"themes/indigos/layout/_partial/menu.ejs","hash":"d39afaad6b0dd2a3ae27e6db3e9a6cd6014622fa","modified":1559611797649},{"_id":"themes/indigos/layout/_partial/post.ejs","hash":"a87d9b0485b3bf4cdfdad890e5974c43dbaa8240","modified":1559611797653},{"_id":"themes/indigos/layout/_partial/search.ejs","hash":"c2091c621b5480ef1e69d72027028cec8e929892","modified":1559611797658},{"_id":"themes/indigos/layout/_partial/script.ejs","hash":"439d6315a1b16e32b77a68c3f0cb2961d581086a","modified":1559611797657},{"_id":"themes/indigos/layout/_partial/tags-bar.ejs","hash":"19eff4876d31080a427644f7a43fe172d0c008c6","modified":1559611797658},{"_id":"themes/indigos/source/css/style.less","hash":"f22d4146e0bdb4485d33f20080c67ba05724afea","modified":1559611797706},{"_id":"source/_posts/shell/gotossh-v3-md.md","hash":"6258b70b05e5fc57282b1cae0145cf0179fbae01","modified":1559611797612},{"_id":"themes/indigos/source/img/favicon.ico","hash":"c88cd0044daea8f5b87913d71c4ade2aa31387c9","modified":1546439123693},{"_id":"themes/indigos/source/img/cc.png","hash":"ebce75a62b40976a72d43f0bd937d859ac24d87c","modified":1546439123692},{"_id":"source/_posts/reading/java-multithread-programming-guide-in-action-digest.md","hash":"e74faadfa23f2942243eefa607c93e0cff8f3e58","modified":1559611797498},{"_id":"themes/indigos/source/img/avatar.jpg","hash":"96f2506c587325147a383aad3ada8d5993e6cdf8","modified":1546439123688},{"_id":"themes/indigos/source/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1546439123698},{"_id":"themes/indigos/source/img/brand.jpg","hash":"0e237f1b433851c156e1f1cdaeb044054b3b9879","modified":1546439123691},{"_id":"themes/indigos/source/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1546439123694},{"_id":"themes/indigos/source/js/main.js","hash":"300b2e963683ced162e28afcd24ffc970fc23ac2","modified":1559611797715},{"_id":"themes/indigos/source/js/main.min.js","hash":"8acf4480f8ab859423b8926b9b790c67b5a77276","modified":1559611797716},{"_id":"themes/indigos/source/js/search.js","hash":"a1de7e7a2ef8330ebcd9f3a7a4622b3bac44e4f3","modified":1559611797716},{"_id":"themes/indigos/source/js/search.min.js","hash":"a8a450bb8b1ca9ad577052addcbd3393f1af6c6a","modified":1546439123708},{"_id":"source/_posts/java/basic/java-data-type.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1546439123238},{"_id":"source/_posts/java/basic/java-operator.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1546439123238},{"_id":"source/_posts/architecture/domain-driven-design/ddd-outline.md","hash":"7da1876f738322838c3f95b119828ed1b21079eb","modified":1559611797093},{"_id":"source/_posts/architecture/domain-driven-design/ddd-steps.md","hash":"50654b4fbb80b2ea369bfa9d4e903621a170dbeb","modified":1559611797093},{"_id":"source/_posts/architecture/domain-driven-design/ddd-recommendation.md","hash":"da1b3d5ae5bb7c1be2de8a067ea8cfaa4562e3a3","modified":1559611797093},{"_id":"source/_posts/java/basic/java-basic.md","hash":"1e5c2b03a04d2843a42a6335fccbe79e32cf3473","modified":1559611797095},{"_id":"source/_posts/java/basic/java-package.md","hash":"3324f94142b709b1b74818930ddfad59646ff15a","modified":1559611797096},{"_id":"source/_posts/java/interview/daily-interview-test.md","hash":"686d8aaededd88b771bb9910e0fa06d46a20c2c0","modified":1559611797099},{"_id":"source/_posts/java/basic/java-simple-structure.md","hash":"e36fb62d8e0cda4b325fe487f518d1101cd282a0","modified":1559611797096},{"_id":"source/_posts/java/basic/java-variable.md","hash":"6196dc65d49ff5b6dd20a3a0f8613cfc978ff5a1","modified":1559611797096},{"_id":"source/_posts/java/basic/java-class.md","hash":"a735f4b9ced30e415619d209d0950fd7c7949e77","modified":1559611797095},{"_id":"source/_posts/java/introduction/java-environment.md","hash":"6e932b774009610cf336ffa5744fbdafb65b9bce","modified":1559611797318},{"_id":"source/_posts/java/introduction/java-environment-mac.md","hash":"2c7fad0283048ef1627f6a85d4b5ace5b73f8585","modified":1559611797294},{"_id":"source/_posts/java/introduction/java-introduction.md","hash":"0a142154036dc85f8a70c54b34a71b2494f0195f","modified":1559611797327},{"_id":"source/_posts/java/introduction/java-primer-conclusion.md","hash":"276caac4416bf9414cf491f84e6a3cf8a83734eb","modified":1559611797327},{"_id":"source/_posts/java/collection/weakhashmap-code-detail.md","hash":"5878ba8564f632288cf018d60ee76e22aa447a7a","modified":1559611797097},{"_id":"source/_posts/java/introduction/java-ide.md","hash":"0c06108d608d86b70d1d7c1e8cf3bacd3baf9b18","modified":1559611797319},{"_id":"source/_posts/java/jvm/garbage-collection.md","hash":"4d2f542bdbf044a2d59d86457d61e5f09fdaaa32","modified":1559611797336},{"_id":"source/_posts/java/jvm/memory-leak.md","hash":"6fb774e8e5aee9bcd545a866948867b6e0be1695","modified":1559611797337},{"_id":"source/_posts/java/jvm/object-self-rescue.md","hash":"47812570e1ecde6fb6447bbcdd40aa2d577f071d","modified":1559611797337},{"_id":"source/_posts/java/jvm/reachable-in-hotspot.md","hash":"00f2fe0b86225e7c2998e3dffb09ba09855df5a2","modified":1559611797337},{"_id":"source/_posts/java/introduction/java-simple-example.md","hash":"91a099885918d748403220b8dcc5f1cc010132ac","modified":1559611797328},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays.md","hash":"17de2d0d8373c0e9a3a5e1b8c1e771d9f10e77ff","modified":1559611797373},{"_id":"source/_posts/java/multithread/multithread-start.md","hash":"198afee17da18d451280b205642ce59d4b0d2dd5","modified":1559611797371},{"_id":"source/_posts/java/jvm/reachable.md","hash":"93b7a49fabc7b4c391eff46e5873699a767483a8","modified":1559611797338},{"_id":"source/_posts/java/reference/final-reference-code-detail.md","hash":"ce8382e86d0788cd23ce2cdac234961d96b3e7f7","modified":1559611797399},{"_id":"source/_posts/java/reference/phantom-reference-code-detail.md","hash":"7d24f9c8efc98fcd45176fde5526e9fbaebfe4dc","modified":1559611797400},{"_id":"source/_posts/java/reference/phantom-reference.md","hash":"238ca98097335009235ad7ba83e7ab742e66bcdf","modified":1559611797400},{"_id":"source/_posts/java/introduction/java-environment-windows.md","hash":"a1398036bf6d0fd3ea3ec401a9ee4b39df7ae061","modified":1559611797315},{"_id":"source/_posts/java/reference/four-kinds-of-reference.md","hash":"d5eb26090aa2c12f3575be7dec5873b86fb4907f","modified":1559611797400},{"_id":"source/_posts/java/reference/reference-code-detail.md","hash":"03a126a8b599927445cc878a540c0bfcae3d7cff","modified":1559611797401},{"_id":"source/_posts/java/introduction/java-started.md","hash":"912d59244794ad3e358d04f6fd784db9ac2e2b81","modified":1559611797329},{"_id":"source/_posts/java/reference/soft-reference.md","hash":"ac99c38c477b043823e220da5c6fda481461d37d","modified":1559611797413},{"_id":"source/_posts/java/reference/strong-reference.md","hash":"42d92a1a8a810d83d076f5fb3c8b65fea859bc53","modified":1559611797414},{"_id":"source/_posts/java/reference/soft-reference-code-detail.md","hash":"d8f3d3b9abadddac3fba6e9f64e3593955175397","modified":1559611797411},{"_id":"source/_posts/java/reference/weak-reference-code-detail.md","hash":"18ebee184f9f3e48018c59a2db529b5f9f4e5200","modified":1559611797414},{"_id":"source/_posts/java/reference/reference-summary.md","hash":"2e3b65c918c34da1e7586a3bd01666f74a83a53f","modified":1559611797410},{"_id":"source/_posts/java/reference/reference-queue-code-detail.md","hash":"6b123862bfb0dabe24c9312b215f4c1dc6e32ab5","modified":1559611797403},{"_id":"source/_posts/leetcode/complete-knapsack-problem/CodeCogsEqn.png","hash":"b7919c258abf6c3629ec728a1f69bc53033682f7","modified":1562165633893},{"_id":"source/_posts/java/reference/weak-reference.md","hash":"3e921493c41966279913504e492d948530e3c997","modified":1559611797415},{"_id":"source/_posts/leetcode/day1-two-sum/exhaust-algorithm.png","hash":"3b8efaf057ad53ea51a96b0616b7f8bfd22816e1","modified":1546615533107},{"_id":"source/_posts/leetcode/day2-add-two-numbers/solution-1.png","hash":"c37a7a043dd0d2a2f62500fea8a7aca36e50819d","modified":1546880442631},{"_id":"source/_posts/leetcode/day1-two-sum/map-solution.png","hash":"b0783ee61fce6885811395c35d0ae4e80285f8c7","modified":1546620270619},{"_id":"source/_posts/leetcode/day2-add-two-numbers/result-5.png","hash":"a06576a002b1e3f3c6faf5e5b208f1e56ffdcb9d","modified":1546880442630},{"_id":"source/_posts/leetcode/day2-add-two-numbers/solution-3.png","hash":"a0cf02fd5abd984375fe184ad4769bee0535795d","modified":1546880442635},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-1.png","hash":"559e538203bb5ba394a1847d18d1bc4096e192a0","modified":1550500555644},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-4.png","hash":"d3ba153a5016766a8bb7b48f620682d15a4eec28","modified":1550500555654},{"_id":"source/_posts/leetcode/day2-add-two-numbers/solution-2.png","hash":"8323b2f344c772a29efd3e14956843e208985fd7","modified":1546880442634},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-3.png","hash":"1a0d033b1a81da9609492f7cf7401bb16b29823f","modified":1550500555650},{"_id":"source/_posts/leetcode/day2-add-two-numbers/solution-4.png","hash":"d7138b9fd24239f3dd038290025303cb708f030b","modified":1546880442638},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-6.png","hash":"db7d2f6c169ac060351d7eb3bff1d4a948e0858d","modified":1550500555665},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-8.png","hash":"3abc7aa2193431ac85ff49e4498219f89fa93529","modified":1550500555676},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-submit-2.png","hash":"19fc70d759acd618de78e8815bb0050b9a5cc741","modified":1550500555685},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-5.png","hash":"02dfd8cc12f9897c0aae5476dc538289fdc3201c","modified":1550500555661},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-submit-1.png","hash":"3ed8a1e50b491c67d72b22d5d68bbb8f9e632b3e","modified":1550500555682},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-2.png","hash":"a6de0d88dd139c1b00005c70c25921a5de1e5874","modified":1550500555647},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/result1.png","hash":"96a80b94fa15399f91e674b8ac08b5fd4fae7afc","modified":1553821147571},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/result2.png","hash":"bad7a69287401408d5e4d55009db9712dc66bc74","modified":1553821147574},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/result3.png","hash":"271bb69cdb3c1856e9dc20738763cbb34b544708","modified":1553821147577},{"_id":"source/_posts/python/spider/spider-douban-book.md","hash":"52f7f12a6bb5ed46a739f348d623093caa851f53","modified":1559611797497},{"_id":"source/_posts/shell/gotossh-v3-md/list-all-the-servers.gif","hash":"53c1fc0d0e94da27756c6845cc140330e807160f","modified":1556331388752},{"_id":"source/_posts/shell/gotossh-v3-md/list-all-the-commands.gif","hash":"3ac4b3673a777c70ad514b09a512b0d1ec4fc3e1","modified":1556331388750},{"_id":"themes/indigos/layout/_partial/plugins/disqus.ejs","hash":"4a0c01e4195f685f9825fcd016d01249dbdd52ca","modified":1559611797650},{"_id":"themes/indigos/layout/_partial/plugins/baidu.ejs","hash":"e44d526029f122e9c2c74f3a647c35002c818cbe","modified":1559611797649},{"_id":"themes/indigos/layout/_partial/plugins/dynamic-title.ejs","hash":"23c101d45911eb0846533aaa2d409c43aa5e899a","modified":1559611797650},{"_id":"themes/indigos/layout/_partial/plugins/google-analytics.ejs","hash":"a947f4076b54b48d4df5baf2d5b3c39b632c7576","modified":1559611797650},{"_id":"themes/indigos/layout/_partial/plugins/gitment.ejs","hash":"5723d507eca4390e8e5d18c0770e7953b8c22f5a","modified":1559611797650},{"_id":"themes/indigos/layout/_partial/plugins/hyper-comments.ejs","hash":"e5a83acc7c2e385b0c9abf428e86e8fdfd3a5202","modified":1559611797650},{"_id":"themes/indigos/layout/_partial/plugins/mathjax.ejs","hash":"ea603a057196de53bd6afab1fddb93d11f27eb81","modified":1559611797651},{"_id":"themes/indigos/layout/_partial/plugins/site-visit.ejs","hash":"8fbd0910828f1ab6eba728bdecc9811d623baae2","modified":1559611797651},{"_id":"themes/indigos/layout/_partial/plugins/page-visit.ejs","hash":"2decb77bf3c1a064ea6ce1d4e78892c434d9c884","modified":1559611797651},{"_id":"themes/indigos/layout/_partial/plugins/tajs.ejs","hash":"97b48fe10be1c71d4ff25ccec3bd92d97466c9c5","modified":1559611797652},{"_id":"themes/indigos/layout/_partial/plugins/uyan.ejs","hash":"e370bd04ea5cf1c83e0c20516aff7ba3ca8b2d0b","modified":1559611797652},{"_id":"themes/indigos/layout/_partial/plugins/valine.ejs","hash":"a976ca36bd09aeb2902bf94fcc7a59975ea25148","modified":1559611797652},{"_id":"themes/indigos/layout/_partial/post/category.ejs","hash":"c7476165721a3a5e34d00d8c5c07e1e5474cd800","modified":1559611797653},{"_id":"themes/indigos/layout/_partial/post/comment.ejs","hash":"bcc3bd7a9023d71778f15e98c88552335ae69a69","modified":1559611797654},{"_id":"themes/indigos/layout/_partial/post/copyright.ejs","hash":"5305ed30ee35cf50f87656737d0ffe85f5bfc16b","modified":1559611797654},{"_id":"themes/indigos/layout/_partial/post/date.ejs","hash":"ea85b46e12d3b9c3612eef7aa76289a663fbc096","modified":1559611797654},{"_id":"themes/indigos/layout/_partial/post/head-meta.ejs","hash":"b0c680ce5b8aaf461a6731b1ff1287bd140c168a","modified":1559611797654},{"_id":"themes/indigos/layout/_partial/post/nav.ejs","hash":"11e7d504f7c7a3c4c052da13cfa8ea4862c9383e","modified":1559611797655},{"_id":"themes/indigos/layout/_partial/post/reward-btn.ejs","hash":"41c242fe3159dc68cec8dd00ab6d2663f5a51179","modified":1559611797655},{"_id":"themes/indigos/layout/_partial/post/reward.ejs","hash":"23719e09689b3afbb19214c6603eb02f896cb9ba","modified":1559611797655},{"_id":"themes/indigos/layout/_partial/post/share-fab.ejs","hash":"93482ad7d1e01b966f5ee1c5d12b88564e02b349","modified":1559611797656},{"_id":"themes/indigos/layout/_partial/post/share.ejs","hash":"8df0d7bf6f8e106cdbdac2dd10a97367aa0695f8","modified":1559611797656},{"_id":"themes/indigos/layout/_partial/post/tag.ejs","hash":"b3dc38652c4a018a37418136478dcd522fc49f79","modified":1559611797656},{"_id":"themes/indigos/layout/_partial/post/title.ejs","hash":"062d56cb88ae2be3a6616b911d4ebeffcbfe3cff","modified":1559611797656},{"_id":"themes/indigos/layout/_partial/post/toc.ejs","hash":"ad287a70724eb7cd8cd2a03a45b68032ee99973d","modified":1559611797657},{"_id":"themes/indigos/layout/_partial/post/updated.ejs","hash":"5caa71745aa340ce57938a930f3b898ee7518d74","modified":1559611797657},{"_id":"themes/indigos/source/css/_plugin/valine.less","hash":"ddbb7647d83f732f9b0d5d817d40a748006949cc","modified":1559611797666},{"_id":"themes/indigos/source/css/_partial/archives.less","hash":"7d2a6886265386c640e94ffca3f042675f701a35","modified":1559611797661},{"_id":"themes/indigos/source/css/_partial/article.less","hash":"d476cd3537bcd8a02d055cc223f5c805b8638cc2","modified":1559611797661},{"_id":"themes/indigos/source/css/_partial/gotop.less","hash":"b7db31b9bc563c10b9e3cf3e6d9cfddfeb3e805a","modified":1559611797662},{"_id":"themes/indigos/source/css/_partial/header.less","hash":"90f0948a9182c14b1dac1e9dbed3c883543266f9","modified":1559611797662},{"_id":"themes/indigos/source/css/_partial/highlight.less","hash":"58492b7cdb45fe09b026b2f34e8ae69c2ddb8228","modified":1559611797662},{"_id":"themes/indigos/source/css/_partial/layout.less","hash":"4390ed22abad59c8b28ed1a479a52f15b5f9cf4a","modified":1559611797663},{"_id":"themes/indigos/source/css/_partial/loading.less","hash":"f9d06a1e24fb4857fd18d7a0bfbb3a0ab2d1c742","modified":1559611797663},{"_id":"themes/indigos/source/css/_partial/lightbox.less","hash":"9b961eb1d70e7658f42cf2ca895fa5e35a6b6541","modified":1559611797663},{"_id":"themes/indigos/source/css/_partial/page.less","hash":"e92ccb53e6ac73a51498c6a9672db9d0d2bc7f1a","modified":1559611797663},{"_id":"themes/indigos/source/css/_partial/roboto.less","hash":"2e0469ed8161d5672d903ca1a8027cd65fe007f1","modified":1559611797664},{"_id":"themes/indigos/source/css/_partial/postlist.less","hash":"1c041bf91106808e5480c60d9ece45431bb503b3","modified":1559611797664},{"_id":"themes/indigos/source/css/_partial/reward.less","hash":"4857f90bb57fc22ca3f942d8934d86d5e9e82c1e","modified":1559611797664},{"_id":"themes/indigos/source/css/_partial/search.less","hash":"1d6641ae7568a0153d24beba9fd9704d2b155f6c","modified":1559611797665},{"_id":"themes/indigos/source/css/_partial/tags.less","hash":"959f4373fda6e45f6a4041a995ed3ea8a05a5170","modified":1559611797665},{"_id":"themes/indigos/source/css/_partial/share.less","hash":"27d80bcc96a53dd1e7eaa9a7d746e4b212357302","modified":1559611797665},{"_id":"themes/indigos/source/css/_partial/variable.less","hash":"082896b966ed25b39c74e7b007b4f54c235685a4","modified":1559611797666},{"_id":"themes/indigos/source/img/alipay.jpg","hash":"d2e76219d3f688a805c9f30e004f48e79daf03ab","modified":1546439123687},{"_id":"source/_posts/shell/gotossh-v3-md/scp-jump-server-log.gif","hash":"17168f30b5568ce36602deb8ee4d4c7a8b9c32df","modified":1556331388805},{"_id":"themes/indigos/source/css/_partial/waves.less","hash":"77bfd0b373b0469eb0176167fb076ccda4edf2a7","modified":1559611797666},{"_id":"themes/indigos/source/img/wechat.jpg","hash":"c7887fd95a3383371b957667d4bfbc3c8c2cbe53","modified":1546439123698},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_339C2E86CD88-1.jpeg","hash":"d32fa8f45ebc1d660c76fd23ae6ee87a296989e5","modified":1553821147641},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_9B418BF0E7A5-1.jpeg","hash":"61c0f49bbc8b6840ebe8a95f78a8302e0b5ce2eb","modified":1553821147653},{"_id":"source/_posts/shell/gotossh-v3-md/scp-online-server-file.gif","hash":"4da5e5d7a3b0b7dfec1598120813bd0ff4dc68fc","modified":1556331388808},{"_id":"source/_posts/java/collection/weakhashmap-code-detail/0038.png","hash":"dc8ec7ec15f9d18d028fa4baa7b8edf7dcf9f587","modified":1546698633537},{"_id":"source/_posts/java/introduction/java-environment-mac/12-jdk-mac.png","hash":"79b6a623b06142723ea9dc4981f3ef12ff3bcd75","modified":1546439123278},{"_id":"source/_posts/java/introduction/java-environment-mac/13-jdk-mac.png","hash":"aa4d7a93b28afb3424a5c107724b07cb9cbeed3d","modified":1546439123278},{"_id":"source/_posts/java/collection/weakhashmap-code-detail/weakhashmap-1.png","hash":"2d21b6d2b326191f28c04b070863c03614dc08fe","modified":1546698633539},{"_id":"source/_posts/java/introduction/java-environment-mac/16-jdk-mac.png","hash":"5451e575e4bf08b384335bb070bb46817edad5bd","modified":1546439123288},{"_id":"source/_posts/java/introduction/java-environment-mac/10-jdk-mac.png","hash":"a058e42380742e3be7911c30ea4c54263f2e99e9","modified":1546439123278},{"_id":"source/_posts/java/introduction/java-environment-mac/14-jdk-mac.png","hash":"4bc54995d9f778084a8b486634bc30793f1592f0","modified":1546439123288},{"_id":"source/_posts/java/introduction/java-environment-mac/5-jdk-mac.png","hash":"b65be8a8b49518b8fc8ea4f1c1b7d1113352180c","modified":1546439123308},{"_id":"source/_posts/java/introduction/java-environment-mac/6-jdk-mac.png","hash":"cc0550022513036a612d666bab64f1876d703ec3","modified":1546439123308},{"_id":"source/_posts/java/introduction/java-environment-mac/7-jdk-mac.png","hash":"57310fc56a96be434f0ad69eb6387a82f54d0d5a","modified":1546439123308},{"_id":"source/_posts/java/collection/weakhashmap-code-detail/weakhashmap-2.png","hash":"a97b7673b4d40163640e1a35540c2c2b51c8ed93","modified":1546698633541},{"_id":"source/_posts/java/introduction/java-environment-windows/3-jdk-windows.png","hash":"2a89504a729c391003e94d74941aeada3fde7e4a","modified":1546439123328},{"_id":"source/_posts/java/introduction/java-environment-windows/4-jdk-windows.png","hash":"155d9ca099b6138a5f3c2df3b826f6ce972d847a","modified":1546439123328},{"_id":"themes/indigos/source/css/_partial/fontawesome.less","hash":"ca30b732d2efbb0cd55a272ecdabc97f895aee78","modified":1559611797662},{"_id":"source/_posts/java/introduction/java-environment-windows/5-jdk-windows.png","hash":"ac4f6a18554f2d1aae972e1bf6737dd60551613d","modified":1546439123328},{"_id":"source/_posts/java/introduction/java-environment-mac/8-jdk-mac.png","hash":"52eacf47993855414045b0719196da9001ccb153","modified":1546439123318},{"_id":"source/_posts/java/introduction/java-environment-mac/9-jdk-mac.png","hash":"1c9dbad3045f234695be69fb4c27c0cd53ab1918","modified":1546439123318},{"_id":"source/_posts/java/introduction/java-environment-windows/2-jdk-windows.png","hash":"4d1cb8168cde93a8aabef63c8d12a8ccb56a60e4","modified":1546439123328},{"_id":"source/_posts/java/introduction/java-environment-windows/9-jdk-windows.png","hash":"8defa728fac888e8203a5e6151596c5ce15280d3","modified":1546439123338},{"_id":"source/_posts/java/introduction/java-environment-windows/6-jdk-windows.png","hash":"f26f02913932acf206e345b96a2749c22d68a7c1","modified":1546439123328},{"_id":"source/_posts/java/introduction/java-environment-windows/7-jdk-windows.png","hash":"79f375c43ac760ce5a88aef12df9e788494f0643","modified":1546439123338},{"_id":"source/_posts/java/introduction/java-environment-windows/8-jdk-windows.png","hash":"884e1c6927bf1394dc9941de017deb3b9901daeb","modified":1546439123338},{"_id":"source/_posts/java/introduction/java-ide/java-ide-3.png","hash":"5616c391ba4e9a1341b4c6213758924b9e8124d1","modified":1546439123358},{"_id":"source/_posts/java/introduction/java-ide/java-ide-5.png","hash":"627cfbad99d15a6962df90269eb9df896a6b6021","modified":1546439123358},{"_id":"source/_posts/java/introduction/java-ide/java-ide-6.png","hash":"bc4523f962ca5301e062c864166cf4cc2dfd6f34","modified":1546439123368},{"_id":"source/_posts/java/introduction/java-ide/java-ide-7.png","hash":"db6fcb1e3350c32db0a5ad41400ee7e22023eed1","modified":1546439123368},{"_id":"source/_posts/java/introduction/java-ide/java-ide-8.png","hash":"311e7f7643a2facb45dc3165c938af1bd84b28b7","modified":1546439123368},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-2.png","hash":"404e3de6764fab8a109a7efceabfb4bc6942fb30","modified":1546439123378},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-3.png","hash":"9b42950df71c6cb651d76dec741a4549e4855fd5","modified":1546439123378},{"_id":"source/_posts/java/jvm/reachable/accessibility1.jpg","hash":"36ba36afdaa689c5cadd4919a834569d72fdb478","modified":1546528528863},{"_id":"source/_posts/java/jvm/reachable/accessibility2.png","hash":"281d56cfb09c2ac6654e604869f1c089bb19688b","modified":1546528528862},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf6a655276187010.png","hash":"31c40871e367cb71244c6e8549c483b71cf262b5","modified":1562165633840},{"_id":"source/_posts/java/introduction/java-ide/java-ide-9.png","hash":"b7cb86602219d3609159f856c4449b7b85ae0aac","modified":1546439123368},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf7ec98fddd17705.png","hash":"01c4c5eafeb1dc753469677895b8d76b34d4eae3","modified":1562165633847},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf7f0e86fbc84596.png","hash":"65b03d0d7632771862dce230e74aa9f16d4292e5","modified":1562165633849},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-1.png","hash":"7be12cd9b902847ed3ca8ce7a6f06139103f1180","modified":1546439123378},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf7f4a7282234332.png","hash":"932ec5b8b6b5710942b97977fd9482aae12f1514","modified":1562165633851},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf7e9f2047e23793.png","hash":"985f8790a13d24c512910d43eec74b4fd27a0b29","modified":1562165633844},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/black_smile.jpg","hash":"1aea48378b0a27aa6aefd8bd9daab234758f22a4","modified":1562165633853},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf6a292b1d070453.png","hash":"c1d176ce8d8531bc7aedc5042059d0de466d0c05","modified":1562165633837},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/e8df70b9feab81ccabe8a2821dc2e9880cddc9e4f2ce-zo9QsQ_fw658.jpeg","hash":"a4bdeb9804e3bc479a184a3ce2ff8f4db8d7153c","modified":1562165633888},{"_id":"source/_posts/java/reference/reference-code-detail/reference-2.png","hash":"a8dc3f3b71dcb3ace64dd22fd364972a8b2daf22","modified":1546698633579},{"_id":"source/_posts/java/reference/soft-reference-code-detail/soft-reference-2.png","hash":"f07af2215f65766b68a5c3e932bc01e1ea4a0fc5","modified":1546698633595},{"_id":"source/_posts/java/spring/source-code-analysis/spring-bean-attribute-scope.md","hash":"55890b23d982e0869ba089fcceb2b87b55df7197","modified":1559611797422},{"_id":"source/_posts/java/reference/soft-reference-code-detail/soft-reference-3.png","hash":"39f4779065da2ccd6dd355ff6fd1e72efaf4391f","modified":1546698633601},{"_id":"source/_posts/java/spring/source-code-analysis/spring-bean-attribute-abstract.md","hash":"47fd42dac8cfe40bf424d25d2e4cbf77a8f7bb5f","modified":1559611797416},{"_id":"source/_posts/leetcode/complete-knapsack-problem/IMG_510B188AF928-1.jpeg","hash":"e3b84b5c1721d80fcd21421fc0d3c03397c31062","modified":1562165633897},{"_id":"source/_posts/leetcode/complete-knapsack-problem/IMG_5E156B07E228-1.jpeg","hash":"5e9e32ac8427904315a13e63f6ea1659e5c83a31","modified":1562165633900},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-7.png","hash":"62c8c5ac7132440be42826117bae9f8b47ab91b9","modified":1550500555671},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/example1.png","hash":"dda32c7e119dcb0b269c466ad35190eb1c9c9c50","modified":1553821147547},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/example2.png","hash":"a0ced037654761a1ac935eb5163b7c4f2735d8d9","modified":1553821147552},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/example3.png","hash":"ac38425fe1aaea80be4b06bef607c4f4fbb6cdc5","modified":1553821147556},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_007B2F2632D2-1.jpeg","hash":"a886afc0d50b5d55fb0bd7f80911c80ddb12d245","modified":1553821147617},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_13B30A586085-1.jpeg","hash":"97ac09688a58a030dd08163a3b1fbe17763e5b1e","modified":1553821147625},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_2ABCC82C89F7-1.jpeg","hash":"42fe2d940da23209ff873b3b5a46733f701711a9","modified":1553821147637},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_37EAFFF048DB-1.jpeg","hash":"32c7f5e0201113efba7873dba19ca2994c596df8","modified":1553821147645},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_16ACD9FB2E1C-1.jpeg","hash":"8b609a9044ace8b5d2384476dc77e13d9585a635","modified":1553821147632},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_142D1BF09ED7-1.jpeg","hash":"c8a40ab3922b238859ed758f6312c31956aaf7ab","modified":1553821147628},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_ECCF05DEC924-1.jpeg","hash":"611b425e7c449d8b1ac8b83e22784fefff9b7ce6","modified":1553821147669},{"_id":"source/_posts/java/spring/source-code-analysis/spring-bean-attribute.md","hash":"da8379683cb263b1ef74a1d6242056f75e91cb08","modified":1559611797423},{"_id":"source/_posts/java/reference/reference-code-detail/reference-1.png","hash":"90330bc0125b7580e1421a7e3f409e5a703caf8e","modified":1546698633576},{"_id":"source/_posts/leetcode/multi-knapsack-problem/IMG_510B188AF928-1.jpeg","hash":"e3b84b5c1721d80fcd21421fc0d3c03397c31062","modified":1562165633946},{"_id":"source/_posts/leetcode/multi-knapsack-problem/IMG_5E156B07E228-1.jpeg","hash":"5e9e32ac8427904315a13e63f6ea1659e5c83a31","modified":1562165633949},{"_id":"source/_posts/leetcode/knapsack-problem-conclusion/IMG_FEB9666A1155-1.jpeg","hash":"d6c7b383acd67718620f994c9ad446c950d36e16","modified":1562165633940},{"_id":"source/_posts/shell/gotossh-v3-md/login-jump-server.gif","hash":"697ca092e5f311883f5fdd97f0291f012a2f20b5","modified":1556331388766},{"_id":"source/_posts/shell/gotossh-v3-md/login-online-server.gif","hash":"fdd2a5fa10106a1dd5ae1d6b5f513119013e1be8","modified":1556331388789},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.eot","hash":"a76cd602f5188b9fbd4ba7443dcb9c064e3dbf10","modified":1546439123634},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.woff","hash":"ee99cd87a59a9a5d4092c83232bb3eec67547425","modified":1546439123644},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.woff2","hash":"933b866d09c2b087707a98dab64b3888865eeb96","modified":1546439123644},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.eot","hash":"42fe156996197e5eb0c0264c5d1bb3b4681f4595","modified":1546439123644},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.woff2","hash":"bbdc28b887400fcb340b504ec2904993af42a5d7","modified":1546439123654},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.eot","hash":"1517f4b6e1c5d0e5198f937557253aac8fab0416","modified":1546439123654},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.woff2","hash":"6cc1b73571af9e827c4e7e91418f476703cd4c4b","modified":1546439123664},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.eot","hash":"77ae3e980ec03863ebe2587a8ef9ddfd06941db0","modified":1546439123664},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.woff","hash":"6300f659be9e834ab263efe2fb3c581d48b1e7b2","modified":1546439123654},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.woff","hash":"d45f84922131364989ad6578c7a06b6b4fc22c34","modified":1546439123664},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.woff2","hash":"ed1558b0541f5e01ce48c7db1588371b990eec19","modified":1546439123664},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.eot","hash":"0790a51a848dbe7292c98f9d0459218bf1a8ffdd","modified":1546439123674},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.woff2","hash":"2449e3dac5ddb7c3da8bb07450493b62d052758c","modified":1546439123674},{"_id":"source/_posts/java/collection/weakhashmap-code-detail/weakhashmap-3.png","hash":"a1971c4b5102b3a6c222ed1014712e399a6e3ce2","modified":1546698633544},{"_id":"source/_posts/java/collection/weakhashmap-code-detail/weakhashmap-4.png","hash":"ca0ae5597535eb89f027c74cf3e92369cffb0bd4","modified":1546698633548},{"_id":"source/_posts/java/introduction/java-environment-mac/11-jdk-mac.png","hash":"09153cd9a58d2ea84f64bc4105fee92a0691c221","modified":1546439123278},{"_id":"source/_posts/java/introduction/java-environment-mac/15-jdk-mac.png","hash":"115d45c94471ff20db11d361a5111108181273f9","modified":1546439123288},{"_id":"source/_posts/java/introduction/java-environment-windows/1-jdk-windows.png","hash":"8f643602c33a1a98b96e46349952dea4dae4981b","modified":1546439123318},{"_id":"source/_posts/java/introduction/java-ide/java-ide-4.png","hash":"41e84a42900e891648f3b37130a080606f531181","modified":1546439123358},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf7daf74e9241031.png","hash":"62f8083a628c45dd76c5da72fabd1dbbc3882413","modified":1562165633842},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (4).png","hash":"34143640204e2fd3f306af145f0c4a8128cb88af","modified":1562165633864},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (1).png","hash":"6004cb2e74dd5627b4f5fe0e34ba7bd7053d1964","modified":1562165633856},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (3).png","hash":"263726c337b2f97e315a7005fe4ad21915da8577","modified":1562165633862},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (7).png","hash":"0b531eb961c87367efa631c64fb06a656eeb3570","modified":1562165633875},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (8).png","hash":"0d2524fa2e1836a075e32c69d3faf8045478e8af","modified":1562165633878},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.woff","hash":"74734dde8d94e7268170f9b994dedfbdcb5b3a15","modified":1546439123664},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (9).png","hash":"f5f7746eb83ac4a8801422a3b730ecd399ba1191","modified":1562165633882},{"_id":"source/_posts/leetcode/complete-knapsack-problem/IMG_6B67BF7CC3A7-1.jpeg","hash":"4b557b85348bc8a902e2f28d3d33ebf505822f78","modified":1562165633904},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/example4.png","hash":"b4bd082cda695f391cba78a07d193ef653e598dc","modified":1553821147561},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_04E34B950C69-1.jpeg","hash":"18254fec11dc75a281c7888a9739f4289c2de089","modified":1553821147621},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.woff","hash":"fbc3e71d456c96667d8082ab910e3946ef89240b","modified":1546439123674},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_CD2E7F29F646-1.jpeg","hash":"1b6d131d885afb6517dfab9573f26249047ad238","modified":1553821147663},{"_id":"source/_posts/leetcode/knapsack-problem-conclusion/IMG_2CEDE1895234-1.jpeg","hash":"7e7a70908540f6cb421e4daa808a404ab0342a44","modified":1562165633914},{"_id":"source/_posts/leetcode/knapsack-problem-conclusion/IMG_457EBA32EFB1-1.jpeg","hash":"6dc72c7240bc71e70e2d7b3c8411d37fb7b86deb","modified":1562165633919},{"_id":"source/_posts/leetcode/knapsack-problem-conclusion/IMG_9246C78770A7-1.jpeg","hash":"7f557d83a700035d15d0b41ca62db6e9daf23f84","modified":1562165633923},{"_id":"source/_posts/leetcode/knapsack-problem-conclusion/IMG_C91D3F09DB1B-1.jpeg","hash":"0e4ca4bc6515f570f3e7560bbb5df7aa98748a8f","modified":1562165633931},{"_id":"source/_posts/leetcode/knapsack-problem-conclusion/IMG_A41B58306523-1.jpeg","hash":"010d88d4b7c0da5c65b213b381a50bbff2e003ea","modified":1562165633927},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_F047D511640B-1.jpeg","hash":"ff5694f468386d06c7037fc7d9e485110dfb1cac","modified":1553821147673},{"_id":"source/_posts/leetcode/multi-knapsack-problem/IMG_6B67BF7CC3A7-1.jpeg","hash":"4b557b85348bc8a902e2f28d3d33ebf505822f78","modified":1562165633953},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_482BA28A5E66-1.jpeg","hash":"75cb1c8b961cc7807d3375c5bcf99040f0c6a231","modified":1553821147650},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_E5B595A5513F-1.jpeg","hash":"0ba5261b42358309b7de36214f9275972bbd0e53","modified":1553821147666},{"_id":"source/_posts/leetcode/knapsack-problem-conclusion/IMG_E80890942D1C-1.jpeg","hash":"3cec99d2351f852abe31f8eff7e6183d94351db4","modified":1562165633936},{"_id":"source/_posts/shell/gotossh-update/login-server3.gif","hash":"5b27770c73eea62a9947337541d03d3b1f2a5c2c","modified":1553821147693},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1546439123634},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1546439123634},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Light.ttf","hash":"e321c183e2b75ee19813892b7bac8d7c411cb88a","modified":1546439123654},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Regular.ttf","hash":"824b5480c977a8166e177e5357d13164ccc45f47","modified":1546439123664},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Bold.ttf","hash":"47327df0f35e7cd7c8645874897a7449697544ae","modified":1546439123644},{"_id":"source/_posts/java/introduction/java-started/java-started-1.png","hash":"83c77b655ea24647ff6c55c830924baa4e90b845","modified":1546439123388},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (2).png","hash":"51d0275bcdf1a206c8f6a3757379facb0ef77af9","modified":1562165633860},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/fib.png","hash":"b126016de12528c6b9f8e0d0a62b6ab9d593ed49","modified":1553821147569},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution1-3.png","hash":"738022ef720eb066fa3064debc8e113d98cf4dfb","modified":1553821147593},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution2-2.png","hash":"d993f366178f0f1cba86acfa7df692a23cd60f20","modified":1553821147608},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Medium.ttf","hash":"6060ca726b9760b76f7c347dce9d2fa1fe42ec92","modified":1546439123654},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution2-1.png","hash":"416121b91302490bcbf2e5c46be4302c82720b49","modified":1553821147603},{"_id":"source/_posts/shell/gotossh-update/login-server4.gif","hash":"0ca0658dd2201971061ab2f7f36aa39cf4d36ec3","modified":1553821147698},{"_id":"source/_posts/shell/gotossh-v3-md/login-and-view-the-log.gif","hash":"760facffcea818ad86d4d5fa3379cd701aa1266f","modified":1556331388756},{"_id":"themes/indigos/source/css/fonts/fontawesome/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1546439123624},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1546439123634},{"_id":"themes/indigos/source/css/fonts/roboto/Roboto-Thin.ttf","hash":"173ed64528b4d010a76d8d38deb1d7e7eed58eda","modified":1546439123674},{"_id":"source/_posts/java/introduction/java-environment-mac/2-jdk-mac.png","hash":"bef4170c81af99efbdb89dafa2094fd127648889","modified":1546439123288},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1546439123624},{"_id":"source/_posts/java/introduction/java-environment-mac/3-jdk-mac.png","hash":"0b4bb944db5070a12b706f7ffaf451f5d558cfd9","modified":1546439123298},{"_id":"source/_posts/java/introduction/java-ide/java-ide-2.png","hash":"9e81a827e3e5793b7f262df0eda5de1746c65899","modified":1546439123358},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/example5.png","hash":"8152c6859b65aaee0e93af5d3f8f62ef298be3d7","modified":1553821147565},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution1-1.png","hash":"528e20077405ad881883b3f3420eb1f50a1d5ccd","modified":1553821147582},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_BFE9B7063670-1.jpeg","hash":"49fcf7097fba4b21429e8d0f9ab8c9d8e3416641","modified":1553821147659},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (5).png","hash":"897b002b8ecfc3b72d7db84d308bdbc0306e2b34","modified":1562165633868},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon.png","hash":"6606e0b25abc19f312e4b415f26c5ba116b4170a","modified":1562165633886},{"_id":"source/_posts/java/introduction/java-environment-mac/4-jdk-mac.png","hash":"df019bad4cac078997c8a067a59d69be97a34adc","modified":1546439123298},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (6).png","hash":"2ab560cd392d00e609d7b0415b4a8a17ece13efa","modified":1562165633872},{"_id":"source/_posts/shell/gotossh-update/scp-server3-log.gif","hash":"294dd79b320bc6358c880c50a2d1596887678089","modified":1553821147702},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution1-4.png","hash":"c52a83829385942135d81db7722ea5de30e566f7","modified":1553821147599},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution1-2.png","hash":"c501ae2762abc3dfaae03bc3d09f01278a3df22c","modified":1553821147587},{"_id":"source/_posts/shell/gotossh-v3-md/login-and-view-the-log2.gif","hash":"bc7937809cde4bb149ca4c5acbc82384697e9d26","modified":1556331388762},{"_id":"source/_posts/shell/gotossh-update/jump.gif","hash":"a03dd35e1dab365e7c59c3f673fb7fc44fdd51d2","modified":1553821147687},{"_id":"source/_posts/shell/gotossh-update/server4-log.gif","hash":"333a950b783e49857be08a31e166b47703126cda","modified":1553821147726},{"_id":"themes/indigos/source/css/fonts/fontawesome/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1559611797671},{"_id":"source/_posts/shell/gotossh-update/server3-log.gif","hash":"a88a6d29cdc855b2c2d0e96f27f725c2b82e0ab0","modified":1553821147719},{"_id":"source/_posts/java/introduction/java-environment-mac/1-jdk-mac.png","hash":"4acf222e3a5d9728d358cd16a2f0d4300ae6700e","modified":1546439123268},{"_id":"source/_posts/java/introduction/java-ide/java-ide-1.png","hash":"ab6bb5ebfc5b292263824a72ba6eeca819f31f14","modified":1546439123348},{"_id":"source/_posts/shell/gotossh-update/scp-server4-log.gif","hash":"56308e22f435b200fe3a7773b73d4bff7c6647d5","modified":1553821147712},{"_id":"source/_posts/shell/gotossh-v3-md/login.gif","hash":"e6a41bf227897792b4447974fe47d62d1b24227f","modified":1556331388802},{"_id":"source/_posts/shell/gotossh-v3-md/login-online-server-and-view-the-log.gif","hash":"01f0cc8dcd4663919e64f1375c45a2dc6f4481bc","modified":1556331388785},{"_id":"public/atom.xml","hash":"37c57320231f0347183ca3431759d72c9936aba1","modified":1562900873255},{"_id":"public/content.json","hash":"7f05191a465bd2f72327dbf706d8f8d0441b2f12","modified":1562900873255},{"_id":"public/categories/index.html","hash":"41fce40e62cb1d07765df6b5576d60addfafda3f","modified":1562900875596},{"_id":"public/uncategorized/java/spring/source-code-analysis/spring-bean-attribute-abstract.html","hash":"708fcc927a6ad8c46b39a0c14858187213a6e956","modified":1562900875597},{"_id":"public/uncategorized/shell/gotossh-update.html","hash":"0f24a5c21d0e927f7402037700f681245c24c6d1","modified":1562900875597},{"_id":"public/uncategorized/leetcode/dp-01-knapsack-problem-optimization.html","hash":"7a9a0301fd07bf5f80cd1ea67aa70ad2c890d0c5","modified":1562900875597},{"_id":"public/programming/leetcode/dp-01-knapsack-problem.html","hash":"c012b87b779df90d00d8dd9cfa0fe371bd8c6f86","modified":1562900875597},{"_id":"public/uncategorized/java/spring/source-code-analysis/spring-bean-attribute-scope.html","hash":"7df20fff21c51bf35b8ea2d2c4e7a550b5f71a47","modified":1562900875597},{"_id":"public/uncategorized/shell/shell-gotossh.html","hash":"bf69b18839cfc5d1dbda2a65ea43737e7c877213","modified":1562900875597},{"_id":"public/uncategorized/java/spring/source-code-analysis/spring-bean-attribute.html","hash":"f9f93623595bb38929a6f92eab1e90ae8ef055e7","modified":1562900875597},{"_id":"public/programming/leetcode/day4-regular-expression-matching.html","hash":"4d4c1a83bbf9be4b95295562e9e8fd0928e3e1fd","modified":1562900875597},{"_id":"public/programming/leetcode/day2-add-two-numbers.html","hash":"e8d999de5579f88740dac2fb00cb350cb0682b41","modified":1562900875597},{"_id":"public/programming/java/collection/weakhashmap-code-detail.html","hash":"ca079d52a431188833cac82796193b6bc953e3dd","modified":1562900875597},{"_id":"public/programming/leetcode/day3-longest-substring-without-repeating-characters.html","hash":"80181752eb26d87684bb62bc26586ef4f38f51cc","modified":1562900875597},{"_id":"public/programming/leetcode/day1-two-sum.html","hash":"f3d7ba74abeb390ddcc93c76a2860083faea54a4","modified":1562900875597},{"_id":"public/tags/index.html","hash":"85ccc12854f76ed0dbd862d924543380f908c31c","modified":1562900875596},{"_id":"public/uncategorized/java/basic/java-data-type.html","hash":"1b72152f82f690d8ba73f37e7a9152dd8f209d1d","modified":1562900875597},{"_id":"public/uncategorized/java/basic/java-operator.html","hash":"98fa9d8612ec2c6ad029e03806f037d2e1f3bf6b","modified":1562900875597},{"_id":"public/programming/java/interview/daily-interview-test.html","hash":"503afbcbbe4d2b9d0b5f0da9e1ad1f948741a16b","modified":1562900875598},{"_id":"public/programming/leetcode/leetcode-solo-rank-begin.html","hash":"32984c44d80917d7c349aebda4002b29d8606bc6","modified":1562900875598},{"_id":"public/programming/java/reference/reference-queue-code-detail.html","hash":"ce4e8b13e628396c2ba388598844d25fb16bdd89","modified":1562900875598},{"_id":"public/programming/java/reference/soft-reference-code-detail.html","hash":"c7a718005f432442521ae58fc1861c05ae2151f2","modified":1562900875598},{"_id":"public/programming/java/reference/soft-reference.html","hash":"3ff67e3222eb98fecae80765333fe1f83177dac5","modified":1562900875598},{"_id":"public/programming/java/reference/weak-reference-code-detail.html","hash":"5886312475a0507fee335aa1b69280e30635bd56","modified":1562900875598},{"_id":"public/programming/java/README.html","hash":"443f81c61e432b0de1f9a917d16fd97612750810","modified":1562900875598},{"_id":"public/programming/java/reference/phantom-reference-code-detail.html","hash":"d030f79bd33ee65450b90c550018d496172b6314","modified":1562900875598},{"_id":"public/programming/java/reference/reference-summary.html","hash":"d084079d6ac65531d9357822ffe10391328dbafa","modified":1562900875598},{"_id":"public/archives/2017/index.html","hash":"628c018d38c693373c5a96bbcb22349fce0b0deb","modified":1562900875595},{"_id":"public/archives/2017/12/index.html","hash":"1e479c1e0990b27c3f533c09fb68d16998317da1","modified":1562900875595},{"_id":"public/archives/2018/page/5/index.html","hash":"c1332e93e422cf2cd5cfda447829bb1fe5101e96","modified":1562900875595},{"_id":"public/archives/2018/12/page/5/index.html","hash":"ba839ebd719ceb545ca632d8ce5fc809b39c9b11","modified":1562900875595},{"_id":"public/tags/reading-notes/index.html","hash":"64220c22f8a5410ba930b8f3febc5c1001b05011","modified":1562900875596},{"_id":"public/tags/interview/index.html","hash":"fe9a7d33bf722b666a66ef3bf3c1775b68d9da36","modified":1562900875596},{"_id":"public/tags/Java/index.html","hash":"1de7b36da1416d70d7439b7238748faf9f2cd9a8","modified":1562900875596},{"_id":"public/tags/garbage-collection/index.html","hash":"4c0573ce43e0f7921c439fe4afa31570f5eb2476","modified":1562900875602},{"_id":"public/tags/memory-leak/index.html","hash":"42178735b23c5bcba3c5df3293535ef95339887d","modified":1562900875596},{"_id":"public/tags//index.html","hash":"34dba355238f2d99adea036dbc3d73f024d1af6b","modified":1562900875596},{"_id":"public/uncategorized/rabbitmq/rabbitmq-how-to-use-dead-letter-queue.html","hash":"7ab89564b0a947e1bfd4ea860efdb2aa55071476","modified":1562900875596},{"_id":"public/uncategorized/mysql/mysql-index-introduction.html","hash":"a2b9770f2c44b4507a0afb2a8d7151fec75ed6b0","modified":1562900875596},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays.html","hash":"b888cc5fcddc5d8a54829e5e0ef0f63b80c616ce","modified":1562900875596},{"_id":"public/programming/leetcode/knapsack-problem-conclusion-md.html","hash":"43583e8e4f81a87dd1e7948611baf7cb1144e5fd","modified":1562900875596},{"_id":"public/uncategorized/python/spider/spider-douban-book.html","hash":"917fed0bf4f171596c57492da4d983f5591fb07d","modified":1562900875597},{"_id":"public/programming/leetcode/multi-knapsack-problem-md.html","hash":"c58a953dfe95e452c9e6a5f5fabe5cd8cbd7ee9a","modified":1562900875597},{"_id":"public/programming/leetcode/complete-knapsack-problem.html","hash":"46d34e62c1a90d143b6b27b908865aab26249fa2","modified":1562900875597},{"_id":"public/uncategorized/shell/gotossh-v3-md.html","hash":"849cb543f3f5d7ba641dfac2be4ef99a2033a853","modified":1562900875597},{"_id":"public/programming/java/reference/reference-code-detail.html","hash":"48ba100db832c21d049d96a9c6d86cd5fc7cca3a","modified":1562900875598},{"_id":"public/programming/java/reference/phantom-reference.html","hash":"b51efee0571b9bebfae35ea50bec63995869075c","modified":1562900875598},{"_id":"public/programming/java/reference/weak-reference.html","hash":"a0aca3c41d3af3a887452adf864e38d4b2caa571","modified":1562900875598},{"_id":"public/programming/java/reference/strong-reference.html","hash":"845aea15a1aae9781e369e8fb30af04304204886","modified":1562900875598},{"_id":"public/programming/java/multithread/multithread-start.html","hash":"f496b2253e921abb1a1e1a228a74088ece2ee454","modified":1562900875598},{"_id":"public/programming/java/reference/final-reference-code-detail.html","hash":"894ebea3470d7eb80f2fc5c1facc072b31ee61d9","modified":1562900875599},{"_id":"public/programming/java/basic/java-class.html","hash":"2308b4d3f76303ad1ba27ac900ec442543a9f6bf","modified":1562900875599},{"_id":"public/programming/java/reference/four-kinds-of-reference.html","hash":"5a2f660779d3dc7d640dcad9bfeb1f47b8c3ba06","modified":1562900875599},{"_id":"public/reading/reading/the-art-of-java-multithread-notes.html","hash":"d352ef6e84ecfcda10e5563f1078d4e59b33d076","modified":1562900875597},{"_id":"public/programming/java/basic/java-variable.html","hash":"9da22058ab32571068f89e99d1dee6a05f1d4b15","modified":1562900875599},{"_id":"public/programming/java/basic/java-package.html","hash":"0fdc67fad798209fbb1f5cc53257564f65707157","modified":1562900875599},{"_id":"public/programming/java/basic/java-simple-structure.html","hash":"604d550dfaf6887b1ed0f49d7e36fad5dc2a1836","modified":1562900875599},{"_id":"public/programming/ops/deploy-vuepress-on-centos7.html","hash":"793a9d6ceb861867ffefbd4b22d869e620b7ca70","modified":1562900875599},{"_id":"public/programming/architecture/domain-driven-design/ddd-steps.html","hash":"ef45ae7a3c77d86123ae7e2a45422b8104403f82","modified":1562900875599},{"_id":"public/programming/java/basic/java-basic.html","hash":"94e640ced2c204fa38042d8b26a8990f650c777c","modified":1562900875599},{"_id":"public/programming/architecture/domain-driven-design/ddd-recommendation.html","hash":"9dea60c5ae486fd41e0fab258c6ee013faf196a6","modified":1562900875599},{"_id":"public/programming/architecture/domain-driven-design/ddd-outline.html","hash":"023b136ac83f7dbb811335a3c3cfd186d9d3a081","modified":1562900875599},{"_id":"public/programming/java/jvm/reachable.html","hash":"def2c502e49886b799c78966e70f8161fa404a49","modified":1562900875599},{"_id":"public/programming/java/introduction/java-primer-conclusion.html","hash":"69d1a97c7b26e403cd879159fb3ebb6eb076211a","modified":1562900875599},{"_id":"public/programming/java/introduction/java-simple-example.html","hash":"c1b7131bb008cf804a1f21c01d892cd9b0d8fd73","modified":1562900875599},{"_id":"public/programming/java/introduction/java-introduction.html","hash":"fed4e80da815cf2f1b7041aea529b48a286f3729","modified":1562900875599},{"_id":"public/programming/java/introduction/java-ide.html","hash":"ab746ee638014e2d0f3037c67f3bd5a19ff3fc57","modified":1562900875599},{"_id":"public/programming/java/introduction/java-environment-mac.html","hash":"069696e012f19de5843bef0e2c3ed3a4f2bdcacc","modified":1562900875599},{"_id":"public/programming/java/jvm/reachable-in-hotspot.html","hash":"73650c0a537337571a96769124121a350b41976f","modified":1562900875600},{"_id":"public/programming/java/introduction/java-environment-windows.html","hash":"da2df5226f6e001c7faabd470fcd364bbefdaefa","modified":1562900875599},{"_id":"public/programming/java/introduction/java-environment.html","hash":"96bd21dc8aa11debac7aa56d866bc927e4da32a0","modified":1562900875600},{"_id":"public/programming/java/introduction/java-started.html","hash":"2eee138b1c0e53c8d83c5ee72671463d282a184f","modified":1562900875600},{"_id":"public/reading/reading/java-multithread-programming-guide-in-action-digest.html","hash":"2df58491ad38c793c85a4a56d22bc69b47a0596c","modified":1562900875600},{"_id":"public/reading/reading/the-power-of-habit.html","hash":"c502662f04ac0cf46833353de9f8f5541a9d613e","modified":1562900875600},{"_id":"public/programming/java/jvm/memory-leak.html","hash":"e5a9a28d03e5aec6de046a816e70881d199f0e68","modified":1562900875600},{"_id":"public/reading/reading/java-multithread-programming-guide-in-action-notes.html","hash":"c455fda556f77eea09fe32ca67129c4ccee157b7","modified":1562900875600},{"_id":"public/reading/reading/reading-notes.html","hash":"fc846691b416b4eec70df5d197ed2be5a507d628","modified":1562900875600},{"_id":"public/reading/reading/the-power-of-habit-digest.html","hash":"a8597617073fa55fd7a5922f3f783973261b87d1","modified":1562900875600},{"_id":"public/programming/guide/background-skill.html","hash":"4d657a552605f74b33a478a182737256182c0410","modified":1562900875600},{"_id":"public/programming/java/jvm/object-self-rescue.html","hash":"5d2bdb2d34ea709ba4d09b68a72faa55f0aa186b","modified":1562900875600},{"_id":"public/archives/index.html","hash":"5fdfd4ecc24b9964b37ebac80d116db1bbc5bb95","modified":1562900875600},{"_id":"public/programming/java/jvm/garbage-collection.html","hash":"292ae886fb33569c68ca43046420a206ae9c7c43","modified":1562900875600},{"_id":"public/archives/page/3/index.html","hash":"975f6715893930f2c9d3e03d79a506a72f8055e4","modified":1562900875600},{"_id":"public/archives/page/2/index.html","hash":"02278bc889bea617cc0fcb48ecfc5e0858985f2e","modified":1562900875600},{"_id":"public/archives/page/4/index.html","hash":"ae4f3ba78d2fa043ce93a4cced52b8423173532e","modified":1562900875600},{"_id":"public/archives/page/5/index.html","hash":"4485a011af63e57e9dd6d75caddbc2811c228c36","modified":1562900875600},{"_id":"public/archives/2018/index.html","hash":"7eb72a28bb42950c13d7327919b96ba7bd8b71fe","modified":1562900875601},{"_id":"public/archives/page/6/index.html","hash":"15bb011ecaea1285b230ce6b971bf16a829a9f37","modified":1562900875600},{"_id":"public/archives/2018/page/2/index.html","hash":"812706b6a1c598c4c62894e6af52e097c6e39a78","modified":1562900875601},{"_id":"public/archives/2018/page/4/index.html","hash":"e043dbee5a2bd1176dcac17aad30b5adfa1db542","modified":1562900875601},{"_id":"public/archives/2018/12/index.html","hash":"d2ae2f19ff197f45f2f1f1cc9609868b97c4472e","modified":1562900875601},{"_id":"public/archives/2018/12/page/2/index.html","hash":"0f96fff3e9c2cd5b18d76b7f9cbba227053d1de5","modified":1562900875601},{"_id":"public/archives/2018/page/3/index.html","hash":"790b487b12a01cf5f0dda8fdc53c6aa8d0fe285d","modified":1562900875601},{"_id":"public/archives/2018/12/page/3/index.html","hash":"778e1e0b362735638be3a646f2977236858ee7b6","modified":1562900875601},{"_id":"public/archives/2018/12/page/4/index.html","hash":"40d6908d211f7e27fb8ef11b38801f91dbdb739d","modified":1562900875601},{"_id":"public/archives/2019/index.html","hash":"9e2501ea6dc1cf578927c49872e394075c7aa897","modified":1562900875601},{"_id":"public/archives/2019/page/2/index.html","hash":"f979394ba439aed6388fa8891062525b921254b0","modified":1562900875601},{"_id":"public/archives/2019/01/index.html","hash":"8aa4a04f3e36b74b2f74e816a6acc26465e4e186","modified":1562900875601},{"_id":"public/archives/2019/03/index.html","hash":"13f13ecb225118f44c9f0bd4ffc006433def4d7f","modified":1562900875601},{"_id":"public/categories/programming/index.html","hash":"08c85b9d9603b243b06444b4ea31a981d8c6b330","modified":1562900875602},{"_id":"public/categories/programming/page/2/index.html","hash":"6c65cd757a396f753eb658a77de4bcffb8de1f9d","modified":1562900875603},{"_id":"public/categories/programming/page/3/index.html","hash":"1fe52b0660a7099825258318a3c37361d8dda23f","modified":1562900875603},{"_id":"public/categories/programming/page/4/index.html","hash":"a603c06af49a2b72513a8ce2236d4dc3f0d15e5b","modified":1562900875603},{"_id":"public/categories/reading/index.html","hash":"7bba00d6091bbd83ce6c3663f7710b350c05f2a4","modified":1562900875603},{"_id":"public/categories/programming/page/5/index.html","hash":"282805bca18ee7050fb09140b88af234673220d9","modified":1562900875603},{"_id":"public/tags/java/index.html","hash":"c723f2cf3f0f770dd4c821a271d8afb9b657d6f0","modified":1562900875601},{"_id":"public/tags/java/page/2/index.html","hash":"ec714647719846f4be10c2bfd629c8a9745ae8d5","modified":1562900875601},{"_id":"public/tags/java/page/3/index.html","hash":"63b736caf2260a71579c85fe352c247ab1469a75","modified":1562900875601},{"_id":"public/tags/multithread/index.html","hash":"fbf77a12a25328c1b78bc9014f99f7b3a1cc7b2e","modified":1562900875602},{"_id":"public/tags/java/page/4/index.html","hash":"e4188897ebfe26cfde7e9eb590aa2f638ac785b5","modified":1562900875602},{"_id":"public/tags/java/page/5/index.html","hash":"b8aca7f4de93c30e4a00f0dd6f084b179c35bea0","modified":1562900875602},{"_id":"public/tags/algorithm/index.html","hash":"bc2b3309ac84eef3ccc1e6456aeed10d0e55e997","modified":1562900875602},{"_id":"public/tags/LeetCode/index.html","hash":"b24719fd6a78863c8b6002d308010e7d69a6da4e","modified":1562900875602},{"_id":"public/tags/dynamic-programming/index.html","hash":"e52bd5c844c4bc655d36306c6227f3b8c0fb278d","modified":1562900875602},{"_id":"public/tags/knapsack-problem/index.html","hash":"b587e96005c3ae42cdb5572bc1e46be466410344","modified":1562900875602},{"_id":"public/tags/digest/index.html","hash":"c03569129c8072d36333ef2e766bc58233d362fe","modified":1562900875602},{"_id":"public/tags/enviroment/index.html","hash":"7933b812a21254f19df5538e2e87ee02b73af0e9","modified":1562900875602},{"_id":"public/tags/ddd/index.html","hash":"2e7bc39ae5d2ec7d0ac86600dc083ce4fa1f68a6","modified":1562900875602},{"_id":"public/tags/java-base/index.html","hash":"f89b879480cfe608cf6264fc9699542c04ff8463","modified":1562900875602},{"_id":"public/tags/java-introduction/index.html","hash":"b8b9717ced188104e6553775c7d18fc3513b09fd","modified":1562900875602},{"_id":"public/tags/reference-type/index.html","hash":"157f0fbe046bf1c2be429b1e777e0b751031e460","modified":1562900875602},{"_id":"public/tags/reference-type/page/2/index.html","hash":"6e933b2db6ad0d53e63b6fdc0aa5b1b18ab53b26","modified":1562900875602},{"_id":"public/index.html","hash":"2e34358ef962b7c8be3dd66b0ff0515ff5488f94","modified":1562900875603},{"_id":"public/page/2/index.html","hash":"8cbd006d10992df439efe09cb8649c5d0e0b7c43","modified":1562900875603},{"_id":"public/tags/source-code-analysis/index.html","hash":"feb50c075d9cacda25b62a64b1af6394c019d16c","modified":1562900875602},{"_id":"public/tags/spring/index.html","hash":"1ab56420adcf66331fef72116d434dedc13e54b6","modified":1562900875602},{"_id":"public/page/3/index.html","hash":"ae0054b708ad644453613139319feab048f5cf7f","modified":1562900875603},{"_id":"public/page/4/index.html","hash":"4624b6f801625c3b038de80c0f21ee738ed7f795","modified":1562900875603},{"_id":"public/page/5/index.html","hash":"a1348c14e40598efde9ec5add935d8d963a90b7c","modified":1562900875603},{"_id":"public/page/6/index.html","hash":"e0f58dd0291b5dbc2c403e6d5531a6c0d638d85e","modified":1562900875603},{"_id":"public/archives/2019/page/3/index.html","hash":"ffa1866a4ca43bfd794b937ceb8d8184671f692b","modified":1562900875601},{"_id":"public/archives/2019/04/index.html","hash":"a9ce8730d4d666bd719ca2e2744a7a0819ad52c6","modified":1562900875595},{"_id":"public/archives/2019/05/index.html","hash":"ce1f8eb9c53be2c77edcb09278bd44529e015e47","modified":1562900875595},{"_id":"public/archives/2019/07/index.html","hash":"aaab7d08934ae4abe7e48f63b55913ee82005473","modified":1562900875595},{"_id":"public/tags/mysql/index.html","hash":"b3893944e2de457d5d03df5966cb4d8034b5bbce","modified":1562900875602},{"_id":"public/tags/database/index.html","hash":"6a68233368e30742543d5cb6100fb00a021adfab","modified":1562900875596},{"_id":"public/tags/RabbitMQ/index.html","hash":"834addfeee28b6a725463d05ca1f533c267cc854","modified":1562900875596},{"_id":"public/tags/problem/index.html","hash":"d3ef2c63feb1369e6e6f9063b34272a531d2aa9b","modified":1562900875596},{"_id":"public/tags/spider/index.html","hash":"2a4e1fb08aa9b417fe2f5b70b2c8be94690ea7f2","modified":1562900875596},{"_id":"public/tags//index.html","hash":"751d0eceff3382e1cd6a107815b58262da231ced","modified":1562900875596},{"_id":"public/tags/python/index.html","hash":"001d6ea81af34c59ec0caff2364f4c9a20f67d97","modified":1562900875596},{"_id":"public/archives/page/7/index.html","hash":"65174f985be6e37f5577e64da7ebd8113b07ca34","modified":1562900875601},{"_id":"public/page/7/index.html","hash":"9b8fdd041e38a6a0677c472e64b21444f0cc6040","modified":1562900875603},{"_id":"public/images/0001.png","hash":"5646e88cc49bea8fb2744a8a131c94b2b55b266f","modified":1562900875619},{"_id":"public/images/0002.png","hash":"54f015dd14356d46b4a5eb4c42bb0b296f3c2b68","modified":1562900875619},{"_id":"public/images/0005.png","hash":"fcfdff32f6d724be3c3d12e709f9f3a460a3e274","modified":1562900875619},{"_id":"public/images/0003.png","hash":"7efe69ed1c19533b6bc5b6cb7cb7356303702513","modified":1562900875619},{"_id":"public/images/0009.png","hash":"785e1957c7aea321a1933bbaf37a7e7b834212e6","modified":1562900875619},{"_id":"public/images/0040.png","hash":"3a4142e60fcb16d71ee8f2eb5e4de31091d2676f","modified":1562900875619},{"_id":"public/images/0013.png","hash":"7b5bda6e7d94dbeacef12ef060e5e0d8e2fa4d32","modified":1562900875619},{"_id":"public/images/0012.png","hash":"15a7c4e801630c8a3f6bb67d0fd18e69eb8eacc7","modified":1562900875619},{"_id":"public/images/0019.png","hash":"013380c072a2fe829f2e10dbee5a76554ff20509","modified":1562900875619},{"_id":"public/images/0046.png","hash":"e07f0c042e640e7cd71e132f7f48d6360f09e3ca","modified":1562900875619},{"_id":"public/images/0190.png","hash":"c5929d6f6445ef0d9aa017a313d10dff0e6fa553","modified":1562900875619},{"_id":"public/images/105.png","hash":"be0006708b897b95df1253186474048473bb8bbe","modified":1562900875619},{"_id":"public/images/06.png","hash":"54707910862fdf7b148c90e36fa832f10c0d22fb","modified":1562900875619},{"_id":"public/images/141.png","hash":"accf4d56385ac11f9ae611c005ee807214bfc1af","modified":1562900875619},{"_id":"public/images/148.png","hash":"5533113be8fff9946f3ebca68666478732c18203","modified":1562900875619},{"_id":"public/images/195.png","hash":"240ea388434d019a8cddf1df5f986ec1877bda14","modified":1562900875619},{"_id":"public/images/94.png","hash":"5da31bf5172d88b611f6c4706effecb82420ea47","modified":1562900875619},{"_id":"public/images/2030.png","hash":"01e87e34ca69f7d33403860a9d59d0ac809162eb","modified":1562900875619},{"_id":"public/images/8111.png","hash":"3ee2a0a45a1121730ece4ce28b1f5208063e4c8a","modified":1562900875620},{"_id":"public/img/favicon.ico","hash":"c88cd0044daea8f5b87913d71c4ade2aa31387c9","modified":1562900875620},{"_id":"public/images/black_smile.png","hash":"10b24e9659ecc8748fe100c8e97a19dd47e7777b","modified":1562900875620},{"_id":"public/img/cc.png","hash":"ebce75a62b40976a72d43f0bd937d859ac24d87c","modified":1562900875620},{"_id":"public/images/black_smile-2.png","hash":"52f607e15843e2dc2a3ccde055811646bdc75e2f","modified":1562900875620},{"_id":"public/img/avatar.jpg","hash":"96f2506c587325147a383aad3ada8d5993e6cdf8","modified":1562900875620},{"_id":"public/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1562900875620},{"_id":"public/img/brand.jpg","hash":"0e237f1b433851c156e1f1cdaeb044054b3b9879","modified":1562900875620},{"_id":"public/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1562900875620},{"_id":"public/css/fonts/roboto/Roboto-Bold.woff2","hash":"933b866d09c2b087707a98dab64b3888865eeb96","modified":1562900875620},{"_id":"public/css/fonts/roboto/Roboto-Bold.woff","hash":"ee99cd87a59a9a5d4092c83232bb3eec67547425","modified":1562900875620},{"_id":"public/css/fonts/roboto/Roboto-Bold.eot","hash":"a76cd602f5188b9fbd4ba7443dcb9c064e3dbf10","modified":1562900875620},{"_id":"public/css/fonts/roboto/Roboto-Light.eot","hash":"42fe156996197e5eb0c0264c5d1bb3b4681f4595","modified":1562900875620},{"_id":"public/css/fonts/roboto/Roboto-Light.woff2","hash":"bbdc28b887400fcb340b504ec2904993af42a5d7","modified":1562900875620},{"_id":"public/css/fonts/roboto/Roboto-Medium.woff2","hash":"6cc1b73571af9e827c4e7e91418f476703cd4c4b","modified":1562900875620},{"_id":"public/css/fonts/roboto/Roboto-Regular.eot","hash":"77ae3e980ec03863ebe2587a8ef9ddfd06941db0","modified":1562900875620},{"_id":"public/css/fonts/roboto/Roboto-Medium.eot","hash":"1517f4b6e1c5d0e5198f937557253aac8fab0416","modified":1562900875620},{"_id":"public/css/fonts/roboto/Roboto-Light.woff","hash":"6300f659be9e834ab263efe2fb3c581d48b1e7b2","modified":1562900875620},{"_id":"public/css/fonts/roboto/Roboto-Medium.woff","hash":"d45f84922131364989ad6578c7a06b6b4fc22c34","modified":1562900875620},{"_id":"public/css/fonts/roboto/Roboto-Regular.woff2","hash":"ed1558b0541f5e01ce48c7db1588371b990eec19","modified":1562900875621},{"_id":"public/css/fonts/roboto/Roboto-Thin.eot","hash":"0790a51a848dbe7292c98f9d0459218bf1a8ffdd","modified":1562900875621},{"_id":"public/css/fonts/roboto/Roboto-Thin.woff2","hash":"2449e3dac5ddb7c3da8bb07450493b62d052758c","modified":1562900875621},{"_id":"public/css/fonts/roboto/Roboto-Regular.woff","hash":"74734dde8d94e7268170f9b994dedfbdcb5b3a15","modified":1562900875621},{"_id":"public/css/fonts/roboto/Roboto-Thin.woff","hash":"fbc3e71d456c96667d8082ab910e3946ef89240b","modified":1562900875621},{"_id":"public/programming/leetcode/day1-two-sum/exhaust-algorithm.png","hash":"3b8efaf057ad53ea51a96b0616b7f8bfd22816e1","modified":1562900875621},{"_id":"public/programming/leetcode/day1-two-sum/map-solution.png","hash":"b0783ee61fce6885811395c35d0ae4e80285f8c7","modified":1562900875621},{"_id":"public/programming/leetcode/day2-add-two-numbers/solution-1.png","hash":"c37a7a043dd0d2a2f62500fea8a7aca36e50819d","modified":1562900875621},{"_id":"public/programming/leetcode/day2-add-two-numbers/result-5.png","hash":"a06576a002b1e3f3c6faf5e5b208f1e56ffdcb9d","modified":1562900875621},{"_id":"public/programming/leetcode/day2-add-two-numbers/solution-2.png","hash":"8323b2f344c772a29efd3e14956843e208985fd7","modified":1562900875621},{"_id":"public/programming/leetcode/day2-add-two-numbers/solution-3.png","hash":"a0cf02fd5abd984375fe184ad4769bee0535795d","modified":1562900875621},{"_id":"public/programming/leetcode/complete-knapsack-problem/CodeCogsEqn.png","hash":"b7919c258abf6c3629ec728a1f69bc53033682f7","modified":1562900875621},{"_id":"public/programming/leetcode/day2-add-two-numbers/solution-4.png","hash":"d7138b9fd24239f3dd038290025303cb708f030b","modified":1562900875621},{"_id":"public/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-1.png","hash":"559e538203bb5ba394a1847d18d1bc4096e192a0","modified":1562900875621},{"_id":"public/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-2.png","hash":"a6de0d88dd139c1b00005c70c25921a5de1e5874","modified":1562900875621},{"_id":"public/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-4.png","hash":"d3ba153a5016766a8bb7b48f620682d15a4eec28","modified":1562900875621},{"_id":"public/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-3.png","hash":"1a0d033b1a81da9609492f7cf7401bb16b29823f","modified":1562900875621},{"_id":"public/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-5.png","hash":"02dfd8cc12f9897c0aae5476dc538289fdc3201c","modified":1562900875622},{"_id":"public/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-6.png","hash":"db7d2f6c169ac060351d7eb3bff1d4a948e0858d","modified":1562900875621},{"_id":"public/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-8.png","hash":"3abc7aa2193431ac85ff49e4498219f89fa93529","modified":1562900875622},{"_id":"public/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-submit-1.png","hash":"3ed8a1e50b491c67d72b22d5d68bbb8f9e632b3e","modified":1562900875622},{"_id":"public/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-submit-2.png","hash":"19fc70d759acd618de78e8815bb0050b9a5cc741","modified":1562900875622},{"_id":"public/programming/leetcode/day4-regular-expression-matching/result1.png","hash":"96a80b94fa15399f91e674b8ac08b5fd4fae7afc","modified":1562900875622},{"_id":"public/programming/leetcode/day4-regular-expression-matching/result3.png","hash":"271bb69cdb3c1856e9dc20738763cbb34b544708","modified":1562900875622},{"_id":"public/programming/leetcode/day4-regular-expression-matching/result2.png","hash":"bad7a69287401408d5e4d55009db9712dc66bc74","modified":1562900875622},{"_id":"public/uncategorized/shell/gotossh-v3-md/list-all-the-commands.gif","hash":"3ac4b3673a777c70ad514b09a512b0d1ec4fc3e1","modified":1562900875622},{"_id":"public/uncategorized/shell/gotossh-v3-md/list-all-the-servers.gif","hash":"53c1fc0d0e94da27756c6845cc140330e807160f","modified":1562900875622},{"_id":"public/uncategorized/shell/gotossh-v3-md/scp-jump-server-log.gif","hash":"17168f30b5568ce36602deb8ee4d4c7a8b9c32df","modified":1562900875622},{"_id":"public/programming/java/jvm/reachable/accessibility1.jpg","hash":"36ba36afdaa689c5cadd4919a834569d72fdb478","modified":1562900875622},{"_id":"public/programming/java/reference/reference-code-detail/reference-1.png","hash":"90330bc0125b7580e1421a7e3f409e5a703caf8e","modified":1562900875622},{"_id":"public/programming/java/jvm/reachable/accessibility2.png","hash":"281d56cfb09c2ac6654e604869f1c089bb19688b","modified":1562900875622},{"_id":"public/programming/java/reference/reference-code-detail/reference-2.png","hash":"a8dc3f3b71dcb3ace64dd22fd364972a8b2daf22","modified":1562900875622},{"_id":"public/programming/java/reference/soft-reference-code-detail/soft-reference-2.png","hash":"f07af2215f65766b68a5c3e932bc01e1ea4a0fc5","modified":1562900875622},{"_id":"public/programming/java/introduction/java-simple-example/java-simple-example-1.png","hash":"7be12cd9b902847ed3ca8ce7a6f06139103f1180","modified":1562900875622},{"_id":"public/programming/java/reference/soft-reference-code-detail/soft-reference-3.png","hash":"39f4779065da2ccd6dd355ff6fd1e72efaf4391f","modified":1562900875622},{"_id":"public/programming/java/introduction/java-simple-example/java-simple-example-2.png","hash":"404e3de6764fab8a109a7efceabfb4bc6942fb30","modified":1562900875622},{"_id":"public/programming/java/introduction/java-simple-example/java-simple-example-3.png","hash":"9b42950df71c6cb651d76dec741a4549e4855fd5","modified":1562900875623},{"_id":"public/programming/java/collection/weakhashmap-code-detail/weakhashmap-1.png","hash":"2d21b6d2b326191f28c04b070863c03614dc08fe","modified":1562900875623},{"_id":"public/programming/java/collection/weakhashmap-code-detail/weakhashmap-2.png","hash":"a97b7673b4d40163640e1a35540c2c2b51c8ed93","modified":1562900875623},{"_id":"public/programming/java/collection/weakhashmap-code-detail/0038.png","hash":"dc8ec7ec15f9d18d028fa4baa7b8edf7dcf9f587","modified":1562900875623},{"_id":"public/programming/java/introduction/java-ide/java-ide-3.png","hash":"5616c391ba4e9a1341b4c6213758924b9e8124d1","modified":1562900875623},{"_id":"public/programming/java/introduction/java-ide/java-ide-5.png","hash":"627cfbad99d15a6962df90269eb9df896a6b6021","modified":1562900875623},{"_id":"public/programming/java/introduction/java-ide/java-ide-6.png","hash":"bc4523f962ca5301e062c864166cf4cc2dfd6f34","modified":1562900875623},{"_id":"public/programming/java/introduction/java-ide/java-ide-8.png","hash":"311e7f7643a2facb45dc3165c938af1bd84b28b7","modified":1562900875623},{"_id":"public/programming/java/introduction/java-ide/java-ide-7.png","hash":"db6fcb1e3350c32db0a5ad41400ee7e22023eed1","modified":1562900875623},{"_id":"public/programming/java/introduction/java-ide/java-ide-9.png","hash":"b7cb86602219d3609159f856c4449b7b85ae0aac","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-windows/2-jdk-windows.png","hash":"4d1cb8168cde93a8aabef63c8d12a8ccb56a60e4","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-windows/4-jdk-windows.png","hash":"155d9ca099b6138a5f3c2df3b826f6ce972d847a","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-windows/3-jdk-windows.png","hash":"2a89504a729c391003e94d74941aeada3fde7e4a","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-windows/5-jdk-windows.png","hash":"ac4f6a18554f2d1aae972e1bf6737dd60551613d","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-windows/6-jdk-windows.png","hash":"f26f02913932acf206e345b96a2749c22d68a7c1","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-windows/7-jdk-windows.png","hash":"79f375c43ac760ce5a88aef12df9e788494f0643","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-windows/8-jdk-windows.png","hash":"884e1c6927bf1394dc9941de017deb3b9901daeb","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-windows/9-jdk-windows.png","hash":"8defa728fac888e8203a5e6151596c5ce15280d3","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-mac/10-jdk-mac.png","hash":"a058e42380742e3be7911c30ea4c54263f2e99e9","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-mac/12-jdk-mac.png","hash":"79b6a623b06142723ea9dc4981f3ef12ff3bcd75","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-mac/13-jdk-mac.png","hash":"aa4d7a93b28afb3424a5c107724b07cb9cbeed3d","modified":1562900875623},{"_id":"public/programming/java/introduction/java-environment-mac/14-jdk-mac.png","hash":"4bc54995d9f778084a8b486634bc30793f1592f0","modified":1562900875624},{"_id":"public/programming/java/introduction/java-environment-mac/16-jdk-mac.png","hash":"5451e575e4bf08b384335bb070bb46817edad5bd","modified":1562900875624},{"_id":"public/programming/java/introduction/java-environment-mac/5-jdk-mac.png","hash":"b65be8a8b49518b8fc8ea4f1c1b7d1113352180c","modified":1562900875624},{"_id":"public/programming/java/introduction/java-environment-mac/6-jdk-mac.png","hash":"cc0550022513036a612d666bab64f1876d703ec3","modified":1562900875624},{"_id":"public/programming/java/introduction/java-environment-mac/7-jdk-mac.png","hash":"57310fc56a96be434f0ad69eb6387a82f54d0d5a","modified":1562900875624},{"_id":"public/programming/java/introduction/java-environment-mac/8-jdk-mac.png","hash":"52eacf47993855414045b0719196da9001ccb153","modified":1562900875624},{"_id":"public/programming/java/introduction/java-environment-mac/9-jdk-mac.png","hash":"1c9dbad3045f234695be69fb4c27c0cd53ab1918","modified":1562900875624},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/5cdf6a292b1d070453.png","hash":"c1d176ce8d8531bc7aedc5042059d0de466d0c05","modified":1562900875624},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/5cdf6a655276187010.png","hash":"31c40871e367cb71244c6e8549c483b71cf262b5","modified":1562900875624},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/5cdf7e9f2047e23793.png","hash":"985f8790a13d24c512910d43eec74b4fd27a0b29","modified":1562900875624},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/5cdf7f0e86fbc84596.png","hash":"65b03d0d7632771862dce230e74aa9f16d4292e5","modified":1562900875624},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/5cdf7f4a7282234332.png","hash":"932ec5b8b6b5710942b97977fd9482aae12f1514","modified":1562900875624},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/5cdf7ec98fddd17705.png","hash":"01c4c5eafeb1dc753469677895b8d76b34d4eae3","modified":1562900875624},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/black_smile.jpg","hash":"1aea48378b0a27aa6aefd8bd9daab234758f22a4","modified":1562900875624},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/e8df70b9feab81ccabe8a2821dc2e9880cddc9e4f2ce-zo9QsQ_fw658.jpeg","hash":"a4bdeb9804e3bc479a184a3ce2ff8f4db8d7153c","modified":1562900875624},{"_id":"public/css/fonts/roboto/Roboto-Light.ttf","hash":"e321c183e2b75ee19813892b7bac8d7c411cb88a","modified":1562900875655},{"_id":"public/css/fonts/roboto/Roboto-Regular.ttf","hash":"824b5480c977a8166e177e5357d13164ccc45f47","modified":1562900875655},{"_id":"public/css/fonts/roboto/Roboto-Bold.ttf","hash":"47327df0f35e7cd7c8645874897a7449697544ae","modified":1562900875655},{"_id":"public/css/fonts/roboto/Roboto-Medium.ttf","hash":"6060ca726b9760b76f7c347dce9d2fa1fe42ec92","modified":1562900875655},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1562900875654},{"_id":"public/css/fonts/roboto/Roboto-Thin.ttf","hash":"173ed64528b4d010a76d8d38deb1d7e7eed58eda","modified":1562900875655},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1562900875655},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_339C2E86CD88-1.jpeg","hash":"d32fa8f45ebc1d660c76fd23ae6ee87a296989e5","modified":1562900875655},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_9B418BF0E7A5-1.jpeg","hash":"61c0f49bbc8b6840ebe8a95f78a8302e0b5ce2eb","modified":1562900875655},{"_id":"public/uncategorized/shell/gotossh-v3-md/scp-online-server-file.gif","hash":"4da5e5d7a3b0b7dfec1598120813bd0ff4dc68fc","modified":1562900875655},{"_id":"public/programming/java/collection/weakhashmap-code-detail/weakhashmap-3.png","hash":"a1971c4b5102b3a6c222ed1014712e399a6e3ce2","modified":1562900875656},{"_id":"public/programming/java/collection/weakhashmap-code-detail/weakhashmap-4.png","hash":"ca0ae5597535eb89f027c74cf3e92369cffb0bd4","modified":1562900875656},{"_id":"public/programming/java/introduction/java-ide/java-ide-4.png","hash":"41e84a42900e891648f3b37130a080606f531181","modified":1562900875656},{"_id":"public/programming/java/introduction/java-environment-windows/1-jdk-windows.png","hash":"8f643602c33a1a98b96e46349952dea4dae4981b","modified":1562900875656},{"_id":"public/programming/java/introduction/java-environment-mac/11-jdk-mac.png","hash":"09153cd9a58d2ea84f64bc4105fee92a0691c221","modified":1562900875656},{"_id":"public/programming/java/introduction/java-environment-mac/15-jdk-mac.png","hash":"115d45c94471ff20db11d361a5111108181273f9","modified":1562900875656},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/5cdf7daf74e9241031.png","hash":"62f8083a628c45dd76c5da72fabd1dbbc3882413","modified":1562900875656},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/carbon (1).png","hash":"6004cb2e74dd5627b4f5fe0e34ba7bd7053d1964","modified":1562900875656},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/carbon (4).png","hash":"34143640204e2fd3f306af145f0c4a8128cb88af","modified":1562900875656},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/carbon (3).png","hash":"263726c337b2f97e315a7005fe4ad21915da8577","modified":1562900875656},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/carbon (7).png","hash":"0b531eb961c87367efa631c64fb06a656eeb3570","modified":1562900875656},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/carbon (8).png","hash":"0d2524fa2e1836a075e32c69d3faf8045478e8af","modified":1562900875656},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/carbon (9).png","hash":"f5f7746eb83ac4a8801422a3b730ecd399ba1191","modified":1562900875657},{"_id":"public/js/main.min.js","hash":"8acf4480f8ab859423b8926b9b790c67b5a77276","modified":1562900875667},{"_id":"public/js/search.js","hash":"a1de7e7a2ef8330ebcd9f3a7a4622b3bac44e4f3","modified":1562900875667},{"_id":"public/js/search.min.js","hash":"a8a450bb8b1ca9ad577052addcbd3393f1af6c6a","modified":1562900875667},{"_id":"public/js/main.js","hash":"300b2e963683ced162e28afcd24ffc970fc23ac2","modified":1562900875667},{"_id":"public/img/alipay.jpg","hash":"d2e76219d3f688a805c9f30e004f48e79daf03ab","modified":1562900875667},{"_id":"public/img/wechat.jpg","hash":"c7887fd95a3383371b957667d4bfbc3c8c2cbe53","modified":1562900875667},{"_id":"public/css/fonts/fontawesome/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1562900875667},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1562900875667},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1562900875667},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_ECCF05DEC924-1.jpeg","hash":"611b425e7c449d8b1ac8b83e22784fefff9b7ce6","modified":1562900875668},{"_id":"public/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-7.png","hash":"62c8c5ac7132440be42826117bae9f8b47ab91b9","modified":1562900875667},{"_id":"public/programming/leetcode/complete-knapsack-problem/IMG_510B188AF928-1.jpeg","hash":"e3b84b5c1721d80fcd21421fc0d3c03397c31062","modified":1562900875668},{"_id":"public/programming/leetcode/complete-knapsack-problem/IMG_5E156B07E228-1.jpeg","hash":"5e9e32ac8427904315a13e63f6ea1659e5c83a31","modified":1562900875668},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_007B2F2632D2-1.jpeg","hash":"a886afc0d50b5d55fb0bd7f80911c80ddb12d245","modified":1562900875668},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_13B30A586085-1.jpeg","hash":"97ac09688a58a030dd08163a3b1fbe17763e5b1e","modified":1562900875668},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_142D1BF09ED7-1.jpeg","hash":"c8a40ab3922b238859ed758f6312c31956aaf7ab","modified":1562900875669},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_2ABCC82C89F7-1.jpeg","hash":"42fe2d940da23209ff873b3b5a46733f701711a9","modified":1562900875669},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_16ACD9FB2E1C-1.jpeg","hash":"8b609a9044ace8b5d2384476dc77e13d9585a635","modified":1562900875669},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_37EAFFF048DB-1.jpeg","hash":"32c7f5e0201113efba7873dba19ca2994c596df8","modified":1562900875669},{"_id":"public/programming/leetcode/day4-regular-expression-matching/example1.png","hash":"dda32c7e119dcb0b269c466ad35190eb1c9c9c50","modified":1562900875669},{"_id":"public/programming/leetcode/day4-regular-expression-matching/example2.png","hash":"a0ced037654761a1ac935eb5163b7c4f2735d8d9","modified":1562900875669},{"_id":"public/programming/leetcode/day4-regular-expression-matching/example3.png","hash":"ac38425fe1aaea80be4b06bef607c4f4fbb6cdc5","modified":1562900875669},{"_id":"public/programming/java/introduction/java-environment-mac/2-jdk-mac.png","hash":"bef4170c81af99efbdb89dafa2094fd127648889","modified":1562900875668},{"_id":"public/programming/java/introduction/java-started/java-started-1.png","hash":"83c77b655ea24647ff6c55c830924baa4e90b845","modified":1562900875670},{"_id":"public/uncategorized/shell/gotossh-v3-md/login-jump-server.gif","hash":"697ca092e5f311883f5fdd97f0291f012a2f20b5","modified":1562900875669},{"_id":"public/uncategorized/shell/gotossh-v3-md/login-online-server.gif","hash":"fdd2a5fa10106a1dd5ae1d6b5f513119013e1be8","modified":1562900875670},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/carbon (2).png","hash":"51d0275bcdf1a206c8f6a3757379facb0ef77af9","modified":1562900875670},{"_id":"public/programming/leetcode/complete-knapsack-problem/IMG_6B67BF7CC3A7-1.jpeg","hash":"4b557b85348bc8a902e2f28d3d33ebf505822f78","modified":1562900875681},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_F047D511640B-1.jpeg","hash":"ff5694f468386d06c7037fc7d9e485110dfb1cac","modified":1562900875680},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_CD2E7F29F646-1.jpeg","hash":"1b6d131d885afb6517dfab9573f26249047ad238","modified":1562900875680},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_482BA28A5E66-1.jpeg","hash":"75cb1c8b961cc7807d3375c5bcf99040f0c6a231","modified":1562900875680},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_04E34B950C69-1.jpeg","hash":"18254fec11dc75a281c7888a9739f4289c2de089","modified":1562900875679},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_E5B595A5513F-1.jpeg","hash":"0ba5261b42358309b7de36214f9275972bbd0e53","modified":1562900875681},{"_id":"public/uncategorized/shell/gotossh-update/login-server3.gif","hash":"5b27770c73eea62a9947337541d03d3b1f2a5c2c","modified":1562900875681},{"_id":"public/programming/leetcode/day4-regular-expression-matching/example4.png","hash":"b4bd082cda695f391cba78a07d193ef653e598dc","modified":1562900875679},{"_id":"public/programming/java/introduction/java-environment-mac/3-jdk-mac.png","hash":"0b4bb944db5070a12b706f7ffaf451f5d558cfd9","modified":1562900875681},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/carbon (5).png","hash":"897b002b8ecfc3b72d7db84d308bdbc0306e2b34","modified":1562900875682},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/carbon.png","hash":"6606e0b25abc19f312e4b415f26c5ba116b4170a","modified":1562900875682},{"_id":"public/programming/java/introduction/java-ide/java-ide-2.png","hash":"9e81a827e3e5793b7f262df0eda5de1746c65899","modified":1562900875681},{"_id":"public/programming/leetcode/day4-regular-expression-matching/solution1-3.png","hash":"738022ef720eb066fa3064debc8e113d98cf4dfb","modified":1562900875692},{"_id":"public/uncategorized/shell/gotossh-update/login-server4.gif","hash":"0ca0658dd2201971061ab2f7f36aa39cf4d36ec3","modified":1562900875692},{"_id":"public/programming/leetcode/day4-regular-expression-matching/fib.png","hash":"b126016de12528c6b9f8e0d0a62b6ab9d593ed49","modified":1562900875692},{"_id":"public/programming/leetcode/day4-regular-expression-matching/solution2-1.png","hash":"416121b91302490bcbf2e5c46be4302c82720b49","modified":1562900875692},{"_id":"public/programming/leetcode/day4-regular-expression-matching/solution2-2.png","hash":"d993f366178f0f1cba86acfa7df692a23cd60f20","modified":1562900875693},{"_id":"public/uncategorized/shell/gotossh-v3-md/login-and-view-the-log.gif","hash":"760facffcea818ad86d4d5fa3379cd701aa1266f","modified":1562900875693},{"_id":"public/programming/java/introduction/java-environment-mac/4-jdk-mac.png","hash":"df019bad4cac078997c8a067a59d69be97a34adc","modified":1562900875693},{"_id":"public/programming/java/problem/the-correct-operation-of-arrays/carbon (6).png","hash":"2ab560cd392d00e609d7b0415b4a8a17ece13efa","modified":1562900875693},{"_id":"public/programming/leetcode/day4-regular-expression-matching/example5.png","hash":"8152c6859b65aaee0e93af5d3f8f62ef298be3d7","modified":1562900875702},{"_id":"public/programming/leetcode/dp-01-knapsack-problem/IMG_BFE9B7063670-1.jpeg","hash":"49fcf7097fba4b21429e8d0f9ab8c9d8e3416641","modified":1562900875702},{"_id":"public/programming/leetcode/day4-regular-expression-matching/solution1-1.png","hash":"528e20077405ad881883b3f3420eb1f50a1d5ccd","modified":1562900875703},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1562900875714},{"_id":"public/uncategorized/shell/gotossh-update/scp-server3-log.gif","hash":"294dd79b320bc6358c880c50a2d1596887678089","modified":1562900875714},{"_id":"public/programming/leetcode/day4-regular-expression-matching/solution1-2.png","hash":"c501ae2762abc3dfaae03bc3d09f01278a3df22c","modified":1562900876022},{"_id":"public/uncategorized/shell/gotossh-v3-md/login-and-view-the-log2.gif","hash":"bc7937809cde4bb149ca4c5acbc82384697e9d26","modified":1562900876023},{"_id":"public/programming/leetcode/day4-regular-expression-matching/solution1-4.png","hash":"c52a83829385942135d81db7722ea5de30e566f7","modified":1562900876023},{"_id":"public/uncategorized/shell/gotossh-update/jump.gif","hash":"a03dd35e1dab365e7c59c3f673fb7fc44fdd51d2","modified":1562900876033},{"_id":"public/uncategorized/shell/gotossh-update/server4-log.gif","hash":"333a950b783e49857be08a31e166b47703126cda","modified":1562900876033},{"_id":"public/css/style.css","hash":"4f59712181405c963fe7e80740071022050bc096","modified":1562900876033},{"_id":"public/programming/java/introduction/java-ide/java-ide-1.png","hash":"ab6bb5ebfc5b292263824a72ba6eeca819f31f14","modified":1562900876047},{"_id":"public/programming/java/introduction/java-environment-mac/1-jdk-mac.png","hash":"4acf222e3a5d9728d358cd16a2f0d4300ae6700e","modified":1562900876047},{"_id":"public/uncategorized/shell/gotossh-update/server3-log.gif","hash":"a88a6d29cdc855b2c2d0e96f27f725c2b82e0ab0","modified":1562900876056},{"_id":"public/uncategorized/shell/gotossh-update/scp-server4-log.gif","hash":"56308e22f435b200fe3a7773b73d4bff7c6647d5","modified":1562900876069},{"_id":"public/uncategorized/shell/gotossh-v3-md/login.gif","hash":"e6a41bf227897792b4447974fe47d62d1b24227f","modified":1562900876074},{"_id":"public/uncategorized/shell/gotossh-v3-md/login-online-server-and-view-the-log.gif","hash":"01f0cc8dcd4663919e64f1375c45a2dc6f4481bc","modified":1562900876077},{"_id":"source/_posts/mysql/index/how-to-insert-10-million-pieces-of-data-into-mysql.md","hash":"0c865c0685f94a2380a76a8e4491f95bd1c05228","modified":1562900638135},{"_id":"source/_posts/mysql/index/mysql-index-01.md","hash":"923aea922100aa4a2898605abdbabbabad759388","modified":1559612466712},{"_id":"public/archives/2019/06/index.html","hash":"d4ae684d1f43f610a1dd857a87213bc2b6d385be","modified":1562900875595},{"_id":"public/tags/index/index.html","hash":"2bcc1554cbd48fb361a152f4279acc83d1dbe3df","modified":1562900875596},{"_id":"public/tags/test/index.html","hash":"c15497992d88d4760583b105ff84d7de94778013","modified":1562900875596},{"_id":"public/uncategorized/mysql/index/how-to-insert-10-million-pieces-of-data-into-mysql.html","hash":"1c75ed6952aa63f01223826787905253971a75c3","modified":1562900875596},{"_id":"public/uncategorized/mysql/index/mysql-index-01.html","hash":"da91d96b10b829618c04666770b0af638cbd9fdd","modified":1562900875596}],"Category":[{"name":"","_id":"cjxze3gkm00030cvw03u1c4h3"},{"name":"","_id":"cjxze3gox001h0cvw3ibxwq3f"}],"Data":[{"_id":"menu","data":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}],"Page":[{"layout":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"layout: tags\ncomments: false\n---","date":"2019-06-04T01:29:57.644Z","updated":"2019-06-04T01:29:57.644Z","path":"tags/index.html","_id":"cjxze3g9j00000cvwox4lhog8","title":"","content":"","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":""},{"layout":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"layout: categories\ncomments: false\n---","date":"2019-06-04T01:29:57.638Z","updated":"2019-06-04T01:29:57.638Z","path":"categories/index.html","_id":"cjxze3g9j00010cvw5pg2avpa","title":"","content":"","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":""}],"Post":[{"title":"Java ","date":"2017-12-29T11:55:51.000Z","_content":"\n## \n\nJavaJava\n\n## Java \n\n1. [Java](../java/introduction/java-started.md)\n2. [Java](../java/introduction/java-environment.md)\n3. [JavaWindows](../java/introduction/java-environment-windows.md)\n4. [JavaMac](../java/introduction/java-environment-mac.md)\n5. [Java IDEA](../java/introduction/java-ide.md)\n6. [Java](../java/introduction/java-introduction.md)\n7. [Java](../java/introduction/java-simple-example.md)\n8. [Java](../java/introduction/java-primer-conclusion.md)\n\n## Java \n\n1. [Java](../java/basic/java-basic.md)\n2. [Java](../java/basic/java-simple-structure.md)\n3. [Java](../java/basic/java-variable.md)\n4. [Java](../java/basic/java-class.md)\n5. [packageimport](../java/basic/java-package.md)\n6. Java\n7. \n8. \n9. \n10. \n11. \n12. \n13. \n14. \n15. \n16. \n17. \n18. \n19. Object\n20. \n21. \n22. \n23. \n24. \n25. \n26. \n27. \n28. \n29. \n\n## Java \n\n1. Java\n2. \n3. \n4. \n5. \n6. \n7. \n8. JVM\n9. \n\n## Java\n\n[WeakHashMap](../java/collections/weakhashmap-code-detail.md)\n\n\n\n### Java  \n\n[](../java/reference/four-kinds-of-reference.md)\n\n\n\n### Java  \n\n\n\n### Java  \n\n\n## Java\n\n\n\n## Java Web \n\n::: tip \nJava Web\n:::\n\n### Java EE  \n\n\n\n### Spring  \n\n\n\n### Spring Boot  \n\n\n\n### Spring  Security\n\n\n\n### Spring  Webflux\n\n\n\n### Mybatis  \n\n\n\n### Hibernate  \n\n\n\n### Spring  Data JPA\n\n\n\n##  \n\n::: tip \n\n:::\n\n### Domain-Driven-Design \n\n1. \n\n###  \n\n##  \n\n\n\n### Netty  \n\n\n\n### Tomcat  \n\n\n\n### Jetty \n\n\n\n### Nginx \n\n\n\n## RPC \n\n\n\n### Dubbo  \n\n\n\n### Thrift  \n\n\n\n### GRPC  \n\n\n\n### SOFARPC  \n\n\n\n### Motan  \n\n\n\n### Ribbon  \n\n\n\n## \n\n\n\n### Kafka  \n\n\n\n### RocketMQ  \n\n\n\n### RabbitMQ  \n\n\n\n### ActiveMQ  \n\n\n\n##  \n\n\n\n### zookeeper  \n\n\n\n###   \n\n\n\n###   \n\n\n\n### MyCat  \n\n\n\n### Sharding JDBC  \n\n\n\n### Sharding Sphere  \n\n\n\n##  \n\n\n\n### SkyWalking  \n\n\n\n### Zipkin  \n\n### Pinpoint\n\n### CAT\n\n## \n\n### Apollo  \n\n### Disconf  \n\n### Spring Cloud Config\n\n## \n\n### Elastic Job Lite  \n\n### Elastic Job Cloud  \n\n### Quartz  \n\n### XXL-Job  \n\n## \n\n### Redis  \n\n### Mysql  \n\n### MongoDB  \n\n### Memcached  \n\n### Neo4J  \n\n### TiDB  \n\n### HikariCP  \n\n### Druid  \n\n## \n\n###   \n\n### \n\n### Leecode\n\n## \n\n### Dubbo\n\n### Spring Cloud\n\n## Devops\n\n### Linux\n\n### Nginx\n\n### Docker\n\n### Swarm\n\n### kubernetes\n\n## \n\n### Jenkins\n\n### TeamCity\n\n### \n\n## ELK\n\n### Lucene\n\n### ElasticSearch\n\n### Logstash\n\n### Kibana\n\n### Solr\n\n## \n\n### python  \n\n### R\n\n## \n\n### Hadoop\n\n### HBase  \n\n### Hive  \n\n### Spark  \n\n## \n\n### Spark Streaming \n\n### Flink\n\n### Storming\n\n## \n\n### UML\n\n<img src=\"8101.png\"/>\n\nQQ529253292","source":"_posts/guide/background-skill.md","raw":"---\ntitle: Java \ntags: \n - Java\n - \ncategories: \ndate: 2017-12-29 19:55:51\n---\n\n## \n\nJavaJava\n\n## Java \n\n1. [Java](../java/introduction/java-started.md)\n2. [Java](../java/introduction/java-environment.md)\n3. [JavaWindows](../java/introduction/java-environment-windows.md)\n4. [JavaMac](../java/introduction/java-environment-mac.md)\n5. [Java IDEA](../java/introduction/java-ide.md)\n6. [Java](../java/introduction/java-introduction.md)\n7. [Java](../java/introduction/java-simple-example.md)\n8. [Java](../java/introduction/java-primer-conclusion.md)\n\n## Java \n\n1. [Java](../java/basic/java-basic.md)\n2. [Java](../java/basic/java-simple-structure.md)\n3. [Java](../java/basic/java-variable.md)\n4. [Java](../java/basic/java-class.md)\n5. [packageimport](../java/basic/java-package.md)\n6. Java\n7. \n8. \n9. \n10. \n11. \n12. \n13. \n14. \n15. \n16. \n17. \n18. \n19. Object\n20. \n21. \n22. \n23. \n24. \n25. \n26. \n27. \n28. \n29. \n\n## Java \n\n1. Java\n2. \n3. \n4. \n5. \n6. \n7. \n8. JVM\n9. \n\n## Java\n\n[WeakHashMap](../java/collections/weakhashmap-code-detail.md)\n\n\n\n### Java  \n\n[](../java/reference/four-kinds-of-reference.md)\n\n\n\n### Java  \n\n\n\n### Java  \n\n\n## Java\n\n\n\n## Java Web \n\n::: tip \nJava Web\n:::\n\n### Java EE  \n\n\n\n### Spring  \n\n\n\n### Spring Boot  \n\n\n\n### Spring  Security\n\n\n\n### Spring  Webflux\n\n\n\n### Mybatis  \n\n\n\n### Hibernate  \n\n\n\n### Spring  Data JPA\n\n\n\n##  \n\n::: tip \n\n:::\n\n### Domain-Driven-Design \n\n1. \n\n###  \n\n##  \n\n\n\n### Netty  \n\n\n\n### Tomcat  \n\n\n\n### Jetty \n\n\n\n### Nginx \n\n\n\n## RPC \n\n\n\n### Dubbo  \n\n\n\n### Thrift  \n\n\n\n### GRPC  \n\n\n\n### SOFARPC  \n\n\n\n### Motan  \n\n\n\n### Ribbon  \n\n\n\n## \n\n\n\n### Kafka  \n\n\n\n### RocketMQ  \n\n\n\n### RabbitMQ  \n\n\n\n### ActiveMQ  \n\n\n\n##  \n\n\n\n### zookeeper  \n\n\n\n###   \n\n\n\n###   \n\n\n\n### MyCat  \n\n\n\n### Sharding JDBC  \n\n\n\n### Sharding Sphere  \n\n\n\n##  \n\n\n\n### SkyWalking  \n\n\n\n### Zipkin  \n\n### Pinpoint\n\n### CAT\n\n## \n\n### Apollo  \n\n### Disconf  \n\n### Spring Cloud Config\n\n## \n\n### Elastic Job Lite  \n\n### Elastic Job Cloud  \n\n### Quartz  \n\n### XXL-Job  \n\n## \n\n### Redis  \n\n### Mysql  \n\n### MongoDB  \n\n### Memcached  \n\n### Neo4J  \n\n### TiDB  \n\n### HikariCP  \n\n### Druid  \n\n## \n\n###   \n\n### \n\n### Leecode\n\n## \n\n### Dubbo\n\n### Spring Cloud\n\n## Devops\n\n### Linux\n\n### Nginx\n\n### Docker\n\n### Swarm\n\n### kubernetes\n\n## \n\n### Jenkins\n\n### TeamCity\n\n### \n\n## ELK\n\n### Lucene\n\n### ElasticSearch\n\n### Logstash\n\n### Kibana\n\n### Solr\n\n## \n\n### python  \n\n### R\n\n## \n\n### Hadoop\n\n### HBase  \n\n### Hive  \n\n### Spark  \n\n## \n\n### Spark Streaming \n\n### Flink\n\n### Storming\n\n## \n\n### UML\n\n<img src=\"8101.png\"/>\n\nQQ529253292","slug":"guide/background-skill","published":1,"updated":"2019-06-04T01:29:57.094Z","_id":"cjxze3gkc00020cvw5rji4j8t","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<h2 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h2><ol>\n<li><a href=\"../java/introduction/java-started.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment-windows.md\">JavaWindows</a></li>\n<li><a href=\"../java/introduction/java-environment-mac.md\">JavaMac</a></li>\n<li><a href=\"../java/introduction/java-ide.md\">Java IDEA</a></li>\n<li><a href=\"../java/introduction/java-introduction.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-simple-example.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-primer-conclusion.md\">Java</a></li>\n</ol>\n<h2 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h2><ol>\n<li><a href=\"../java/basic/java-basic.md\">Java</a></li>\n<li><a href=\"../java/basic/java-simple-structure.md\">Java</a></li>\n<li><a href=\"../java/basic/java-variable.md\">Java</a></li>\n<li><a href=\"../java/basic/java-class.md\">Java</a></li>\n<li><a href=\"../java/basic/java-package.md\">packageimport</a></li>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>Object</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<h2 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h2><ol>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li></li>\n</ol>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p><a href=\"../java/collections/weakhashmap-code-detail.md\">WeakHashMap</a></p>\n<h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><p><a href=\"../java/reference/four-kinds-of-reference.md\"></a></p>\n<h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><h2 id=\"Java-Web-\"><a href=\"#Java-Web-\" class=\"headerlink\" title=\"Java Web \"></a>Java Web </h2><p>::: tip <br>Java Web<br>:::</p>\n<h3 id=\"Java-EE\"><a href=\"#Java-EE\" class=\"headerlink\" title=\"Java EE\"></a>Java EE</h3><h3 id=\"Spring\"><a href=\"#Spring\" class=\"headerlink\" title=\"Spring\"></a>Spring</h3><h3 id=\"Spring-Boot\"><a href=\"#Spring-Boot\" class=\"headerlink\" title=\"Spring Boot\"></a>Spring Boot</h3><h3 id=\"Spring-Security\"><a href=\"#Spring-Security\" class=\"headerlink\" title=\"Spring  Security\"></a>Spring  Security</h3><h3 id=\"Spring-Webflux\"><a href=\"#Spring-Webflux\" class=\"headerlink\" title=\"Spring  Webflux\"></a>Spring  Webflux</h3><h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h3 id=\"Hibernate\"><a href=\"#Hibernate\" class=\"headerlink\" title=\"Hibernate\"></a>Hibernate</h3><h3 id=\"Spring-Data-JPA\"><a href=\"#Spring-Data-JPA\" class=\"headerlink\" title=\"Spring  Data JPA\"></a>Spring  Data JPA</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip <br><br>:::</p>\n<h3 id=\"Domain-Driven-Design\"><a href=\"#Domain-Driven-Design\" class=\"headerlink\" title=\"Domain-Driven-Design\"></a>Domain-Driven-Design</h3><ol>\n<li></li>\n</ol>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Netty\"><a href=\"#Netty\" class=\"headerlink\" title=\"Netty\"></a>Netty</h3><h3 id=\"Tomcat\"><a href=\"#Tomcat\" class=\"headerlink\" title=\"Tomcat\"></a>Tomcat</h3><h3 id=\"Jetty\"><a href=\"#Jetty\" class=\"headerlink\" title=\"Jetty\"></a>Jetty</h3><h3 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><h2 id=\"RPC\"><a href=\"#RPC\" class=\"headerlink\" title=\"RPC\"></a>RPC</h2><h3 id=\"Dubbo\"><a href=\"#Dubbo\" class=\"headerlink\" title=\"Dubbo\"></a>Dubbo</h3><h3 id=\"Thrift\"><a href=\"#Thrift\" class=\"headerlink\" title=\"Thrift\"></a>Thrift</h3><h3 id=\"GRPC\"><a href=\"#GRPC\" class=\"headerlink\" title=\"GRPC\"></a>GRPC</h3><h3 id=\"SOFARPC\"><a href=\"#SOFARPC\" class=\"headerlink\" title=\"SOFARPC\"></a>SOFARPC</h3><h3 id=\"Motan\"><a href=\"#Motan\" class=\"headerlink\" title=\"Motan\"></a>Motan</h3><h3 id=\"Ribbon\"><a href=\"#Ribbon\" class=\"headerlink\" title=\"Ribbon\"></a>Ribbon</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Kafka\"><a href=\"#Kafka\" class=\"headerlink\" title=\"Kafka\"></a>Kafka</h3><h3 id=\"RocketMQ\"><a href=\"#RocketMQ\" class=\"headerlink\" title=\"RocketMQ\"></a>RocketMQ</h3><h3 id=\"RabbitMQ\"><a href=\"#RabbitMQ\" class=\"headerlink\" title=\"RabbitMQ\"></a>RabbitMQ</h3><h3 id=\"ActiveMQ\"><a href=\"#ActiveMQ\" class=\"headerlink\" title=\"ActiveMQ\"></a>ActiveMQ</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"zookeeper\"><a href=\"#zookeeper\" class=\"headerlink\" title=\"zookeeper\"></a>zookeeper</h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"MyCat\"><a href=\"#MyCat\" class=\"headerlink\" title=\"MyCat\"></a>MyCat</h3><h3 id=\"Sharding-JDBC\"><a href=\"#Sharding-JDBC\" class=\"headerlink\" title=\"Sharding JDBC\"></a>Sharding JDBC</h3><h3 id=\"Sharding-Sphere\"><a href=\"#Sharding-Sphere\" class=\"headerlink\" title=\"Sharding Sphere\"></a>Sharding Sphere</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"SkyWalking\"><a href=\"#SkyWalking\" class=\"headerlink\" title=\"SkyWalking\"></a>SkyWalking</h3><h3 id=\"Zipkin\"><a href=\"#Zipkin\" class=\"headerlink\" title=\"Zipkin\"></a>Zipkin</h3><h3 id=\"Pinpoint\"><a href=\"#Pinpoint\" class=\"headerlink\" title=\"Pinpoint\"></a>Pinpoint</h3><h3 id=\"CAT\"><a href=\"#CAT\" class=\"headerlink\" title=\"CAT\"></a>CAT</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Apollo\"><a href=\"#Apollo\" class=\"headerlink\" title=\"Apollo\"></a>Apollo</h3><h3 id=\"Disconf\"><a href=\"#Disconf\" class=\"headerlink\" title=\"Disconf\"></a>Disconf</h3><h3 id=\"Spring-Cloud-Config\"><a href=\"#Spring-Cloud-Config\" class=\"headerlink\" title=\"Spring Cloud Config\"></a>Spring Cloud Config</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Elastic-Job-Lite\"><a href=\"#Elastic-Job-Lite\" class=\"headerlink\" title=\"Elastic Job Lite\"></a>Elastic Job Lite</h3><h3 id=\"Elastic-Job-Cloud\"><a href=\"#Elastic-Job-Cloud\" class=\"headerlink\" title=\"Elastic Job Cloud\"></a>Elastic Job Cloud</h3><h3 id=\"Quartz\"><a href=\"#Quartz\" class=\"headerlink\" title=\"Quartz\"></a>Quartz</h3><h3 id=\"XXL-Job\"><a href=\"#XXL-Job\" class=\"headerlink\" title=\"XXL-Job\"></a>XXL-Job</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Redis\"><a href=\"#Redis\" class=\"headerlink\" title=\"Redis\"></a>Redis</h3><h3 id=\"Mysql\"><a href=\"#Mysql\" class=\"headerlink\" title=\"Mysql\"></a>Mysql</h3><h3 id=\"MongoDB\"><a href=\"#MongoDB\" class=\"headerlink\" title=\"MongoDB\"></a>MongoDB</h3><h3 id=\"Memcached\"><a href=\"#Memcached\" class=\"headerlink\" title=\"Memcached\"></a>Memcached</h3><h3 id=\"Neo4J\"><a href=\"#Neo4J\" class=\"headerlink\" title=\"Neo4J\"></a>Neo4J</h3><h3 id=\"TiDB\"><a href=\"#TiDB\" class=\"headerlink\" title=\"TiDB\"></a>TiDB</h3><h3 id=\"HikariCP\"><a href=\"#HikariCP\" class=\"headerlink\" title=\"HikariCP\"></a>HikariCP</h3><h3 id=\"Druid\"><a href=\"#Druid\" class=\"headerlink\" title=\"Druid\"></a>Druid</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"Leecode\"><a href=\"#Leecode\" class=\"headerlink\" title=\"Leecode\"></a>Leecode</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Dubbo-1\"><a href=\"#Dubbo-1\" class=\"headerlink\" title=\"Dubbo\"></a>Dubbo</h3><h3 id=\"Spring-Cloud\"><a href=\"#Spring-Cloud\" class=\"headerlink\" title=\"Spring Cloud\"></a>Spring Cloud</h3><h2 id=\"Devops\"><a href=\"#Devops\" class=\"headerlink\" title=\"Devops\"></a>Devops</h2><h3 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h3><h3 id=\"Nginx-1\"><a href=\"#Nginx-1\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><h3 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h3><h3 id=\"Swarm\"><a href=\"#Swarm\" class=\"headerlink\" title=\"Swarm\"></a>Swarm</h3><h3 id=\"kubernetes\"><a href=\"#kubernetes\" class=\"headerlink\" title=\"kubernetes\"></a>kubernetes</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Jenkins\"><a href=\"#Jenkins\" class=\"headerlink\" title=\"Jenkins\"></a>Jenkins</h3><h3 id=\"TeamCity\"><a href=\"#TeamCity\" class=\"headerlink\" title=\"TeamCity\"></a>TeamCity</h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h2 id=\"ELK\"><a href=\"#ELK\" class=\"headerlink\" title=\"ELK\"></a>ELK</h2><h3 id=\"Lucene\"><a href=\"#Lucene\" class=\"headerlink\" title=\"Lucene\"></a>Lucene</h3><h3 id=\"ElasticSearch\"><a href=\"#ElasticSearch\" class=\"headerlink\" title=\"ElasticSearch\"></a>ElasticSearch</h3><h3 id=\"Logstash\"><a href=\"#Logstash\" class=\"headerlink\" title=\"Logstash\"></a>Logstash</h3><h3 id=\"Kibana\"><a href=\"#Kibana\" class=\"headerlink\" title=\"Kibana\"></a>Kibana</h3><h3 id=\"Solr\"><a href=\"#Solr\" class=\"headerlink\" title=\"Solr\"></a>Solr</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"python\"><a href=\"#python\" class=\"headerlink\" title=\"python\"></a>python</h3><h3 id=\"R\"><a href=\"#R\" class=\"headerlink\" title=\"R\"></a>R</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Hadoop\"><a href=\"#Hadoop\" class=\"headerlink\" title=\"Hadoop\"></a>Hadoop</h3><h3 id=\"HBase\"><a href=\"#HBase\" class=\"headerlink\" title=\"HBase\"></a>HBase</h3><h3 id=\"Hive\"><a href=\"#Hive\" class=\"headerlink\" title=\"Hive\"></a>Hive</h3><h3 id=\"Spark\"><a href=\"#Spark\" class=\"headerlink\" title=\"Spark\"></a>Spark</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Spark-Streaming\"><a href=\"#Spark-Streaming\" class=\"headerlink\" title=\"Spark Streaming\"></a>Spark Streaming</h3><h3 id=\"Flink\"><a href=\"#Flink\" class=\"headerlink\" title=\"Flink\"></a>Flink</h3><h3 id=\"Storming\"><a href=\"#Storming\" class=\"headerlink\" title=\"Storming\"></a>Storming</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"UML\"><a href=\"#UML\" class=\"headerlink\" title=\"UML\"></a>UML</h3><p><img src=\"8101.png\"></p>\n<p>QQ529253292</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<h2 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h2><ol>\n<li><a href=\"../java/introduction/java-started.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment-windows.md\">JavaWindows</a></li>\n<li><a href=\"../java/introduction/java-environment-mac.md\">JavaMac</a></li>\n<li><a href=\"../java/introduction/java-ide.md\">Java IDEA</a></li>\n<li><a href=\"../java/introduction/java-introduction.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-simple-example.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-primer-conclusion.md\">Java</a></li>\n</ol>\n<h2 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h2><ol>\n<li><a href=\"../java/basic/java-basic.md\">Java</a></li>\n<li><a href=\"../java/basic/java-simple-structure.md\">Java</a></li>\n<li><a href=\"../java/basic/java-variable.md\">Java</a></li>\n<li><a href=\"../java/basic/java-class.md\">Java</a></li>\n<li><a href=\"../java/basic/java-package.md\">packageimport</a></li>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>Object</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<h2 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h2><ol>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li></li>\n</ol>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p><a href=\"../java/collections/weakhashmap-code-detail.md\">WeakHashMap</a></p>\n<h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><p><a href=\"../java/reference/four-kinds-of-reference.md\"></a></p>\n<h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><h2 id=\"Java-Web-\"><a href=\"#Java-Web-\" class=\"headerlink\" title=\"Java Web \"></a>Java Web </h2><p>::: tip <br>Java Web<br>:::</p>\n<h3 id=\"Java-EE\"><a href=\"#Java-EE\" class=\"headerlink\" title=\"Java EE\"></a>Java EE</h3><h3 id=\"Spring\"><a href=\"#Spring\" class=\"headerlink\" title=\"Spring\"></a>Spring</h3><h3 id=\"Spring-Boot\"><a href=\"#Spring-Boot\" class=\"headerlink\" title=\"Spring Boot\"></a>Spring Boot</h3><h3 id=\"Spring-Security\"><a href=\"#Spring-Security\" class=\"headerlink\" title=\"Spring  Security\"></a>Spring  Security</h3><h3 id=\"Spring-Webflux\"><a href=\"#Spring-Webflux\" class=\"headerlink\" title=\"Spring  Webflux\"></a>Spring  Webflux</h3><h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h3 id=\"Hibernate\"><a href=\"#Hibernate\" class=\"headerlink\" title=\"Hibernate\"></a>Hibernate</h3><h3 id=\"Spring-Data-JPA\"><a href=\"#Spring-Data-JPA\" class=\"headerlink\" title=\"Spring  Data JPA\"></a>Spring  Data JPA</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>::: tip <br><br>:::</p>\n<h3 id=\"Domain-Driven-Design\"><a href=\"#Domain-Driven-Design\" class=\"headerlink\" title=\"Domain-Driven-Design\"></a>Domain-Driven-Design</h3><ol>\n<li></li>\n</ol>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Netty\"><a href=\"#Netty\" class=\"headerlink\" title=\"Netty\"></a>Netty</h3><h3 id=\"Tomcat\"><a href=\"#Tomcat\" class=\"headerlink\" title=\"Tomcat\"></a>Tomcat</h3><h3 id=\"Jetty\"><a href=\"#Jetty\" class=\"headerlink\" title=\"Jetty\"></a>Jetty</h3><h3 id=\"Nginx\"><a href=\"#Nginx\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><h2 id=\"RPC\"><a href=\"#RPC\" class=\"headerlink\" title=\"RPC\"></a>RPC</h2><h3 id=\"Dubbo\"><a href=\"#Dubbo\" class=\"headerlink\" title=\"Dubbo\"></a>Dubbo</h3><h3 id=\"Thrift\"><a href=\"#Thrift\" class=\"headerlink\" title=\"Thrift\"></a>Thrift</h3><h3 id=\"GRPC\"><a href=\"#GRPC\" class=\"headerlink\" title=\"GRPC\"></a>GRPC</h3><h3 id=\"SOFARPC\"><a href=\"#SOFARPC\" class=\"headerlink\" title=\"SOFARPC\"></a>SOFARPC</h3><h3 id=\"Motan\"><a href=\"#Motan\" class=\"headerlink\" title=\"Motan\"></a>Motan</h3><h3 id=\"Ribbon\"><a href=\"#Ribbon\" class=\"headerlink\" title=\"Ribbon\"></a>Ribbon</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Kafka\"><a href=\"#Kafka\" class=\"headerlink\" title=\"Kafka\"></a>Kafka</h3><h3 id=\"RocketMQ\"><a href=\"#RocketMQ\" class=\"headerlink\" title=\"RocketMQ\"></a>RocketMQ</h3><h3 id=\"RabbitMQ\"><a href=\"#RabbitMQ\" class=\"headerlink\" title=\"RabbitMQ\"></a>RabbitMQ</h3><h3 id=\"ActiveMQ\"><a href=\"#ActiveMQ\" class=\"headerlink\" title=\"ActiveMQ\"></a>ActiveMQ</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"zookeeper\"><a href=\"#zookeeper\" class=\"headerlink\" title=\"zookeeper\"></a>zookeeper</h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"MyCat\"><a href=\"#MyCat\" class=\"headerlink\" title=\"MyCat\"></a>MyCat</h3><h3 id=\"Sharding-JDBC\"><a href=\"#Sharding-JDBC\" class=\"headerlink\" title=\"Sharding JDBC\"></a>Sharding JDBC</h3><h3 id=\"Sharding-Sphere\"><a href=\"#Sharding-Sphere\" class=\"headerlink\" title=\"Sharding Sphere\"></a>Sharding Sphere</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"SkyWalking\"><a href=\"#SkyWalking\" class=\"headerlink\" title=\"SkyWalking\"></a>SkyWalking</h3><h3 id=\"Zipkin\"><a href=\"#Zipkin\" class=\"headerlink\" title=\"Zipkin\"></a>Zipkin</h3><h3 id=\"Pinpoint\"><a href=\"#Pinpoint\" class=\"headerlink\" title=\"Pinpoint\"></a>Pinpoint</h3><h3 id=\"CAT\"><a href=\"#CAT\" class=\"headerlink\" title=\"CAT\"></a>CAT</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Apollo\"><a href=\"#Apollo\" class=\"headerlink\" title=\"Apollo\"></a>Apollo</h3><h3 id=\"Disconf\"><a href=\"#Disconf\" class=\"headerlink\" title=\"Disconf\"></a>Disconf</h3><h3 id=\"Spring-Cloud-Config\"><a href=\"#Spring-Cloud-Config\" class=\"headerlink\" title=\"Spring Cloud Config\"></a>Spring Cloud Config</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Elastic-Job-Lite\"><a href=\"#Elastic-Job-Lite\" class=\"headerlink\" title=\"Elastic Job Lite\"></a>Elastic Job Lite</h3><h3 id=\"Elastic-Job-Cloud\"><a href=\"#Elastic-Job-Cloud\" class=\"headerlink\" title=\"Elastic Job Cloud\"></a>Elastic Job Cloud</h3><h3 id=\"Quartz\"><a href=\"#Quartz\" class=\"headerlink\" title=\"Quartz\"></a>Quartz</h3><h3 id=\"XXL-Job\"><a href=\"#XXL-Job\" class=\"headerlink\" title=\"XXL-Job\"></a>XXL-Job</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Redis\"><a href=\"#Redis\" class=\"headerlink\" title=\"Redis\"></a>Redis</h3><h3 id=\"Mysql\"><a href=\"#Mysql\" class=\"headerlink\" title=\"Mysql\"></a>Mysql</h3><h3 id=\"MongoDB\"><a href=\"#MongoDB\" class=\"headerlink\" title=\"MongoDB\"></a>MongoDB</h3><h3 id=\"Memcached\"><a href=\"#Memcached\" class=\"headerlink\" title=\"Memcached\"></a>Memcached</h3><h3 id=\"Neo4J\"><a href=\"#Neo4J\" class=\"headerlink\" title=\"Neo4J\"></a>Neo4J</h3><h3 id=\"TiDB\"><a href=\"#TiDB\" class=\"headerlink\" title=\"TiDB\"></a>TiDB</h3><h3 id=\"HikariCP\"><a href=\"#HikariCP\" class=\"headerlink\" title=\"HikariCP\"></a>HikariCP</h3><h3 id=\"Druid\"><a href=\"#Druid\" class=\"headerlink\" title=\"Druid\"></a>Druid</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h3 id=\"Leecode\"><a href=\"#Leecode\" class=\"headerlink\" title=\"Leecode\"></a>Leecode</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Dubbo-1\"><a href=\"#Dubbo-1\" class=\"headerlink\" title=\"Dubbo\"></a>Dubbo</h3><h3 id=\"Spring-Cloud\"><a href=\"#Spring-Cloud\" class=\"headerlink\" title=\"Spring Cloud\"></a>Spring Cloud</h3><h2 id=\"Devops\"><a href=\"#Devops\" class=\"headerlink\" title=\"Devops\"></a>Devops</h2><h3 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h3><h3 id=\"Nginx-1\"><a href=\"#Nginx-1\" class=\"headerlink\" title=\"Nginx\"></a>Nginx</h3><h3 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h3><h3 id=\"Swarm\"><a href=\"#Swarm\" class=\"headerlink\" title=\"Swarm\"></a>Swarm</h3><h3 id=\"kubernetes\"><a href=\"#kubernetes\" class=\"headerlink\" title=\"kubernetes\"></a>kubernetes</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Jenkins\"><a href=\"#Jenkins\" class=\"headerlink\" title=\"Jenkins\"></a>Jenkins</h3><h3 id=\"TeamCity\"><a href=\"#TeamCity\" class=\"headerlink\" title=\"TeamCity\"></a>TeamCity</h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h2 id=\"ELK\"><a href=\"#ELK\" class=\"headerlink\" title=\"ELK\"></a>ELK</h2><h3 id=\"Lucene\"><a href=\"#Lucene\" class=\"headerlink\" title=\"Lucene\"></a>Lucene</h3><h3 id=\"ElasticSearch\"><a href=\"#ElasticSearch\" class=\"headerlink\" title=\"ElasticSearch\"></a>ElasticSearch</h3><h3 id=\"Logstash\"><a href=\"#Logstash\" class=\"headerlink\" title=\"Logstash\"></a>Logstash</h3><h3 id=\"Kibana\"><a href=\"#Kibana\" class=\"headerlink\" title=\"Kibana\"></a>Kibana</h3><h3 id=\"Solr\"><a href=\"#Solr\" class=\"headerlink\" title=\"Solr\"></a>Solr</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"python\"><a href=\"#python\" class=\"headerlink\" title=\"python\"></a>python</h3><h3 id=\"R\"><a href=\"#R\" class=\"headerlink\" title=\"R\"></a>R</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Hadoop\"><a href=\"#Hadoop\" class=\"headerlink\" title=\"Hadoop\"></a>Hadoop</h3><h3 id=\"HBase\"><a href=\"#HBase\" class=\"headerlink\" title=\"HBase\"></a>HBase</h3><h3 id=\"Hive\"><a href=\"#Hive\" class=\"headerlink\" title=\"Hive\"></a>Hive</h3><h3 id=\"Spark\"><a href=\"#Spark\" class=\"headerlink\" title=\"Spark\"></a>Spark</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Spark-Streaming\"><a href=\"#Spark-Streaming\" class=\"headerlink\" title=\"Spark Streaming\"></a>Spark Streaming</h3><h3 id=\"Flink\"><a href=\"#Flink\" class=\"headerlink\" title=\"Flink\"></a>Flink</h3><h3 id=\"Storming\"><a href=\"#Storming\" class=\"headerlink\" title=\"Storming\"></a>Storming</h3><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"UML\"><a href=\"#UML\" class=\"headerlink\" title=\"UML\"></a>UML</h3><p><img src=\"8101.png\"></p>\n<p>QQ529253292</p>\n"},{"title":"Java","date":"2018-12-29T12:20:51.000Z","_content":"\n> \n\n## \n\nJavaJavaJavanio\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/introduction/java-started.md)\n2. [Java](../java/introduction/java-environment.md)\n3. [JavaWindows](../java/introduction/java-environment-windows.md)\n4. [JavaMac](../java/introduction/java-environment-mac.md)\n5. [Java IDEA](../java/introduction/java-ide.md)\n6. [Java](../java/introduction/java-introduction.md)\n7. [Java](../java/introduction/java-simple-example.md)\n8. [Javapackageimport](../java/introduction/java-package.md)\n9. [Java](../java/introduction/java-primer-conclusion.md)\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/basic/java-basic.md)\n2. [Java](../java/basic/java-simple-structure.md)\n3. [Java](../java/basic/java-variable.md)\n4. [Java](../java/basic/java-class.md)\n5. Java\n6. \n7. \n8. \n9. \n10. \n11. \n12. \n13. \n14. \n15. \n16. \n17. \n18. Object\n19. \n20. \n21. \n22. \n23. \n24. \n25. \n26. \n27. \n28. \n\n<LabelBlock>Java   </LabelBlock>\n\n1. Java\n2. \n3. \n4. \n5. \n6. \n7. \n8. JVM\n9. \n\n<LabelBlock>Java  </LabelBlock>\n\n[WeakHashMap](../java/collections/weakhashmap-code-detail.md)\n\n<LabelBlock>Java  </LabelBlock>\n\n1. [](../java/reference/four-kinds-of-reference.md)\n2. [](../java/reference/strong-reference.md)\n3. [](../java/reference/soft-reference.md)\n4. [](../java/reference/weak-reference.md)\n5. [](../java/reference/phantom-reference.md)\n6. [Reference](../java/reference/reference-code-detail.md)\n7. [ReferenceQueue](../java/reference/reference-queue-code-detail.md)\n8. [SoftReference](../java/reference/soft-reference-code-detail.md)\n9. [WeakReference](../java/reference/weak-reference-code-detail.md)\n10. [PhantomReference](../java/reference/phantom-reference-code-detail.md)\n11. [FinalReference  Finalizer ](../java/reference/final-reference-code-detail.md)\n12. [](../java/reference/reference-summary.md)\n","source":"_posts/java/README.md","raw":"---\ntitle: Java\ntags: \n - Java\ncategories: \ndate: 2018-12-29 20:20:51\n---\n\n> \n\n## \n\nJavaJavaJavanio\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/introduction/java-started.md)\n2. [Java](../java/introduction/java-environment.md)\n3. [JavaWindows](../java/introduction/java-environment-windows.md)\n4. [JavaMac](../java/introduction/java-environment-mac.md)\n5. [Java IDEA](../java/introduction/java-ide.md)\n6. [Java](../java/introduction/java-introduction.md)\n7. [Java](../java/introduction/java-simple-example.md)\n8. [Javapackageimport](../java/introduction/java-package.md)\n9. [Java](../java/introduction/java-primer-conclusion.md)\n\n<LabelBlock>Java   </LabelBlock>\n\n1. [Java](../java/basic/java-basic.md)\n2. [Java](../java/basic/java-simple-structure.md)\n3. [Java](../java/basic/java-variable.md)\n4. [Java](../java/basic/java-class.md)\n5. Java\n6. \n7. \n8. \n9. \n10. \n11. \n12. \n13. \n14. \n15. \n16. \n17. \n18. Object\n19. \n20. \n21. \n22. \n23. \n24. \n25. \n26. \n27. \n28. \n\n<LabelBlock>Java   </LabelBlock>\n\n1. Java\n2. \n3. \n4. \n5. \n6. \n7. \n8. JVM\n9. \n\n<LabelBlock>Java  </LabelBlock>\n\n[WeakHashMap](../java/collections/weakhashmap-code-detail.md)\n\n<LabelBlock>Java  </LabelBlock>\n\n1. [](../java/reference/four-kinds-of-reference.md)\n2. [](../java/reference/strong-reference.md)\n3. [](../java/reference/soft-reference.md)\n4. [](../java/reference/weak-reference.md)\n5. [](../java/reference/phantom-reference.md)\n6. [Reference](../java/reference/reference-code-detail.md)\n7. [ReferenceQueue](../java/reference/reference-queue-code-detail.md)\n8. [SoftReference](../java/reference/soft-reference-code-detail.md)\n9. [WeakReference](../java/reference/weak-reference-code-detail.md)\n10. [PhantomReference](../java/reference/phantom-reference-code-detail.md)\n11. [FinalReference  Finalizer ](../java/reference/final-reference-code-detail.md)\n12. [](../java/reference/reference-summary.md)\n","slug":"java/README","published":1,"updated":"2019-06-04T01:29:57.094Z","_id":"cjxze3gkw00090cvwyi34fcxb","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJavaJavanio</p>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/introduction/java-started.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment-windows.md\">JavaWindows</a></li>\n<li><a href=\"../java/introduction/java-environment-mac.md\">JavaMac</a></li>\n<li><a href=\"../java/introduction/java-ide.md\">Java IDEA</a></li>\n<li><a href=\"../java/introduction/java-introduction.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-simple-example.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-package.md\">Javapackageimport</a></li>\n<li><a href=\"../java/introduction/java-primer-conclusion.md\">Java</a></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/basic/java-basic.md\">Java</a></li>\n<li><a href=\"../java/basic/java-simple-structure.md\">Java</a></li>\n<li><a href=\"../java/basic/java-variable.md\">Java</a></li>\n<li><a href=\"../java/basic/java-class.md\">Java</a></li>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>Object</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li></li>\n</ol>\n<labelblock>Java  </labelblock>\n\n<p><a href=\"../java/collections/weakhashmap-code-detail.md\">WeakHashMap</a></p>\n<labelblock>Java  </labelblock>\n\n<ol>\n<li><a href=\"../java/reference/four-kinds-of-reference.md\"></a></li>\n<li><a href=\"../java/reference/strong-reference.md\"></a></li>\n<li><a href=\"../java/reference/soft-reference.md\"></a></li>\n<li><a href=\"../java/reference/weak-reference.md\"></a></li>\n<li><a href=\"../java/reference/phantom-reference.md\"></a></li>\n<li><a href=\"../java/reference/reference-code-detail.md\">Reference</a></li>\n<li><a href=\"../java/reference/reference-queue-code-detail.md\">ReferenceQueue</a></li>\n<li><a href=\"../java/reference/soft-reference-code-detail.md\">SoftReference</a></li>\n<li><a href=\"../java/reference/weak-reference-code-detail.md\">WeakReference</a></li>\n<li><a href=\"../java/reference/phantom-reference-code-detail.md\">PhantomReference</a></li>\n<li><a href=\"../java/reference/final-reference-code-detail.md\">FinalReference  Finalizer </a></li>\n<li><a href=\"../java/reference/reference-summary.md\"></a></li>\n</ol>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJavaJavanio</p>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/introduction/java-started.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-environment-windows.md\">JavaWindows</a></li>\n<li><a href=\"../java/introduction/java-environment-mac.md\">JavaMac</a></li>\n<li><a href=\"../java/introduction/java-ide.md\">Java IDEA</a></li>\n<li><a href=\"../java/introduction/java-introduction.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-simple-example.md\">Java</a></li>\n<li><a href=\"../java/introduction/java-package.md\">Javapackageimport</a></li>\n<li><a href=\"../java/introduction/java-primer-conclusion.md\">Java</a></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li><a href=\"../java/basic/java-basic.md\">Java</a></li>\n<li><a href=\"../java/basic/java-simple-structure.md\">Java</a></li>\n<li><a href=\"../java/basic/java-variable.md\">Java</a></li>\n<li><a href=\"../java/basic/java-class.md\">Java</a></li>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>Object</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<labelblock>Java   </labelblock>\n\n<ol>\n<li>Java</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li></li>\n</ol>\n<labelblock>Java  </labelblock>\n\n<p><a href=\"../java/collections/weakhashmap-code-detail.md\">WeakHashMap</a></p>\n<labelblock>Java  </labelblock>\n\n<ol>\n<li><a href=\"../java/reference/four-kinds-of-reference.md\"></a></li>\n<li><a href=\"../java/reference/strong-reference.md\"></a></li>\n<li><a href=\"../java/reference/soft-reference.md\"></a></li>\n<li><a href=\"../java/reference/weak-reference.md\"></a></li>\n<li><a href=\"../java/reference/phantom-reference.md\"></a></li>\n<li><a href=\"../java/reference/reference-code-detail.md\">Reference</a></li>\n<li><a href=\"../java/reference/reference-queue-code-detail.md\">ReferenceQueue</a></li>\n<li><a href=\"../java/reference/soft-reference-code-detail.md\">SoftReference</a></li>\n<li><a href=\"../java/reference/weak-reference-code-detail.md\">WeakReference</a></li>\n<li><a href=\"../java/reference/phantom-reference-code-detail.md\">PhantomReference</a></li>\n<li><a href=\"../java/reference/final-reference-code-detail.md\">FinalReference  Finalizer </a></li>\n<li><a href=\"../java/reference/reference-summary.md\"></a></li>\n</ol>\n"},{"title":"LeetCode","date":"2019-01-04T17:00:00.000Z","_content":"\n## \n\n nums  target\n\n\n\n:\n\n```bash\n nums = [2, 7, 11, 15], target = 9\n\n nums[0] + nums[1] = 2 + 7 = 9\n [0, 1]\n```\n\n## 1\n\n\n\n```java\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n        return exhaustAlgorithm(nums,target);\n    }\n    // \n    private int[] exhaustAlgorithm(int[] nums, int target){\n        int length = nums.length;\n        int i = 0;\n        int j = 1;\n        while (nums[i] + nums[j] != target) {\n            j++;\n            if (j >= length){\n                i++;\n                if (i >= length - 1){\n                    break;\n                }\n                j = i + 1;\n            }\n        }\n        // \n        if (nums[i] + nums[j] != target) return null;\n        int[] result = {i,j};\n        return result;\n    }\n}\n```\n\n$O(n^2)$\n\n\n\n{% asset_img exhaust-algorithm.png exhaust-algorithm %}\n\n80ms11.13%\n\n## 2\n\n`target``a``target - a`map$O(n)$$O(1)$\n\n```java\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n        return mapSolution(nums,target);\n    }\n    // \n    private int[] mapSolution(int[] nums, int target){\n        Map<Integer, Integer> map = new HashMap<>();\n        for (int i = 0; i < nums.length; i++){\n            map.put(nums[i],i);\n        }\n\n        for (int i = 0; i < nums.length; i++){\n            int num = target - nums[i];\n            // num\n            if (map.get(num) != null){\n                return new int[] { map.get(num), i};\n            }\n        }\n        return null;\n    }\n}\n```\n\nnumsmap\n\n\n\n\n\n`target``map``map``map``a``b``a``b``map``a``map``b``a``map`\n\n```java\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n        return mapSolution(nums,target);\n    }\n    // \n    private int[] mapSolution(int[] nums, int target){\n        Map<Integer, Integer> map = new HashMap<>();\n        for (int i = 0; i < nums.length; i++){\n            int num = target - nums[i];\n            // num\n            if (map.get(num) != null){\n                return new int[] { map.get(num), i};\n            }\n            // map\n            map.put(nums[i], i);\n        }\n        return null;\n    }\n}\n```\n\n$O(n)$\n\n$O(n)$\n\n\n\n{% asset_img map-solution.png map-solution %}\n\n9ms85%\n\n[](https://leetcode-cn.com/problems/two-sum/solution/)\n\n[](https://leetcode.com/problems/two-sum/solution/)\n\n~","source":"_posts/leetcode/day1-two-sum.md","raw":"---\ntitle: LeetCode\ntags: \n - Java\n - \n - LeetCode\ncategories: \ndate: 2019-01-05 01:00:00\n---\n\n## \n\n nums  target\n\n\n\n:\n\n```bash\n nums = [2, 7, 11, 15], target = 9\n\n nums[0] + nums[1] = 2 + 7 = 9\n [0, 1]\n```\n\n## 1\n\n\n\n```java\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n        return exhaustAlgorithm(nums,target);\n    }\n    // \n    private int[] exhaustAlgorithm(int[] nums, int target){\n        int length = nums.length;\n        int i = 0;\n        int j = 1;\n        while (nums[i] + nums[j] != target) {\n            j++;\n            if (j >= length){\n                i++;\n                if (i >= length - 1){\n                    break;\n                }\n                j = i + 1;\n            }\n        }\n        // \n        if (nums[i] + nums[j] != target) return null;\n        int[] result = {i,j};\n        return result;\n    }\n}\n```\n\n$O(n^2)$\n\n\n\n{% asset_img exhaust-algorithm.png exhaust-algorithm %}\n\n80ms11.13%\n\n## 2\n\n`target``a``target - a`map$O(n)$$O(1)$\n\n```java\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n        return mapSolution(nums,target);\n    }\n    // \n    private int[] mapSolution(int[] nums, int target){\n        Map<Integer, Integer> map = new HashMap<>();\n        for (int i = 0; i < nums.length; i++){\n            map.put(nums[i],i);\n        }\n\n        for (int i = 0; i < nums.length; i++){\n            int num = target - nums[i];\n            // num\n            if (map.get(num) != null){\n                return new int[] { map.get(num), i};\n            }\n        }\n        return null;\n    }\n}\n```\n\nnumsmap\n\n\n\n\n\n`target``map``map``map``a``b``a``b``map``a``map``b``a``map`\n\n```java\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n        return mapSolution(nums,target);\n    }\n    // \n    private int[] mapSolution(int[] nums, int target){\n        Map<Integer, Integer> map = new HashMap<>();\n        for (int i = 0; i < nums.length; i++){\n            int num = target - nums[i];\n            // num\n            if (map.get(num) != null){\n                return new int[] { map.get(num), i};\n            }\n            // map\n            map.put(nums[i], i);\n        }\n        return null;\n    }\n}\n```\n\n$O(n)$\n\n$O(n)$\n\n\n\n{% asset_img map-solution.png map-solution %}\n\n9ms85%\n\n[](https://leetcode-cn.com/problems/two-sum/solution/)\n\n[](https://leetcode.com/problems/two-sum/solution/)\n\n~","slug":"leetcode/day1-two-sum","published":1,"updated":"2019-06-04T01:29:57.428Z","_id":"cjxze3gkw000a0cvw568fw4pv","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> nums  target</p>\n<p></p>\n<p>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> nums = [2, 7, 11, 15], target = 9</span><br><span class=\"line\"></span><br><span class=\"line\"> nums[0] + nums[1] = 2 + 7 = 9</span><br><span class=\"line\"> [0, 1]</span><br></pre></td></tr></table></figure>\n<h2 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">int</span>[] twoSum(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> exhaustAlgorithm(nums,target);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] exhaustAlgorithm(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> length = nums.length;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> j = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (nums[i] + nums[j] != target) &#123;</span><br><span class=\"line\">            j++;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (j &gt;= length)&#123;</span><br><span class=\"line\">                i++;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (i &gt;= length - <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                j = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (nums[i] + nums[j] != target) <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] result = &#123;i,j&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>$O(n^2)$</p>\n<p></p>\n<img src=\"/programming/leetcode/day1-two-sum/exhaust-algorithm.png\" title=\"exhaust-algorithm\">\n<p>80ms11.13%</p>\n<h2 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h2><p><code>target</code><code>a</code><code>target - a</code>map$O(n)$$O(1)$</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">int</span>[] twoSum(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mapSolution(nums,target);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] mapSolution(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target)&#123;</span><br><span class=\"line\">        Map&lt;Integer, Integer&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class=\"line\">            map.put(nums[i],i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> num = target - nums[i];</span><br><span class=\"line\">            <span class=\"comment\">// num</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (map.get(num) != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[] &#123; map.get(num), i&#125;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>numsmap</p>\n<p></p>\n<p></p>\n<p><code>target</code><code>map</code><code>map</code><code>map</code><code>a</code><code>b</code><code>a</code><code>b</code><code>map</code><code>a</code><code>map</code><code>b</code><code>a</code><code>map</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">int</span>[] twoSum(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mapSolution(nums,target);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] mapSolution(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target)&#123;</span><br><span class=\"line\">        Map&lt;Integer, Integer&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> num = target - nums[i];</span><br><span class=\"line\">            <span class=\"comment\">// num</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (map.get(num) != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[] &#123; map.get(num), i&#125;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// map</span></span><br><span class=\"line\">            map.put(nums[i], i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>$O(n)$</p>\n<p>$O(n)$</p>\n<p></p>\n<img src=\"/programming/leetcode/day1-two-sum/map-solution.png\" title=\"map-solution\">\n<p>9ms85%</p>\n<p><a href=\"https://leetcode-cn.com/problems/two-sum/solution/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p><a href=\"https://leetcode.com/problems/two-sum/solution/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>~</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> nums  target</p>\n<p></p>\n<p>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> nums = [2, 7, 11, 15], target = 9</span><br><span class=\"line\"></span><br><span class=\"line\"> nums[0] + nums[1] = 2 + 7 = 9</span><br><span class=\"line\"> [0, 1]</span><br></pre></td></tr></table></figure>\n<h2 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">int</span>[] twoSum(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> exhaustAlgorithm(nums,target);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] exhaustAlgorithm(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> length = nums.length;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> j = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (nums[i] + nums[j] != target) &#123;</span><br><span class=\"line\">            j++;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (j &gt;= length)&#123;</span><br><span class=\"line\">                i++;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (i &gt;= length - <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                j = i + <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (nums[i] + nums[j] != target) <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] result = &#123;i,j&#125;;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>$O(n^2)$</p>\n<p></p>\n<img src=\"/programming/leetcode/day1-two-sum/exhaust-algorithm.png\" title=\"exhaust-algorithm\">\n<p>80ms11.13%</p>\n<h2 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h2><p><code>target</code><code>a</code><code>target - a</code>map$O(n)$$O(1)$</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">int</span>[] twoSum(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mapSolution(nums,target);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] mapSolution(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target)&#123;</span><br><span class=\"line\">        Map&lt;Integer, Integer&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class=\"line\">            map.put(nums[i],i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> num = target - nums[i];</span><br><span class=\"line\">            <span class=\"comment\">// num</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (map.get(num) != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[] &#123; map.get(num), i&#125;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>numsmap</p>\n<p></p>\n<p></p>\n<p><code>target</code><code>map</code><code>map</code><code>map</code><code>a</code><code>b</code><code>a</code><code>b</code><code>map</code><code>a</code><code>map</code><code>b</code><code>a</code><code>map</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">int</span>[] twoSum(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mapSolution(nums,target);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] mapSolution(<span class=\"keyword\">int</span>[] nums, <span class=\"keyword\">int</span> target)&#123;</span><br><span class=\"line\">        Map&lt;Integer, Integer&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> num = target - nums[i];</span><br><span class=\"line\">            <span class=\"comment\">// num</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (map.get(num) != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[] &#123; map.get(num), i&#125;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// map</span></span><br><span class=\"line\">            map.put(nums[i], i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>$O(n)$</p>\n<p>$O(n)$</p>\n<p></p>\n<img src=\"/programming/leetcode/day1-two-sum/map-solution.png\" title=\"map-solution\">\n<p>9ms85%</p>\n<p><a href=\"https://leetcode-cn.com/problems/two-sum/solution/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p><a href=\"https://leetcode.com/problems/two-sum/solution/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>~</p>\n"},{"title":"LeetCode","date":"2019-01-08T12:00:00.000Z","_content":"\n## \n\n  \n\n 1:\n\n```bash\n: \"abcabcbb\"\n: 3 \n:  \"abc\" 3\n```\n\n 2:\n\n```bash\n: \"bbbbb\"\n: 1\n:  \"b\" 1\n```\n\n 3:\n\n```bash\n: \"pwwkew\"\n: 3\n:  \"wke\" 3\n       \"pwke\" \n```\n\n## \n\n3\n\n\n\n`frankissohandsome``from``to`\n\n`from``to`0String0`length = 1``maxLength = 1`\n\n{% asset_img day3-step-1.png day3-step-1 %}\n\n`to``length`\n\n{% asset_img day3-step-2.png day3-step-2 %}\n\n`to``s``7``frankis``0``7`\n\n{% asset_img day3-step-3.png day3-step-3 %}\n\n`from``7``ss`\n\n{% asset_img day3-step-4.png day3-step-4 %}\n\n`sohand``6`\n\n{% asset_img day3-step-5.png day3-step-5 %}\n\n`ohands`\n\n{% asset_img day3-step-6.png day3-step-6 %}\n\n\n\n{% asset_img day3-step-7.png day3-step-7 %}\n\n`to``handsome`\n\n{% asset_img day3-step-8.png day3-step-8 %}\n\n\n\n`from``to` + 1\n\n## \n\n```java\nclass Solution {\n    public int lengthOfLongestSubstring(String s) {\n        if (s == null || s.length() == 0) return 0;\n        int from = 0, to = 1, length = 1, maxLength = 1;\n        // to\n        while (to < s.length()){\n            int site = s.substring(from, to).indexOf(s.charAt(to));\n            if (site != -1){\n                // to\n                length = to - from;\n                if (length > maxLength) maxLength = length;\n                // from site+1\n                from = from + site + 1;\n            }\n            to++;\n        }\n        // \n        if (to - from > maxLength) {\n            maxLength = to - from;\n        }\n        return maxLength;\n    }\n}\n```\n\n`site``from``to`\n\n\n\n{% asset_img day3-submit-1.png day3-submit-1 %}\n\n`73%`\n\n## \n\n\n\n`from`\n\n```java\nclass Solution {\n    public int lengthOfLongestSubstring(String s) {\n        if (s == null || s.length() == 0) return 0;\n        int from = 0, to = 1, length = 1, maxLength = 0;\n        // to\n        while (to < s.length()){\n            int site = s.substring(from, to).indexOf(s.charAt(to));\n            if (site != -1){\n                // to\n                length = to - from;\n                if (length > maxLength) {\n                    maxLength = length;\n                }\n                // \n                if (maxLength > s.length() - from + 1) return maxLength;\n                from = from + site + 1;\n            }\n            to++;\n        }\n        // \n        if (to - from > maxLength) {\n            maxLength = to - from;\n        }\n        return maxLength;\n    }\n}\n```\n\n`bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb``HashSet``HashSet`\n\n```java\nclass Solution {\n    public int lengthOfLongestSubstring(String s) {\n        if (s == null || s.length() == 0) return 0;\n        int from = 0, to = 1, length = 1, maxLength = 0;\n        Set<Character> set = new HashSet<>();\n        for (int i = 0; i < s.length(); i++){\n            set.add(s.charAt(i));\n        }\n        // to\n        while (to < s.length()){\n            int site = s.substring(from, to).indexOf(s.charAt(to));\n            if (site != -1){\n                // to\n                length = to - from;\n                if (length > maxLength) {\n                    maxLength = length;\n                }\n                if (maxLength > s.length() - from + 1) return maxLength;\n                if (maxLength >= set.size()) return maxLength;\n                from = from + site + 1;\n            }\n            to++;\n        }\n        // \n        if (to - from > maxLength) {\n            maxLength = to - from;\n        }\n        return maxLength;\n    }\n}\n```\n\n\n\n{% asset_img day3-submit-2.png day3-submit-2 %}\n\n`HashSet``bbbbbbbbbbbbbb`\n\n\n","source":"_posts/leetcode/day3-longest-substring-without-repeating-characters.md","raw":"---\ntitle: LeetCode\ntags: \n - Java\n - \n - LeetCode\ncategories: \ndate: 2019-01-08 20:00:00\n---\n\n## \n\n  \n\n 1:\n\n```bash\n: \"abcabcbb\"\n: 3 \n:  \"abc\" 3\n```\n\n 2:\n\n```bash\n: \"bbbbb\"\n: 1\n:  \"b\" 1\n```\n\n 3:\n\n```bash\n: \"pwwkew\"\n: 3\n:  \"wke\" 3\n       \"pwke\" \n```\n\n## \n\n3\n\n\n\n`frankissohandsome``from``to`\n\n`from``to`0String0`length = 1``maxLength = 1`\n\n{% asset_img day3-step-1.png day3-step-1 %}\n\n`to``length`\n\n{% asset_img day3-step-2.png day3-step-2 %}\n\n`to``s``7``frankis``0``7`\n\n{% asset_img day3-step-3.png day3-step-3 %}\n\n`from``7``ss`\n\n{% asset_img day3-step-4.png day3-step-4 %}\n\n`sohand``6`\n\n{% asset_img day3-step-5.png day3-step-5 %}\n\n`ohands`\n\n{% asset_img day3-step-6.png day3-step-6 %}\n\n\n\n{% asset_img day3-step-7.png day3-step-7 %}\n\n`to``handsome`\n\n{% asset_img day3-step-8.png day3-step-8 %}\n\n\n\n`from``to` + 1\n\n## \n\n```java\nclass Solution {\n    public int lengthOfLongestSubstring(String s) {\n        if (s == null || s.length() == 0) return 0;\n        int from = 0, to = 1, length = 1, maxLength = 1;\n        // to\n        while (to < s.length()){\n            int site = s.substring(from, to).indexOf(s.charAt(to));\n            if (site != -1){\n                // to\n                length = to - from;\n                if (length > maxLength) maxLength = length;\n                // from site+1\n                from = from + site + 1;\n            }\n            to++;\n        }\n        // \n        if (to - from > maxLength) {\n            maxLength = to - from;\n        }\n        return maxLength;\n    }\n}\n```\n\n`site``from``to`\n\n\n\n{% asset_img day3-submit-1.png day3-submit-1 %}\n\n`73%`\n\n## \n\n\n\n`from`\n\n```java\nclass Solution {\n    public int lengthOfLongestSubstring(String s) {\n        if (s == null || s.length() == 0) return 0;\n        int from = 0, to = 1, length = 1, maxLength = 0;\n        // to\n        while (to < s.length()){\n            int site = s.substring(from, to).indexOf(s.charAt(to));\n            if (site != -1){\n                // to\n                length = to - from;\n                if (length > maxLength) {\n                    maxLength = length;\n                }\n                // \n                if (maxLength > s.length() - from + 1) return maxLength;\n                from = from + site + 1;\n            }\n            to++;\n        }\n        // \n        if (to - from > maxLength) {\n            maxLength = to - from;\n        }\n        return maxLength;\n    }\n}\n```\n\n`bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb``HashSet``HashSet`\n\n```java\nclass Solution {\n    public int lengthOfLongestSubstring(String s) {\n        if (s == null || s.length() == 0) return 0;\n        int from = 0, to = 1, length = 1, maxLength = 0;\n        Set<Character> set = new HashSet<>();\n        for (int i = 0; i < s.length(); i++){\n            set.add(s.charAt(i));\n        }\n        // to\n        while (to < s.length()){\n            int site = s.substring(from, to).indexOf(s.charAt(to));\n            if (site != -1){\n                // to\n                length = to - from;\n                if (length > maxLength) {\n                    maxLength = length;\n                }\n                if (maxLength > s.length() - from + 1) return maxLength;\n                if (maxLength >= set.size()) return maxLength;\n                from = from + site + 1;\n            }\n            to++;\n        }\n        // \n        if (to - from > maxLength) {\n            maxLength = to - from;\n        }\n        return maxLength;\n    }\n}\n```\n\n\n\n{% asset_img day3-submit-2.png day3-submit-2 %}\n\n`HashSet``bbbbbbbbbbbbbb`\n\n\n","slug":"leetcode/day3-longest-substring-without-repeating-characters","published":1,"updated":"2019-06-04T01:29:57.433Z","_id":"cjxze3gkw000c0cvwhvfuzczx","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<p> 1:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">: <span class=\"string\">\"abcabcbb\"</span></span><br><span class=\"line\">: 3 </span><br><span class=\"line\">:  <span class=\"string\">\"abc\"</span> 3</span><br></pre></td></tr></table></figure>\n<p> 2:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">: <span class=\"string\">\"bbbbb\"</span></span><br><span class=\"line\">: 1</span><br><span class=\"line\">:  <span class=\"string\">\"b\"</span> 1</span><br></pre></td></tr></table></figure>\n<p> 3:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">: <span class=\"string\">\"pwwkew\"</span></span><br><span class=\"line\">: 3</span><br><span class=\"line\">:  <span class=\"string\">\"wke\"</span> 3</span><br><span class=\"line\">       <span class=\"string\">\"pwke\"</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>3</p>\n<p></p>\n<p><code>frankissohandsome</code><code>from</code><code>to</code></p>\n<p><code>from</code><code>to</code>0String0<code>length = 1</code><code>maxLength = 1</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-1.png\" title=\"day3-step-1\">\n<p><code>to</code><code>length</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-2.png\" title=\"day3-step-2\">\n<p><code>to</code><code>s</code><code>7</code><code>frankis</code><code>0</code><code>7</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-3.png\" title=\"day3-step-3\">\n<p><code>from</code><code>7</code><code>ss</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-4.png\" title=\"day3-step-4\">\n<p><code>sohand</code><code>6</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-5.png\" title=\"day3-step-5\">\n<p><code>ohands</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-6.png\" title=\"day3-step-6\">\n<p></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-7.png\" title=\"day3-step-7\">\n<p><code>to</code><code>handsome</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-8.png\" title=\"day3-step-8\">\n<p></p>\n<p><code>from</code><code>to</code> + 1</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">lengthOfLongestSubstring</span><span class=\"params\">(String s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s == <span class=\"keyword\">null</span> || s.length() == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> from = <span class=\"number\">0</span>, to = <span class=\"number\">1</span>, length = <span class=\"number\">1</span>, maxLength = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"comment\">// to</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (to &lt; s.length())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> site = s.substring(from, to).indexOf(s.charAt(to));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (site != -<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">                <span class=\"comment\">// to</span></span><br><span class=\"line\">                length = to - from;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (length &gt; maxLength) maxLength = length;</span><br><span class=\"line\">                <span class=\"comment\">// from site+1</span></span><br><span class=\"line\">                from = from + site + <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            to++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (to - from &gt; maxLength) &#123;</span><br><span class=\"line\">            maxLength = to - from;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>site</code><code>from</code><code>to</code></p>\n<p></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-submit-1.png\" title=\"day3-submit-1\">\n<p><code>73%</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p><code>from</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">lengthOfLongestSubstring</span><span class=\"params\">(String s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s == <span class=\"keyword\">null</span> || s.length() == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> from = <span class=\"number\">0</span>, to = <span class=\"number\">1</span>, length = <span class=\"number\">1</span>, maxLength = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// to</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (to &lt; s.length())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> site = s.substring(from, to).indexOf(s.charAt(to));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (site != -<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">                <span class=\"comment\">// to</span></span><br><span class=\"line\">                length = to - from;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (length &gt; maxLength) &#123;</span><br><span class=\"line\">                    maxLength = length;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (maxLength &gt; s.length() - from + <span class=\"number\">1</span>) <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">                from = from + site + <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            to++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (to - from &gt; maxLength) &#123;</span><br><span class=\"line\">            maxLength = to - from;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb</code><code>HashSet</code><code>HashSet</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">lengthOfLongestSubstring</span><span class=\"params\">(String s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s == <span class=\"keyword\">null</span> || s.length() == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> from = <span class=\"number\">0</span>, to = <span class=\"number\">1</span>, length = <span class=\"number\">1</span>, maxLength = <span class=\"number\">0</span>;</span><br><span class=\"line\">        Set&lt;Character&gt; set = <span class=\"keyword\">new</span> HashSet&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; s.length(); i++)&#123;</span><br><span class=\"line\">            set.add(s.charAt(i));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// to</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (to &lt; s.length())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> site = s.substring(from, to).indexOf(s.charAt(to));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (site != -<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">                <span class=\"comment\">// to</span></span><br><span class=\"line\">                length = to - from;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (length &gt; maxLength) &#123;</span><br><span class=\"line\">                    maxLength = length;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (maxLength &gt; s.length() - from + <span class=\"number\">1</span>) <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (maxLength &gt;= set.size()) <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">                from = from + site + <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            to++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (to - from &gt; maxLength) &#123;</span><br><span class=\"line\">            maxLength = to - from;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-submit-2.png\" title=\"day3-submit-2\">\n<p><code>HashSet</code><code>bbbbbbbbbbbbbb</code></p>\n<p></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>  </p>\n<p> 1:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">: <span class=\"string\">\"abcabcbb\"</span></span><br><span class=\"line\">: 3 </span><br><span class=\"line\">:  <span class=\"string\">\"abc\"</span> 3</span><br></pre></td></tr></table></figure>\n<p> 2:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">: <span class=\"string\">\"bbbbb\"</span></span><br><span class=\"line\">: 1</span><br><span class=\"line\">:  <span class=\"string\">\"b\"</span> 1</span><br></pre></td></tr></table></figure>\n<p> 3:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">: <span class=\"string\">\"pwwkew\"</span></span><br><span class=\"line\">: 3</span><br><span class=\"line\">:  <span class=\"string\">\"wke\"</span> 3</span><br><span class=\"line\">       <span class=\"string\">\"pwke\"</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>3</p>\n<p></p>\n<p><code>frankissohandsome</code><code>from</code><code>to</code></p>\n<p><code>from</code><code>to</code>0String0<code>length = 1</code><code>maxLength = 1</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-1.png\" title=\"day3-step-1\">\n<p><code>to</code><code>length</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-2.png\" title=\"day3-step-2\">\n<p><code>to</code><code>s</code><code>7</code><code>frankis</code><code>0</code><code>7</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-3.png\" title=\"day3-step-3\">\n<p><code>from</code><code>7</code><code>ss</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-4.png\" title=\"day3-step-4\">\n<p><code>sohand</code><code>6</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-5.png\" title=\"day3-step-5\">\n<p><code>ohands</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-6.png\" title=\"day3-step-6\">\n<p></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-7.png\" title=\"day3-step-7\">\n<p><code>to</code><code>handsome</code></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-step-8.png\" title=\"day3-step-8\">\n<p></p>\n<p><code>from</code><code>to</code> + 1</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">lengthOfLongestSubstring</span><span class=\"params\">(String s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s == <span class=\"keyword\">null</span> || s.length() == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> from = <span class=\"number\">0</span>, to = <span class=\"number\">1</span>, length = <span class=\"number\">1</span>, maxLength = <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"comment\">// to</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (to &lt; s.length())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> site = s.substring(from, to).indexOf(s.charAt(to));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (site != -<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">                <span class=\"comment\">// to</span></span><br><span class=\"line\">                length = to - from;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (length &gt; maxLength) maxLength = length;</span><br><span class=\"line\">                <span class=\"comment\">// from site+1</span></span><br><span class=\"line\">                from = from + site + <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            to++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (to - from &gt; maxLength) &#123;</span><br><span class=\"line\">            maxLength = to - from;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>site</code><code>from</code><code>to</code></p>\n<p></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-submit-1.png\" title=\"day3-submit-1\">\n<p><code>73%</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p><code>from</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">lengthOfLongestSubstring</span><span class=\"params\">(String s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s == <span class=\"keyword\">null</span> || s.length() == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> from = <span class=\"number\">0</span>, to = <span class=\"number\">1</span>, length = <span class=\"number\">1</span>, maxLength = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// to</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (to &lt; s.length())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> site = s.substring(from, to).indexOf(s.charAt(to));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (site != -<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">                <span class=\"comment\">// to</span></span><br><span class=\"line\">                length = to - from;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (length &gt; maxLength) &#123;</span><br><span class=\"line\">                    maxLength = length;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (maxLength &gt; s.length() - from + <span class=\"number\">1</span>) <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">                from = from + site + <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            to++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (to - from &gt; maxLength) &#123;</span><br><span class=\"line\">            maxLength = to - from;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb</code><code>HashSet</code><code>HashSet</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">lengthOfLongestSubstring</span><span class=\"params\">(String s)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (s == <span class=\"keyword\">null</span> || s.length() == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> from = <span class=\"number\">0</span>, to = <span class=\"number\">1</span>, length = <span class=\"number\">1</span>, maxLength = <span class=\"number\">0</span>;</span><br><span class=\"line\">        Set&lt;Character&gt; set = <span class=\"keyword\">new</span> HashSet&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; s.length(); i++)&#123;</span><br><span class=\"line\">            set.add(s.charAt(i));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// to</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (to &lt; s.length())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> site = s.substring(from, to).indexOf(s.charAt(to));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (site != -<span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">                <span class=\"comment\">// to</span></span><br><span class=\"line\">                length = to - from;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (length &gt; maxLength) &#123;</span><br><span class=\"line\">                    maxLength = length;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (maxLength &gt; s.length() - from + <span class=\"number\">1</span>) <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (maxLength &gt;= set.size()) <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">                from = from + site + <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            to++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (to - from &gt; maxLength) &#123;</span><br><span class=\"line\">            maxLength = to - from;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> maxLength;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day3-longest-substring-without-repeating-characters/day3-submit-2.png\" title=\"day3-submit-2\">\n<p><code>HashSet</code><code>bbbbbbbbbbbbbb</code></p>\n<p></p>\n"},{"title":"","date":"2019-05-02T01:17:09.000Z","_content":"\n## \n\n01\n\n![](https://i.loli.net/2019/05/02/5ccaec8a22bb9.png)\n\n## \n\nNTiP[i]V[i]\n\n0101012...T/Vi\n\n## \n\n\n\n![](https://i.loli.net/2019/03/14/5c8a564a63265.png)\n\n\n\n107\n\n\n\n\n\nA55B8710BABAB8A10\n\n![](https://i.loli.net/2019/03/14/5c8a56a150bc1.png)\n\n## \n\n\n\nks(i,t)itik0 <= k * V[i] <= t012...ki\n\n```\nks(i,t) = max{ks(i-1, t - V[i] * k) + P[i] * k}; 0 <= k * V[i] <= t\n```\n\nks(0,t)=0;ks(i,0)=0;\n\n\n\n```java\npublic static class Knapsack {\n    private static int[] P={0,5,8};\n    private static int[] V={0,5,7};\n    private static int T = 10;\n\n    @Test\n    public void soleve1() {\n        int result = ks(P.length - 1,10);\n        System.out.println(\"\" + result);\n    }\n\n    private int ks(int i, int t){\n        int result = 0;\n        if (i == 0 || t == 0){\n            // \n            result = 0;\n        } else if(V[i] > t){\n            // \n            result = ks(i-1, t);\n        } else {\n            // \n            // kik\n            for (int k = 0; k * V[i] <= t; k++){\n                int tmp2 = ks(i-1, t - V[i] * k) + P[i] * k;\n                if (tmp2 > result){\n                    result = tmp2;\n                }\n            }\n        }\n        return result;\n    }\n}\n\n```\n\nPV0\n\n```\n11\n```\n\n0101ik\n\n```java\nfor (int k = 0; k * V[i] <= t; k++){\n    // kitmp2\n    int tmp2 = ks(i-1, t - V[i] * k) + P[i] * k;\n    if (tmp2 > result){\n        // \n        result = tmp2;\n    }\n}\n```\n\n## \n\n01\n\n\n\nF(n1,n2,...,nN)n1n2 12itF(n1,n2,...,ni)F(m1,m2,...,mi)F(m1,m2,...,mi) > F(n1,n2,...,ni)F(m1,m2,...,mi,...,nN)  F(n1,n2,...,nN) F(n1,n2,...,nN) F(n1,n2,...,ni)\n\n\n\ni\n\n\n\n![](https://i.loli.net/2019/05/02/5ccaece849f09.png)\n\n## \n\n\n\n\n\n### \n\n```java\nks(i,t) = max{ks(i-1, t - V[i] * k) + P[i] * k}; 0 <= k * V[i] <= t\n```\n\n```java\npublic static class Knapsack {\n    private static int[] P={0,5,8};\n    private static int[] V={0,5,7};\n    private static int T = 10;\n\n    private Integer[][] results = new Integer[P.length + 1][T + 1];\n\n    @Test\n    public void solve2() {\n        int result = ks2(P.length - 1,10);\n        System.out.println(\"\" + result);\n    }\n\n    private int ks2(int i, int t){\n        // \n        if (results[i][t] != null) return results[i][t];\n        int result = 0;\n        if (i == 0 || t == 0){\n            // \n            result = 0;\n        } else if(V[i] > t){\n            // \n            result = ks2(i-1, t);\n        } else {\n            // \n            // k\n            for (int k = 0; k * V[i] <= t; k++){\n                int tmp2 = ks2(i-1, t - V[i] * k) + P[i] * k;\n                if (tmp2 > result){\n                    result = tmp2;\n                }\n            }\n        }\n        results[i][t] = result;\n        return result;\n    }\n}\n```\n\n\n\n### \n\nPV0\n\n\n\n{% asset_img IMG_5E156B07E228-1.jpeg img %}\n\ni\n\n{% asset_img IMG_6B67BF7CC3A7-1.jpeg img %}\n\nt=101i2t=1401i2\n\n```java\npublic static class Knapsack {\n    private static int[] P={5,8};\n    private static int[] V={5,7};\n    private static int T = 10;\n\n    private int[][] dp = new int[P.length + 1][T + 1];\n\n    @Test\n    public void solve3() {\n        for (int i = 0; i < P.length; i++){\n            for (int j = 0; j <= T; j++){\n                for (int k = 0; k * V[i] <= j; k++){\n                    dp[i+1][j] = Math.max(dp[i+1][j], dp[i][j-k * V[i]] + k * P[i]);\n                }\n            }\n        }\n        System.out.println(\"\" + dp[P.length][T]);\n    }\n}\n```\n\n0101\n\n\n\n```\nks(t) = max{ks(t), ks(t - Vi) + Pi}\n```\n\n```java\npublic static class Knapsack {\n    private static int[] P={0,5,8};\n    private static int[] V={0,5,7};\n    private static int T = 10;\n\n    private int[] newResults = new int[T + 1];\n\n    @Test\n    public void resolve4() {\n        int result = ksp(P.length,T);\n        System.out.println(result);\n    }\n\n    private int ksp(int i, int t){\n        // \n        for (int m = 0; m < i; m++){\n            for (int n = V[m]; n <= t; n++){\n                newResults[n] = Math.max(newResults[n] , newResults[n - V[m]] + P[m]);\n            }\n            // \n            System.out.println(JSON.toJSONString(newResults));\n        }\n        return newResults[newResults.length - 1];\n    }\n}\n```\n\n\n\n```\n[0,0,0,0,0,0,0,0,0,0,0]\n[0,0,0,0,0,5,5,5,5,5,10]\n[0,0,0,0,0,5,5,8,8,8,10]\n10\n```\n\n01i T/Vi() iT/Vi0101\n\n## \n\n01\n\n![](https://i.loli.net/2019/05/02/5ccaee9d39578.png)\n\n\n\n\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a580b1789e.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","source":"_posts/leetcode/complete-knapsack-problem.md","raw":"---\ntitle: \ndate: 2019-05-02 09:17:09\ntags:\n - Java\n - \n - \n - \ncategories: \n---\n\n## \n\n01\n\n![](https://i.loli.net/2019/05/02/5ccaec8a22bb9.png)\n\n## \n\nNTiP[i]V[i]\n\n0101012...T/Vi\n\n## \n\n\n\n![](https://i.loli.net/2019/03/14/5c8a564a63265.png)\n\n\n\n107\n\n\n\n\n\nA55B8710BABAB8A10\n\n![](https://i.loli.net/2019/03/14/5c8a56a150bc1.png)\n\n## \n\n\n\nks(i,t)itik0 <= k * V[i] <= t012...ki\n\n```\nks(i,t) = max{ks(i-1, t - V[i] * k) + P[i] * k}; 0 <= k * V[i] <= t\n```\n\nks(0,t)=0;ks(i,0)=0;\n\n\n\n```java\npublic static class Knapsack {\n    private static int[] P={0,5,8};\n    private static int[] V={0,5,7};\n    private static int T = 10;\n\n    @Test\n    public void soleve1() {\n        int result = ks(P.length - 1,10);\n        System.out.println(\"\" + result);\n    }\n\n    private int ks(int i, int t){\n        int result = 0;\n        if (i == 0 || t == 0){\n            // \n            result = 0;\n        } else if(V[i] > t){\n            // \n            result = ks(i-1, t);\n        } else {\n            // \n            // kik\n            for (int k = 0; k * V[i] <= t; k++){\n                int tmp2 = ks(i-1, t - V[i] * k) + P[i] * k;\n                if (tmp2 > result){\n                    result = tmp2;\n                }\n            }\n        }\n        return result;\n    }\n}\n\n```\n\nPV0\n\n```\n11\n```\n\n0101ik\n\n```java\nfor (int k = 0; k * V[i] <= t; k++){\n    // kitmp2\n    int tmp2 = ks(i-1, t - V[i] * k) + P[i] * k;\n    if (tmp2 > result){\n        // \n        result = tmp2;\n    }\n}\n```\n\n## \n\n01\n\n\n\nF(n1,n2,...,nN)n1n2 12itF(n1,n2,...,ni)F(m1,m2,...,mi)F(m1,m2,...,mi) > F(n1,n2,...,ni)F(m1,m2,...,mi,...,nN)  F(n1,n2,...,nN) F(n1,n2,...,nN) F(n1,n2,...,ni)\n\n\n\ni\n\n\n\n![](https://i.loli.net/2019/05/02/5ccaece849f09.png)\n\n## \n\n\n\n\n\n### \n\n```java\nks(i,t) = max{ks(i-1, t - V[i] * k) + P[i] * k}; 0 <= k * V[i] <= t\n```\n\n```java\npublic static class Knapsack {\n    private static int[] P={0,5,8};\n    private static int[] V={0,5,7};\n    private static int T = 10;\n\n    private Integer[][] results = new Integer[P.length + 1][T + 1];\n\n    @Test\n    public void solve2() {\n        int result = ks2(P.length - 1,10);\n        System.out.println(\"\" + result);\n    }\n\n    private int ks2(int i, int t){\n        // \n        if (results[i][t] != null) return results[i][t];\n        int result = 0;\n        if (i == 0 || t == 0){\n            // \n            result = 0;\n        } else if(V[i] > t){\n            // \n            result = ks2(i-1, t);\n        } else {\n            // \n            // k\n            for (int k = 0; k * V[i] <= t; k++){\n                int tmp2 = ks2(i-1, t - V[i] * k) + P[i] * k;\n                if (tmp2 > result){\n                    result = tmp2;\n                }\n            }\n        }\n        results[i][t] = result;\n        return result;\n    }\n}\n```\n\n\n\n### \n\nPV0\n\n\n\n{% asset_img IMG_5E156B07E228-1.jpeg img %}\n\ni\n\n{% asset_img IMG_6B67BF7CC3A7-1.jpeg img %}\n\nt=101i2t=1401i2\n\n```java\npublic static class Knapsack {\n    private static int[] P={5,8};\n    private static int[] V={5,7};\n    private static int T = 10;\n\n    private int[][] dp = new int[P.length + 1][T + 1];\n\n    @Test\n    public void solve3() {\n        for (int i = 0; i < P.length; i++){\n            for (int j = 0; j <= T; j++){\n                for (int k = 0; k * V[i] <= j; k++){\n                    dp[i+1][j] = Math.max(dp[i+1][j], dp[i][j-k * V[i]] + k * P[i]);\n                }\n            }\n        }\n        System.out.println(\"\" + dp[P.length][T]);\n    }\n}\n```\n\n0101\n\n\n\n```\nks(t) = max{ks(t), ks(t - Vi) + Pi}\n```\n\n```java\npublic static class Knapsack {\n    private static int[] P={0,5,8};\n    private static int[] V={0,5,7};\n    private static int T = 10;\n\n    private int[] newResults = new int[T + 1];\n\n    @Test\n    public void resolve4() {\n        int result = ksp(P.length,T);\n        System.out.println(result);\n    }\n\n    private int ksp(int i, int t){\n        // \n        for (int m = 0; m < i; m++){\n            for (int n = V[m]; n <= t; n++){\n                newResults[n] = Math.max(newResults[n] , newResults[n - V[m]] + P[m]);\n            }\n            // \n            System.out.println(JSON.toJSONString(newResults));\n        }\n        return newResults[newResults.length - 1];\n    }\n}\n```\n\n\n\n```\n[0,0,0,0,0,0,0,0,0,0,0]\n[0,0,0,0,0,5,5,5,5,5,10]\n[0,0,0,0,0,5,5,8,8,8,10]\n10\n```\n\n01i T/Vi() iT/Vi0101\n\n## \n\n01\n\n![](https://i.loli.net/2019/05/02/5ccaee9d39578.png)\n\n\n\n\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a580b1789e.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","slug":"leetcode/complete-knapsack-problem","published":1,"updated":"2019-06-04T01:29:57.423Z","_id":"cjxze3gno000q0cvw8bbq0vax","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>01</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/02/5ccaec8a22bb9.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>NTiP[i]V[i]</p>\n<p>0101012T/Vi</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a564a63265.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p>107</p>\n<p></p>\n<p></p>\n<p>A55B8710BABAB8A10</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a56a150bc1.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>ks(i,t)itik0 &lt;= k * V[i] &lt;= t012ki</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(i,t) = max&#123;ks(i-1, t - V[i] * k) + P[i] * k&#125;; 0 &lt;= k * V[i] &lt;= t</span><br></pre></td></tr></table></figure>\n<p>ks(0,t)=0;ks(i,0)=0;</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Knapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">soleve1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks(P.length - <span class=\"number\">1</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || t == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(V[i] &gt; t)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks(i-<span class=\"number\">1</span>, t);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"comment\">// kik</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">                    result = tmp2;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>PV0</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">11</span><br></pre></td></tr></table></figure>\n<p>0101ik</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">    <span class=\"comment\">// kitmp2</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        result = tmp2;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>01</p>\n<p></p>\n<p>F(n1,n2,,nN)n1n2 12itF(n1,n2,,ni)F(m1,m2,,mi)F(m1,m2,,mi) &gt; F(n1,n2,,ni)F(m1,m2,,mi,,nN)  F(n1,n2,,nN) F(n1,n2,,nN) F(n1,n2,,ni)</p>\n<p></p>\n<p>i</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/02/5ccaece849f09.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(i,t) = max&#123;ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k&#125;; <span class=\"number\">0</span> &lt;= k * V[i] &lt;= t</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Knapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer[][] results = <span class=\"keyword\">new</span> Integer[P.length + <span class=\"number\">1</span>][T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks2(P.length - <span class=\"number\">1</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks2</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (results[i][t] != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> results[i][t];</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || t == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(V[i] &gt; t)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks2(i-<span class=\"number\">1</span>, t);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"comment\">// k</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> tmp2 = ks2(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">                    result = tmp2;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        results[i][t] = result;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>PV0</p>\n<p></p>\n<img src=\"/programming/leetcode/complete-knapsack-problem/IMG_5E156B07E228-1.jpeg\" title=\"img\">\n<p>i</p>\n<img src=\"/programming/leetcode/complete-knapsack-problem/IMG_6B67BF7CC3A7-1.jpeg\" title=\"img\">\n<p>t=101i2t=1401i2</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Knapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">5</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">5</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[][] dp = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[P.length + <span class=\"number\">1</span>][T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve3</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; P.length; i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt;= T; j++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k * V[i] &lt;= j; k++)&#123;</span><br><span class=\"line\">                    dp[i+<span class=\"number\">1</span>][j] = Math.max(dp[i+<span class=\"number\">1</span>][j], dp[i][j-k * V[i]] + k * P[i]);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + dp[P.length][T]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>0101</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(t) = max&#123;ks(t), ks(t - Vi) + Pi&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Knapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] newResults = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">resolve4</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ksp(P.length,T);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ksp</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">0</span>; m &lt; i; m++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> n = V[m]; n &lt;= t; n++)&#123;</span><br><span class=\"line\">                newResults[n] = Math.max(newResults[n] , newResults[n - V[m]] + P[m]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            System.out.println(JSON.toJSONString(newResults));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newResults[newResults.length - <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[0,0,0,0,0,0,0,0,0,0,0]</span><br><span class=\"line\">[0,0,0,0,0,5,5,5,5,5,10]</span><br><span class=\"line\">[0,0,0,0,0,5,5,8,8,8,10]</span><br><span class=\"line\">10</span><br></pre></td></tr></table></figure>\n<p>01i T/Vi() iT/Vi0101</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>01</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/02/5ccaee9d39578.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a580b1789e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>01</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/02/5ccaec8a22bb9.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>NTiP[i]V[i]</p>\n<p>0101012T/Vi</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a564a63265.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p>107</p>\n<p></p>\n<p></p>\n<p>A55B8710BABAB8A10</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a56a150bc1.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>ks(i,t)itik0 &lt;= k * V[i] &lt;= t012ki</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(i,t) = max&#123;ks(i-1, t - V[i] * k) + P[i] * k&#125;; 0 &lt;= k * V[i] &lt;= t</span><br></pre></td></tr></table></figure>\n<p>ks(0,t)=0;ks(i,0)=0;</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Knapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">soleve1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks(P.length - <span class=\"number\">1</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || t == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(V[i] &gt; t)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks(i-<span class=\"number\">1</span>, t);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"comment\">// kik</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">                    result = tmp2;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>PV0</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">11</span><br></pre></td></tr></table></figure>\n<p>0101ik</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">    <span class=\"comment\">// kitmp2</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        result = tmp2;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>01</p>\n<p></p>\n<p>F(n1,n2,,nN)n1n2 12itF(n1,n2,,ni)F(m1,m2,,mi)F(m1,m2,,mi) &gt; F(n1,n2,,ni)F(m1,m2,,mi,,nN)  F(n1,n2,,nN) F(n1,n2,,nN) F(n1,n2,,ni)</p>\n<p></p>\n<p>i</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/02/5ccaece849f09.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(i,t) = max&#123;ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k&#125;; <span class=\"number\">0</span> &lt;= k * V[i] &lt;= t</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Knapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer[][] results = <span class=\"keyword\">new</span> Integer[P.length + <span class=\"number\">1</span>][T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks2(P.length - <span class=\"number\">1</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks2</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (results[i][t] != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> results[i][t];</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || t == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(V[i] &gt; t)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks2(i-<span class=\"number\">1</span>, t);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"comment\">// k</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> tmp2 = ks2(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">                    result = tmp2;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        results[i][t] = result;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>PV0</p>\n<p></p>\n<img src=\"/programming/leetcode/complete-knapsack-problem/IMG_5E156B07E228-1.jpeg\" title=\"img\">\n<p>i</p>\n<img src=\"/programming/leetcode/complete-knapsack-problem/IMG_6B67BF7CC3A7-1.jpeg\" title=\"img\">\n<p>t=101i2t=1401i2</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Knapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">5</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">5</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[][] dp = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[P.length + <span class=\"number\">1</span>][T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve3</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; P.length; i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt;= T; j++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k * V[i] &lt;= j; k++)&#123;</span><br><span class=\"line\">                    dp[i+<span class=\"number\">1</span>][j] = Math.max(dp[i+<span class=\"number\">1</span>][j], dp[i][j-k * V[i]] + k * P[i]);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + dp[P.length][T]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>0101</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(t) = max&#123;ks(t), ks(t - Vi) + Pi&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Knapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">8</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">0</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] newResults = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">resolve4</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ksp(P.length,T);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ksp</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">0</span>; m &lt; i; m++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> n = V[m]; n &lt;= t; n++)&#123;</span><br><span class=\"line\">                newResults[n] = Math.max(newResults[n] , newResults[n - V[m]] + P[m]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            System.out.println(JSON.toJSONString(newResults));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newResults[newResults.length - <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[0,0,0,0,0,0,0,0,0,0,0]</span><br><span class=\"line\">[0,0,0,0,0,5,5,5,5,5,10]</span><br><span class=\"line\">[0,0,0,0,0,5,5,8,8,8,10]</span><br><span class=\"line\">10</span><br></pre></td></tr></table></figure>\n<p>01i T/Vi() iT/Vi0101</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>01</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/02/5ccaee9d39578.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a580b1789e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>"},{"title":"LeetCode","date":"2019-01-06T12:00:00.000Z","_content":"\n## \n\n``````\n\n\n\n`0``0`\n\n\n\n```bash\n(2 -> 4 -> 3) + (5 -> 6 -> 4)\n7 -> 0 -> 8\n342 + 465 = 807\n```\n\n## \n\n```(2 -> 4 -> 3)``342``(5 -> 6 -> 4)``465`807`7 -> 0 -> 8`null\n\n\n\n### 1\n\n```java\nclass Solution {\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n        ListNode head1 = l1;\n        ListNode head2 = l2;\n        int i = 0;\n        int j = 0;\n        int index = 0;\n        // l1\n        while (head1 != null) {\n            i += head1.val * Math.pow(10, index);\n            index++;\n            head1 = head1.next;\n        }\n        index = 0;\n        // l2\n        while (head2 != null) {\n            j += head2.val * Math.pow(10, index);\n            index++;\n            head2 = head2.next;\n        }\n        int sum = i + j;\n        ListNode newHead = new ListNode(0);\n        ListNode tmpHead = newHead;\n        int sign = 0;\n        // \n        while (sum > 0 || sign == 0) {\n            int tmp = sum % 10;\n            sum = sum / 10;\n            tmpHead.next = new ListNode(tmp);\n            tmpHead = tmpHead.next;\n            sign++;\n        }\n        return newHead.next;\n    }\n}\n```\n\n\n\n{% asset_img solution-1.png solution-1 %}\n\n![](/images/black_smile.png)\n\n\n\n```bash\n\n[9]\n[1,9,9,9,9,9,9,9,9,9]\n\n[0]\n\n[0,0,0,0,0,0,0,0,0,0,1]\n```\n\nlong\n\n### 2\n\n```java\nclass Solution {\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n        ListNode head1 = l1;\n        ListNode head2 = l2;\n        long i = 0;\n        long j = 0;\n        long index = 0;\n        while (head1 != null) {\n            i += head1.val * Math.pow(10, index);\n            index++;\n            head1 = head1.next;\n        }\n        index = 0;\n        while (head2 != null) {\n            j += head2.val * Math.pow(10, index);\n            index++;\n            head2 = head2.next;\n        }\n        long sum = i + j;\n        ListNode newHead = new ListNode(0);\n        ListNode tmpHead = newHead;\n        int sign = 0;\n        while (sum > 0 || sign == 0) {\n            int tmp = (int)(sum % 10);\n            sum = sum / 10;\n            tmpHead.next = new ListNode(tmp);\n            tmpHead = tmpHead.next;\n            sign++;\n        }\n        return newHead.next;\n    }\n}\n```\n\n\n{% asset_img solution-2.png solution-2 %}\n\n![](/images/black_smile-2.png)\n\nlong\n\n`BigInteger`\n\n### 3\n\n```java\nclass Solution {\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n        ListNode head1 = l1;\n        ListNode head2 = l2;\n        BigInteger i = new BigInteger(0);\n        BigInteger j = new BigInteger(0);\n        long index = 0;\n        while (head1 != null) {\n            i.add(BigInteger.valueOf(head1.val * Math.pow(10, index)));\n            index++;\n            head1 = head1.next;\n        }\n        index = 0;\n        while (head2 != null) {\n            j.add(BigInteger.valueOf(head2.val * Math.pow(10, index)));\n            index++;\n            head2 = head2.next;\n        }\n        BigInteger sum = i.add(j);\n        ListNode newHead = new ListNode(0);\n        ListNode tmpHead = newHead;\n        int sign = 0;\n        while (sum.compareTo(0) == 1 || sign == 0) {\n            int tmp = sum.mod(10).intValue();\n            sum = sum.divide(10);\n            tmpHead.next = new ListNode(tmp);\n            tmpHead = tmpHead.next;\n            sign++;\n        }\n        return newHead.next;\n    }\n}\n```\n\nemmmm`BigInteger`\n\n{% asset_img solution-3.png solution-3 %}\n\n## \n\n\n\n{% asset_img solution-4.png solution-4 %}\n\n`4 + 6 = 10``3 + 4`1\n\n\n\n```bash\n[9]\n[1,9,9,9,9,9,9,9,9,9]\n```\n\n`carry`\n\n```java\nclass Solution {\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n        ListNode head1 = l1;\n        ListNode head2 = l2;\n        ListNode newHead = new ListNode(0);\n        ListNode head3 = newHead;\n        // \n        boolean carry = false;\n        while (head1 != null || head2 != null) {\n            // \n            int x = (head1 != null) ? head1.val : 0;\n            int y = (head2 != null) ? head2.val : 0;\n            int sum = carry ? (x + y + 1) : (x + y);\n            // \n            if (sum >= 10){\n                sum -= 10;\n                carry = true;\n            } else {\n                carry = false;\n            }\n            // \n            head3.next = new ListNode(sum % 10);\n            head3 = head3.next;\n            if (head1 != null) head1 = head1.next;\n            if (head2 != null) head2 = head2.next;\n        }\n        if (carry) {\n            head3.next = new ListNode(1);\n        }\n        return newHead.next;\n    }\n}\n```\n\n{% asset_img result-5.png result-5 %}\n\n\n\n[](https://leetcode-cn.com/problems/add-two-numbers/)\n\n[](https://leetcode.com/problems/add-two-numbers/)\n\n~","source":"_posts/leetcode/day2-add-two-numbers.md","raw":"---\ntitle: LeetCode\ntags: \n - Java\n - \n - LeetCode\ncategories: \ndate: 2019-01-06 20:00:00\n---\n\n## \n\n``````\n\n\n\n`0``0`\n\n\n\n```bash\n(2 -> 4 -> 3) + (5 -> 6 -> 4)\n7 -> 0 -> 8\n342 + 465 = 807\n```\n\n## \n\n```(2 -> 4 -> 3)``342``(5 -> 6 -> 4)``465`807`7 -> 0 -> 8`null\n\n\n\n### 1\n\n```java\nclass Solution {\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n        ListNode head1 = l1;\n        ListNode head2 = l2;\n        int i = 0;\n        int j = 0;\n        int index = 0;\n        // l1\n        while (head1 != null) {\n            i += head1.val * Math.pow(10, index);\n            index++;\n            head1 = head1.next;\n        }\n        index = 0;\n        // l2\n        while (head2 != null) {\n            j += head2.val * Math.pow(10, index);\n            index++;\n            head2 = head2.next;\n        }\n        int sum = i + j;\n        ListNode newHead = new ListNode(0);\n        ListNode tmpHead = newHead;\n        int sign = 0;\n        // \n        while (sum > 0 || sign == 0) {\n            int tmp = sum % 10;\n            sum = sum / 10;\n            tmpHead.next = new ListNode(tmp);\n            tmpHead = tmpHead.next;\n            sign++;\n        }\n        return newHead.next;\n    }\n}\n```\n\n\n\n{% asset_img solution-1.png solution-1 %}\n\n![](/images/black_smile.png)\n\n\n\n```bash\n\n[9]\n[1,9,9,9,9,9,9,9,9,9]\n\n[0]\n\n[0,0,0,0,0,0,0,0,0,0,1]\n```\n\nlong\n\n### 2\n\n```java\nclass Solution {\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n        ListNode head1 = l1;\n        ListNode head2 = l2;\n        long i = 0;\n        long j = 0;\n        long index = 0;\n        while (head1 != null) {\n            i += head1.val * Math.pow(10, index);\n            index++;\n            head1 = head1.next;\n        }\n        index = 0;\n        while (head2 != null) {\n            j += head2.val * Math.pow(10, index);\n            index++;\n            head2 = head2.next;\n        }\n        long sum = i + j;\n        ListNode newHead = new ListNode(0);\n        ListNode tmpHead = newHead;\n        int sign = 0;\n        while (sum > 0 || sign == 0) {\n            int tmp = (int)(sum % 10);\n            sum = sum / 10;\n            tmpHead.next = new ListNode(tmp);\n            tmpHead = tmpHead.next;\n            sign++;\n        }\n        return newHead.next;\n    }\n}\n```\n\n\n{% asset_img solution-2.png solution-2 %}\n\n![](/images/black_smile-2.png)\n\nlong\n\n`BigInteger`\n\n### 3\n\n```java\nclass Solution {\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n        ListNode head1 = l1;\n        ListNode head2 = l2;\n        BigInteger i = new BigInteger(0);\n        BigInteger j = new BigInteger(0);\n        long index = 0;\n        while (head1 != null) {\n            i.add(BigInteger.valueOf(head1.val * Math.pow(10, index)));\n            index++;\n            head1 = head1.next;\n        }\n        index = 0;\n        while (head2 != null) {\n            j.add(BigInteger.valueOf(head2.val * Math.pow(10, index)));\n            index++;\n            head2 = head2.next;\n        }\n        BigInteger sum = i.add(j);\n        ListNode newHead = new ListNode(0);\n        ListNode tmpHead = newHead;\n        int sign = 0;\n        while (sum.compareTo(0) == 1 || sign == 0) {\n            int tmp = sum.mod(10).intValue();\n            sum = sum.divide(10);\n            tmpHead.next = new ListNode(tmp);\n            tmpHead = tmpHead.next;\n            sign++;\n        }\n        return newHead.next;\n    }\n}\n```\n\nemmmm`BigInteger`\n\n{% asset_img solution-3.png solution-3 %}\n\n## \n\n\n\n{% asset_img solution-4.png solution-4 %}\n\n`4 + 6 = 10``3 + 4`1\n\n\n\n```bash\n[9]\n[1,9,9,9,9,9,9,9,9,9]\n```\n\n`carry`\n\n```java\nclass Solution {\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n        ListNode head1 = l1;\n        ListNode head2 = l2;\n        ListNode newHead = new ListNode(0);\n        ListNode head3 = newHead;\n        // \n        boolean carry = false;\n        while (head1 != null || head2 != null) {\n            // \n            int x = (head1 != null) ? head1.val : 0;\n            int y = (head2 != null) ? head2.val : 0;\n            int sum = carry ? (x + y + 1) : (x + y);\n            // \n            if (sum >= 10){\n                sum -= 10;\n                carry = true;\n            } else {\n                carry = false;\n            }\n            // \n            head3.next = new ListNode(sum % 10);\n            head3 = head3.next;\n            if (head1 != null) head1 = head1.next;\n            if (head2 != null) head2 = head2.next;\n        }\n        if (carry) {\n            head3.next = new ListNode(1);\n        }\n        return newHead.next;\n    }\n}\n```\n\n{% asset_img result-5.png result-5 %}\n\n\n\n[](https://leetcode-cn.com/problems/add-two-numbers/)\n\n[](https://leetcode.com/problems/add-two-numbers/)\n\n~","slug":"leetcode/day2-add-two-numbers","published":1,"updated":"2019-06-04T01:29:57.430Z","_id":"cjxze3gno000r0cvwwkqf9oyy","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><code></code><code></code></p>\n<p></p>\n<p><code>0</code><code>0</code></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)</span><br><span class=\"line\">7 -&gt; 0 -&gt; 8</span><br><span class=\"line\">342 + 465 = 807</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><code>(2 -&gt; 4 -&gt; 3)</code><code>342</code><code>(5 -&gt; 6 -&gt; 4)</code><code>465</code>807<code>7 -&gt; 0 -&gt; 8</code>null</p>\n<p></p>\n<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ListNode <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class=\"line\">        ListNode head1 = l1;</span><br><span class=\"line\">        ListNode head2 = l2;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> j = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// l1</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head1 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            i += head1.val * Math.pow(<span class=\"number\">10</span>, index);</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head1 = head1.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// l2</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head2 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            j += head2.val * Math.pow(<span class=\"number\">10</span>, index);</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head2 = head2.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = i + j;</span><br><span class=\"line\">        ListNode newHead = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">        ListNode tmpHead = newHead;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sign = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (sum &gt; <span class=\"number\">0</span> || sign == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp = sum % <span class=\"number\">10</span>;</span><br><span class=\"line\">            sum = sum / <span class=\"number\">10</span>;</span><br><span class=\"line\">            tmpHead.next = <span class=\"keyword\">new</span> ListNode(tmp);</span><br><span class=\"line\">            tmpHead = tmpHead.next;</span><br><span class=\"line\">            sign++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newHead.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day2-add-two-numbers/solution-1.png\" title=\"solution-1\">\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/black_smile.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[9]</span><br><span class=\"line\">[1,9,9,9,9,9,9,9,9,9]</span><br><span class=\"line\"></span><br><span class=\"line\">[0]</span><br><span class=\"line\"></span><br><span class=\"line\">[0,0,0,0,0,0,0,0,0,0,1]</span><br></pre></td></tr></table></figure>\n<p>long</p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ListNode <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class=\"line\">        ListNode head1 = l1;</span><br><span class=\"line\">        ListNode head2 = l2;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> j = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head1 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            i += head1.val * Math.pow(<span class=\"number\">10</span>, index);</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head1 = head1.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head2 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            j += head2.val * Math.pow(<span class=\"number\">10</span>, index);</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head2 = head2.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> sum = i + j;</span><br><span class=\"line\">        ListNode newHead = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">        ListNode tmpHead = newHead;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sign = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (sum &gt; <span class=\"number\">0</span> || sign == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp = (<span class=\"keyword\">int</span>)(sum % <span class=\"number\">10</span>);</span><br><span class=\"line\">            sum = sum / <span class=\"number\">10</span>;</span><br><span class=\"line\">            tmpHead.next = <span class=\"keyword\">new</span> ListNode(tmp);</span><br><span class=\"line\">            tmpHead = tmpHead.next;</span><br><span class=\"line\">            sign++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newHead.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day2-add-two-numbers/solution-2.png\" title=\"solution-2\">\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/black_smile-2.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>long</p>\n<p><code>BigInteger</code></p>\n<h3 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ListNode <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class=\"line\">        ListNode head1 = l1;</span><br><span class=\"line\">        ListNode head2 = l2;</span><br><span class=\"line\">        BigInteger i = <span class=\"keyword\">new</span> BigInteger(<span class=\"number\">0</span>);</span><br><span class=\"line\">        BigInteger j = <span class=\"keyword\">new</span> BigInteger(<span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">long</span> index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head1 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            i.add(BigInteger.valueOf(head1.val * Math.pow(<span class=\"number\">10</span>, index)));</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head1 = head1.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head2 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            j.add(BigInteger.valueOf(head2.val * Math.pow(<span class=\"number\">10</span>, index)));</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head2 = head2.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        BigInteger sum = i.add(j);</span><br><span class=\"line\">        ListNode newHead = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">        ListNode tmpHead = newHead;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sign = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (sum.compareTo(<span class=\"number\">0</span>) == <span class=\"number\">1</span> || sign == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp = sum.mod(<span class=\"number\">10</span>).intValue();</span><br><span class=\"line\">            sum = sum.divide(<span class=\"number\">10</span>);</span><br><span class=\"line\">            tmpHead.next = <span class=\"keyword\">new</span> ListNode(tmp);</span><br><span class=\"line\">            tmpHead = tmpHead.next;</span><br><span class=\"line\">            sign++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newHead.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emmmm<code>BigInteger</code></p>\n<img src=\"/programming/leetcode/day2-add-two-numbers/solution-3.png\" title=\"solution-3\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<img src=\"/programming/leetcode/day2-add-two-numbers/solution-4.png\" title=\"solution-4\">\n<p><code>4 + 6 = 10</code><code>3 + 4</code>1</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[9]</span><br><span class=\"line\">[1,9,9,9,9,9,9,9,9,9]</span><br></pre></td></tr></table></figure>\n<p><code>carry</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ListNode <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class=\"line\">        ListNode head1 = l1;</span><br><span class=\"line\">        ListNode head2 = l2;</span><br><span class=\"line\">        ListNode newHead = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">        ListNode head3 = newHead;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> carry = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head1 != <span class=\"keyword\">null</span> || head2 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> x = (head1 != <span class=\"keyword\">null</span>) ? head1.val : <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> y = (head2 != <span class=\"keyword\">null</span>) ? head2.val : <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> sum = carry ? (x + y + <span class=\"number\">1</span>) : (x + y);</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (sum &gt;= <span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">                sum -= <span class=\"number\">10</span>;</span><br><span class=\"line\">                carry = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                carry = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            head3.next = <span class=\"keyword\">new</span> ListNode(sum % <span class=\"number\">10</span>);</span><br><span class=\"line\">            head3 = head3.next;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (head1 != <span class=\"keyword\">null</span>) head1 = head1.next;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (head2 != <span class=\"keyword\">null</span>) head2 = head2.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (carry) &#123;</span><br><span class=\"line\">            head3.next = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newHead.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"/programming/leetcode/day2-add-two-numbers/result-5.png\" title=\"result-5\">\n<p></p>\n<p><a href=\"https://leetcode-cn.com/problems/add-two-numbers/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p><a href=\"https://leetcode.com/problems/add-two-numbers/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>~</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><code></code><code></code></p>\n<p></p>\n<p><code>0</code><code>0</code></p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)</span><br><span class=\"line\">7 -&gt; 0 -&gt; 8</span><br><span class=\"line\">342 + 465 = 807</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><code>(2 -&gt; 4 -&gt; 3)</code><code>342</code><code>(5 -&gt; 6 -&gt; 4)</code><code>465</code>807<code>7 -&gt; 0 -&gt; 8</code>null</p>\n<p></p>\n<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ListNode <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class=\"line\">        ListNode head1 = l1;</span><br><span class=\"line\">        ListNode head2 = l2;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> j = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// l1</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head1 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            i += head1.val * Math.pow(<span class=\"number\">10</span>, index);</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head1 = head1.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// l2</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head2 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            j += head2.val * Math.pow(<span class=\"number\">10</span>, index);</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head2 = head2.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = i + j;</span><br><span class=\"line\">        ListNode newHead = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">        ListNode tmpHead = newHead;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sign = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (sum &gt; <span class=\"number\">0</span> || sign == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp = sum % <span class=\"number\">10</span>;</span><br><span class=\"line\">            sum = sum / <span class=\"number\">10</span>;</span><br><span class=\"line\">            tmpHead.next = <span class=\"keyword\">new</span> ListNode(tmp);</span><br><span class=\"line\">            tmpHead = tmpHead.next;</span><br><span class=\"line\">            sign++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newHead.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day2-add-two-numbers/solution-1.png\" title=\"solution-1\">\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/black_smile.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[9]</span><br><span class=\"line\">[1,9,9,9,9,9,9,9,9,9]</span><br><span class=\"line\"></span><br><span class=\"line\">[0]</span><br><span class=\"line\"></span><br><span class=\"line\">[0,0,0,0,0,0,0,0,0,0,1]</span><br></pre></td></tr></table></figure>\n<p>long</p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ListNode <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class=\"line\">        ListNode head1 = l1;</span><br><span class=\"line\">        ListNode head2 = l2;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> j = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head1 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            i += head1.val * Math.pow(<span class=\"number\">10</span>, index);</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head1 = head1.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head2 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            j += head2.val * Math.pow(<span class=\"number\">10</span>, index);</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head2 = head2.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> sum = i + j;</span><br><span class=\"line\">        ListNode newHead = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">        ListNode tmpHead = newHead;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sign = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (sum &gt; <span class=\"number\">0</span> || sign == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp = (<span class=\"keyword\">int</span>)(sum % <span class=\"number\">10</span>);</span><br><span class=\"line\">            sum = sum / <span class=\"number\">10</span>;</span><br><span class=\"line\">            tmpHead.next = <span class=\"keyword\">new</span> ListNode(tmp);</span><br><span class=\"line\">            tmpHead = tmpHead.next;</span><br><span class=\"line\">            sign++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newHead.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day2-add-two-numbers/solution-2.png\" title=\"solution-2\">\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/images/black_smile-2.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>long</p>\n<p><code>BigInteger</code></p>\n<h3 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ListNode <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class=\"line\">        ListNode head1 = l1;</span><br><span class=\"line\">        ListNode head2 = l2;</span><br><span class=\"line\">        BigInteger i = <span class=\"keyword\">new</span> BigInteger(<span class=\"number\">0</span>);</span><br><span class=\"line\">        BigInteger j = <span class=\"keyword\">new</span> BigInteger(<span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">long</span> index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head1 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            i.add(BigInteger.valueOf(head1.val * Math.pow(<span class=\"number\">10</span>, index)));</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head1 = head1.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        index = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head2 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            j.add(BigInteger.valueOf(head2.val * Math.pow(<span class=\"number\">10</span>, index)));</span><br><span class=\"line\">            index++;</span><br><span class=\"line\">            head2 = head2.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        BigInteger sum = i.add(j);</span><br><span class=\"line\">        ListNode newHead = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">        ListNode tmpHead = newHead;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sign = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (sum.compareTo(<span class=\"number\">0</span>) == <span class=\"number\">1</span> || sign == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp = sum.mod(<span class=\"number\">10</span>).intValue();</span><br><span class=\"line\">            sum = sum.divide(<span class=\"number\">10</span>);</span><br><span class=\"line\">            tmpHead.next = <span class=\"keyword\">new</span> ListNode(tmp);</span><br><span class=\"line\">            tmpHead = tmpHead.next;</span><br><span class=\"line\">            sign++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newHead.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emmmm<code>BigInteger</code></p>\n<img src=\"/programming/leetcode/day2-add-two-numbers/solution-3.png\" title=\"solution-3\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<img src=\"/programming/leetcode/day2-add-two-numbers/solution-4.png\" title=\"solution-4\">\n<p><code>4 + 6 = 10</code><code>3 + 4</code>1</p>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[9]</span><br><span class=\"line\">[1,9,9,9,9,9,9,9,9,9]</span><br></pre></td></tr></table></figure>\n<p><code>carry</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ListNode <span class=\"title\">addTwoNumbers</span><span class=\"params\">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class=\"line\">        ListNode head1 = l1;</span><br><span class=\"line\">        ListNode head2 = l2;</span><br><span class=\"line\">        ListNode newHead = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">0</span>);</span><br><span class=\"line\">        ListNode head3 = newHead;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> carry = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (head1 != <span class=\"keyword\">null</span> || head2 != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> x = (head1 != <span class=\"keyword\">null</span>) ? head1.val : <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> y = (head2 != <span class=\"keyword\">null</span>) ? head2.val : <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> sum = carry ? (x + y + <span class=\"number\">1</span>) : (x + y);</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (sum &gt;= <span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">                sum -= <span class=\"number\">10</span>;</span><br><span class=\"line\">                carry = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                carry = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            head3.next = <span class=\"keyword\">new</span> ListNode(sum % <span class=\"number\">10</span>);</span><br><span class=\"line\">            head3 = head3.next;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (head1 != <span class=\"keyword\">null</span>) head1 = head1.next;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (head2 != <span class=\"keyword\">null</span>) head2 = head2.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (carry) &#123;</span><br><span class=\"line\">            head3.next = <span class=\"keyword\">new</span> ListNode(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newHead.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<img src=\"/programming/leetcode/day2-add-two-numbers/result-5.png\" title=\"result-5\">\n<p></p>\n<p><a href=\"https://leetcode-cn.com/problems/add-two-numbers/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p><a href=\"https://leetcode.com/problems/add-two-numbers/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>~</p>\n"},{"title":"01","date":"2019-03-10T13:23:14.000Z","_content":"\n## \n\n````````\n\n## \n\n``````\n\n\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a1e400a1c1.jpeg)\n\n*AE**AEEB*\n\n\n\nAEdBBE`d1`AB`d2`BE`d3``d3 < d1` `d3 + d2 < d1 + d2 = d`d`d1`BE\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a3c4e20747.jpeg)\n\nABCDd1,d2,d3,d4,d5,d6AD4****\n\nABB3+5mod 4 = 0`d2``d6``d4+d5+d6``d1+d5+d3`\n\n## \n\n``\n\n\n\n** ABBEABBE\n\n![](https://i.loli.net/2019/03/14/5c8a47085f922.jpeg)\n\n\n\n## 01\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a47d0de9a6.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a564a63265.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a56572a8c0.png)\n\ncn\n\n## \n\n\n\n![20190310214935.png](https://i.loli.net/2019/03/10/5c8515f07c869.png)\n\n\n\n\n\n5(v)(w)\n\n{% asset_img IMG_9B418BF0E7A5-1.jpeg pic %}\n\n10\n\nemmm`0/1``1/2``2/3`\n\n10`0/1`\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a56a150bc1.png)\n\n`xi`i`xi = 1` 0`vi`i`wi`i\n\n![](https://i.loli.net/2019/03/10/5c851ebfd4687.jpeg)\n\n1001102\n\n{% asset_img IMG_2ABCC82C89F7-1.jpeg exhaust-algorithm %}\n\n12823\n\n![](https://i.loli.net/2019/03/10/5c8524cc69459.jpeg)\n\n\n\n![](https://i.loli.net/2019/03/10/5c85286b617f4.jpeg)\n\n16\n\n`13`421\n\n## \n\n\n\n1. x1,x2,x3...xnxi01iviiwiinc\n2. max(x1v1 + x2v2 + x3v3 + ... + xnvn)\n3. x1w1 + x2w2 + x3w3 + ... + xnwn < c\n4. KS(i,j)ji\n\ni\n\n1. i-1KS(i,j) = KS(i-1,j)\n2. KS(i-1,j)KS(i-1,j-wi) + vi\n\n![](https://i.loli.net/2019/03/12/5c87b64eb1a66.jpeg)\n\nncijKS(i,j)ii-1ii-1jKS(i-1,j)ii-1j-wiKS(i-1,j-wi)+vi\n\n\n\n```java\npublic class Solution{\n    int[] vs = {0,2,4,3,7};\n    int[] ws = {0,2,3,5,5};\n\n    @Test\n    public void testKnapsack1() {\n        int result = ks(4,10);\n        System.out.println(result);\n    }\n\n    private int ks(int i, int c){\n        int result = 0;\n        if (i == 0 || c == 0){\n            // \n            result = 0;\n        } else if(ws[i] > c){\n            // \n            result = ks(i-1, c);\n        } else {\n            // \n            int tmp1 = ks(i-1, c);\n            int tmp2 = ks(i-1, c-ws[i]) + vs[i];\n            result = Math.max(tmp1, tmp2);\n        }\n        return result;\n    }\n}\n```\n\nwsvs0\n\n```\n13\n```\n\n\n\n## \n\n### \n\n\n\n``\n\n(x1x2xn)01(x2x3xn)(y2y3yn)(v2y2+v3y3++vnyn)+v1x1 > (v2x2+v3x3++vnxn)+v1x1(X1Y2Y3Yn)01(X1X2Xn)0101``\n\n![](https://i.loli.net/2019/03/14/5c8a5766a30bc.png)\n\n````\n\n### \n\n\n\n![](https://i.loli.net/2019/03/12/5c87c27322752.jpeg)\n\n`i=4,j=10`i=0j=0ks0000\n\n```java\npublic class Solution{\n    int[] vs = {0,2,4,3,7};\n    int[] ws = {0,2,3,5,5};\n    Integer[][] results = new Integer[5][11];\n\n    @Test\n    public void testKnapsack2() {\n        int result = ks2(4,10);\n        System.out.println(result);\n    }\n\n    private int ks2(int i, int c){\n        int result = 0;\n        // \n        if (results[i][c] != null) return results[i][c];\n        if (i == 0 || c == 0){\n            // \n            result = 0;\n        } else if(ws[i] > c){\n            // \n            result = ks(i-1, c);\n        } else {\n            // \n            int tmp1 = ks(i-1, c);\n            int tmp2 = ks(i-1, c-ws[i]) + vs[i];\n            result = Math.max(tmp1, tmp2);\n            results[i][c] = result;\n        }\n        return result;\n    }\n}\n```\n\n\n\n### \n\n\n\n![](https://i.loli.net/2019/03/12/5c87c45b5d9bf.jpeg)\n\ni=111\n\n![](https://i.loli.net/2019/03/12/5c87c4c11104c.jpeg)\n\ni=2i=2,j=3\n\n![](https://i.loli.net/2019/03/12/5c87c673e6c36.jpeg)\n\n\n\n![](https://i.loli.net/2019/03/12/5c87c75ba58ce.jpeg)\n\n13`i=4,j=10``ks(i-1,j)=ks(i,j)`i`ks(i-1,j)`i`ks(i-1,j-wi)`\n\n{% asset_img IMG_BFE9B7063670-1.jpeg exhaust-algorithm %}\n\n\n\n```java\npublic class Solution{\n    int[] vs = {0,2,4,3,7};\n    int[] ws = {0,2,3,5,5};\n    Integer[][] results = new Integer[5][11];\n    \n    @Test\n    public void testKnapsack3() {\n        int result = ks3(4,10);\n        System.out.println(result);\n    }\n\n    private int ks3(int i, int j){\n        // \n        for (int m = 0; m <= i; m++){\n            results[m][0] = 0;\n        }\n        for (int m = 0; m <= j; m++){\n            results[0][m] = 0;\n        }\n        // \n        for (int m = 1; m <= i; m++){\n            for (int n = 1; n <= j; n++){\n                if (n < ws[m]){\n                    // \n                    results[m][n] = results[m-1][n];\n                } else {\n                    // \n                    if (results[m-1][n] > results[m-1][n-ws[m]] + vs[m]){\n                        // \n                        results[m][n] = results[m-1][n];\n                    } else {\n                        results[m][n] = results[m-1][n-ws[m]] + vs[m];\n                    }\n                }\n            }\n        }\n        return results[i][j];\n    }\n}\n```\n\n`O(n * c)``O(n * c)`;\n\n## \n\n\n\n\n\nemmm01\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a580b1789e.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","source":"_posts/leetcode/dp-01-knapsack-problem.md","raw":"---\ntitle: 01\ndate: 2019-03-10 21:23:14\ntags: \n - Java\n - \n - \n - \ncategories: \n---\n\n## \n\n````````\n\n## \n\n``````\n\n\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a1e400a1c1.jpeg)\n\n*AE**AEEB*\n\n\n\nAEdBBE`d1`AB`d2`BE`d3``d3 < d1` `d3 + d2 < d1 + d2 = d`d`d1`BE\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a3c4e20747.jpeg)\n\nABCDd1,d2,d3,d4,d5,d6AD4****\n\nABB3+5mod 4 = 0`d2``d6``d4+d5+d6``d1+d5+d3`\n\n## \n\n``\n\n\n\n** ABBEABBE\n\n![](https://i.loli.net/2019/03/14/5c8a47085f922.jpeg)\n\n\n\n## 01\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a47d0de9a6.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a564a63265.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a56572a8c0.png)\n\ncn\n\n## \n\n\n\n![20190310214935.png](https://i.loli.net/2019/03/10/5c8515f07c869.png)\n\n\n\n\n\n5(v)(w)\n\n{% asset_img IMG_9B418BF0E7A5-1.jpeg pic %}\n\n10\n\nemmm`0/1``1/2``2/3`\n\n10`0/1`\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a56a150bc1.png)\n\n`xi`i`xi = 1` 0`vi`i`wi`i\n\n![](https://i.loli.net/2019/03/10/5c851ebfd4687.jpeg)\n\n1001102\n\n{% asset_img IMG_2ABCC82C89F7-1.jpeg exhaust-algorithm %}\n\n12823\n\n![](https://i.loli.net/2019/03/10/5c8524cc69459.jpeg)\n\n\n\n![](https://i.loli.net/2019/03/10/5c85286b617f4.jpeg)\n\n16\n\n`13`421\n\n## \n\n\n\n1. x1,x2,x3...xnxi01iviiwiinc\n2. max(x1v1 + x2v2 + x3v3 + ... + xnvn)\n3. x1w1 + x2w2 + x3w3 + ... + xnwn < c\n4. KS(i,j)ji\n\ni\n\n1. i-1KS(i,j) = KS(i-1,j)\n2. KS(i-1,j)KS(i-1,j-wi) + vi\n\n![](https://i.loli.net/2019/03/12/5c87b64eb1a66.jpeg)\n\nncijKS(i,j)ii-1ii-1jKS(i-1,j)ii-1j-wiKS(i-1,j-wi)+vi\n\n\n\n```java\npublic class Solution{\n    int[] vs = {0,2,4,3,7};\n    int[] ws = {0,2,3,5,5};\n\n    @Test\n    public void testKnapsack1() {\n        int result = ks(4,10);\n        System.out.println(result);\n    }\n\n    private int ks(int i, int c){\n        int result = 0;\n        if (i == 0 || c == 0){\n            // \n            result = 0;\n        } else if(ws[i] > c){\n            // \n            result = ks(i-1, c);\n        } else {\n            // \n            int tmp1 = ks(i-1, c);\n            int tmp2 = ks(i-1, c-ws[i]) + vs[i];\n            result = Math.max(tmp1, tmp2);\n        }\n        return result;\n    }\n}\n```\n\nwsvs0\n\n```\n13\n```\n\n\n\n## \n\n### \n\n\n\n``\n\n(x1x2xn)01(x2x3xn)(y2y3yn)(v2y2+v3y3++vnyn)+v1x1 > (v2x2+v3x3++vnxn)+v1x1(X1Y2Y3Yn)01(X1X2Xn)0101``\n\n![](https://i.loli.net/2019/03/14/5c8a5766a30bc.png)\n\n````\n\n### \n\n\n\n![](https://i.loli.net/2019/03/12/5c87c27322752.jpeg)\n\n`i=4,j=10`i=0j=0ks0000\n\n```java\npublic class Solution{\n    int[] vs = {0,2,4,3,7};\n    int[] ws = {0,2,3,5,5};\n    Integer[][] results = new Integer[5][11];\n\n    @Test\n    public void testKnapsack2() {\n        int result = ks2(4,10);\n        System.out.println(result);\n    }\n\n    private int ks2(int i, int c){\n        int result = 0;\n        // \n        if (results[i][c] != null) return results[i][c];\n        if (i == 0 || c == 0){\n            // \n            result = 0;\n        } else if(ws[i] > c){\n            // \n            result = ks(i-1, c);\n        } else {\n            // \n            int tmp1 = ks(i-1, c);\n            int tmp2 = ks(i-1, c-ws[i]) + vs[i];\n            result = Math.max(tmp1, tmp2);\n            results[i][c] = result;\n        }\n        return result;\n    }\n}\n```\n\n\n\n### \n\n\n\n![](https://i.loli.net/2019/03/12/5c87c45b5d9bf.jpeg)\n\ni=111\n\n![](https://i.loli.net/2019/03/12/5c87c4c11104c.jpeg)\n\ni=2i=2,j=3\n\n![](https://i.loli.net/2019/03/12/5c87c673e6c36.jpeg)\n\n\n\n![](https://i.loli.net/2019/03/12/5c87c75ba58ce.jpeg)\n\n13`i=4,j=10``ks(i-1,j)=ks(i,j)`i`ks(i-1,j)`i`ks(i-1,j-wi)`\n\n{% asset_img IMG_BFE9B7063670-1.jpeg exhaust-algorithm %}\n\n\n\n```java\npublic class Solution{\n    int[] vs = {0,2,4,3,7};\n    int[] ws = {0,2,3,5,5};\n    Integer[][] results = new Integer[5][11];\n    \n    @Test\n    public void testKnapsack3() {\n        int result = ks3(4,10);\n        System.out.println(result);\n    }\n\n    private int ks3(int i, int j){\n        // \n        for (int m = 0; m <= i; m++){\n            results[m][0] = 0;\n        }\n        for (int m = 0; m <= j; m++){\n            results[0][m] = 0;\n        }\n        // \n        for (int m = 1; m <= i; m++){\n            for (int n = 1; n <= j; n++){\n                if (n < ws[m]){\n                    // \n                    results[m][n] = results[m-1][n];\n                } else {\n                    // \n                    if (results[m-1][n] > results[m-1][n-ws[m]] + vs[m]){\n                        // \n                        results[m][n] = results[m-1][n];\n                    } else {\n                        results[m][n] = results[m-1][n-ws[m]] + vs[m];\n                    }\n                }\n            }\n        }\n        return results[i][j];\n    }\n}\n```\n\n`O(n * c)``O(n * c)`;\n\n## \n\n\n\n\n\nemmm01\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a580b1789e.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","slug":"leetcode/dp-01-knapsack-problem","published":1,"updated":"2019-06-04T01:29:57.465Z","_id":"cjxze3gno000t0cvwe73qcbbe","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><code></code><code></code><code></code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><code></code><code></code></p>\n<p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a1e400a1c1.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><em>AE</em><em>AEEB</em></p>\n<p></p>\n<p>AEdBBE<code>d1</code>AB<code>d2</code>BE<code>d3</code><code>d3 &lt; d1</code> <code>d3 + d2 &lt; d1 + d2 = d</code>d<code>d1</code>BE</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a3c4e20747.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>ABCDd1,d2,d3,d4,d5,d6AD4<em></em><em></em></p>\n<p>ABB3+5mod 4 = 0<code>d2</code><code>d6</code><code>d4+d5+d6</code><code>d1+d5+d3</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<p></p>\n<p><em></em> ABBEABBE</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a47085f922.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<h2 id=\"01\"><a href=\"#01\" class=\"headerlink\" title=\"01\"></a>01</h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a47d0de9a6.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a564a63265.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a56572a8c0.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>cn</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/10/5c8515f07c869.png\" alt=\"20190310214935.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190310214935.png</div>\n            </figure>\n<p></p>\n<p></p>\n<p>5(v)(w)</p>\n<img src=\"/programming/leetcode/dp-01-knapsack-problem/IMG_9B418BF0E7A5-1.jpeg\" title=\"pic\">\n<p>10</p>\n<p>emmm<code>0/1</code><code>1/2</code><code>2/3</code></p>\n<p>10<code>0/1</code></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a56a150bc1.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>xi</code>i<code>xi = 1</code> 0<code>vi</code>i<code>wi</code>i</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/10/5c851ebfd4687.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>1001102</p>\n<img src=\"/programming/leetcode/dp-01-knapsack-problem/IMG_2ABCC82C89F7-1.jpeg\" title=\"exhaust-algorithm\">\n<p>12823</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/10/5c8524cc69459.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/10/5c85286b617f4.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>16</p>\n<p><code>13</code>421</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li>x1,x2,x3xnxi01iviiwiinc</li>\n<li>max(x1v1 + x2v2 + x3v3 +  + xnvn)</li>\n<li>x1w1 + x2w2 + x3w3 +  + xnwn &lt; c</li>\n<li>KS(i,j)ji</li>\n</ol>\n<p>i</p>\n<ol>\n<li>i-1KS(i,j) = KS(i-1,j)</li>\n<li>KS(i-1,j)KS(i-1,j-wi) + vi</li>\n</ol>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87b64eb1a66.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>ncijKS(i,j)ii-1ii-1jKS(i-1,j)ii-1j-wiKS(i-1,j-wi)+vi</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] vs = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ws = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testKnapsack1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks(<span class=\"number\">4</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> c)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || c == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(ws[i] &gt; c)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks(i-<span class=\"number\">1</span>, c);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp1 = ks(i-<span class=\"number\">1</span>, c);</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, c-ws[i]) + vs[i];</span><br><span class=\"line\">            result = Math.max(tmp1, tmp2);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>wsvs0</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">13</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><code></code></p>\n<p>(x1x2xn)01(x2x3xn)(y2y3yn)(v2y2+v3y3++vnyn)+v1x1 &gt; (v2x2+v3x3++vnxn)+v1x1(X1Y2Y3Yn)01(X1X2Xn)0101<code></code></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a5766a30bc.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code></code><code></code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c27322752.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>i=4,j=10</code>i=0j=0ks0000</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] vs = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ws = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    Integer[][] results = <span class=\"keyword\">new</span> Integer[<span class=\"number\">5</span>][<span class=\"number\">11</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testKnapsack2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks2(<span class=\"number\">4</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks2</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> c)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (results[i][c] != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> results[i][c];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || c == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(ws[i] &gt; c)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks(i-<span class=\"number\">1</span>, c);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp1 = ks(i-<span class=\"number\">1</span>, c);</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, c-ws[i]) + vs[i];</span><br><span class=\"line\">            result = Math.max(tmp1, tmp2);</span><br><span class=\"line\">            results[i][c] = result;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c45b5d9bf.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>i=111</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c4c11104c.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>i=2i=2,j=3</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c673e6c36.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c75ba58ce.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>13<code>i=4,j=10</code><code>ks(i-1,j)=ks(i,j)</code>i<code>ks(i-1,j)</code>i<code>ks(i-1,j-wi)</code></p>\n<img src=\"/programming/leetcode/dp-01-knapsack-problem/IMG_BFE9B7063670-1.jpeg\" title=\"exhaust-algorithm\">\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] vs = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ws = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    Integer[][] results = <span class=\"keyword\">new</span> Integer[<span class=\"number\">5</span>][<span class=\"number\">11</span>];</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testKnapsack3</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks3(<span class=\"number\">4</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks3</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> j)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">0</span>; m &lt;= i; m++)&#123;</span><br><span class=\"line\">            results[m][<span class=\"number\">0</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">0</span>; m &lt;= j; m++)&#123;</span><br><span class=\"line\">            results[<span class=\"number\">0</span>][m] = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">1</span>; m &lt;= i; m++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> n = <span class=\"number\">1</span>; n &lt;= j; n++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (n &lt; ws[m])&#123;</span><br><span class=\"line\">                    <span class=\"comment\">// </span></span><br><span class=\"line\">                    results[m][n] = results[m-<span class=\"number\">1</span>][n];</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// </span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (results[m-<span class=\"number\">1</span>][n] &gt; results[m-<span class=\"number\">1</span>][n-ws[m]] + vs[m])&#123;</span><br><span class=\"line\">                        <span class=\"comment\">// </span></span><br><span class=\"line\">                        results[m][n] = results[m-<span class=\"number\">1</span>][n];</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        results[m][n] = results[m-<span class=\"number\">1</span>][n-ws[m]] + vs[m];</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> results[i][j];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>O(n * c)</code><code>O(n * c)</code>;</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p>emmm01</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a580b1789e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><code></code><code></code><code></code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><code></code><code></code></p>\n<p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a1e400a1c1.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><em>AE</em><em>AEEB</em></p>\n<p></p>\n<p>AEdBBE<code>d1</code>AB<code>d2</code>BE<code>d3</code><code>d3 &lt; d1</code> <code>d3 + d2 &lt; d1 + d2 = d</code>d<code>d1</code>BE</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a3c4e20747.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>ABCDd1,d2,d3,d4,d5,d6AD4<em></em><em></em></p>\n<p>ABB3+5mod 4 = 0<code>d2</code><code>d6</code><code>d4+d5+d6</code><code>d1+d5+d3</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<p></p>\n<p><em></em> ABBEABBE</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a47085f922.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<h2 id=\"01\"><a href=\"#01\" class=\"headerlink\" title=\"01\"></a>01</h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a47d0de9a6.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a564a63265.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a56572a8c0.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>cn</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/10/5c8515f07c869.png\" alt=\"20190310214935.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190310214935.png</div>\n            </figure>\n<p></p>\n<p></p>\n<p>5(v)(w)</p>\n<img src=\"/programming/leetcode/dp-01-knapsack-problem/IMG_9B418BF0E7A5-1.jpeg\" title=\"pic\">\n<p>10</p>\n<p>emmm<code>0/1</code><code>1/2</code><code>2/3</code></p>\n<p>10<code>0/1</code></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a56a150bc1.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>xi</code>i<code>xi = 1</code> 0<code>vi</code>i<code>wi</code>i</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/10/5c851ebfd4687.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>1001102</p>\n<img src=\"/programming/leetcode/dp-01-knapsack-problem/IMG_2ABCC82C89F7-1.jpeg\" title=\"exhaust-algorithm\">\n<p>12823</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/10/5c8524cc69459.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/10/5c85286b617f4.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>16</p>\n<p><code>13</code>421</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li>x1,x2,x3xnxi01iviiwiinc</li>\n<li>max(x1v1 + x2v2 + x3v3 +  + xnvn)</li>\n<li>x1w1 + x2w2 + x3w3 +  + xnwn &lt; c</li>\n<li>KS(i,j)ji</li>\n</ol>\n<p>i</p>\n<ol>\n<li>i-1KS(i,j) = KS(i-1,j)</li>\n<li>KS(i-1,j)KS(i-1,j-wi) + vi</li>\n</ol>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87b64eb1a66.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>ncijKS(i,j)ii-1ii-1jKS(i-1,j)ii-1j-wiKS(i-1,j-wi)+vi</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] vs = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ws = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testKnapsack1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks(<span class=\"number\">4</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> c)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || c == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(ws[i] &gt; c)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks(i-<span class=\"number\">1</span>, c);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp1 = ks(i-<span class=\"number\">1</span>, c);</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, c-ws[i]) + vs[i];</span><br><span class=\"line\">            result = Math.max(tmp1, tmp2);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>wsvs0</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">13</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><code></code></p>\n<p>(x1x2xn)01(x2x3xn)(y2y3yn)(v2y2+v3y3++vnyn)+v1x1 &gt; (v2x2+v3x3++vnxn)+v1x1(X1Y2Y3Yn)01(X1X2Xn)0101<code></code></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a5766a30bc.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code></code><code></code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c27322752.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>i=4,j=10</code>i=0j=0ks0000</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] vs = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ws = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    Integer[][] results = <span class=\"keyword\">new</span> Integer[<span class=\"number\">5</span>][<span class=\"number\">11</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testKnapsack2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks2(<span class=\"number\">4</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks2</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> c)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (results[i][c] != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> results[i][c];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || c == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(ws[i] &gt; c)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks(i-<span class=\"number\">1</span>, c);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp1 = ks(i-<span class=\"number\">1</span>, c);</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, c-ws[i]) + vs[i];</span><br><span class=\"line\">            result = Math.max(tmp1, tmp2);</span><br><span class=\"line\">            results[i][c] = result;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c45b5d9bf.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>i=111</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c4c11104c.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>i=2i=2,j=3</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c673e6c36.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c75ba58ce.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>13<code>i=4,j=10</code><code>ks(i-1,j)=ks(i,j)</code>i<code>ks(i-1,j)</code>i<code>ks(i-1,j-wi)</code></p>\n<img src=\"/programming/leetcode/dp-01-knapsack-problem/IMG_BFE9B7063670-1.jpeg\" title=\"exhaust-algorithm\">\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] vs = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ws = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    Integer[][] results = <span class=\"keyword\">new</span> Integer[<span class=\"number\">5</span>][<span class=\"number\">11</span>];</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testKnapsack3</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks3(<span class=\"number\">4</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks3</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> j)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">0</span>; m &lt;= i; m++)&#123;</span><br><span class=\"line\">            results[m][<span class=\"number\">0</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">0</span>; m &lt;= j; m++)&#123;</span><br><span class=\"line\">            results[<span class=\"number\">0</span>][m] = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">1</span>; m &lt;= i; m++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> n = <span class=\"number\">1</span>; n &lt;= j; n++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (n &lt; ws[m])&#123;</span><br><span class=\"line\">                    <span class=\"comment\">// </span></span><br><span class=\"line\">                    results[m][n] = results[m-<span class=\"number\">1</span>][n];</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// </span></span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (results[m-<span class=\"number\">1</span>][n] &gt; results[m-<span class=\"number\">1</span>][n-ws[m]] + vs[m])&#123;</span><br><span class=\"line\">                        <span class=\"comment\">// </span></span><br><span class=\"line\">                        results[m][n] = results[m-<span class=\"number\">1</span>][n];</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                        results[m][n] = results[m-<span class=\"number\">1</span>][n-ws[m]] + vs[m];</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> results[i][j];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>O(n * c)</code><code>O(n * c)</code>;</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p>emmm01</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a580b1789e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>"},{"title":"LeetCode","date":"2018-12-31T16:01:00.000Z","_content":"\n## \n\nJDK8Stream\n\nLeetCode\n\n\n\n## LeetCode\n\n`LeetCode`https://leetcode.com/ https://leetcode-cn.com/ \n\n\n\n\n\n\n\n1~2\n","source":"_posts/leetcode/leetcode-solo-rank-begin.md","raw":"---\ntitle: LeetCode\ntags: \n - \n - Java\n - LeetCode\ncategories: \ndate: 2019-01-01 00:01:00\n---\n\n## \n\nJDK8Stream\n\nLeetCode\n\n\n\n## LeetCode\n\n`LeetCode`https://leetcode.com/ https://leetcode-cn.com/ \n\n\n\n\n\n\n\n1~2\n","slug":"leetcode/leetcode-solo-rank-begin","published":1,"updated":"2019-06-04T01:29:57.493Z","_id":"cjxze3gny000v0cvwgt26h3po","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK8Stream</p>\n<p>LeetCode</p>\n<p></p>\n<h2 id=\"LeetCode\"><a href=\"#LeetCode\" class=\"headerlink\" title=\"LeetCode\"></a>LeetCode</h2><p><code>LeetCode</code><a href=\"https://leetcode.com/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/</a> <a href=\"https://leetcode-cn.com/\" target=\"_blank\" rel=\"noopener\">https://leetcode-cn.com/</a> </p>\n<p></p>\n<p></p>\n<p></p>\n<p>1~2</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK8Stream</p>\n<p>LeetCode</p>\n<p></p>\n<h2 id=\"LeetCode\"><a href=\"#LeetCode\" class=\"headerlink\" title=\"LeetCode\"></a>LeetCode</h2><p><code>LeetCode</code><a href=\"https://leetcode.com/\" target=\"_blank\" rel=\"noopener\">https://leetcode.com/</a> <a href=\"https://leetcode-cn.com/\" target=\"_blank\" rel=\"noopener\">https://leetcode-cn.com/</a> </p>\n<p></p>\n<p></p>\n<p></p>\n<p>1~2</p>\n"},{"title":"","date":"2019-05-05T12:32:16.000Z","_content":"\n## \n\n01\n\n\n\n01\n\n## \n\nNTiM[i]P[i]V[i]\n\n\n\n![](https://i.loli.net/2019/05/05/5cced9a232122.png)\n\n\n\nABC\n\n![](https://i.loli.net/2019/05/05/5ccee0bee771a.png)\n\n\n\n## \n\n\n\nks(i,t)itik0 <= k  <= M[i] && 0 <= k * V[i] <= t012...M[i]i\n\n```\nks(i,t) = max{ks(i-1, t - V[i] * k) + P[i] * k}; 0 <= k <= M[i] && 0 <= k * V[i] <= t\n```\n\nks(0,t)=0;ks(i,0)=0;\n\n\n\n```\nks(i,t) = max{ks(i-1, t - V[i] * k) + P[i] * k}; 0 <= k * V[i] <= t\n```\n\nk\n\n\n\n```java\npublic static class MultiKnapsack {\n    private static int[] P={0,2,3,4};\n    private static int[] V={0,3,4,5};\n    private static int[] M={0,4,3,2};\n    private static int T = 15;\n\n    @Test\n    public void soleve1() {\n        int result = ks(P.length - 1,T);\n        System.out.println(\"\" + result);\n    }\n\n    private int ks(int i, int t){\n        int result = 0;\n        if (i == 0 || t == 0){\n            // \n            result = 0;\n        } else if(V[i] > t){\n            // \n            result = ks(i-1, t);\n        } else {\n            // \n            // kik\n            for (int k = 0; k <= M[i] && k * V[i] <= t; k++){\n                int tmp2 = ks(i-1, t - V[i] * k) + P[i] * k;\n                if (tmp2 > result){\n                    result = tmp2;\n                }\n            }\n        }\n        return result;\n    }\n}\n\n```\n\nP/V/M0\n\n```\n11\n```\n\n\n\n```java\nprivate int ks(int i, int t){\n    int result = 0;\n    if (i == 0 || t == 0){\n        // \n        result = 0;\n    } else if(V[i] > t){\n        // \n        result = ks(i-1, t);\n    } else {\n        // \n        // kik\n        for (int k = 0; k * V[i] <= t; k++){\n            int tmp2 = ks(i-1, t - V[i] * k) + P[i] * k;\n            if (tmp2 > result){\n                result = tmp2;\n            }\n        }\n    }\n    return result;\n}\n```\n\n\n\n\n\n## \n\n\n\n### \n\n```java\nks(i,t) = max{ks(i-1, t - V[i] * k) + P[i] * k}; 0 <= k <= M[i] && 0 <= k * V[i] <= t\n```\n\n```java\npublic static class MultiKnapsack {\n    private static int[] P={0,2,3,4};\n    private static int[] V={0,3,4,5};\n    private static int[] M={0,4,3,2};\n    private static int T = 15;\n\n    private Integer[][] results = new Integer[P.length + 1][T + 1];\n\n    @Test\n    public void solve2() {\n        int result = ks2(P.length - 1,T);\n        System.out.println(\"\" + result);\n    }\n\n    private int ks2(int i, int t){\n        // \n        if (results[i][t] != null) return results[i][t];\n        int result = 0;\n        if (i == 0 || t == 0){\n            // \n            result = 0;\n        } else if(V[i] > t){\n            // \n            result = ks2(i-1, t);\n        } else {\n            // \n            // k\n            for (int k = 0; k <= M[i] && k * V[i] <= t; k++){\n                int tmp2 = ks2(i-1, t - V[i] * k) + P[i] * k;\n                if (tmp2 > result){\n                    result = tmp2;\n                }\n            }\n        }\n        results[i][t] = result;\n        return result;\n    }\n}\n```\n\n\n\n### \n\nPVM0\n\nk\n\n```java\npublic static class MultiKnapsack {\n    private static int[] P={2,3,4};\n    private static int[] V={3,4,5};\n    private static int[] M={4,3,2};\n    private static int T = 15;\n\n    private int[][] dp = new int[P.length + 1][T + 1];\n\n    @Test\n    public void solve3() {\n        for (int i = 0; i < P.length; i++){\n            for (int j = 0; j <= T; j++){\n                for (int k = 0; k <= M[i] && k * V[i] <= j; k++){\n                    dp[i+1][j] = Math.max(dp[i+1][j], dp[i][j-k * V[i]] + k * P[i]);\n                }\n            }\n        }\n        System.out.println(\"\" + dp[P.length][T]);\n    }\n}\n```\n\n0101\n\n\n\n```\nks(t) = max{ks(t), ks(t - Vi) + Pi}\n```\n\n```java\npublic static class MultiKnapsack {\n    private static int[] P={2,3,4};\n    private static int[] V={3,4,5};\n    private static int[] M={4,3,2};\n    private static int T = 15;\n\n    private int[] newResults = new int[T + 1];\n\n    @Test\n    public void resolve4() {\n        int result = ksp(P.length,T);\n        System.out.println(result);\n    }\n\n    private int ksp(int i, int t){\n        // \n        for (int m = 0; m < i; m++){\n            // m\n            // \n            // 1 M[m] * V[m] > T \n            if (M[m] * V[m] >= T) {\n                for (int n = V[m]; n <= t ; n++) {\n                    newResults[n] = Math.max(newResults[n], newResults[n - V[m]] + P[m]);\n                }\n            } else {\n                // 2 M[m] * V[m] < T  newResults[n-V[m]*k] + P[m] * k 0 <= k <= M[m]\n                for (int n = V[m]; n <= t ; n++) {\n                    int k = 1;\n                    while (k < M[m] && n > V[m] * k ){\n                        newResults[n] = Math.max(newResults[n], newResults[n - V[m] * k] + P[m] * k);\n                        k++;\n                    }\n                }\n            }\n            // \n            System.out.println(JSON.toJSONString(newResults));\n        }\n        return newResults[newResults.length - 1];\n    }\n}\n```\n\n\n\n```\n[0,0,0,0,2,2,2,4,4,4,6,6,6,8,8,8]\n[0,0,0,0,2,3,3,4,5,6,6,7,8,9,9,10]\n[0,0,0,0,2,3,4,4,5,6,7,8,8,9,10,11]\n11\n```\n\n\n M[m] * V[m] >= T m M[m] * V[m] < T newResults[n-V[m]*k] + P[m] * k0 <= k <= M[m]\n\n\n\n![](https://i.loli.net/2019/05/05/5ccef4c950a89.jpeg)\n\n01i M[i] iM[i]01\n\n## \n\n\n\n![](https://i.loli.net/2019/05/02/5ccaee9d39578.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a580b1789e.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","source":"_posts/leetcode/multi-knapsack-problem-md.md","raw":"---\ntitle: \ndate: 2019-05-05 20:32:16\ntags:\n - Java\n - \n - \n - \ncategories: \n---\n\n## \n\n01\n\n\n\n01\n\n## \n\nNTiM[i]P[i]V[i]\n\n\n\n![](https://i.loli.net/2019/05/05/5cced9a232122.png)\n\n\n\nABC\n\n![](https://i.loli.net/2019/05/05/5ccee0bee771a.png)\n\n\n\n## \n\n\n\nks(i,t)itik0 <= k  <= M[i] && 0 <= k * V[i] <= t012...M[i]i\n\n```\nks(i,t) = max{ks(i-1, t - V[i] * k) + P[i] * k}; 0 <= k <= M[i] && 0 <= k * V[i] <= t\n```\n\nks(0,t)=0;ks(i,0)=0;\n\n\n\n```\nks(i,t) = max{ks(i-1, t - V[i] * k) + P[i] * k}; 0 <= k * V[i] <= t\n```\n\nk\n\n\n\n```java\npublic static class MultiKnapsack {\n    private static int[] P={0,2,3,4};\n    private static int[] V={0,3,4,5};\n    private static int[] M={0,4,3,2};\n    private static int T = 15;\n\n    @Test\n    public void soleve1() {\n        int result = ks(P.length - 1,T);\n        System.out.println(\"\" + result);\n    }\n\n    private int ks(int i, int t){\n        int result = 0;\n        if (i == 0 || t == 0){\n            // \n            result = 0;\n        } else if(V[i] > t){\n            // \n            result = ks(i-1, t);\n        } else {\n            // \n            // kik\n            for (int k = 0; k <= M[i] && k * V[i] <= t; k++){\n                int tmp2 = ks(i-1, t - V[i] * k) + P[i] * k;\n                if (tmp2 > result){\n                    result = tmp2;\n                }\n            }\n        }\n        return result;\n    }\n}\n\n```\n\nP/V/M0\n\n```\n11\n```\n\n\n\n```java\nprivate int ks(int i, int t){\n    int result = 0;\n    if (i == 0 || t == 0){\n        // \n        result = 0;\n    } else if(V[i] > t){\n        // \n        result = ks(i-1, t);\n    } else {\n        // \n        // kik\n        for (int k = 0; k * V[i] <= t; k++){\n            int tmp2 = ks(i-1, t - V[i] * k) + P[i] * k;\n            if (tmp2 > result){\n                result = tmp2;\n            }\n        }\n    }\n    return result;\n}\n```\n\n\n\n\n\n## \n\n\n\n### \n\n```java\nks(i,t) = max{ks(i-1, t - V[i] * k) + P[i] * k}; 0 <= k <= M[i] && 0 <= k * V[i] <= t\n```\n\n```java\npublic static class MultiKnapsack {\n    private static int[] P={0,2,3,4};\n    private static int[] V={0,3,4,5};\n    private static int[] M={0,4,3,2};\n    private static int T = 15;\n\n    private Integer[][] results = new Integer[P.length + 1][T + 1];\n\n    @Test\n    public void solve2() {\n        int result = ks2(P.length - 1,T);\n        System.out.println(\"\" + result);\n    }\n\n    private int ks2(int i, int t){\n        // \n        if (results[i][t] != null) return results[i][t];\n        int result = 0;\n        if (i == 0 || t == 0){\n            // \n            result = 0;\n        } else if(V[i] > t){\n            // \n            result = ks2(i-1, t);\n        } else {\n            // \n            // k\n            for (int k = 0; k <= M[i] && k * V[i] <= t; k++){\n                int tmp2 = ks2(i-1, t - V[i] * k) + P[i] * k;\n                if (tmp2 > result){\n                    result = tmp2;\n                }\n            }\n        }\n        results[i][t] = result;\n        return result;\n    }\n}\n```\n\n\n\n### \n\nPVM0\n\nk\n\n```java\npublic static class MultiKnapsack {\n    private static int[] P={2,3,4};\n    private static int[] V={3,4,5};\n    private static int[] M={4,3,2};\n    private static int T = 15;\n\n    private int[][] dp = new int[P.length + 1][T + 1];\n\n    @Test\n    public void solve3() {\n        for (int i = 0; i < P.length; i++){\n            for (int j = 0; j <= T; j++){\n                for (int k = 0; k <= M[i] && k * V[i] <= j; k++){\n                    dp[i+1][j] = Math.max(dp[i+1][j], dp[i][j-k * V[i]] + k * P[i]);\n                }\n            }\n        }\n        System.out.println(\"\" + dp[P.length][T]);\n    }\n}\n```\n\n0101\n\n\n\n```\nks(t) = max{ks(t), ks(t - Vi) + Pi}\n```\n\n```java\npublic static class MultiKnapsack {\n    private static int[] P={2,3,4};\n    private static int[] V={3,4,5};\n    private static int[] M={4,3,2};\n    private static int T = 15;\n\n    private int[] newResults = new int[T + 1];\n\n    @Test\n    public void resolve4() {\n        int result = ksp(P.length,T);\n        System.out.println(result);\n    }\n\n    private int ksp(int i, int t){\n        // \n        for (int m = 0; m < i; m++){\n            // m\n            // \n            // 1 M[m] * V[m] > T \n            if (M[m] * V[m] >= T) {\n                for (int n = V[m]; n <= t ; n++) {\n                    newResults[n] = Math.max(newResults[n], newResults[n - V[m]] + P[m]);\n                }\n            } else {\n                // 2 M[m] * V[m] < T  newResults[n-V[m]*k] + P[m] * k 0 <= k <= M[m]\n                for (int n = V[m]; n <= t ; n++) {\n                    int k = 1;\n                    while (k < M[m] && n > V[m] * k ){\n                        newResults[n] = Math.max(newResults[n], newResults[n - V[m] * k] + P[m] * k);\n                        k++;\n                    }\n                }\n            }\n            // \n            System.out.println(JSON.toJSONString(newResults));\n        }\n        return newResults[newResults.length - 1];\n    }\n}\n```\n\n\n\n```\n[0,0,0,0,2,2,2,4,4,4,6,6,6,8,8,8]\n[0,0,0,0,2,3,3,4,5,6,6,7,8,9,9,10]\n[0,0,0,0,2,3,4,4,5,6,7,8,8,9,10,11]\n11\n```\n\n\n M[m] * V[m] >= T m M[m] * V[m] < T newResults[n-V[m]*k] + P[m] * k0 <= k <= M[m]\n\n\n\n![](https://i.loli.net/2019/05/05/5ccef4c950a89.jpeg)\n\n01i M[i] iM[i]01\n\n## \n\n\n\n![](https://i.loli.net/2019/05/02/5ccaee9d39578.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a580b1789e.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","slug":"leetcode/multi-knapsack-problem-md","published":1,"updated":"2019-06-04T01:29:57.493Z","_id":"cjxze3gny000y0cvwnr1uuwpf","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>01</p>\n<p></p>\n<p>01</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>NTiM[i]P[i]V[i]</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/05/5cced9a232122.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p>ABC</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/05/5ccee0bee771a.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>ks(i,t)itik0 &lt;= k  &lt;= M[i] &amp;&amp; 0 &lt;= k * V[i] &lt;= t012M[i]i</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(i,t) = max&#123;ks(i-1, t - V[i] * k) + P[i] * k&#125;; 0 &lt;= k &lt;= M[i] &amp;&amp; 0 &lt;= k * V[i] &lt;= t</span><br></pre></td></tr></table></figure>\n<p>ks(0,t)=0;ks(i,0)=0;</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(i,t) = max&#123;ks(i-1, t - V[i] * k) + P[i] * k&#125;; 0 &lt;= k * V[i] &lt;= t</span><br></pre></td></tr></table></figure>\n<p>k</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MultiKnapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">0</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] M=&#123;<span class=\"number\">0</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">15</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">soleve1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks(P.length - <span class=\"number\">1</span>,T);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || t == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(V[i] &gt; t)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks(i-<span class=\"number\">1</span>, t);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"comment\">// kik</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k &lt;= M[i] &amp;&amp; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">                    result = tmp2;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>P/V/M0</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">11</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || t == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        result = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(V[i] &gt; t)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        result = ks(i-<span class=\"number\">1</span>, t);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"comment\">// kik</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">                result = tmp2;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(i,t) = max&#123;ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k&#125;; <span class=\"number\">0</span> &lt;= k &lt;= M[i] &amp;&amp; <span class=\"number\">0</span> &lt;= k * V[i] &lt;= t</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MultiKnapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">0</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] M=&#123;<span class=\"number\">0</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">15</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer[][] results = <span class=\"keyword\">new</span> Integer[P.length + <span class=\"number\">1</span>][T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks2(P.length - <span class=\"number\">1</span>,T);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks2</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (results[i][t] != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> results[i][t];</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || t == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(V[i] &gt; t)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks2(i-<span class=\"number\">1</span>, t);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"comment\">// k</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k &lt;= M[i] &amp;&amp; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> tmp2 = ks2(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">                    result = tmp2;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        results[i][t] = result;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>PVM0</p>\n<p>k</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MultiKnapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] M=&#123;<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">15</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[][] dp = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[P.length + <span class=\"number\">1</span>][T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve3</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; P.length; i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt;= T; j++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k &lt;= M[i] &amp;&amp; k * V[i] &lt;= j; k++)&#123;</span><br><span class=\"line\">                    dp[i+<span class=\"number\">1</span>][j] = Math.max(dp[i+<span class=\"number\">1</span>][j], dp[i][j-k * V[i]] + k * P[i]);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + dp[P.length][T]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>0101</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(t) = max&#123;ks(t), ks(t - Vi) + Pi&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MultiKnapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] M=&#123;<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">15</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] newResults = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">resolve4</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ksp(P.length,T);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ksp</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">0</span>; m &lt; i; m++)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// m</span></span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"comment\">// 1 M[m] * V[m] &gt; T </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (M[m] * V[m] &gt;= T) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> n = V[m]; n &lt;= t ; n++) &#123;</span><br><span class=\"line\">                    newResults[n] = Math.max(newResults[n], newResults[n - V[m]] + P[m]);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 2 M[m] * V[m] &lt; T  newResults[n-V[m]*k] + P[m] * k 0 &lt;= k &lt;= M[m]</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> n = V[m]; n &lt;= t ; n++) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">int</span> k = <span class=\"number\">1</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">while</span> (k &lt; M[m] &amp;&amp; n &gt; V[m] * k )&#123;</span><br><span class=\"line\">                        newResults[n] = Math.max(newResults[n], newResults[n - V[m] * k] + P[m] * k);</span><br><span class=\"line\">                        k++;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            System.out.println(JSON.toJSONString(newResults));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newResults[newResults.length - <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[0,0,0,0,2,2,2,4,4,4,6,6,6,8,8,8]</span><br><span class=\"line\">[0,0,0,0,2,3,3,4,5,6,6,7,8,9,9,10]</span><br><span class=\"line\">[0,0,0,0,2,3,4,4,5,6,7,8,8,9,10,11]</span><br><span class=\"line\">11</span><br></pre></td></tr></table></figure>\n<p> M[m] <em> V[m] &gt;= T m M[m] </em> V[m] &lt; T newResults[n-V[m]<em>k] + P[m] </em> k0 &lt;= k &lt;= M[m]</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/05/5ccef4c950a89.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>01i M[i] iM[i]01</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/02/5ccaee9d39578.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a580b1789e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>01</p>\n<p></p>\n<p>01</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>NTiM[i]P[i]V[i]</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/05/5cced9a232122.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p>ABC</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/05/5ccee0bee771a.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>ks(i,t)itik0 &lt;= k  &lt;= M[i] &amp;&amp; 0 &lt;= k * V[i] &lt;= t012M[i]i</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(i,t) = max&#123;ks(i-1, t - V[i] * k) + P[i] * k&#125;; 0 &lt;= k &lt;= M[i] &amp;&amp; 0 &lt;= k * V[i] &lt;= t</span><br></pre></td></tr></table></figure>\n<p>ks(0,t)=0;ks(i,0)=0;</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(i,t) = max&#123;ks(i-1, t - V[i] * k) + P[i] * k&#125;; 0 &lt;= k * V[i] &lt;= t</span><br></pre></td></tr></table></figure>\n<p>k</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MultiKnapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">0</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] M=&#123;<span class=\"number\">0</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">15</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">soleve1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks(P.length - <span class=\"number\">1</span>,T);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || t == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(V[i] &gt; t)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks(i-<span class=\"number\">1</span>, t);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"comment\">// kik</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k &lt;= M[i] &amp;&amp; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">                    result = tmp2;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>P/V/M0</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">11</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || t == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        result = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(V[i] &gt; t)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        result = ks(i-<span class=\"number\">1</span>, t);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"comment\">// kik</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> tmp2 = ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">                result = tmp2;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(i,t) = max&#123;ks(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k&#125;; <span class=\"number\">0</span> &lt;= k &lt;= M[i] &amp;&amp; <span class=\"number\">0</span> &lt;= k * V[i] &lt;= t</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MultiKnapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">0</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] M=&#123;<span class=\"number\">0</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">15</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer[][] results = <span class=\"keyword\">new</span> Integer[P.length + <span class=\"number\">1</span>][T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ks2(P.length - <span class=\"number\">1</span>,T);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ks2</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (results[i][t] != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> results[i][t];</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i == <span class=\"number\">0</span> || t == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(V[i] &gt; t)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            result = ks2(i-<span class=\"number\">1</span>, t);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"comment\">// k</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k &lt;= M[i] &amp;&amp; k * V[i] &lt;= t; k++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> tmp2 = ks2(i-<span class=\"number\">1</span>, t - V[i] * k) + P[i] * k;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (tmp2 &gt; result)&#123;</span><br><span class=\"line\">                    result = tmp2;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        results[i][t] = result;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>PVM0</p>\n<p>k</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MultiKnapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] M=&#123;<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">15</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[][] dp = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[P.length + <span class=\"number\">1</span>][T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">solve3</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; P.length; i++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt;= T; j++)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> k = <span class=\"number\">0</span>; k &lt;= M[i] &amp;&amp; k * V[i] &lt;= j; k++)&#123;</span><br><span class=\"line\">                    dp[i+<span class=\"number\">1</span>][j] = Math.max(dp[i+<span class=\"number\">1</span>][j], dp[i][j-k * V[i]] + k * P[i]);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + dp[P.length][T]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>0101</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ks(t) = max&#123;ks(t), ks(t - Vi) + Pi&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MultiKnapsack</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] P=&#123;<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] V=&#123;<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span>[] M=&#123;<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> T = <span class=\"number\">15</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] newResults = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[T + <span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">resolve4</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ksp(P.length,T);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ksp</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> t)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">0</span>; m &lt; i; m++)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// m</span></span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"comment\">// 1 M[m] * V[m] &gt; T </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (M[m] * V[m] &gt;= T) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> n = V[m]; n &lt;= t ; n++) &#123;</span><br><span class=\"line\">                    newResults[n] = Math.max(newResults[n], newResults[n - V[m]] + P[m]);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 2 M[m] * V[m] &lt; T  newResults[n-V[m]*k] + P[m] * k 0 &lt;= k &lt;= M[m]</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> n = V[m]; n &lt;= t ; n++) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">int</span> k = <span class=\"number\">1</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">while</span> (k &lt; M[m] &amp;&amp; n &gt; V[m] * k )&#123;</span><br><span class=\"line\">                        newResults[n] = Math.max(newResults[n], newResults[n - V[m] * k] + P[m] * k);</span><br><span class=\"line\">                        k++;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            System.out.println(JSON.toJSONString(newResults));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newResults[newResults.length - <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[0,0,0,0,2,2,2,4,4,4,6,6,6,8,8,8]</span><br><span class=\"line\">[0,0,0,0,2,3,3,4,5,6,6,7,8,9,9,10]</span><br><span class=\"line\">[0,0,0,0,2,3,4,4,5,6,7,8,8,9,10,11]</span><br><span class=\"line\">11</span><br></pre></td></tr></table></figure>\n<p> M[m] <em> V[m] &gt;= T m M[m] </em> V[m] &lt; T newResults[n-V[m]<em>k] + P[m] </em> k0 &lt;= k &lt;= M[m]</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/05/5ccef4c950a89.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>01i M[i] iM[i]01</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/02/5ccaee9d39578.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a580b1789e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>"},{"title":"","date":"2019-05-07T11:56:03.000Z","_content":"\n## \n\n[01](https://www.cnblogs.com/mfrank/p/10533701.html)\n\n[01](https://www.cnblogs.com/mfrank/p/10587463.html)\n\n[](https://www.cnblogs.com/mfrank/p/10803417.html)\n\n[](https://www.cnblogs.com/mfrank/p/10816837.html)\n\n## \n\n\n\n## \n\n\n\n> 01\n> NViCiWi\n\n> \n> NViCiWi\n\n> \n> NViMiCiWi\n\n\n\n01\n\n01 V/Ci 01 min{Mi, V/Ci}\n\n0101\n\n\n\n01\n\n```\nF[i,v] = max{F[i-1,v], F[i-1,v-Ci] + Wi}\n```\n\n\n\n```\nF[i,v] = max{F[i-1,v-kCi] + kWi | 0 <= kCi <= v}\n```\n\n\n\n```\nF[i,v] = max{F[i-1,v-kCi] + kWi | 0 <= k <= Mi}\n```\n\n\n\n01\n\n\n\n103243\n\n\n\n![](https://i.loli.net/2019/05/11/5cd684433922b.jpeg)\n\n01\n\n![](https://i.loli.net/2019/05/11/5cd6864f6eb81.jpeg)\n\n\n\n![](https://i.loli.net/2019/05/11/5cd6864d1d669.jpeg)\n\n\n\n21.\n\n![](https://i.loli.net/2019/05/11/5cd6864e5627b.jpeg)\n\n\n\n01\n\n```\nfor i <- 1 to N\n    for v <- V to Ci\n        F[v] = max{F[v],F[v-Ci] + Wi}\n```\n\n\n\n```\ndef ZeroOneKnapsack(F,C,W)\n    for v <- V to C\n        F[v] = max{F[v],F[v-C] + W}\n```\n\n01\n\n```\nfor i <- 1 to N\n    ZeroOneKnapsack(F,Ci,Wi)\n```\n\n> NCiiVWii\n\n\n\n```\nfor i <- 1 to N\n    for v <- Ci to V\n        F[v] = max{F[v],F[v-Ci] + Wi}\n```\n\n\n\n```\ndef CompleteKnapsack(F,C,W)\n    for v <- C to V\n        F[v] = max{F[v],F[v-C] + W}\n```\n\n\n\n```\nfor i <- 1 to N\n    CompleteKnapsack(F,Ci,Wi)\n```\n\n\n\n```\nfor i <- 1 to N\n    if v < Ci * Mi\n        F[v] = max{F[v],F[v-Ci] + Wi}\n    else\n        for v <- Ci to V\n            k <- 1\n            while k < M && v > Ci * k\n                F[v] = max{F[v],F[v-Ci*k] + Wi*k}\n                k++\n```\n\n\n\n```\ndef MultiKnapsack(F,C,W,M)\n    if C * M >= V\n        CompleteKnapsack(F,C,W)\n        return\n    else\n        k <- 1\n        while k < M\n            ZeroOneKnapsack(F,KC,KW)\n            k++\n        return\n```\n\n\n\n```\nfor i <- 1 to N\n    MultiKnapsack(F,Ci,Wi,Mi)\n```\n\n> Mi i\n\n## \n\n\n\n\n\ni01\n\n\n\n```\nfor i <- 1 to N\n    if i01\n        ZeroOneKnapsack(F,Ci,Wi)\n    else if i\n        CompleteKnapsack(F,Ci,Wi)\n    else if i\n        MultiKnapsack(F,Ci,Wi,Mi)\n```\n\n## \n\n\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a580b1789e.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)\n\n `python`  python","source":"_posts/leetcode/knapsack-problem-conclusion-md.md","raw":"---\ntitle: \ndate: 2019-05-07 19:56:03\ntags:\n - Java\n - \n - \n - \ncategories: \n---\n\n## \n\n[01](https://www.cnblogs.com/mfrank/p/10533701.html)\n\n[01](https://www.cnblogs.com/mfrank/p/10587463.html)\n\n[](https://www.cnblogs.com/mfrank/p/10803417.html)\n\n[](https://www.cnblogs.com/mfrank/p/10816837.html)\n\n## \n\n\n\n## \n\n\n\n> 01\n> NViCiWi\n\n> \n> NViCiWi\n\n> \n> NViMiCiWi\n\n\n\n01\n\n01 V/Ci 01 min{Mi, V/Ci}\n\n0101\n\n\n\n01\n\n```\nF[i,v] = max{F[i-1,v], F[i-1,v-Ci] + Wi}\n```\n\n\n\n```\nF[i,v] = max{F[i-1,v-kCi] + kWi | 0 <= kCi <= v}\n```\n\n\n\n```\nF[i,v] = max{F[i-1,v-kCi] + kWi | 0 <= k <= Mi}\n```\n\n\n\n01\n\n\n\n103243\n\n\n\n![](https://i.loli.net/2019/05/11/5cd684433922b.jpeg)\n\n01\n\n![](https://i.loli.net/2019/05/11/5cd6864f6eb81.jpeg)\n\n\n\n![](https://i.loli.net/2019/05/11/5cd6864d1d669.jpeg)\n\n\n\n21.\n\n![](https://i.loli.net/2019/05/11/5cd6864e5627b.jpeg)\n\n\n\n01\n\n```\nfor i <- 1 to N\n    for v <- V to Ci\n        F[v] = max{F[v],F[v-Ci] + Wi}\n```\n\n\n\n```\ndef ZeroOneKnapsack(F,C,W)\n    for v <- V to C\n        F[v] = max{F[v],F[v-C] + W}\n```\n\n01\n\n```\nfor i <- 1 to N\n    ZeroOneKnapsack(F,Ci,Wi)\n```\n\n> NCiiVWii\n\n\n\n```\nfor i <- 1 to N\n    for v <- Ci to V\n        F[v] = max{F[v],F[v-Ci] + Wi}\n```\n\n\n\n```\ndef CompleteKnapsack(F,C,W)\n    for v <- C to V\n        F[v] = max{F[v],F[v-C] + W}\n```\n\n\n\n```\nfor i <- 1 to N\n    CompleteKnapsack(F,Ci,Wi)\n```\n\n\n\n```\nfor i <- 1 to N\n    if v < Ci * Mi\n        F[v] = max{F[v],F[v-Ci] + Wi}\n    else\n        for v <- Ci to V\n            k <- 1\n            while k < M && v > Ci * k\n                F[v] = max{F[v],F[v-Ci*k] + Wi*k}\n                k++\n```\n\n\n\n```\ndef MultiKnapsack(F,C,W,M)\n    if C * M >= V\n        CompleteKnapsack(F,C,W)\n        return\n    else\n        k <- 1\n        while k < M\n            ZeroOneKnapsack(F,KC,KW)\n            k++\n        return\n```\n\n\n\n```\nfor i <- 1 to N\n    MultiKnapsack(F,Ci,Wi,Mi)\n```\n\n> Mi i\n\n## \n\n\n\n\n\ni01\n\n\n\n```\nfor i <- 1 to N\n    if i01\n        ZeroOneKnapsack(F,Ci,Wi)\n    else if i\n        CompleteKnapsack(F,Ci,Wi)\n    else if i\n        MultiKnapsack(F,Ci,Wi,Mi)\n```\n\n## \n\n\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a580b1789e.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)\n\n `python`  python","slug":"leetcode/knapsack-problem-conclusion-md","published":1,"updated":"2019-06-04T01:29:57.483Z","_id":"cjxze3gny00120cvw478hhvpu","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://www.cnblogs.com/mfrank/p/10533701.html\" target=\"_blank\" rel=\"noopener\">01</a></p>\n<p><a href=\"https://www.cnblogs.com/mfrank/p/10587463.html\" target=\"_blank\" rel=\"noopener\">01</a></p>\n<p><a href=\"https://www.cnblogs.com/mfrank/p/10803417.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p><a href=\"https://www.cnblogs.com/mfrank/p/10816837.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<blockquote>\n<p>01<br>NViCiWi</p>\n</blockquote>\n<blockquote>\n<p><br>NViCiWi</p>\n</blockquote>\n<blockquote>\n<p><br>NViMiCiWi</p>\n</blockquote>\n<p></p>\n<p>01</p>\n<p>01 V/Ci 01 min{Mi, V/Ci}</p>\n<p>0101</p>\n<p></p>\n<p>01</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">F[i,v] = max&#123;F[i-1,v], F[i-1,v-Ci] + Wi&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">F[i,v] = max&#123;F[i-1,v-kCi] + kWi | 0 &lt;= kCi &lt;= v&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">F[i,v] = max&#123;F[i-1,v-kCi] + kWi | 0 &lt;= k &lt;= Mi&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>01</p>\n<p></p>\n<p>103243</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/11/5cd684433922b.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>01</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/11/5cd6864f6eb81.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/11/5cd6864d1d669.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p>21.</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/11/5cd6864e5627b.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p>01</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    for v &lt;- V to Ci</span><br><span class=\"line\">        F[v] = max&#123;F[v],F[v-Ci] + Wi&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def ZeroOneKnapsack(F,C,W)</span><br><span class=\"line\">    for v &lt;- V to C</span><br><span class=\"line\">        F[v] = max&#123;F[v],F[v-C] + W&#125;</span><br></pre></td></tr></table></figure>\n<p>01</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    ZeroOneKnapsack(F,Ci,Wi)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>NCiiVWii</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    for v &lt;- Ci to V</span><br><span class=\"line\">        F[v] = max&#123;F[v],F[v-Ci] + Wi&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def CompleteKnapsack(F,C,W)</span><br><span class=\"line\">    for v &lt;- C to V</span><br><span class=\"line\">        F[v] = max&#123;F[v],F[v-C] + W&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    CompleteKnapsack(F,Ci,Wi)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    if v &lt; Ci * Mi</span><br><span class=\"line\">        F[v] = max&#123;F[v],F[v-Ci] + Wi&#125;</span><br><span class=\"line\">    else</span><br><span class=\"line\">        for v &lt;- Ci to V</span><br><span class=\"line\">            k &lt;- 1</span><br><span class=\"line\">            while k &lt; M &amp;&amp; v &gt; Ci * k</span><br><span class=\"line\">                F[v] = max&#123;F[v],F[v-Ci*k] + Wi*k&#125;</span><br><span class=\"line\">                k++</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def MultiKnapsack(F,C,W,M)</span><br><span class=\"line\">    if C * M &gt;= V</span><br><span class=\"line\">        CompleteKnapsack(F,C,W)</span><br><span class=\"line\">        return</span><br><span class=\"line\">    else</span><br><span class=\"line\">        k &lt;- 1</span><br><span class=\"line\">        while k &lt; M</span><br><span class=\"line\">            ZeroOneKnapsack(F,KC,KW)</span><br><span class=\"line\">            k++</span><br><span class=\"line\">        return</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    MultiKnapsack(F,Ci,Wi,Mi)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Mi i</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p>i01</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    if i01</span><br><span class=\"line\">        ZeroOneKnapsack(F,Ci,Wi)</span><br><span class=\"line\">    else if i</span><br><span class=\"line\">        CompleteKnapsack(F,Ci,Wi)</span><br><span class=\"line\">    else if i</span><br><span class=\"line\">        MultiKnapsack(F,Ci,Wi,Mi)</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a580b1789e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p> <code>python</code>  python</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://www.cnblogs.com/mfrank/p/10533701.html\" target=\"_blank\" rel=\"noopener\">01</a></p>\n<p><a href=\"https://www.cnblogs.com/mfrank/p/10587463.html\" target=\"_blank\" rel=\"noopener\">01</a></p>\n<p><a href=\"https://www.cnblogs.com/mfrank/p/10803417.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p><a href=\"https://www.cnblogs.com/mfrank/p/10816837.html\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<blockquote>\n<p>01<br>NViCiWi</p>\n</blockquote>\n<blockquote>\n<p><br>NViCiWi</p>\n</blockquote>\n<blockquote>\n<p><br>NViMiCiWi</p>\n</blockquote>\n<p></p>\n<p>01</p>\n<p>01 V/Ci 01 min{Mi, V/Ci}</p>\n<p>0101</p>\n<p></p>\n<p>01</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">F[i,v] = max&#123;F[i-1,v], F[i-1,v-Ci] + Wi&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">F[i,v] = max&#123;F[i-1,v-kCi] + kWi | 0 &lt;= kCi &lt;= v&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">F[i,v] = max&#123;F[i-1,v-kCi] + kWi | 0 &lt;= k &lt;= Mi&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>01</p>\n<p></p>\n<p>103243</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/11/5cd684433922b.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>01</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/11/5cd6864f6eb81.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/11/5cd6864d1d669.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p>21.</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/11/5cd6864e5627b.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p>01</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    for v &lt;- V to Ci</span><br><span class=\"line\">        F[v] = max&#123;F[v],F[v-Ci] + Wi&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def ZeroOneKnapsack(F,C,W)</span><br><span class=\"line\">    for v &lt;- V to C</span><br><span class=\"line\">        F[v] = max&#123;F[v],F[v-C] + W&#125;</span><br></pre></td></tr></table></figure>\n<p>01</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    ZeroOneKnapsack(F,Ci,Wi)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>NCiiVWii</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    for v &lt;- Ci to V</span><br><span class=\"line\">        F[v] = max&#123;F[v],F[v-Ci] + Wi&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def CompleteKnapsack(F,C,W)</span><br><span class=\"line\">    for v &lt;- C to V</span><br><span class=\"line\">        F[v] = max&#123;F[v],F[v-C] + W&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    CompleteKnapsack(F,Ci,Wi)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    if v &lt; Ci * Mi</span><br><span class=\"line\">        F[v] = max&#123;F[v],F[v-Ci] + Wi&#125;</span><br><span class=\"line\">    else</span><br><span class=\"line\">        for v &lt;- Ci to V</span><br><span class=\"line\">            k &lt;- 1</span><br><span class=\"line\">            while k &lt; M &amp;&amp; v &gt; Ci * k</span><br><span class=\"line\">                F[v] = max&#123;F[v],F[v-Ci*k] + Wi*k&#125;</span><br><span class=\"line\">                k++</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def MultiKnapsack(F,C,W,M)</span><br><span class=\"line\">    if C * M &gt;= V</span><br><span class=\"line\">        CompleteKnapsack(F,C,W)</span><br><span class=\"line\">        return</span><br><span class=\"line\">    else</span><br><span class=\"line\">        k &lt;- 1</span><br><span class=\"line\">        while k &lt; M</span><br><span class=\"line\">            ZeroOneKnapsack(F,KC,KW)</span><br><span class=\"line\">            k++</span><br><span class=\"line\">        return</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    MultiKnapsack(F,Ci,Wi,Mi)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>Mi i</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p>i01</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i &lt;- 1 to N</span><br><span class=\"line\">    if i01</span><br><span class=\"line\">        ZeroOneKnapsack(F,Ci,Wi)</span><br><span class=\"line\">    else if i</span><br><span class=\"line\">        CompleteKnapsack(F,Ci,Wi)</span><br><span class=\"line\">    else if i</span><br><span class=\"line\">        MultiKnapsack(F,Ci,Wi,Mi)</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a580b1789e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p> <code>python</code>  python</p>\n"},{"title":"Mysql","date":"2019-07-12T00:47:56.000Z","categorys":[""],"_content":"\n10\n\n\n\n\n\n## \n\nMysqlMysqlsqlMysqlmysql\n\n\n\n![](https://i.loli.net/2019/07/11/5d26941cb252430355.png)\n\n## \n\n\n\nemmMysql\nsql\n\n```\nSELECT id,name,course,grade FROM t_grade WHERE name = 'Frank';\n```\n\nmysqlCPUCPUmysqlsql\n\n## \n\n\n\n\n1. \n2. \n3. \n4. \n\n\n\n\n1. \n2. \n3. \n\nmysql\n\n## \n\n\n\n``\n\nDDL\n\n```sql\nCREATE TABLE `t_grade` (\n    id BIGINT(20) COMMENT 'id',\n    name VARCHAR(30) COMMENT '',\n    course INT COMMENT '1-2-3-4-',\n    grade DECIMAL(5,2) COMMENT '',\n    KEY idx_name(`name`)\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n\"name\"\"idx_name\"\n\n```sql\nKEY  (``)\n```\n\n\n\n```sql\nALTER TABLE `t_grade` ADD KEY idx_name(`name`);\n```\n\nindex\n\n`` \n\n`PRIMARY KEY`DDL\n\n```sql\nCREATE TABLE `t_grade` (\n    id BIGINT(20) COMMENT 'id',\n    name VARCHAR(30) COMMENT '',\n    course INT COMMENT '1-2-3-4-',\n    grade DECIMAL(5,2) COMMENT '',\n    PRIMARY KEY (`id`)\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n\n\n```sql\nPRIMARY KEY (``)\n```\n\n\n\n```sql\nALTER TABLE `t_grade` ADD PRIMARY KEY (`id`);\n```\n\n``\n\n `UNIQUE KEY`DDL\n\n```sql\nCREATE TABLE `t_grade` (\n    id BIGINT(20) COMMENT 'id',\n    name VARCHAR(30) COMMENT '',\n    course INT COMMENT '1-2-3-4-',\n    grade DECIMAL(5,2) COMMENT '',\n    UNIQUE KEY uk_name (`name`)\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n\n\n```sql\nUNIQUE KEY  (``)\n```\n\n\n\n```sql\nALTER TABLE `t_grade` ADD UNIQUE KEY uk_name (`name`);\n```\n\n``= =\n\n\n```sql\nCREATE TABLE `t_grade` (\n    id BIGINT(20) COMMENT 'id',\n    name VARCHAR(30) COMMENT '',\n    course INT COMMENT '1-2-3-4-',\n    grade DECIMAL(5,2) COMMENT '',\n    KEY idx_name_corse (`name`,`course`)\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n`key`\n\n```sql\nALTER TABLE `t_grade` ADD KEY idx_name_course (`name`,`course`);\nALTER TABLE `t_grade` ADD KEY idx_name_course (`course`,`name`);\n```\n\n \n\n```sql\nALTER TABLE `t_grade` ADD KEY idx_name_course (`name`,`course`);\n```\n\n\n\n```sql\nSELECT * FROM `t_grade` WHERE name = 'Frank';  \n```\n![](https://i.loli.net/2019/07/11/5d2695c837a1478405.png)\n\n\n\n```sql\nSELECT * FROM `t_grade` WHERE course = 1;\n```\n\n![](https://i.loli.net/2019/07/11/5d2695dd1113960656.png)\n\nsql\n\n\n\n``\n\n\n\n```sql\nINSERT INTO `t_grade` (`id`, `name`, `course`, `grade`) VALUES(1, 'Frank', 1, 100);\nINSERT INTO `t_grade` (`id`, `name`, `course`, `grade`) VALUES(2, 'Frank', 1, 95);\n```\n![](https://i.loli.net/2019/07/11/5d2695fb3f84a48846.png)\n\n\n\n\n\n```sql\nALTER TABLE `t_grade` ADD UNIQUE KEY idx_name_course (`name`,`course`);\n```\n\nsql\n\n![](https://i.loli.net/2019/07/11/5d26960ce9ccf62374.png)\n\n`name``course`\n\n``\n\n```sql\nCREATE TABLE `t_article`(\n        id BIGINT COMMENT 'id',\n        title VARCHAR(200) COMMENT '',\n        content TEXT COMMENT '',\n        FULLTEXT (title, content)\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n\n\n```sql\nALTER TABLE `t_article` ADD FULLTEXT KEY fidx_title_content (title,content) WITH PARSER ngram;\n```\n\nMATCH\n\n```sql\nSELECT * FROM `t_article` WHERE MATCH(title, content) AGAINST('');\n```\n\nmysql5.7innodbngram\n\n## \n\nsql\n\n\n\n```sql\nCREATE TABLE `t_grade` (\n    id BIGINT(20) COMMENT 'id',\n    name VARCHAR(30) COMMENT '',\n    course INT COMMENT '0-1-2-3-4-',\n    grade DECIMAL(5,2) COMMENT ''\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n\n\n```sql\npublic void batchInsert(){\n    long timeMillis = System.currentTimeMillis();\n    System.out.println(\"\");\n    for (int i = 1; i < 1000000; i++) {\n        GradeDO gradeDO = new GradeDO((long) i, randomName(), random.nextInt(5), BigDecimal.valueOf(random.nextDouble() * 100));\n        gradeMapper.insert(gradeDO);\n    }\n    System.out.println(\"\" + ( System.currentTimeMillis() - timeMillis) / 1000.0 );\n}\n```\n\n\n\n```\n\n1507.102\n```\n\n\n\n```java\npublic void batchInsert(){\n    long timeMillis = System.currentTimeMillis();\n    System.out.println(\"\");\n    for (int i = 1000000; i < 1010000; i++) {\n        GradeDO gradeDO = new GradeDO((long) i, randomName(), random.nextInt(5), BigDecimal.valueOf(random.nextDouble() * 100));\n        gradeMapper.insert(gradeDO);\n    }\n    System.out.println(\"\" + ( System.currentTimeMillis() - timeMillis) / 1000.0 );\n}\n```\n\n\n```\n\n15.681\n```\n\n\n\n```java\n@Test\nvoid testQuery() {\n    long timeMillis = System.currentTimeMillis();\n    System.out.println(\"\");\n    for (int i = 0; i < 100; i++) {\n        Integer id = random.nextInt(1000000);\n        GradeDO gradeDO = gradeMapper.selectById(id);\n    }\n    System.out.println(\"\" + ( System.currentTimeMillis() - timeMillis) / 1000.0 );\n}\n```\n\n\n\n```\n\n51.658\n```\n\nidname\n\n\n```\n\n17.465\n```\n\n\n\n```\n\n0.191\n```\n\n\n\n## \nmysqlsql\n","source":"_posts/mysql/mysql-index-introduction.md","raw":"---\ntitle: Mysql\ndate: 2019-07-12 08:47:56\ntags:\n- mysql\n- \ncategorys:\n- \n---\n\n10\n\n\n\n\n\n## \n\nMysqlMysqlsqlMysqlmysql\n\n\n\n![](https://i.loli.net/2019/07/11/5d26941cb252430355.png)\n\n## \n\n\n\nemmMysql\nsql\n\n```\nSELECT id,name,course,grade FROM t_grade WHERE name = 'Frank';\n```\n\nmysqlCPUCPUmysqlsql\n\n## \n\n\n\n\n1. \n2. \n3. \n4. \n\n\n\n\n1. \n2. \n3. \n\nmysql\n\n## \n\n\n\n``\n\nDDL\n\n```sql\nCREATE TABLE `t_grade` (\n    id BIGINT(20) COMMENT 'id',\n    name VARCHAR(30) COMMENT '',\n    course INT COMMENT '1-2-3-4-',\n    grade DECIMAL(5,2) COMMENT '',\n    KEY idx_name(`name`)\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n\"name\"\"idx_name\"\n\n```sql\nKEY  (``)\n```\n\n\n\n```sql\nALTER TABLE `t_grade` ADD KEY idx_name(`name`);\n```\n\nindex\n\n`` \n\n`PRIMARY KEY`DDL\n\n```sql\nCREATE TABLE `t_grade` (\n    id BIGINT(20) COMMENT 'id',\n    name VARCHAR(30) COMMENT '',\n    course INT COMMENT '1-2-3-4-',\n    grade DECIMAL(5,2) COMMENT '',\n    PRIMARY KEY (`id`)\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n\n\n```sql\nPRIMARY KEY (``)\n```\n\n\n\n```sql\nALTER TABLE `t_grade` ADD PRIMARY KEY (`id`);\n```\n\n``\n\n `UNIQUE KEY`DDL\n\n```sql\nCREATE TABLE `t_grade` (\n    id BIGINT(20) COMMENT 'id',\n    name VARCHAR(30) COMMENT '',\n    course INT COMMENT '1-2-3-4-',\n    grade DECIMAL(5,2) COMMENT '',\n    UNIQUE KEY uk_name (`name`)\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n\n\n```sql\nUNIQUE KEY  (``)\n```\n\n\n\n```sql\nALTER TABLE `t_grade` ADD UNIQUE KEY uk_name (`name`);\n```\n\n``= =\n\n\n```sql\nCREATE TABLE `t_grade` (\n    id BIGINT(20) COMMENT 'id',\n    name VARCHAR(30) COMMENT '',\n    course INT COMMENT '1-2-3-4-',\n    grade DECIMAL(5,2) COMMENT '',\n    KEY idx_name_corse (`name`,`course`)\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n`key`\n\n```sql\nALTER TABLE `t_grade` ADD KEY idx_name_course (`name`,`course`);\nALTER TABLE `t_grade` ADD KEY idx_name_course (`course`,`name`);\n```\n\n \n\n```sql\nALTER TABLE `t_grade` ADD KEY idx_name_course (`name`,`course`);\n```\n\n\n\n```sql\nSELECT * FROM `t_grade` WHERE name = 'Frank';  \n```\n![](https://i.loli.net/2019/07/11/5d2695c837a1478405.png)\n\n\n\n```sql\nSELECT * FROM `t_grade` WHERE course = 1;\n```\n\n![](https://i.loli.net/2019/07/11/5d2695dd1113960656.png)\n\nsql\n\n\n\n``\n\n\n\n```sql\nINSERT INTO `t_grade` (`id`, `name`, `course`, `grade`) VALUES(1, 'Frank', 1, 100);\nINSERT INTO `t_grade` (`id`, `name`, `course`, `grade`) VALUES(2, 'Frank', 1, 95);\n```\n![](https://i.loli.net/2019/07/11/5d2695fb3f84a48846.png)\n\n\n\n\n\n```sql\nALTER TABLE `t_grade` ADD UNIQUE KEY idx_name_course (`name`,`course`);\n```\n\nsql\n\n![](https://i.loli.net/2019/07/11/5d26960ce9ccf62374.png)\n\n`name``course`\n\n``\n\n```sql\nCREATE TABLE `t_article`(\n        id BIGINT COMMENT 'id',\n        title VARCHAR(200) COMMENT '',\n        content TEXT COMMENT '',\n        FULLTEXT (title, content)\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n\n\n```sql\nALTER TABLE `t_article` ADD FULLTEXT KEY fidx_title_content (title,content) WITH PARSER ngram;\n```\n\nMATCH\n\n```sql\nSELECT * FROM `t_article` WHERE MATCH(title, content) AGAINST('');\n```\n\nmysql5.7innodbngram\n\n## \n\nsql\n\n\n\n```sql\nCREATE TABLE `t_grade` (\n    id BIGINT(20) COMMENT 'id',\n    name VARCHAR(30) COMMENT '',\n    course INT COMMENT '0-1-2-3-4-',\n    grade DECIMAL(5,2) COMMENT ''\n)ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;\n```\n\n\n\n```sql\npublic void batchInsert(){\n    long timeMillis = System.currentTimeMillis();\n    System.out.println(\"\");\n    for (int i = 1; i < 1000000; i++) {\n        GradeDO gradeDO = new GradeDO((long) i, randomName(), random.nextInt(5), BigDecimal.valueOf(random.nextDouble() * 100));\n        gradeMapper.insert(gradeDO);\n    }\n    System.out.println(\"\" + ( System.currentTimeMillis() - timeMillis) / 1000.0 );\n}\n```\n\n\n\n```\n\n1507.102\n```\n\n\n\n```java\npublic void batchInsert(){\n    long timeMillis = System.currentTimeMillis();\n    System.out.println(\"\");\n    for (int i = 1000000; i < 1010000; i++) {\n        GradeDO gradeDO = new GradeDO((long) i, randomName(), random.nextInt(5), BigDecimal.valueOf(random.nextDouble() * 100));\n        gradeMapper.insert(gradeDO);\n    }\n    System.out.println(\"\" + ( System.currentTimeMillis() - timeMillis) / 1000.0 );\n}\n```\n\n\n```\n\n15.681\n```\n\n\n\n```java\n@Test\nvoid testQuery() {\n    long timeMillis = System.currentTimeMillis();\n    System.out.println(\"\");\n    for (int i = 0; i < 100; i++) {\n        Integer id = random.nextInt(1000000);\n        GradeDO gradeDO = gradeMapper.selectById(id);\n    }\n    System.out.println(\"\" + ( System.currentTimeMillis() - timeMillis) / 1000.0 );\n}\n```\n\n\n\n```\n\n51.658\n```\n\nidname\n\n\n```\n\n17.465\n```\n\n\n\n```\n\n0.191\n```\n\n\n\n## \nmysqlsql\n","slug":"mysql/mysql-index-introduction","published":1,"updated":"2019-07-12T00:51:59.674Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjxze3go800150cvwdwa9ptzw","content":"<p>&#x672C;&#x6587;&#x53E3;&#x5473;&#xFF1A;&#x756A;&#x8304;&#x7092;&#x86CB;&#xFF0C;&#x9884;&#x8BA1;&#x9605;&#x8BFB;&#xFF1A;10&#x5206;&#x949F;&#x3002;</p>\n<p>&#x535A;&#x5BA2;&#x53C8;&#x505C;&#x66F4;&#x4E86;&#x4E24;&#x4E2A;&#x6708;&#xFF0C;&#x5728;&#x8FD9;&#x671F;&#x95F4;&#xFF0C;&#x5BF9;&#x4EBA;&#x751F;&#x548C;&#x4E16;&#x754C;&#x591A;&#x4E86;&#x8BB8;&#x591A;&#x601D;&#x8003;&#x3002;&#x5728;&#x4EBA;&#x751F;&#x7684;&#x4E0D;&#x540C;&#x9636;&#x6BB5;&#xFF0C;&#x4F1A;&#x5BF9;&#x751F;&#x6D3B;&#x548C;&#x4E16;&#x754C;&#x6709;&#x7740;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x8BA4;&#x77E5;&#xFF0C;&#x800C;&#x8BA4;&#x77E5;&#x7684;&#x6539;&#x53D8;&#x4E5F;&#x4F1A;&#x76F4;&#x63A5;&#x53CD;&#x5E94;&#x5728;&#x884C;&#x4E3A;&#x6A21;&#x5F0F;&#x4E4B;&#x4E2D;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;&#x751F;&#x6D3B;&#x7684;&#x601D;&#x8003;&#x5FC3;&#x5F97;&#x4E5F;&#x4F1A;&#x5728;&#x4E4B;&#x540E;&#x7684;&#x65F6;&#x95F4;&#x91CC;&#xFF0C;&#x6162;&#x6162;&#x5206;&#x4EAB;&#x7ED9;&#x5927;&#x5BB6;&#xFF0C;&#x4E00;&#x65B9;&#x9762;&#x662F;&#x5BF9;&#x81EA;&#x5DF1;&#x5FC3;&#x8DEF;&#x5386;&#x7A0B;&#x7684;&#x8BB0;&#x5F55;&#x548C;&#x603B;&#x7ED3;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x4E5F;&#x5E0C;&#x671B;&#x80FD;&#x7ED9;&#x9047;&#x5230;&#x540C;&#x6837;&#x95EE;&#x9898;&#x6216;&#x7591;&#x60D1;&#x7684;&#x670B;&#x53CB;&#x4EE5;&#x5E2E;&#x52A9;&#x3002;&#x76EE;&#x524D;&#x751F;&#x6D3B;&#x5DF2;&#x7ECF;&#x6162;&#x6162;&#x8C03;&#x6574;&#x5230;&#x6211;&#x60F3;&#x8981;&#x7684;&#x6837;&#x5B50;&#xFF0C;&#x535A;&#x5BA2;&#x5199;&#x4F5C;&#x4E5F;&#x8BE5;&#x7EE7;&#x7EED;&#x8D77;&#x822A;&#x4E86;&#x3002;</p>\n<h2 id=\"&#x4E00;&#x3001;&#x8BF4;&#x660E;\"><a href=\"#&#x4E00;&#x3001;&#x8BF4;&#x660E;\" class=\"headerlink\" title=\"&#x4E00;&#x3001;&#x8BF4;&#x660E;\"></a>&#x4E00;&#x3001;&#x8BF4;&#x660E;</h2><p>Mysql&#x662F;&#x6700;&#x5E38;&#x7528;&#x7684;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x800C;&#x7D22;&#x5F15;&#x5219;&#x662F;Mysql&#x8C03;&#x4F18;&#x4E2D;&#x6700;&#x5173;&#x5FC3;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x7D22;&#x5F15;&#x5E76;&#x5199;&#x51FA;&#x5408;&#x9002;&#x7684;sql&#xFF0C;&#x5C31;&#x80FD;&#x5C06;&#x67E5;&#x8BE2;&#x901F;&#x5EA6;&#x5927;&#x5927;&#x63D0;&#x5347;&#x3002;&#x4ECE;&#x672C;&#x7BC7;&#x5F00;&#x59CB;&#xFF0C;&#x5C06;&#x4F1A;&#x5BF9;Mysql&#x4E2D;&#x7684;&#x7D22;&#x5F15;&#x8FDB;&#x884C;&#x6DF1;&#x5165;&#x6D45;&#x51FA;&#x7684;&#x4ECB;&#x7ECD;&#xFF0C;&#x4ECE;&#x7D22;&#x5F15;&#x7684;&#x7B80;&#x4ECB;&#x3001;&#x7C7B;&#x522B;&#x3001;&#x4F7F;&#x7528;&#x59FF;&#x52BF;&#x5230;&#x7D22;&#x5F15;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x6700;&#x540E;&#x5230;&#x7D22;&#x5F15;&#x5B9E;&#x6218;&#x3002;&#x5E0C;&#x671B;&#x901A;&#x8FC7;&#x672C;&#x7CFB;&#x5217;&#x7684;&#x6587;&#x7AE0;&#xFF0C;&#x80FD;&#x8BA9;&#x4F60;&#x5BF9;mysql&#x4E2D;&#x7684;&#x7D22;&#x5F15;&#x6709;&#x4E00;&#x4E2A;&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x8BA4;&#x8BC6;&#x3002;</p>\n<p>&#x4EE5;&#x4E0B;&#x662F;&#x672C;&#x6587;&#x5927;&#x7EB2;&#xFF1A;</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/07/11/5d26941cb252430355.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x7D22;&#x5F15;\"><a href=\"#&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x7D22;&#x5F15;\" class=\"headerlink\" title=\"&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x7D22;&#x5F15;\"></a>&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x7D22;&#x5F15;</h2><p>&#x7D22;&#x5F15;&#x662F;&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x7528;&#x4E8E;&#x5FEB;&#x901F;&#x67E5;&#x627E;&#x8BB0;&#x5F55;&#x7684;&#x4E00;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;</p>\n<p>emm&#xFF0C;&#x7528;&#x4EBA;&#x8BDD;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x628A;Mysql&#x6BD4;&#x4F5C;&#x4E00;&#x672C;&#x4E66;&#x7684;&#x8BDD;&#xFF0C;&#x7D22;&#x5F15;&#x5C31;&#x662F;&#x4E66;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x6839;&#x636E;&#x76EE;&#x5F55;&#x4FBF;&#x80FD;&#x5F88;&#x5FEB;&#x627E;&#x5230;&#x9700;&#x8981;&#x7684;&#x4FE1;&#x606F;&#x6240;&#x5728;&#x7684;&#x9875;&#x9762;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x76EE;&#x5F55;&#x7684;&#x8BDD;&#xFF0C;&#x60F3;&#x8981;&#x67E5;&#x627E;&#x60F3;&#x8981;&#x7684;&#x4FE1;&#x606F;&#x5C31;&#x53EA;&#x80FD;&#x4E00;&#x9875;&#x4E00;&#x9875;&#x7FFB;&#x4E86;&#x3002;<br>&#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x4E00;&#x6761;&#x7B80;&#x5355;&#x7684;sql&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT id,name,course,grade FROM t_grade WHERE name = &apos;Frank&apos;;</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6DFB;&#x52A0;&#x7D22;&#x5F15;&#x7684;&#x8BDD;&#xFF0C;&#x53EA;&#x80FD;&#x4ECE;&#x6700;&#x5C0F;&#x8BB0;&#x5F55;&#x5F00;&#x59CB;&#x4F9D;&#x6B21;&#x904D;&#x5386;mysql&#x4E2D;&#x7684;&#x8BB0;&#x5F55;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x6BD4;&#x6BCF;&#x6761;&#x8BB0;&#x5F55;&#x662F;&#x5426;&#x7B26;&#x5408;&#x641C;&#x7D22;&#x6761;&#x4EF6;&#x3002;&#x5982;&#x679C;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x91CF;&#x4E0D;&#x5927;&#xFF08;&#x5341;&#x4E07;&#x7EA7;&#x522B;&#x4EE5;&#x4E0B;&#xFF09;&#xFF0C;&#x8017;&#x65F6;&#x5176;&#x5B9E;&#x4E5F;&#x8FD8;&#x597D;&#xFF0C;&#x6BD5;&#x7ADF;&#x76EE;&#x524D;&#x6765;&#x8BF4;&#xFF0C;CPU&#x6548;&#x7387;&#x5DF2;&#x7ECF;&#x5F88;&#x9AD8;&#x4E86;&#x3002;&#x4F46;&#x8FD9;&#x6837;&#x5176;&#x5B9E;&#x662F;&#x5BF9;CPU&#x7684;&#x4E00;&#x79CD;&#x6D6A;&#x8D39;&#xFF0C;&#x5C31;&#x597D;&#x6BD4;&#x5F00;&#x7740;&#x8DD1;&#x8F66;&#x5728;&#x6CE5;&#x6CDE;&#x7684;&#x4E61;&#x6751;&#x5C0F;&#x8DEF;&#x4E0A;&#x9A7E;&#x9A76;&#xFF0C;&#x5B8C;&#x5168;&#x65E0;&#x6CD5;&#x53D1;&#x6325;&#x5B83;&#x5E94;&#x6709;&#x7684;&#x6027;&#x80FD;&#x3002;&#x800C;&#x7D22;&#x5F15;&#x4FBF;&#x662F;&#x8FD9;&#x6837;&#x4E00;&#x6761;&#x5EB7;&#x5E84;&#x5927;&#x9053;&#xFF0C;&#x6709;&#x4E86;&#x7D22;&#x5F15;&#xFF0C;&#x624D;&#x80FD;&#x5145;&#x5206;&#x53D1;&#x6325;mysql&#x5F15;&#x64CE;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x8BA9;&#x4F60;&#x7684;sql&#x8DD1;&#x8F66;&#x98CE;&#x9A70;&#x7535;&#x63A3;&#x3002;</p>\n<h2 id=\"&#x4E09;&#x3001;&#x7D22;&#x5F15;&#x7684;&#x4F18;&#x7F3A;&#x70B9;\"><a href=\"#&#x4E09;&#x3001;&#x7D22;&#x5F15;&#x7684;&#x4F18;&#x7F3A;&#x70B9;\" class=\"headerlink\" title=\"&#x4E09;&#x3001;&#x7D22;&#x5F15;&#x7684;&#x4F18;&#x7F3A;&#x70B9;\"></a>&#x4E09;&#x3001;&#x7D22;&#x5F15;&#x7684;&#x4F18;&#x7F3A;&#x70B9;</h2><p>&#x5BF9;&#x4E8E;&#x5927;&#x90E8;&#x5206;&#x4E8B;&#x7269;&#x800C;&#x8A00;&#xFF0C;&#x901A;&#x5E38;&#x5B58;&#x5728;&#x5176;&#x5BF9;&#x7ACB;&#x9762;&#x7684;&#xFF0C;&#x6709;&#x597D;&#x7684;&#x4E00;&#x9762;&#xFF0C;&#x5C31;&#x4F1A;&#x6709;&#x574F;&#x7684;&#x4E00;&#x9762;&#xFF0C;&#x5C31;&#x50CF;&#x8D28;&#x91CF;&#x597D;&#x7684;&#x4E1C;&#x897F;&#x901A;&#x5E38;&#x4EF7;&#x683C;&#x9AD8;&#xFF0C;&#x4FBF;&#x5B9C;&#x7684;&#x4E1C;&#x897F;&#x901A;&#x5E38;&#x8D28;&#x91CF;&#x5DEE;&#xFF0C;&#x7D22;&#x5F15;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#x3002;</p>\n<p>&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x7684;&#x4F18;&#x70B9;&#x663E;&#x800C;&#x6613;&#x89C1;&#xFF1A;</p>\n<ol>\n<li>&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x52A0;&#x5FEB;&#x6570;&#x636E;&#x68C0;&#x7D22;&#x6548;&#x7387;&#x3002;</li>\n<li>&#x53EF;&#x4EE5;&#x52A0;&#x901F;&#x8868;&#x4E0E;&#x8868;&#x4E4B;&#x95F4;&#x7684;&#x8FDE;&#x63A5;&#x3002;</li>\n<li>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#x7684;&#x521B;&#x5EFA;&#xFF0C;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x552F;&#x4E00;&#x6027;&#x3002;</li>\n<li>&#x53EF;&#x4EE5;&#x663E;&#x8457;&#x51CF;&#x5C11;&#x5206;&#x7EC4;&#x4E0E;&#x6392;&#x5E8F;&#x7684;&#x65F6;&#x95F4;&#x3002;</li>\n</ol>\n<p>&#x603B;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x7528;&#x4E00;&#x4E2A;&#x5B57;&#x6765;&#x603B;&#x7ED3;&#xFF0C;&#x5C31;&#x662F;&#x5FEB;&#x3002;</p>\n<p>&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x7684;&#x7F3A;&#x70B9;&#x4E5F;&#x662F;&#x9700;&#x8981;&#x8003;&#x8651;&#x7684;&#xFF1A;</p>\n<ol>\n<li>&#x7D22;&#x5F15;&#x7684;&#x521B;&#x5EFA;&#x548C;&#x7EF4;&#x62A4;&#x9700;&#x8981;&#x65F6;&#x95F4;&#x6210;&#x672C;&#x3002;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x91CF;&#x8D8A;&#x5927;&#xFF0C;&#x63D2;&#x5165;&#x6216;&#x5220;&#x9664;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x8C03;&#x6574;&#x7D22;&#x5F15;&#x6240;&#x9700;&#x8981;&#x7684;&#x65F6;&#x95F4;&#x5C31;&#x8D8A;&#x957F;&#x3002;</li>\n<li>&#x7D22;&#x5F15;&#x9700;&#x8981;&#x5355;&#x72EC;&#x5B58;&#x50A8;&#xFF0C;&#x5360;&#x7528;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x5360;&#x7528;&#x7684;&#x7A7A;&#x95F4;&#x751A;&#x81F3;&#x6BD4;&#x8BB0;&#x5F55;&#x672C;&#x8EAB;&#x66F4;&#x5927;&#x3002;</li>\n<li>&#x5728;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x589E;&#x3001;&#x5220;&#x3001;&#x6539;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x540C;&#x65F6;&#x66F4;&#x65B0;&#x7D22;&#x5F15;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x6B64;&#x4F1A;&#x5F71;&#x54CD;&#x589E;&#x5220;&#x6539;&#x7684;&#x901F;&#x5EA6;&#x3002;</li>\n</ol>\n<p>&#x6240;&#x4EE5;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x5E76;&#x4E0D;&#x662F;&#x767E;&#x5229;&#x800C;&#x65E0;&#x4E00;&#x5BB3;&#xFF0C;&#x4F7F;&#x7528;&#x4E0D;&#x5F53;&#x751A;&#x81F3;&#x53EF;&#x80FD;&#x9020;&#x6210;&#x5220;&#x5E93;&#x8DD1;&#x8DEF;&#x7684;&#x60E8;&#x5267;&#x3010;&#x624B;&#x52A8;&#x6ED1;&#x7A3D;&#x3011;&#x3002;&#x4F46;&#x5F53;&#x4F60;&#x4E86;&#x89E3;&#x5B83;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x638C;&#x63E1;&#x4E86;&#x7D22;&#x5F15;&#x7684;&#x771F;&#x8C1B;&#xFF0C;&#x5B83;&#x5C31;&#x4F1A;&#x6210;&#x4E3A;&#x4F60;&#x7684;&#x795E;&#x5175;&#x5229;&#x5668;&#xFF0C;&#x8BA9;&#x4F60;&#x5728;mysql&#x5F00;&#x53D1;&#x4E2D;&#x6240;&#x5411;&#x62AB;&#x9761;&#x3002;</p>\n<h2 id=\"&#x56DB;&#x3001;&#x7D22;&#x5F15;&#x7684;&#x5206;&#x7C7B;&#x4EE5;&#x53CA;&#x521B;&#x5EFA;&#x59FF;&#x52BF;\"><a href=\"#&#x56DB;&#x3001;&#x7D22;&#x5F15;&#x7684;&#x5206;&#x7C7B;&#x4EE5;&#x53CA;&#x521B;&#x5EFA;&#x59FF;&#x52BF;\" class=\"headerlink\" title=\"&#x56DB;&#x3001;&#x7D22;&#x5F15;&#x7684;&#x5206;&#x7C7B;&#x4EE5;&#x53CA;&#x521B;&#x5EFA;&#x59FF;&#x52BF;\"></a>&#x56DB;&#x3001;&#x7D22;&#x5F15;&#x7684;&#x5206;&#x7C7B;&#x4EE5;&#x53CA;&#x521B;&#x5EFA;&#x59FF;&#x52BF;</h2><p>&#x7D22;&#x5F15;&#x53EF;&#x5206;&#x4E3A;&#x666E;&#x901A;&#x7D22;&#x5F15;&#x3001;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#x3001;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x3001;&#x7EC4;&#x5408;&#x7D22;&#x5F15;&#x3001;&#x5168;&#x6587;&#x7D22;&#x5F15;&#x3002;&#x770B;&#x8D77;&#x6765;&#x597D;&#x50CF;&#x5F88;&#x591A;&#x5F88;&#x590D;&#x6742;&#xFF0C;&#x4F46;&#x5176;&#x5B9E;&#x5E76;&#x975E;&#x5982;&#x6B64;&#xFF0C;&#x4E14;&#x542C;&#x6211;&#x6162;&#x6162;&#x9053;&#x6765;&#x3002;</p>\n<p><code>&#x666E;&#x901A;&#x7D22;&#x5F15;</code>&#xFF0C;&#x540D;&#x5B57;&#x4E2D;&#x5C31;&#x900F;&#x9732;&#x51FA;&#x5B83;&#x666E;&#x901A;&#x7684;&#x6C14;&#x8D28;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x7D22;&#x5F15;&#x3002;</p>\n<p>&#x5982;&#x4F55;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x7D22;&#x5F15;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5728;DDL&#x4E2D;&#x521B;&#x5EFA;&#x7D22;&#x5F15;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x4F7F;&#x7528;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x4E3B;&#x952E;id&apos;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x59D3;&#x540D;&apos;</span>,</span><br><span class=\"line\">    course <span class=\"built_in\">INT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x8BFE;&#x7A0B;&#xFF0C;1-&#x8BED;&#x6587;&#xFF0C;2-&#x6570;&#x5B66;&#xFF0C;3-&#x82F1;&#x8BED;&#xFF0C;4-&#x7269;&#x7406;&apos;</span>,</span><br><span class=\"line\">    grade <span class=\"built_in\">DECIMAL</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x6210;&#x7EE9;&apos;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">KEY</span> idx_name(<span class=\"string\">`name`</span>)</span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x8FD9;&#x6837;&#x5C31;&#x4E3A;&#x201D;name&#x201D;&#x5217;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;&#x201D;idx_name&#x201D;&#x7684;&#x666E;&#x901A;&#x7D22;&#x5F15;&#x3002;&#x901A;&#x7528;&#x7684;&#x521B;&#x5EFA;&#x65B9;&#x5F0F;&#x4E3A;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KEY &#x7D22;&#x5F15;&#x540D; (`&#x5217;&#x540D;`)</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x5982;&#x679C;&#x662F;&#x4E3A;&#x4E00;&#x5F20;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x597D;&#x7684;&#x8868;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x7D22;&#x5F15;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">KEY</span> idx_name(<span class=\"string\">`name`</span>);</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x8BF4;&#xFF0C;&#x201C;&#x4E0D;&#x662F;&#x7528;index&#x5173;&#x952E;&#x5B57;&#x6765;&#x521B;&#x5EFA;&#x7D22;&#x5F15;&#x7684;&#x5417;&#x201D;&#xFF0C;&#x522B;&#x6025;&#x522B;&#x6025;&#xFF0C;&#x5176;&#x5B9E;&#x5B83;&#x4EEC;&#x7684;&#x6548;&#x679C;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>\n<p><code>&#x4E3B;&#x952E;&#x7D22;&#x5F15;</code>&#xFF0C;&#x4E00;&#x770B;&#x5C31;&#x662F;&#x5F88;&#x5173;&#x952E;&#x7684;&#x89D2;&#x8272;&#xFF0C;&#x6CA1;&#x9519;&#xFF0C;&#x6BCF;&#x5F20;&#x8868;&#x90FD;&#x4F1A;&#x6709;&#x4E14;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#xFF0C;&#x5373;&#x4F7F;&#x6CA1;&#x6709;&#x663E;&#x5F0F;&#x7684;&#x521B;&#x5EFA;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x7684;&#x8BDD;&#xFF0C;&#x4E5F;&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x9690;&#x85CF;&#x7684;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x3002; </p>\n<p>&#x8FD9;&#x4E48;&#x91CD;&#x8981;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x7528;&#x7684;&#x5173;&#x952E;&#x5B57;&#x80AF;&#x5B9A;&#x4E5F;&#x5F97;&#x4E0D;&#x4E00;&#x6837;&#x624D;&#x884C;&#xFF0C;&#x521B;&#x5EFA;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x7684;&#x5173;&#x952E;&#x5B57;&#x662F;<code>PRIMARY KEY</code>&#xFF0C;&#x5728;DDL&#x4E2D;&#x6DFB;&#x52A0;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x7684;&#x59FF;&#x52BF;&#x4E3A;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x4E3B;&#x952E;id&apos;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x59D3;&#x540D;&apos;</span>,</span><br><span class=\"line\">    course <span class=\"built_in\">INT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x8BFE;&#x7A0B;&#xFF0C;1-&#x8BED;&#x6587;&#xFF0C;2-&#x6570;&#x5B66;&#xFF0C;3-&#x82F1;&#x8BED;&#xFF0C;4-&#x7269;&#x7406;&apos;</span>,</span><br><span class=\"line\">    grade <span class=\"built_in\">DECIMAL</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x6210;&#x7EE9;&apos;</span>,</span><br><span class=\"line\">    PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>)</span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x56E0;&#x4E3A;&#x4E3B;&#x952E;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x4E3B;&#x952E;&#x540D;&#x3002;&#x901A;&#x7528;&#x7684;&#x6DFB;&#x52A0;&#x65B9;&#x5F0F;&#x4E3A;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PRIMARY KEY (`&#x5217;&#x540D;`)</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x5982;&#x679C;&#x662F;&#x4E3A;&#x5DF2;&#x521B;&#x5EFA;&#x597D;&#x7684;&#x8868;&#x6DFB;&#x52A0;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>);</span><br></pre></td></tr></tbody></table></figure>\n<p><code>&#x552F;&#x4E00;&#x7D22;&#x5F15;</code>&#xFF0C;&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x5C31;&#x662F;&#x201C;&#x552F;&#x4E00;&#x201D;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x7D22;&#x5F15;&#x4E2D;&#x7684;&#x5217;&#x7684;&#x503C;&#x5FC5;&#x987B;&#x662F;&#x552F;&#x4E00;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x5411;&#x6570;&#x636E;&#x8868;&#x4E2D;&#x63D2;&#x5165;&#x4E00;&#x6761;&#x5DF2;&#x5B58;&#x5728;&#x7684;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#x5B57;&#x6BB5;&#x8BB0;&#x5F55;&#xFF0C;&#x5C31;&#x4F1A;&#x62A5;&#x9519;&#x3002;</p>\n<p>&#x5B9A;&#x4E49;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#x7684;&#x5173;&#x952E;&#x5B57;&#x4E3A; <code>UNIQUE KEY</code>&#x3002;&#x5728;DDL&#x4E2D;&#x6DFB;&#x52A0;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#x7684;&#x59FF;&#x52BF;&#x4E3A;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x4E3B;&#x952E;id&apos;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x59D3;&#x540D;&apos;</span>,</span><br><span class=\"line\">    course <span class=\"built_in\">INT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x8BFE;&#x7A0B;&#xFF0C;1-&#x8BED;&#x6587;&#xFF0C;2-&#x6570;&#x5B66;&#xFF0C;3-&#x82F1;&#x8BED;&#xFF0C;4-&#x7269;&#x7406;&apos;</span>,</span><br><span class=\"line\">    grade <span class=\"built_in\">DECIMAL</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x6210;&#x7EE9;&apos;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> uk_name (<span class=\"string\">`name`</span>)</span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x552F;&#x4E00;&#x7D22;&#x5F15;&#x7684;&#x901A;&#x7528;&#x6DFB;&#x52A0;&#x65B9;&#x5F0F;&#x4E3A;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UNIQUE KEY &#x7D22;&#x5F15;&#x540D; (`&#x5217;&#x540D;`)</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x4E3A;&#x5DF2;&#x521B;&#x5EFA;&#x597D;&#x7684;&#x8868;&#x6DFB;&#x52A0;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> uk_name (<span class=\"string\">`name`</span>);</span><br></pre></td></tr></tbody></table></figure>\n<p><code>&#x7EC4;&#x5408;&#x7D22;&#x5F15;</code>&#xFF0C;&#x53C8;&#x53EB;&#x8054;&#x5408;&#x7D22;&#x5F15;&#xFF0C;&#x4FBF;&#x662F;&#x5C06;&#x4E24;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x5B57;&#x6BB5;&#x7EC4;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x597D;&#x50CF;&#x8DDF;&#x6CA1;&#x8BF4;&#x4E00;&#x6837;= =<br>&#x770B;&#x4E00;&#x4E2A;&#x6817;&#x5B50;&#x5C31;&#x77E5;&#x9053;&#x4E86;&#x3002;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x4E3B;&#x952E;id&apos;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x59D3;&#x540D;&apos;</span>,</span><br><span class=\"line\">    course <span class=\"built_in\">INT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x8BFE;&#x7A0B;&#xFF0C;1-&#x8BED;&#x6587;&#xFF0C;2-&#x6570;&#x5B66;&#xFF0C;3-&#x82F1;&#x8BED;&#xFF0C;4-&#x7269;&#x7406;&apos;</span>,</span><br><span class=\"line\">    grade <span class=\"built_in\">DECIMAL</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x6210;&#x7EE9;&apos;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">KEY</span> idx_name_corse (<span class=\"string\">`name`</span>,<span class=\"string\">`course`</span>)</span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x540C;&#x6837;&#x662F;&#x4F7F;&#x7528;<code>key</code>&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x5728;&#x7D22;&#x5F15;&#x540D;&#x540E;&#x6DFB;&#x52A0;&#x591A;&#x4E2A;&#x5B57;&#x6BB5;&#x540D;&#x5373;&#x53EF;&#x3002;&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x70B9;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5B57;&#x6BB5;&#x6392;&#x5217;&#x662F;&#x6709;&#x987A;&#x5E8F;&#x7684;&#x3002;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#xFF0C;&#x4E0B;&#x9762;&#x8FD9;&#x4E24;&#x4E2A;&#x7D22;&#x5F15;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">KEY</span> idx_name_course (<span class=\"string\">`name`</span>,<span class=\"string\">`course`</span>);</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">KEY</span> idx_name_course (<span class=\"string\">`course`</span>,<span class=\"string\">`name`</span>);</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x7D22;&#x5F15;&#x7684;&#x5339;&#x914D;&#x9075;&#x5FAA;&#x201C;&#x5DE6;&#x7F00;&#x5339;&#x914D;&#x539F;&#x5219;&#x201D;&#xFF0C;&#x4E3E;&#x4E2A;&#x6817;&#x5B50;&#x8BF4;&#x660E;&#xFF0C;&#x5982;&#x679C;&#x521B;&#x5EFA;&#x7684;&#x7EC4;&#x5408;&#x7D22;&#x5F15;&#x662F; </p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">KEY</span> idx_name_course (<span class=\"string\">`name`</span>,<span class=\"string\">`course`</span>);</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x90A3;&#x4E48;&#x4E0B;&#x9762;&#x8BED;&#x53E5;&#x5C06;&#x80FD;&#x547D;&#x4E2D;&#x8FD9;&#x4E2A;&#x7EC4;&#x5408;&#x7D22;&#x5F15;&#x3002;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">name</span> = <span class=\"string\">&apos;Frank&apos;</span>;</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/07/11/5d2695c837a1478405.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>&#x800C;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x8BED;&#x53E5;&#x5C06;&#x65E0;&#x6CD5;&#x547D;&#x4E2D;&#x7D22;&#x5F15;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">WHERE</span> course = <span class=\"number\">1</span>;</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/07/11/5d2695dd1113960656.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>&#x56E0;&#x4E3A;&#x5728;&#x7EC4;&#x5408;&#x7D22;&#x5F15;&#x4E2D;&#xFF0C;&#x7D22;&#x5F15;&#x4E2D;&#x7684;&#x8BB0;&#x5F55;&#x662F;&#x5148;&#x6309;&#x7167;&#x524D;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x6392;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x6839;&#x636E;&#x540E;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x6392;&#x5E8F;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7EC4;&#x5408;&#x7D22;&#x5F15;&#x4E2D;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x5B57;&#x6BB5;&#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x67E5;&#x8BE2;&#x7D22;&#x5F15;&#x5BF9;&#x7D22;&#x5F15;&#x8BB0;&#x5F55;&#x8FDB;&#x884C;&#x904D;&#x5386;&#xFF0C;&#x904D;&#x5386;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x8FD8;&#x9700;&#x8981;&#x56DE;&#x6EAF;&#x5230;&#x805A;&#x7C07;&#x7D22;&#x5F15;&#x4E2D;&#x83B7;&#x53D6;&#x5B8C;&#x6574;&#x8BB0;&#x5F55;&#xFF0C;&#x8FD9;&#x6837;&#x53CD;&#x800C;&#x66F4;&#x8017;&#x65F6;&#x95F4;&#xFF0C;&#x6240;&#x4EE5;sql&#x4F18;&#x5316;&#x5668;&#x4F1A;&#x9009;&#x62E9;&#x76F4;&#x63A5;&#x5BF9;&#x8BB0;&#x5F55;&#x8FDB;&#x884C;&#x904D;&#x5386;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x4E0D;&#x6E05;&#x695A;&#x7D22;&#x5F15;&#x7684;&#x7ED3;&#x6784;&#x4EE5;&#x53CA;&#x805A;&#x7C07;&#x7D22;&#x5F15;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x4E0D;&#x8981;&#x7740;&#x6025;&#xFF0C;&#x540E;&#x9762;&#x7684;&#x6587;&#x7AE0;&#x91CC;&#x4F1A;&#x6709;&#x8BE6;&#x7EC6;&#x7684;&#x4ECB;&#x7ECD;&#x3002;</p>\n<p><code>&#x8054;&#x5408;&#x552F;&#x4E00;&#x7D22;&#x5F15;</code>&#xFF0C;&#x4FBF;&#x662F;&#x5C06;&#x591A;&#x4E2A;&#x5B57;&#x6BB5;&#x7EC4;&#x5408;&#x8D77;&#x6765;&#x5F62;&#x6210;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x952E;&#xFF0C;&#x4E3E;&#x4E2A;&#x6817;&#x5B50;&#xFF1A;</p>\n<p>&#x5148;&#x5220;&#x9664;&#x6240;&#x6709;&#x7D22;&#x5F15;&#xFF0C;&#x7136;&#x540E;&#x6DFB;&#x52A0;&#x4E24;&#x6761;&#x8BB0;&#x5F55;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`t_grade`</span> (<span class=\"string\">`id`</span>, <span class=\"string\">`name`</span>, <span class=\"string\">`course`</span>, <span class=\"string\">`grade`</span>) <span class=\"keyword\">VALUES</span>(<span class=\"number\">1</span>, <span class=\"string\">&apos;Frank&apos;</span>, <span class=\"number\">1</span>, <span class=\"number\">100</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`t_grade`</span> (<span class=\"string\">`id`</span>, <span class=\"string\">`name`</span>, <span class=\"string\">`course`</span>, <span class=\"string\">`grade`</span>) <span class=\"keyword\">VALUES</span>(<span class=\"number\">2</span>, <span class=\"string\">&apos;Frank&apos;</span>, <span class=\"number\">1</span>, <span class=\"number\">95</span>);</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/07/11/5d2695fb3f84a48846.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x63D2;&#x5165;&#x4E24;&#x6761;&#x8BB0;&#x5F55;&#x4E86;&#x3002;</p>\n<p>&#x7136;&#x540E;&#x5220;&#x6389;&#x8FD9;&#x4E24;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8054;&#x5408;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> idx_name_course (<span class=\"string\">`name`</span>,<span class=\"string\">`course`</span>);</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x7136;&#x540E;&#x518D;&#x6765;&#x6267;&#x884C;&#x4E00;&#x4E0B;&#x4E0A;&#x9762;&#x7684;sql&#xFF1A;</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/07/11/5d26960ce9ccf62374.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>&#x8FD9;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x63D0;&#x793A;&#xFF0C;&#x56E0;&#x4E3A;&#x5C06;&#x5B57;&#x6BB5;<code>name</code>&#x548C;<code>course</code>&#x521B;&#x5EFA;&#x4E86;&#x8054;&#x5408;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E24;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x7EC4;&#x5408;&#x503C;&#x5FC5;&#x987B;&#x662F;&#x552F;&#x4E00;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x63D2;&#x5165;&#x7684;&#x8BB0;&#x5F55;&#x7684;&#x8FD9;&#x4E24;&#x4E2A;&#x5B57;&#x6BB5;&#x7EC4;&#x5408;&#x503C;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;</p>\n<p>&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x662F;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;&#x7D22;&#x5F15;&#xFF1A;<code>&#x5168;&#x6587;&#x7D22;&#x5F15;</code>&#xFF0C;&#x7531;&#x4E8E;&#x5176;&#x590D;&#x6742;&#x6027;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x7B80;&#x5355;&#x7684;&#x4ECB;&#x7ECD;&#x5B83;&#x7684;&#x521B;&#x5EFA;&#x59FF;&#x52BF;&#x3002;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_article`</span>(</span><br><span class=\"line\">        <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x6587;&#x7AE0;id&apos;</span>,</span><br><span class=\"line\">        title <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">200</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x6587;&#x7AE0;&#x6807;&#x9898;&apos;</span>,</span><br><span class=\"line\">        <span class=\"keyword\">content</span> <span class=\"built_in\">TEXT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x6587;&#x7AE0;&#x5185;&#x5BB9;&apos;</span>,</span><br><span class=\"line\">        FULLTEXT (title, <span class=\"keyword\">content</span>)</span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x6216;&#x8005;&#x7ED9;&#x73B0;&#x6709;&#x8868;&#x6DFB;&#x52A0;&#x5168;&#x6587;&#x7D22;&#x5F15;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_article`</span> <span class=\"keyword\">ADD</span> FULLTEXT <span class=\"keyword\">KEY</span> fidx_title_content (title,<span class=\"keyword\">content</span>) <span class=\"keyword\">WITH</span> PARSER ngram;</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x60F3;&#x8981;&#x4F7F;&#x7528;&#x5168;&#x6587;&#x7D22;&#x5F15;&#x67E5;&#x8BE2;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4F7F;&#x7528;MATCH&#x5173;&#x952E;&#x5B57;&#x3002;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`t_article`</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">MATCH</span>(title, <span class=\"keyword\">content</span>) AGAINST(<span class=\"string\">&apos;&#x67E5;&#x8BE2;&#x5B57;&#x7B26;&#x4E32;&apos;</span>);</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8981;&#x4F7F;&#x7528;&#x5168;&#x6587;&#x7D22;&#x5F15;&#xFF0C;&#x9700;&#x8981;&#x786E;&#x8BA4;mysql&#x7684;&#x7248;&#x672C;&#x53F7;&#x5728;5.7&#x4EE5;&#x4E0A;&#xFF0C;&#x5426;&#x5219;&#x65E0;&#x6CD5;&#x5728;innodb&#x5F15;&#x64CE;&#x4E0A;&#x4F7F;&#x7528;&#x5168;&#x6587;&#x7D22;&#x5F15;&#x7684;&#x4E2D;&#x6587;&#x68C0;&#x7D22;&#x63D2;&#x4EF6;ngram&#x3002;</p>\n<h2 id=\"&#x4E94;&#x3001;&#x7D22;&#x5F15;&#x4F7F;&#x7528;&#x524D;&#x540E;&#x5BF9;&#x6BD4;\"><a href=\"#&#x4E94;&#x3001;&#x7D22;&#x5F15;&#x4F7F;&#x7528;&#x524D;&#x540E;&#x5BF9;&#x6BD4;\" class=\"headerlink\" title=\"&#x4E94;&#x3001;&#x7D22;&#x5F15;&#x4F7F;&#x7528;&#x524D;&#x540E;&#x5BF9;&#x6BD4;\"></a>&#x4E94;&#x3001;&#x7D22;&#x5F15;&#x4F7F;&#x7528;&#x524D;&#x540E;&#x5BF9;&#x6BD4;</h2><p>&#x4E3A;&#x4E86;&#x66F4;&#x76F4;&#x89C2;&#x7684;&#x770B;&#x51FA;&#x7D22;&#x5F15;&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6765;&#x5BF9;&#x6570;&#x636E;&#x8868;&#x6DFB;&#x52A0;&#x7D22;&#x5F15;&#x524D;&#x540E;&#x6267;&#x884C;&#x76F8;&#x540C;sql&#x7684;&#x8017;&#x65F6;&#x6765;&#x770B;&#x51FA;&#x5BF9;&#x6BD4;&#xFF0C;&#x8FD9;&#x91CC;&#x4EC5;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x7684;&#x6BD4;&#x8F83;&#xFF0C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x3002;</p>\n<p>&#x5148;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x8868;&#xFF1A;</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x4E3B;&#x952E;id&apos;</span>,</span><br><span class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x59D3;&#x540D;&apos;</span>,</span><br><span class=\"line\">    course <span class=\"built_in\">INT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x8BFE;&#x7A0B;&#xFF0C;0-&#x5316;&#x5B66;&#xFF0C;1-&#x8BED;&#x6587;&#xFF0C;2-&#x6570;&#x5B66;&#xFF0C;3-&#x82F1;&#x8BED;&#xFF0C;4-&#x7269;&#x7406;&apos;</span>,</span><br><span class=\"line\">    grade <span class=\"built_in\">DECIMAL</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">&apos;&#x6210;&#x7EE9;&apos;</span></span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x7136;&#x540E;&#x63D2;&#x5165;&#x4E00;&#x767E;&#x4E07;&#x6761;&#x6570;&#x636E;&#xFF1A;</p>\n<figure class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void batchInsert(){</span><br><span class=\"line\">    long timeMillis = System.currentTimeMillis();</span><br><span class=\"line\">    System.out.println(&quot;&#x5F00;&#x59CB;&#x63D2;&#x5165;&#x6570;&#x636E;&quot;);</span><br><span class=\"line\">    for (int i = 1; i &lt; 1000000; i++) {</span><br><span class=\"line\">        GradeDO gradeDO = new GradeDO((long) i, randomName(), random.nextInt(5), BigDecimal.valueOf(random.nextDouble() * 100));</span><br><span class=\"line\">        gradeMapper.insert(gradeDO);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    System.out.println(&quot;&#x63D2;&#x5165;&#x4E00;&#x767E;&#x4E07;&#x6761;&#x8BB0;&#x5F55;&#x8017;&#x65F6;&#xFF1A;&quot; + ( System.currentTimeMillis() - timeMillis) / 1000.0 );</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x8F93;&#x51FA;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x5F00;&#x59CB;&#x63D2;&#x5165;&#x6570;&#x636E;</span><br><span class=\"line\">&#x63D2;&#x5165;&#x4E00;&#x767E;&#x4E07;&#x6761;&#x8BB0;&#x5F55;&#x8017;&#x65F6;&#xFF1A;1507.102</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x73B0;&#x5728;&#x662F;&#x6CA1;&#x6709;&#x7D22;&#x5F15;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5F00;&#x59CB;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x6D4B;&#x8BD5;&#xFF1A;</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">batchInsert</span><span class=\"params\">()</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">long</span> timeMillis = System.currentTimeMillis();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;&#x5F00;&#x59CB;&#x63D2;&#x5165;&#x6570;&#x636E;&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">1000000</span>; i &lt; <span class=\"number\">1010000</span>; i++) {</span><br><span class=\"line\">        GradeDO gradeDO = <span class=\"keyword\">new</span> GradeDO((<span class=\"keyword\">long</span>) i, randomName(), random.nextInt(<span class=\"number\">5</span>), BigDecimal.valueOf(random.nextDouble() * <span class=\"number\">100</span>));</span><br><span class=\"line\">        gradeMapper.insert(gradeDO);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;&#x63D2;&#x5165;&#x4E00;&#x4E07;&#x6761;&#x8BB0;&#x5F55;&#x8017;&#x65F6;&#xFF1A;&quot;</span> + ( System.currentTimeMillis() - timeMillis) / <span class=\"number\">1000.0</span> );</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x8F93;&#x51FA;&#x5982;&#x4E0B;&#xFF1A;<br></p><figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x5F00;&#x59CB;&#x63D2;&#x5165;&#x6570;&#x636E;</span><br><span class=\"line\">&#x63D2;&#x5165;&#x4E00;&#x4E07;&#x6761;&#x8BB0;&#x5F55;&#x8017;&#x65F6;&#xFF1A;15.681</span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>&#x7136;&#x540E;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#x6D4B;&#x8BD5;&#x3002;</p>\n<figure class=\"highlight java\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">testQuery</span><span class=\"params\">()</span> </span>{</span><br><span class=\"line\">    <span class=\"keyword\">long</span> timeMillis = System.currentTimeMillis();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;&#x5F00;&#x59CB;&#x67E5;&#x8BE2;&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) {</span><br><span class=\"line\">        Integer id = random.nextInt(<span class=\"number\">1000000</span>);</span><br><span class=\"line\">        GradeDO gradeDO = gradeMapper.selectById(id);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;&#x4E00;&#x767E;&#x6B21;&#x67E5;&#x8BE2;&#x8017;&#x65F6;&#xFF1A;&quot;</span> + ( System.currentTimeMillis() - timeMillis) / <span class=\"number\">1000.0</span> );</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x8F93;&#x51FA;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x5F00;&#x59CB;&#x67E5;&#x8BE2;</span><br><span class=\"line\">&#x4E00;&#x767E;&#x6B21;&#x67E5;&#x8BE2;&#x8017;&#x65F6;&#xFF1A;51.658</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x4E3A;id&#x5217;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E3B;&#x952E;&#xFF0C;&#x5E76;&#x4E3A;name&#x5B57;&#x6BB5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x7D22;&#x5F15;&#x3002;<br>&#x518D;&#x63D2;&#x5165;&#x4E00;&#x4E07;&#x6761;&#x8BB0;&#x5F55;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x5F00;&#x59CB;&#x63D2;&#x5165;&#x6570;&#x636E;</span><br><span class=\"line\">&#x63D2;&#x5165;&#x4E00;&#x4E07;&#x6761;&#x8BB0;&#x5F55;&#x8017;&#x65F6;&#xFF1A;17.465</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x7136;&#x540E;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#x6D4B;&#x8BD5;&#x3002;</p>\n<figure class=\"highlight plain\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x5F00;&#x59CB;&#x67E5;&#x8BE2;</span><br><span class=\"line\">&#x4E00;&#x767E;&#x6B21;&#x67E5;&#x8BE2;&#x8017;&#x65F6;&#xFF1A;0.191</span><br></pre></td></tr></tbody></table></figure>\n<p>&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5728;&#x6709;&#x5355;&#x4E2A;&#x7D22;&#x5F15;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x521B;&#x5EFA;&#x8BB0;&#x5F55;&#x8017;&#x65F6;&#x7565;&#x957F;&#x4E8E;&#x65E0;&#x7D22;&#x5F15;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5F53;&#x5B57;&#x6BB5;&#x6570;&#x91CF;&#x548C;&#x7D22;&#x5F15;&#x6570;&#x91CF;&#x589E;&#x52A0;&#x65F6;&#xFF0C;&#x8FD9;&#x79CD;&#x5DEE;&#x8DDD;&#x5C06;&#x4F1A;&#x589E;&#x5927;&#x3002;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x53EF;&#x4EE5;&#x6E05;&#x6670;&#x7684;&#x770B;&#x51FA;&#xFF0C;&#x8FD9;&#x91CC;&#x6DFB;&#x52A0;&#x4E86;&#x7D22;&#x5F15;&#x4E4B;&#x540E;&#xFF0C;&#x5927;&#x5927;&#x7684;&#x7F29;&#x51CF;&#x4E86;&#x67E5;&#x8BE2;&#x7684;&#x8017;&#x65F6;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x662F;&#x805A;&#x7C07;&#x7D22;&#x5F15;&#x7684;&#x529F;&#x52B3;&#x3002;</p>\n<h2 id=\"&#x516D;&#x3001;&#x603B;&#x7ED3;\"><a href=\"#&#x516D;&#x3001;&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x516D;&#x3001;&#x603B;&#x7ED3;\"></a>&#x516D;&#x3001;&#x603B;&#x7ED3;</h2><p>&#x7D22;&#x5F15;&#x662F;mysql&#x4E2D;&#x5341;&#x5206;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#xFF0C;&#x4F7F;&#x7528;&#x597D;&#x5B83;&#x5C31;&#x80FD;&#x8BA9;&#x4F60;&#x7684;sql&#x5982;&#x864E;&#x6DFB;&#x7FFC;&#x3002;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;&#x7D22;&#x5F15;&#x4E00;&#x65B9;&#x9762;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x63D0;&#x5347;&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x4E5F;&#x4F1A;&#x5360;&#x7528;&#x65F6;&#x95F4;&#x548C;&#x7A7A;&#x95F4;&#x6210;&#x672C;&#xFF0C;&#x56E0;&#x6B64;&#x7D22;&#x5F15;&#x7684;&#x9009;&#x62E9;&#x4E5F;&#x662F;&#x4E00;&#x95E8;&#x5B66;&#x95EE;&#x3002;&#x7D22;&#x5F15;&#x6709;&#x5F88;&#x591A;&#x79CD;&#x7C7B;&#x578B;&#xFF0C;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x7D22;&#x5F15;&#x6709;&#x7740;&#x4E0D;&#x540C;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x6709;&#x4E86;&#x89E3;&#x4E86;&#x5B83;&#x4EEC;&#x5404;&#x81EA;&#x7684;&#x7279;&#x6027;&#x624D;&#x80FD;&#x6B63;&#x786E;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x3002;<br>&#x5173;&#x4E8E;&#x7D22;&#x5F15;&#x7684;&#x7B80;&#x4ECB;&#x5C31;&#x5148;&#x4ECB;&#x7ECD;&#x5230;&#x8FD9;&#x91CC;&#x4E86;&#xFF0C;&#x540E;&#x9762;&#x4F1A;&#x5BF9;&#x7D22;&#x5F15;&#x7684;&#x539F;&#x7406;&#x8FDB;&#x884C;&#x8FDB;&#x4E00;&#x6B65;&#x6DF1;&#x5165;&#x7684;&#x4ECB;&#x7ECD;&#xFF0C;&#x8BA9;&#x4F60;&#x4E0D;&#x4EC5;&#x77E5;&#x9053;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x80FD;&#x77E5;&#x9053;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x3002;</p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<p>10</p>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>MysqlMysqlsqlMysqlmysql</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/07/11/5d26941cb252430355.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>emmMysql<br>sql</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT id,name,course,grade FROM t_grade WHERE name = &apos;Frank&apos;;</span><br></pre></td></tr></table></figure>\n<p>mysqlCPUCPUmysqlsql</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<p></p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<p>mysql</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p><code></code></p>\n<p>DDL</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    course <span class=\"built_in\">INT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'1-2-3-4-'</span>,</span><br><span class=\"line\">    grade <span class=\"built_in\">DECIMAL</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"keyword\">KEY</span> idx_name(<span class=\"string\">`name`</span>)</span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>\n<p>nameidx_name</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KEY  (``)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">KEY</span> idx_name(<span class=\"string\">`name`</span>);</span><br></pre></td></tr></table></figure>\n<p>index</p>\n<p><code></code> </p>\n<p><code>PRIMARY KEY</code>DDL</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    course <span class=\"built_in\">INT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'1-2-3-4-'</span>,</span><br><span class=\"line\">    grade <span class=\"built_in\">DECIMAL</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>)</span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PRIMARY KEY (``)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>);</span><br></pre></td></tr></table></figure>\n<p><code></code></p>\n<p> <code>UNIQUE KEY</code>DDL</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    course <span class=\"built_in\">INT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'1-2-3-4-'</span>,</span><br><span class=\"line\">    grade <span class=\"built_in\">DECIMAL</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> uk_name (<span class=\"string\">`name`</span>)</span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UNIQUE KEY  (``)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> uk_name (<span class=\"string\">`name`</span>);</span><br></pre></td></tr></table></figure>\n<p><code></code>= =<br></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    course <span class=\"built_in\">INT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'1-2-3-4-'</span>,</span><br><span class=\"line\">    grade <span class=\"built_in\">DECIMAL</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"keyword\">KEY</span> idx_name_corse (<span class=\"string\">`name`</span>,<span class=\"string\">`course`</span>)</span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>\n<p><code>key</code></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">KEY</span> idx_name_course (<span class=\"string\">`name`</span>,<span class=\"string\">`course`</span>);</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">KEY</span> idx_name_course (<span class=\"string\">`course`</span>,<span class=\"string\">`name`</span>);</span><br></pre></td></tr></table></figure>\n<p> </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">KEY</span> idx_name_course (<span class=\"string\">`name`</span>,<span class=\"string\">`course`</span>);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">name</span> = <span class=\"string\">'Frank'</span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/07/11/5d2695c837a1478405.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">WHERE</span> course = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/07/11/5d2695dd1113960656.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>sql</p>\n<p></p>\n<p><code></code></p>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`t_grade`</span> (<span class=\"string\">`id`</span>, <span class=\"string\">`name`</span>, <span class=\"string\">`course`</span>, <span class=\"string\">`grade`</span>) <span class=\"keyword\">VALUES</span>(<span class=\"number\">1</span>, <span class=\"string\">'Frank'</span>, <span class=\"number\">1</span>, <span class=\"number\">100</span>);</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`t_grade`</span> (<span class=\"string\">`id`</span>, <span class=\"string\">`name`</span>, <span class=\"string\">`course`</span>, <span class=\"string\">`grade`</span>) <span class=\"keyword\">VALUES</span>(<span class=\"number\">2</span>, <span class=\"string\">'Frank'</span>, <span class=\"number\">1</span>, <span class=\"number\">95</span>);</span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/07/11/5d2695fb3f84a48846.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> <span class=\"keyword\">ADD</span> <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> idx_name_course (<span class=\"string\">`name`</span>,<span class=\"string\">`course`</span>);</span><br></pre></td></tr></table></figure>\n<p>sql</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/07/11/5d26960ce9ccf62374.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>name</code><code>course</code></p>\n<p><code></code></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_article`</span>(</span><br><span class=\"line\">        <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">        title <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">200</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">        <span class=\"keyword\">content</span> <span class=\"built_in\">TEXT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">        FULLTEXT (title, <span class=\"keyword\">content</span>)</span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_article`</span> <span class=\"keyword\">ADD</span> FULLTEXT <span class=\"keyword\">KEY</span> fidx_title_content (title,<span class=\"keyword\">content</span>) <span class=\"keyword\">WITH</span> PARSER ngram;</span><br></pre></td></tr></table></figure>\n<p>MATCH</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> <span class=\"string\">`t_article`</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">MATCH</span>(title, <span class=\"keyword\">content</span>) AGAINST(<span class=\"string\">''</span>);</span><br></pre></td></tr></table></figure>\n<p>mysql5.7innodbngram</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>sql</p>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`t_grade`</span> (</span><br><span class=\"line\">    <span class=\"keyword\">id</span> <span class=\"built_in\">BIGINT</span>(<span class=\"number\">20</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">    <span class=\"keyword\">name</span> <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">30</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    course <span class=\"built_in\">INT</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'0-1-2-3-4-'</span>,</span><br><span class=\"line\">    grade <span class=\"built_in\">DECIMAL</span>(<span class=\"number\">5</span>,<span class=\"number\">2</span>) <span class=\"keyword\">COMMENT</span> <span class=\"string\">''</span></span><br><span class=\"line\">)<span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> AUTO_INCREMENT=<span class=\"number\">0</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void batchInsert()&#123;</span><br><span class=\"line\">    long timeMillis = System.currentTimeMillis();</span><br><span class=\"line\">    System.out.println(\"\");</span><br><span class=\"line\">    for (int i = 1; i &lt; 1000000; i++) &#123;</span><br><span class=\"line\">        GradeDO gradeDO = new GradeDO((long) i, randomName(), random.nextInt(5), BigDecimal.valueOf(random.nextDouble() * 100));</span><br><span class=\"line\">        gradeMapper.insert(gradeDO);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.out.println(\"\" + ( System.currentTimeMillis() - timeMillis) / 1000.0 );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">1507.102</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">batchInsert</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">long</span> timeMillis = System.currentTimeMillis();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">1000000</span>; i &lt; <span class=\"number\">1010000</span>; i++) &#123;</span><br><span class=\"line\">        GradeDO gradeDO = <span class=\"keyword\">new</span> GradeDO((<span class=\"keyword\">long</span>) i, randomName(), random.nextInt(<span class=\"number\">5</span>), BigDecimal.valueOf(random.nextDouble() * <span class=\"number\">100</span>));</span><br><span class=\"line\">        gradeMapper.insert(gradeDO);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\"</span> + ( System.currentTimeMillis() - timeMillis) / <span class=\"number\">1000.0</span> );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">15.681</span><br></pre></td></tr></table></figure></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">testQuery</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">long</span> timeMillis = System.currentTimeMillis();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</span><br><span class=\"line\">        Integer id = random.nextInt(<span class=\"number\">1000000</span>);</span><br><span class=\"line\">        GradeDO gradeDO = gradeMapper.selectById(id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\"</span> + ( System.currentTimeMillis() - timeMillis) / <span class=\"number\">1000.0</span> );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">51.658</span><br></pre></td></tr></table></figure>\n<p>idname<br></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">17.465</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">0.191</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>mysqlsql<br></p>\n"},{"title":"RabbitMQRabbitMQ","date":"2019-07-12T00:53:12.000Z","categorys":[""],"_content":"","source":"_posts/rabbitmq/rabbitmq-how-to-use-dead-letter-queue.md","raw":"---\ntitle: RabbitMQRabbitMQ\ndate: 2019-07-12 08:53:12\ntags:\n- RabbitMQ\ncategorys:\n- \n---\n","slug":"rabbitmq/rabbitmq-how-to-use-dead-letter-queue","published":1,"updated":"2019-07-12T00:54:50.853Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjxze3go800190cvwzwkcwhnc","content":"<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":""},{"title":"Java ","date":"2018-12-26T11:55:51.000Z","_content":"> \n\n## \n\n[](https://mubu.com/doc/lW2C-KYYy0)\n","source":"_posts/reading/java-multithread-programming-guide-in-action-notes.md","raw":"---\ntitle: Java \ntags: \n - \n - Java\n - \ncategories: \ndate: 2018-12-26 19:55:51\n---\n> \n\n## \n\n[](https://mubu.com/doc/lW2C-KYYy0)\n","slug":"reading/java-multithread-programming-guide-in-action-notes","published":1,"updated":"2019-06-04T01:29:57.498Z","_id":"cjxze3gon001c0cvwdh9ove76","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://mubu.com/doc/lW2C-KYYy0\" target=\"_blank\" rel=\"noopener\"></a></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://mubu.com/doc/lW2C-KYYy0\" target=\"_blank\" rel=\"noopener\"></a></p>\n"},{"title":"01","date":"2019-03-23T13:31:05.000Z","categorys":"","_content":"\n## \n\n\n\n![20190323214213.png](https://i.loli.net/2019/03/23/5c9637b6e2922.png)\n\n`Mysql``Mysql`95\n\n![20190323215229.png](https://i.loli.net/2019/03/23/5c963a200ae18.png)\n\n40~60\n\n\n\n\n\n`01`\n\n## \n\n\n\n![](https://i.loli.net/2019/03/12/5c87c9244d3c9.jpeg)\n\n\n\n\n\n![](https://i.loli.net/2019/03/12/5c87b64eb1a66.jpeg)\n\n `KS(i,j)``KS(i-1,m) {m:1...j}` `K(i-1,1...j)``KS(i,j)`\n\n![](https://i.loli.net/2019/03/23/5c964f94ca2a4.jpeg)\n\n`i=3j=5``KS(3,5) = max{KS(2,5)`,`KS(2,0) + 3} = max{6,3} = 6`;`i=2``i=3`\n\n\n\n```java\nKS(j) = max{KS(j),KS(j - wi) + vi}\n```\n\n`KS(j - wi)``KS(i-1, j - wi)``KS(j)``KS(m){m:1..j}`\n\n`i=2``i=3``{0,0,2,4,4,6,6,6,6,6,6}``i=2``i=3``KS(0) = 0KS(1) = KS(1) = 0` (j=15)`KS(2) = 2,KS(3) = 4,KS(4) = 4, KS(5) = max{KS(5), KS(5-5) + 3} = 6,....,KS(8) = max{KS(8),KS(8 - 5) + 3} = 7`KS(8)KS(8)KS(8)= =\n\n```java\npublic class Solution{\n    int[] vs = {0,2,4,3,7};\n    int[] ws = {0,2,3,5,5};\n    int[] newResults = new int[11];\n\n    @Test\n    public void test() {\n        int result = ksp(4,10);\n        System.out.println(result);\n    }\n\n    private int ksp(int i, int c){\n        // \n        for (int m = 0; m < vs.length; m++){\n            int w = ws[m];\n            int v = vs[m];\n            for (int n = c; n >= w; n--){\n                newResults[n] = Math.max(newResults[n] , newResults[n - w] + v);\n            }\n            // \n            System.out.println(JSON.toJSONString(newResults));\n        }\n        return newResults[newResults.length - 1];\n    }\n}\n```\n\n\n\n```\n[0,0,0,0,0,0,0,0,0,0,0]\n[0,0,2,2,2,2,2,2,2,2,2]\n[0,0,2,4,4,6,6,6,6,6,6]\n[0,0,2,4,4,6,6,6,7,7,9]\n[0,0,2,4,4,7,7,9,11,11,13]\n13\n```\n\n`O(n*c)``O(c)`\n\n## \n\n`01````KS(0)``0``KS(j)````KS(c)``````KS(0...c)``0`\n\n``00````00\n\n![](https://i.loli.net/2019/03/24/5c96e93168119.jpeg)\n\n## \n\n`01`````````\n\n`01```\n\n`01`\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)\n\n","source":"_posts/leetcode/dp-01-knapsack-problem-optimization.md","raw":"---\ntitle: 01\ndate: 2019-03-23 21:31:05\ntags:\n - Java\n - \n - \n - \ncategorys: \n---\n\n## \n\n\n\n![20190323214213.png](https://i.loli.net/2019/03/23/5c9637b6e2922.png)\n\n`Mysql``Mysql`95\n\n![20190323215229.png](https://i.loli.net/2019/03/23/5c963a200ae18.png)\n\n40~60\n\n\n\n\n\n`01`\n\n## \n\n\n\n![](https://i.loli.net/2019/03/12/5c87c9244d3c9.jpeg)\n\n\n\n\n\n![](https://i.loli.net/2019/03/12/5c87b64eb1a66.jpeg)\n\n `KS(i,j)``KS(i-1,m) {m:1...j}` `K(i-1,1...j)``KS(i,j)`\n\n![](https://i.loli.net/2019/03/23/5c964f94ca2a4.jpeg)\n\n`i=3j=5``KS(3,5) = max{KS(2,5)`,`KS(2,0) + 3} = max{6,3} = 6`;`i=2``i=3`\n\n\n\n```java\nKS(j) = max{KS(j),KS(j - wi) + vi}\n```\n\n`KS(j - wi)``KS(i-1, j - wi)``KS(j)``KS(m){m:1..j}`\n\n`i=2``i=3``{0,0,2,4,4,6,6,6,6,6,6}``i=2``i=3``KS(0) = 0KS(1) = KS(1) = 0` (j=15)`KS(2) = 2,KS(3) = 4,KS(4) = 4, KS(5) = max{KS(5), KS(5-5) + 3} = 6,....,KS(8) = max{KS(8),KS(8 - 5) + 3} = 7`KS(8)KS(8)KS(8)= =\n\n```java\npublic class Solution{\n    int[] vs = {0,2,4,3,7};\n    int[] ws = {0,2,3,5,5};\n    int[] newResults = new int[11];\n\n    @Test\n    public void test() {\n        int result = ksp(4,10);\n        System.out.println(result);\n    }\n\n    private int ksp(int i, int c){\n        // \n        for (int m = 0; m < vs.length; m++){\n            int w = ws[m];\n            int v = vs[m];\n            for (int n = c; n >= w; n--){\n                newResults[n] = Math.max(newResults[n] , newResults[n - w] + v);\n            }\n            // \n            System.out.println(JSON.toJSONString(newResults));\n        }\n        return newResults[newResults.length - 1];\n    }\n}\n```\n\n\n\n```\n[0,0,0,0,0,0,0,0,0,0,0]\n[0,0,2,2,2,2,2,2,2,2,2]\n[0,0,2,4,4,6,6,6,6,6,6]\n[0,0,2,4,4,6,6,6,7,7,9]\n[0,0,2,4,4,7,7,9,11,11,13]\n13\n```\n\n`O(n*c)``O(c)`\n\n## \n\n`01````KS(0)``0``KS(j)````KS(c)``````KS(0...c)``0`\n\n``00````00\n\n![](https://i.loli.net/2019/03/24/5c96e93168119.jpeg)\n\n## \n\n`01`````````\n\n`01```\n\n`01`\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)\n\n","slug":"leetcode/dp-01-knapsack-problem-optimization","published":1,"updated":"2019-06-04T01:29:57.465Z","_id":"cjxze3got001g0cvwfuw9w55m","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/23/5c9637b6e2922.png\" alt=\"20190323214213.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190323214213.png</div>\n            </figure>\n<p><code>Mysql</code><code>Mysql</code>95</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/23/5c963a200ae18.png\" alt=\"20190323215229.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190323215229.png</div>\n            </figure>\n<p>40~60</p>\n<p></p>\n<p></p>\n<p><code>01</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c9244d3c9.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87b64eb1a66.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p> <code>KS(i,j)</code><code>KS(i-1,m) {m:1...j}</code> <code>K(i-1,1...j)</code><code>KS(i,j)</code></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/23/5c964f94ca2a4.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>i=3j=5</code><code>KS(3,5) = max{KS(2,5)</code>,<code>KS(2,0) + 3} = max{6,3} = 6</code>;<code>i=2</code><code>i=3</code></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KS(j) = max&#123;KS(j),KS(j - wi) + vi&#125;</span><br></pre></td></tr></table></figure>\n<p><code>KS(j - wi)</code><code>KS(i-1, j - wi)</code><code>KS(j)</code><code>KS(m){m:1..j}</code></p>\n<p><code>i=2</code><code>i=3</code><code>{0,0,2,4,4,6,6,6,6,6,6}</code><code>i=2</code><code>i=3</code><code>KS(0) = 0KS(1) = KS(1) = 0</code> (j=15)<code>KS(2) = 2,KS(3) = 4,KS(4) = 4, KS(5) = max{KS(5), KS(5-5) + 3} = 6,....,KS(8) = max{KS(8),KS(8 - 5) + 3} = 7</code>KS(8)KS(8)KS(8)= =</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] vs = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ws = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] newResults = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">11</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ksp(<span class=\"number\">4</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ksp</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> c)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">0</span>; m &lt; vs.length; m++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> w = ws[m];</span><br><span class=\"line\">            <span class=\"keyword\">int</span> v = vs[m];</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> n = c; n &gt;= w; n--)&#123;</span><br><span class=\"line\">                newResults[n] = Math.max(newResults[n] , newResults[n - w] + v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            System.out.println(JSON.toJSONString(newResults));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newResults[newResults.length - <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[0,0,0,0,0,0,0,0,0,0,0]</span><br><span class=\"line\">[0,0,2,2,2,2,2,2,2,2,2]</span><br><span class=\"line\">[0,0,2,4,4,6,6,6,6,6,6]</span><br><span class=\"line\">[0,0,2,4,4,6,6,6,7,7,9]</span><br><span class=\"line\">[0,0,2,4,4,7,7,9,11,11,13]</span><br><span class=\"line\">13</span><br></pre></td></tr></table></figure>\n<p><code>O(n*c)</code><code>O(c)</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>01</code><code></code><code>KS(0)</code><code>0</code><code>KS(j)</code><code></code><code>KS(c)</code><code></code><code></code><code>KS(0...c)</code><code>0</code></p>\n<p><code></code>00<code></code><code></code>00</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/24/5c96e93168119.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>01</code><code></code><code></code><code></code><code></code></p>\n<p><code>01</code><code></code></p>\n<p><code>01</code></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/23/5c9637b6e2922.png\" alt=\"20190323214213.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190323214213.png</div>\n            </figure>\n<p><code>Mysql</code><code>Mysql</code>95</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/23/5c963a200ae18.png\" alt=\"20190323215229.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190323215229.png</div>\n            </figure>\n<p>40~60</p>\n<p></p>\n<p></p>\n<p><code>01</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87c9244d3c9.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/12/5c87b64eb1a66.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p> <code>KS(i,j)</code><code>KS(i-1,m) {m:1...j}</code> <code>K(i-1,1...j)</code><code>KS(i,j)</code></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/23/5c964f94ca2a4.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>i=3j=5</code><code>KS(3,5) = max{KS(2,5)</code>,<code>KS(2,0) + 3} = max{6,3} = 6</code>;<code>i=2</code><code>i=3</code></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">KS(j) = max&#123;KS(j),KS(j - wi) + vi&#125;</span><br></pre></td></tr></table></figure>\n<p><code>KS(j - wi)</code><code>KS(i-1, j - wi)</code><code>KS(j)</code><code>KS(m){m:1..j}</code></p>\n<p><code>i=2</code><code>i=3</code><code>{0,0,2,4,4,6,6,6,6,6,6}</code><code>i=2</code><code>i=3</code><code>KS(0) = 0KS(1) = KS(1) = 0</code> (j=15)<code>KS(2) = 2,KS(3) = 4,KS(4) = 4, KS(5) = max{KS(5), KS(5-5) + 3} = 6,....,KS(8) = max{KS(8),KS(8 - 5) + 3} = 7</code>KS(8)KS(8)KS(8)= =</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] vs = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">3</span>,<span class=\"number\">7</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ws = &#123;<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] newResults = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">11</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = ksp(<span class=\"number\">4</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"title\">ksp</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> c)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> m = <span class=\"number\">0</span>; m &lt; vs.length; m++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> w = ws[m];</span><br><span class=\"line\">            <span class=\"keyword\">int</span> v = vs[m];</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> n = c; n &gt;= w; n--)&#123;</span><br><span class=\"line\">                newResults[n] = Math.max(newResults[n] , newResults[n - w] + v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            System.out.println(JSON.toJSONString(newResults));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newResults[newResults.length - <span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[0,0,0,0,0,0,0,0,0,0,0]</span><br><span class=\"line\">[0,0,2,2,2,2,2,2,2,2,2]</span><br><span class=\"line\">[0,0,2,4,4,6,6,6,6,6,6]</span><br><span class=\"line\">[0,0,2,4,4,6,6,6,7,7,9]</span><br><span class=\"line\">[0,0,2,4,4,7,7,9,11,11,13]</span><br><span class=\"line\">13</span><br></pre></td></tr></table></figure>\n<p><code>O(n*c)</code><code>O(c)</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>01</code><code></code><code>KS(0)</code><code>0</code><code>KS(j)</code><code></code><code>KS(c)</code><code></code><code></code><code>KS(0...c)</code><code>0</code></p>\n<p><code></code>00<code></code><code></code>00</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/24/5c96e93168119.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>01</code><code></code><code></code><code></code><code></code></p>\n<p><code>01</code><code></code></p>\n<p><code>01</code></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n"},{"title":"","date":"2018-12-26T11:55:51.000Z","_content":"\n## \n\n``\n\nXX\n\n\n\n## \n\n1. [](./The-Power-of-Habit.html)\n2. \n\n## \n\n1. [Java](./Java-Multithread-Programming-Guide-In-Action.html)\n2. Java\n3. [Java](./the-art-of-java-multithread-notes.html)\n","source":"_posts/reading/reading-notes.md","raw":"---\ntitle: \ncategories: \ndate: 2018-12-26 19:55:51\n---\n\n## \n\n``\n\nXX\n\n\n\n## \n\n1. [](./The-Power-of-Habit.html)\n2. \n\n## \n\n1. [Java](./Java-Multithread-Programming-Guide-In-Action.html)\n2. Java\n3. [Java](./the-art-of-java-multithread-notes.html)\n","slug":"reading/reading-notes","published":1,"updated":"2019-06-04T01:29:57.498Z","_id":"cjxze3goy001j0cvwm6jvsgrz","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<p>XX</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\"./The-Power-of-Habit.html\"></a></li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\"./Java-Multithread-Programming-Guide-In-Action.html\">Java</a></li>\n<li>Java</li>\n<li><a href=\"./the-art-of-java-multithread-notes.html\">Java</a></li>\n</ol>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<p>XX</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\"./The-Power-of-Habit.html\"></a></li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\"./Java-Multithread-Programming-Guide-In-Action.html\">Java</a></li>\n<li>Java</li>\n<li><a href=\"./the-art-of-java-multithread-notes.html\">Java</a></li>\n</ol>\n"},{"title":"","date":"2018-12-26T12:39:32.000Z","_content":"\n## \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhabiticatapp","source":"_posts/reading/the-power-of-habit.md","raw":"---\ntitle: \ntags: \ncategories: \ndate: 2018-12-26 20:39:32\n---\n\n## \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhabiticatapp","slug":"reading/the-power-of-habit","published":1,"updated":"2019-06-04T01:29:57.588Z","_id":"cjxze3gp1001m0cvwfjpg2c8v","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p>habiticatapp</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p>habiticatapp</p>\n"},{"title":"- ","date":"2018-12-26T11:16:09.000Z","_content":"## \n\n- \n- \n- \n- \n  - \n  - \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- 15105\n- \n- \n- \n  - \n  - \n  - \n  - \n- \n  - \n  - \n  - \n  - \n  - \n","source":"_posts/reading/the-power-of-habit-digest.md","raw":"---\ntitle: - \ntags: \ncategories: \ndate: 2018-12-26 19:16:09\n---\n## \n\n- \n- \n- \n- \n  - \n  - \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- \n- 15105\n- \n- \n- \n  - \n  - \n  - \n  - \n- \n  - \n  - \n  - \n  - \n  - \n","slug":"reading/the-power-of-habit-digest","published":1,"updated":"2019-06-04T01:29:57.588Z","_id":"cjxze3gp3001o0cvwij3yvuhz","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>15105</li>\n<li></li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>15105</li>\n<li></li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n"},{"title":"centos7  vuepress","date":"2018-12-28T16:01:00.000Z","_content":"\n## \n\n> vuepressmdhtml VuePress  HTMLSEOCentOS7vuepress\n\nhttps://vuepress.vuejs.org/zh/  \n\nhttps://vuepress.vuejs.org/zh/guide/Vuepress\n\nhttps://github.com/vuejs/vuepress\n\n## nodejs\n\n``` bash\ncurl -sL https://rpm.nodesource.com/setup_8.x | sudo bash -\nyum install nodejs\n```\n\n## vuepress\n\n``` bash\nnpm install -g vuepress\n```\n\n## \n\n``` bash\nmkdir project\ncd project\nmkdir docs\n```\n\n## \n\n``` bash\nnpm init -y\nvim package.json\n```\n\n\n\n```javascript\n{\n    \"scripts\": {\n    \t\"docs:dev\": \"vuepress dev docs\",\n    \t\"docs:build\": \"vuepress build docs\"\n    }\n}\n```\n\n.vuepress\n\n``` bash\nmkdir .vuepress\ncd .vuepress\n```\n\nconfig.jsvuepress\n\n``` bash\nmkdir public\nvim config.js\n```\n\n\n\n``` bash\nmodule.exports = {\n\ttitle: 'wiki',\n\tdescription: '',\n\t// git https://mfrank2016.github.io/wikibook/ '/wikibook/'\n\tbase: '/wikibook/',\n\thost: '0.0.0.0',\n\t// \n\tport: 8081,\n\n\tthemeConfig: {\n\t\t//gitc \n    \trepo: 'https://github.com/MFrank2016/wikibook',\n    \t// \n   \t\tdocsDir: 'docs',\n    \t//  master\n    \tdocsBranch: 'master',\n    \t//  true false \n    \teditLinks: true,\n    \t//\n    \tnav: [\n      \t\t{ text: 'Home', link: '/' },\n      \t\t{ text: 'Guide', link: '/guide/' },\n      \t\t{ text: 'External', link: 'https://google.com' },\n      \t\t{ text: 'Languages',\n      \t\titems: [\n      \t\t{ text: 'Chinese', link: '/language/chinese' },\n      \t\t{ text: 'Japanese', link: '/language/japanese' }\n      \t\t]}],\n      \tsidebar: [{\n        \ttitle: 'Group 1',\n        \tcollapsable: false,\n        \tchildren: [\n          \t\t'/'\n        \t\t]\n      \t\t},\n      \t\t{\n        \ttitle: 'Group 2',\n        \tchildren: [\n            \t'/'\n        \t\t]\n      \t\t}\n    \t]\n  \t},  \n    //\n    search: true,\n    searchMaxSuggestions: 10,\n    lastUpdated: 'Last Updated', // string | boolean\n}\n```\n\n\n\n``` bash\nproject\n docs\n  README.md\n  .vuepress\n    config.js\n    public\n      hero.png\n  guide\n    README.md \n package.json\n```\n\n## \n\ndocsREADME.md\n\n```bash\n---\nhome: true\nheroImage: /hero.png\nactionText: \nactionLink: /guide/\nfooter: MIT Licensed | Copyright  2018-present Frank\n---\n```\n\nproject\n\n```bash\n#  http://localhost:8081 () \nvuepress dev\n\n# mdhtmldocs/.vuepress/dist\nvuepress build\n```\n\n## \n\n**docs/.vuepress/dist**ftpdocsnginxapache\n","source":"_posts/ops/deploy-vuepress-on-centos7.md","raw":"---\ntitle: centos7  vuepress\ntags: \n - \ncategories: \ndate: 2018-12-29 00:01:00\n---\n\n## \n\n> vuepressmdhtml VuePress  HTMLSEOCentOS7vuepress\n\nhttps://vuepress.vuejs.org/zh/  \n\nhttps://vuepress.vuejs.org/zh/guide/Vuepress\n\nhttps://github.com/vuejs/vuepress\n\n## nodejs\n\n``` bash\ncurl -sL https://rpm.nodesource.com/setup_8.x | sudo bash -\nyum install nodejs\n```\n\n## vuepress\n\n``` bash\nnpm install -g vuepress\n```\n\n## \n\n``` bash\nmkdir project\ncd project\nmkdir docs\n```\n\n## \n\n``` bash\nnpm init -y\nvim package.json\n```\n\n\n\n```javascript\n{\n    \"scripts\": {\n    \t\"docs:dev\": \"vuepress dev docs\",\n    \t\"docs:build\": \"vuepress build docs\"\n    }\n}\n```\n\n.vuepress\n\n``` bash\nmkdir .vuepress\ncd .vuepress\n```\n\nconfig.jsvuepress\n\n``` bash\nmkdir public\nvim config.js\n```\n\n\n\n``` bash\nmodule.exports = {\n\ttitle: 'wiki',\n\tdescription: '',\n\t// git https://mfrank2016.github.io/wikibook/ '/wikibook/'\n\tbase: '/wikibook/',\n\thost: '0.0.0.0',\n\t// \n\tport: 8081,\n\n\tthemeConfig: {\n\t\t//gitc \n    \trepo: 'https://github.com/MFrank2016/wikibook',\n    \t// \n   \t\tdocsDir: 'docs',\n    \t//  master\n    \tdocsBranch: 'master',\n    \t//  true false \n    \teditLinks: true,\n    \t//\n    \tnav: [\n      \t\t{ text: 'Home', link: '/' },\n      \t\t{ text: 'Guide', link: '/guide/' },\n      \t\t{ text: 'External', link: 'https://google.com' },\n      \t\t{ text: 'Languages',\n      \t\titems: [\n      \t\t{ text: 'Chinese', link: '/language/chinese' },\n      \t\t{ text: 'Japanese', link: '/language/japanese' }\n      \t\t]}],\n      \tsidebar: [{\n        \ttitle: 'Group 1',\n        \tcollapsable: false,\n        \tchildren: [\n          \t\t'/'\n        \t\t]\n      \t\t},\n      \t\t{\n        \ttitle: 'Group 2',\n        \tchildren: [\n            \t'/'\n        \t\t]\n      \t\t}\n    \t]\n  \t},  \n    //\n    search: true,\n    searchMaxSuggestions: 10,\n    lastUpdated: 'Last Updated', // string | boolean\n}\n```\n\n\n\n``` bash\nproject\n docs\n  README.md\n  .vuepress\n    config.js\n    public\n      hero.png\n  guide\n    README.md \n package.json\n```\n\n## \n\ndocsREADME.md\n\n```bash\n---\nhome: true\nheroImage: /hero.png\nactionText: \nactionLink: /guide/\nfooter: MIT Licensed | Copyright  2018-present Frank\n---\n```\n\nproject\n\n```bash\n#  http://localhost:8081 () \nvuepress dev\n\n# mdhtmldocs/.vuepress/dist\nvuepress build\n```\n\n## \n\n**docs/.vuepress/dist**ftpdocsnginxapache\n","slug":"ops/deploy-vuepress-on-centos7","published":1,"updated":"2019-06-04T01:29:57.497Z","_id":"cjxze3gp7001s0cvwuas8bs7g","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote>\n<p>vuepressmdhtml VuePress  HTMLSEOCentOS7vuepress</p>\n</blockquote>\n<p><a href=\"https://vuepress.vuejs.org/zh/\" target=\"_blank\" rel=\"noopener\">https://vuepress.vuejs.org/zh/</a>  </p>\n<p><a href=\"https://vuepress.vuejs.org/zh/guide/Vuepress\" target=\"_blank\" rel=\"noopener\">https://vuepress.vuejs.org/zh/guide/Vuepress</a></p>\n<p><a href=\"https://github.com/vuejs/vuepress\" target=\"_blank\" rel=\"noopener\">https://github.com/vuejs/vuepress</a></p>\n<h2 id=\"nodejs\"><a href=\"#nodejs\" class=\"headerlink\" title=\"nodejs\"></a>nodejs</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sL https://rpm.nodesource.com/setup_8.x | sudo bash -</span><br><span class=\"line\">yum install nodejs</span><br></pre></td></tr></table></figure>\n<h2 id=\"vuepress\"><a href=\"#vuepress\" class=\"headerlink\" title=\"vuepress\"></a>vuepress</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g vuepress</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir project</span><br><span class=\"line\"><span class=\"built_in\">cd</span> project</span><br><span class=\"line\">mkdir docs</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init -y</span><br><span class=\"line\">vim package.json</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    \t<span class=\"string\">\"docs:dev\"</span>: <span class=\"string\">\"vuepress dev docs\"</span>,</span><br><span class=\"line\">    \t<span class=\"string\">\"docs:build\"</span>: <span class=\"string\">\"vuepress build docs\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>.vuepress</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir .vuepress</span><br><span class=\"line\"><span class=\"built_in\">cd</span> .vuepress</span><br></pre></td></tr></table></figure>\n<p>config.jsvuepress</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir public</span><br><span class=\"line\">vim config.js</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">\ttitle: <span class=\"string\">'wiki'</span>,</span><br><span class=\"line\">\tdescription: <span class=\"string\">''</span>,</span><br><span class=\"line\">\t// git https://mfrank2016.github.io/wikibook/ <span class=\"string\">'/wikibook/'</span></span><br><span class=\"line\">\tbase: <span class=\"string\">'/wikibook/'</span>,</span><br><span class=\"line\">\thost: <span class=\"string\">'0.0.0.0'</span>,</span><br><span class=\"line\">\t// </span><br><span class=\"line\">\tport: 8081,</span><br><span class=\"line\"></span><br><span class=\"line\">\tthemeConfig: &#123;</span><br><span class=\"line\">\t\t//gitc </span><br><span class=\"line\">    \trepo: <span class=\"string\">'https://github.com/MFrank2016/wikibook'</span>,</span><br><span class=\"line\">    \t// </span><br><span class=\"line\">   \t\tdocsDir: <span class=\"string\">'docs'</span>,</span><br><span class=\"line\">    \t//  master</span><br><span class=\"line\">    \tdocsBranch: <span class=\"string\">'master'</span>,</span><br><span class=\"line\">    \t//  <span class=\"literal\">true</span> <span class=\"literal\">false</span> </span><br><span class=\"line\">    \teditLinks: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    \t//</span><br><span class=\"line\">    \tnav: [</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Home'</span>, link: <span class=\"string\">'/'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Guide'</span>, link: <span class=\"string\">'/guide/'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'External'</span>, link: <span class=\"string\">'https://google.com'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Languages'</span>,</span><br><span class=\"line\">      \t\titems: [</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Chinese'</span>, link: <span class=\"string\">'/language/chinese'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Japanese'</span>, link: <span class=\"string\">'/language/japanese'</span> &#125;</span><br><span class=\"line\">      \t\t]&#125;],</span><br><span class=\"line\">      \tsidebar: [&#123;</span><br><span class=\"line\">        \ttitle: <span class=\"string\">'Group 1'</span>,</span><br><span class=\"line\">        \tcollapsable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        \tchildren: [</span><br><span class=\"line\">          \t\t<span class=\"string\">'/'</span></span><br><span class=\"line\">        \t\t]</span><br><span class=\"line\">      \t\t&#125;,</span><br><span class=\"line\">      \t\t&#123;</span><br><span class=\"line\">        \ttitle: <span class=\"string\">'Group 2'</span>,</span><br><span class=\"line\">        \tchildren: [</span><br><span class=\"line\">            \t<span class=\"string\">'/'</span></span><br><span class=\"line\">        \t\t]</span><br><span class=\"line\">      \t\t&#125;</span><br><span class=\"line\">    \t]</span><br><span class=\"line\">  \t&#125;,  </span><br><span class=\"line\">    //</span><br><span class=\"line\">    search: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    searchMaxSuggestions: 10,</span><br><span class=\"line\">    lastUpdated: <span class=\"string\">'Last Updated'</span>, // string | boolean</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">project</span><br><span class=\"line\"> docs</span><br><span class=\"line\">  README.md</span><br><span class=\"line\">  .vuepress</span><br><span class=\"line\">    config.js</span><br><span class=\"line\">    public</span><br><span class=\"line\">      hero.png</span><br><span class=\"line\">  guide</span><br><span class=\"line\">    README.md </span><br><span class=\"line\"> package.json</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>docsREADME.md</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">home: <span class=\"literal\">true</span></span><br><span class=\"line\">heroImage: /hero.png</span><br><span class=\"line\">actionText: </span><br><span class=\"line\">actionLink: /guide/</span><br><span class=\"line\">footer: MIT Licensed | Copyright  2018-present Frank</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n<p>project</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  http://localhost:8081 () </span></span><br><span class=\"line\">vuepress dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># mdhtmldocs/.vuepress/dist</span></span><br><span class=\"line\">vuepress build</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>docs/.vuepress/dist</strong>ftpdocsnginxapache</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote>\n<p>vuepressmdhtml VuePress  HTMLSEOCentOS7vuepress</p>\n</blockquote>\n<p><a href=\"https://vuepress.vuejs.org/zh/\" target=\"_blank\" rel=\"noopener\">https://vuepress.vuejs.org/zh/</a>  </p>\n<p><a href=\"https://vuepress.vuejs.org/zh/guide/Vuepress\" target=\"_blank\" rel=\"noopener\">https://vuepress.vuejs.org/zh/guide/Vuepress</a></p>\n<p><a href=\"https://github.com/vuejs/vuepress\" target=\"_blank\" rel=\"noopener\">https://github.com/vuejs/vuepress</a></p>\n<h2 id=\"nodejs\"><a href=\"#nodejs\" class=\"headerlink\" title=\"nodejs\"></a>nodejs</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sL https://rpm.nodesource.com/setup_8.x | sudo bash -</span><br><span class=\"line\">yum install nodejs</span><br></pre></td></tr></table></figure>\n<h2 id=\"vuepress\"><a href=\"#vuepress\" class=\"headerlink\" title=\"vuepress\"></a>vuepress</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g vuepress</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir project</span><br><span class=\"line\"><span class=\"built_in\">cd</span> project</span><br><span class=\"line\">mkdir docs</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init -y</span><br><span class=\"line\">vim package.json</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    \t<span class=\"string\">\"docs:dev\"</span>: <span class=\"string\">\"vuepress dev docs\"</span>,</span><br><span class=\"line\">    \t<span class=\"string\">\"docs:build\"</span>: <span class=\"string\">\"vuepress build docs\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>.vuepress</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir .vuepress</span><br><span class=\"line\"><span class=\"built_in\">cd</span> .vuepress</span><br></pre></td></tr></table></figure>\n<p>config.jsvuepress</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir public</span><br><span class=\"line\">vim config.js</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">module.exports = &#123;</span><br><span class=\"line\">\ttitle: <span class=\"string\">'wiki'</span>,</span><br><span class=\"line\">\tdescription: <span class=\"string\">''</span>,</span><br><span class=\"line\">\t// git https://mfrank2016.github.io/wikibook/ <span class=\"string\">'/wikibook/'</span></span><br><span class=\"line\">\tbase: <span class=\"string\">'/wikibook/'</span>,</span><br><span class=\"line\">\thost: <span class=\"string\">'0.0.0.0'</span>,</span><br><span class=\"line\">\t// </span><br><span class=\"line\">\tport: 8081,</span><br><span class=\"line\"></span><br><span class=\"line\">\tthemeConfig: &#123;</span><br><span class=\"line\">\t\t//gitc </span><br><span class=\"line\">    \trepo: <span class=\"string\">'https://github.com/MFrank2016/wikibook'</span>,</span><br><span class=\"line\">    \t// </span><br><span class=\"line\">   \t\tdocsDir: <span class=\"string\">'docs'</span>,</span><br><span class=\"line\">    \t//  master</span><br><span class=\"line\">    \tdocsBranch: <span class=\"string\">'master'</span>,</span><br><span class=\"line\">    \t//  <span class=\"literal\">true</span> <span class=\"literal\">false</span> </span><br><span class=\"line\">    \teditLinks: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    \t//</span><br><span class=\"line\">    \tnav: [</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Home'</span>, link: <span class=\"string\">'/'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Guide'</span>, link: <span class=\"string\">'/guide/'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'External'</span>, link: <span class=\"string\">'https://google.com'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Languages'</span>,</span><br><span class=\"line\">      \t\titems: [</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Chinese'</span>, link: <span class=\"string\">'/language/chinese'</span> &#125;,</span><br><span class=\"line\">      \t\t&#123; text: <span class=\"string\">'Japanese'</span>, link: <span class=\"string\">'/language/japanese'</span> &#125;</span><br><span class=\"line\">      \t\t]&#125;],</span><br><span class=\"line\">      \tsidebar: [&#123;</span><br><span class=\"line\">        \ttitle: <span class=\"string\">'Group 1'</span>,</span><br><span class=\"line\">        \tcollapsable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        \tchildren: [</span><br><span class=\"line\">          \t\t<span class=\"string\">'/'</span></span><br><span class=\"line\">        \t\t]</span><br><span class=\"line\">      \t\t&#125;,</span><br><span class=\"line\">      \t\t&#123;</span><br><span class=\"line\">        \ttitle: <span class=\"string\">'Group 2'</span>,</span><br><span class=\"line\">        \tchildren: [</span><br><span class=\"line\">            \t<span class=\"string\">'/'</span></span><br><span class=\"line\">        \t\t]</span><br><span class=\"line\">      \t\t&#125;</span><br><span class=\"line\">    \t]</span><br><span class=\"line\">  \t&#125;,  </span><br><span class=\"line\">    //</span><br><span class=\"line\">    search: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    searchMaxSuggestions: 10,</span><br><span class=\"line\">    lastUpdated: <span class=\"string\">'Last Updated'</span>, // string | boolean</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">project</span><br><span class=\"line\"> docs</span><br><span class=\"line\">  README.md</span><br><span class=\"line\">  .vuepress</span><br><span class=\"line\">    config.js</span><br><span class=\"line\">    public</span><br><span class=\"line\">      hero.png</span><br><span class=\"line\">  guide</span><br><span class=\"line\">    README.md </span><br><span class=\"line\"> package.json</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>docsREADME.md</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">home: <span class=\"literal\">true</span></span><br><span class=\"line\">heroImage: /hero.png</span><br><span class=\"line\">actionText: </span><br><span class=\"line\">actionLink: /guide/</span><br><span class=\"line\">footer: MIT Licensed | Copyright  2018-present Frank</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n<p>project</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  http://localhost:8081 () </span></span><br><span class=\"line\">vuepress dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># mdhtmldocs/.vuepress/dist</span></span><br><span class=\"line\">vuepress build</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><strong>docs/.vuepress/dist</strong>ftpdocsnginxapache</p>\n"},{"title":"Java","date":"2019-01-03T00:06:15.000Z","_content":">   \n\n##  \n\n1.1 \n\n1. \n\n```bash\nCPU\n```\n\n2. \n\n```bash\n\n```\n\n3. `Lmbench3`\n4. `vmstat`\n5. \n   1. \n   2. CAS\n   3. \n   4. \n\n1.2 \n\n\n\n1. \n2. \n3. `lock.tryLock(timeout)`\n4. \n\n1.3 \n\n1. \n2. \n3. \n   \n##  Java\n\n2.1 volatile\n\n1. volatile`Lock`\n   1. \n   2. CPU\n\n```bash\nJava\n```\n\n2.2 synchronized\n\n1. `JVM``Monitor``monitorenter``monitorexit`JVM\n2. `synchronized`Java323214\n\n|      |                    |                              |\n| -------- | ---------------------- | -------------------------------- |\n| 32/64bit | Mark Word              | hashCode     |\n| 32/64bit | Class Metadata Address |          |\n| 32/64bit | Array length           |  |\n\n3. Java `Mark Word``HashCode`\n4. 4\n5. \n6. idCAS`Mark Word``Mark Word`1CASCAS\n7. \n8. `Mark Word`\n   \n![](https://ask.qcloudimg.com/http-save/yehe-1174983/cm2p35nftf.png?imageView2/2/w/1620)\n\n![](https://ask.qcloudimg.com/http-save/yehe-1174983/qeqp98u8so.png?imageView2/2/w/1620)\n\n9. \bJava6Java7JVM`-XX:-UseBiasedLocking=false`\n10. JVM`Mark Word``Displaced Mark Word`CAS`Mark Word`\n11. CAS`Displaced Mark Word`\b\n\n![](https://ask.qcloudimg.com/http-save/yehe-1174983/hr3330qo7g.png?imageView2/2/w/1620)\n![](https://ask.qcloudimg.com/http-save/yehe-1174983/acgacyts24.png?imageView2/2/w/1620)\n![](https://ask.qcloudimg.com/http-save/yehe-1174983/ro5yr0z6y9.png?imageView2/2/w/1620)\n\n|||||\n|---|---|---|---|\n|||||\n||\b|CPU||\n||CPU|||\n\n2.3 \n\n1. \n2. \n3. JavaCAS\n4. CAS\n   1. ABAABACAS1.`AtomicStampedReference`ABA\n   2. \n   3. `AtomicReference`CAS\n5. \n   1. JVMCASCASCAS\n\n##  Java\n","source":"_posts/reading/the-art-of-java-multithread-notes.md","raw":"---\ntitle: Java\ntags: \n - Java\n - \ncategories: \ndate: 2019-01-03 08:06:15\n---\n>   \n\n##  \n\n1.1 \n\n1. \n\n```bash\nCPU\n```\n\n2. \n\n```bash\n\n```\n\n3. `Lmbench3`\n4. `vmstat`\n5. \n   1. \n   2. CAS\n   3. \n   4. \n\n1.2 \n\n\n\n1. \n2. \n3. `lock.tryLock(timeout)`\n4. \n\n1.3 \n\n1. \n2. \n3. \n   \n##  Java\n\n2.1 volatile\n\n1. volatile`Lock`\n   1. \n   2. CPU\n\n```bash\nJava\n```\n\n2.2 synchronized\n\n1. `JVM``Monitor``monitorenter``monitorexit`JVM\n2. `synchronized`Java323214\n\n|      |                    |                              |\n| -------- | ---------------------- | -------------------------------- |\n| 32/64bit | Mark Word              | hashCode     |\n| 32/64bit | Class Metadata Address |          |\n| 32/64bit | Array length           |  |\n\n3. Java `Mark Word``HashCode`\n4. 4\n5. \n6. idCAS`Mark Word``Mark Word`1CASCAS\n7. \n8. `Mark Word`\n   \n![](https://ask.qcloudimg.com/http-save/yehe-1174983/cm2p35nftf.png?imageView2/2/w/1620)\n\n![](https://ask.qcloudimg.com/http-save/yehe-1174983/qeqp98u8so.png?imageView2/2/w/1620)\n\n9. \bJava6Java7JVM`-XX:-UseBiasedLocking=false`\n10. JVM`Mark Word``Displaced Mark Word`CAS`Mark Word`\n11. CAS`Displaced Mark Word`\b\n\n![](https://ask.qcloudimg.com/http-save/yehe-1174983/hr3330qo7g.png?imageView2/2/w/1620)\n![](https://ask.qcloudimg.com/http-save/yehe-1174983/acgacyts24.png?imageView2/2/w/1620)\n![](https://ask.qcloudimg.com/http-save/yehe-1174983/ro5yr0z6y9.png?imageView2/2/w/1620)\n\n|||||\n|---|---|---|---|\n|||||\n||\b|CPU||\n||CPU|||\n\n2.3 \n\n1. \n2. \n3. JavaCAS\n4. CAS\n   1. ABAABACAS1.`AtomicStampedReference`ABA\n   2. \n   3. `AtomicReference`CAS\n5. \n   1. JVMCASCASCAS\n\n##  Java\n","slug":"reading/the-art-of-java-multithread-notes","published":1,"updated":"2019-06-04T01:29:57.499Z","_id":"cjxze3gp9001u0cvwva2wpd1b","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>1.1 </p>\n<ol>\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CPU</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li><code>Lmbench3</code></li>\n<li><code>vmstat</code></li>\n<li><ol>\n<li></li>\n<li>CAS</li>\n<li></li>\n<li></li>\n</ol>\n</li>\n</ol>\n<p>1.2 </p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li><code>lock.tryLock(timeout)</code></li>\n<li></li>\n</ol>\n<p>1.3 </p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2><p>2.1 volatile</p>\n<ol>\n<li>volatile<code>Lock</code><ol>\n<li></li>\n<li>CPU</li>\n</ol>\n</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Java</span><br></pre></td></tr></table></figure>\n<p>2.2 synchronized</p>\n<ol>\n<li><code>JVM</code><code>Monitor</code><code>monitorenter</code><code>monitorexit</code>JVM</li>\n<li><code>synchronized</code>Java323214</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>32/64bit</td>\n<td>Mark Word</td>\n<td>hashCode</td>\n</tr>\n<tr>\n<td>32/64bit</td>\n<td>Class Metadata Address</td>\n<td></td>\n</tr>\n<tr>\n<td>32/64bit</td>\n<td>Array length</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<ol start=\"3\">\n<li>Java <code>Mark Word</code><code>HashCode</code></li>\n<li>4</li>\n<li></li>\n<li>idCAS<code>Mark Word</code><code>Mark Word</code>1CASCAS</li>\n<li></li>\n<li><code>Mark Word</code></li>\n</ol>\n<p><img src=\"https://ask.qcloudimg.com/http-save/yehe-1174983/cm2p35nftf.png?imageView2/2/w/1620\" alt=\"\"></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://ask.qcloudimg.com/http-save/yehe-1174983/qeqp98u8so.png?imageView2/2/w/1620\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<ol start=\"9\">\n<li>\bJava6Java7JVM<code>-XX:-UseBiasedLocking=false</code></li>\n<li>JVM<code>Mark Word</code><code>Displaced Mark Word</code>CAS<code>Mark Word</code></li>\n<li>CAS<code>Displaced Mark Word</code>\b</li>\n</ol>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://ask.qcloudimg.com/http-save/yehe-1174983/hr3330qo7g.png?imageView2/2/w/1620\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://ask.qcloudimg.com/http-save/yehe-1174983/acgacyts24.png?imageView2/2/w/1620\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://ask.qcloudimg.com/http-save/yehe-1174983/ro5yr0z6y9.png?imageView2/2/w/1620\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>\b</td>\n<td>CPU</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>CPU</td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>2.3 </p>\n<ol>\n<li></li>\n<li></li>\n<li>JavaCAS</li>\n<li>CAS<ol>\n<li>ABAABACAS1.<code>AtomicStampedReference</code>ABA</li>\n<li></li>\n<li><code>AtomicReference</code>CAS</li>\n</ol>\n</li>\n<li><ol>\n<li>JVMCASCASCAS</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><p>1.1 </p>\n<ol>\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CPU</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li></li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li><code>Lmbench3</code></li>\n<li><code>vmstat</code></li>\n<li><ol>\n<li></li>\n<li>CAS</li>\n<li></li>\n<li></li>\n</ol>\n</li>\n</ol>\n<p>1.2 </p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li><code>lock.tryLock(timeout)</code></li>\n<li></li>\n</ol>\n<p>1.3 </p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2><p>2.1 volatile</p>\n<ol>\n<li>volatile<code>Lock</code><ol>\n<li></li>\n<li>CPU</li>\n</ol>\n</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Java</span><br></pre></td></tr></table></figure>\n<p>2.2 synchronized</p>\n<ol>\n<li><code>JVM</code><code>Monitor</code><code>monitorenter</code><code>monitorexit</code>JVM</li>\n<li><code>synchronized</code>Java323214</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>32/64bit</td>\n<td>Mark Word</td>\n<td>hashCode</td>\n</tr>\n<tr>\n<td>32/64bit</td>\n<td>Class Metadata Address</td>\n<td></td>\n</tr>\n<tr>\n<td>32/64bit</td>\n<td>Array length</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<ol start=\"3\">\n<li>Java <code>Mark Word</code><code>HashCode</code></li>\n<li>4</li>\n<li></li>\n<li>idCAS<code>Mark Word</code><code>Mark Word</code>1CASCAS</li>\n<li></li>\n<li><code>Mark Word</code></li>\n</ol>\n<p><img src=\"https://ask.qcloudimg.com/http-save/yehe-1174983/cm2p35nftf.png?imageView2/2/w/1620\" alt=\"\"></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://ask.qcloudimg.com/http-save/yehe-1174983/qeqp98u8so.png?imageView2/2/w/1620\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<ol start=\"9\">\n<li>\bJava6Java7JVM<code>-XX:-UseBiasedLocking=false</code></li>\n<li>JVM<code>Mark Word</code><code>Displaced Mark Word</code>CAS<code>Mark Word</code></li>\n<li>CAS<code>Displaced Mark Word</code>\b</li>\n</ol>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://ask.qcloudimg.com/http-save/yehe-1174983/hr3330qo7g.png?imageView2/2/w/1620\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://ask.qcloudimg.com/http-save/yehe-1174983/acgacyts24.png?imageView2/2/w/1620\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://ask.qcloudimg.com/http-save/yehe-1174983/ro5yr0z6y9.png?imageView2/2/w/1620\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>\b</td>\n<td>CPU</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>CPU</td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>2.3 </p>\n<ol>\n<li></li>\n<li></li>\n<li>JavaCAS</li>\n<li>CAS<ol>\n<li>ABAABACAS1.<code>AtomicStampedReference</code>ABA</li>\n<li></li>\n<li><code>AtomicReference</code>CAS</li>\n</ol>\n</li>\n<li><ol>\n<li>JVMCASCASCAS</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2>"},{"title":"LeetCode","date":"2019-03-03T07:40:30.000Z","_content":"\n## \n\n (s)  (p) '.'  '*' \n\n'.' \n'*' \n (s) \n\n:\n\ns  a-z \np  a-z  .  *\n 1:\n\n```bash\n:\ns = \"aa\"\np = \"a\"\n: false\n: \"a\"  \"aa\" \n```\n\n 2:\n```bash\n:\ns = \"aa\"\np = \"a*\"\n: true\n: '*' ,  'a' ,  'a' ,  \"aa\"\n```\n\n 3:\n```bash\n:\ns = \"ab\"\np = \".*\"\n: true\n: \".*\" ('*')('.')\n```\n\n 4:\n```bash\n:\ns = \"aab\"\np = \"c*a*b\"\n: true\n: 'c' , 'a'  \"aab\"\n```\n\n 5:\n```bash\n:\ns = \"mississippi\"\np = \"mis*is*p*.\"\n: false\n```\n\n\n\n## \n\n\n\n`.``*` `^[A-Z]:\\\\{1,2}[^/:\\*\\?<>\\|]+\\.(jpg|gif|png|bmp)$` emmmm``\n\n\n\n\n\nspsp\n\n\n\n{% asset_img example1.png example1 %}\n\n{% asset_img example2.png example2 %}\n\n{% asset_img example3.png example3 %}\n\n{% asset_img example4.png example4 %}\n\n\n\npc\n\n1. c == '.'\n2. c == '*'\n3. c \n\n`c == '.'``s``c`\n\n`c == *``a*``a``aaaa``aaaaa``*`\n\n`*`00\n\nps`*`sfalse`*`0pss\n\n`*`\n\n{% asset_img solution1-1.png solution1 %}\n\n{% asset_img solution1-2.png solution1 %}\n\n{% asset_img solution1-3.png solution1 %}\n\n{% asset_img solution1-4.png solution1 %}\n\n\n\n## \n\n\n\n```java\nboolean isMatch (String s, String p){\n    pc1sd1\n    pc2\n    if (c2 == '*'){\n        c1c2s\n        return isMatch(s,p.subString(2)) || (( c1 == '.' || c1 == d1) && isMatch(s.subString(1),p)));\n    } else if(c1 == '.'){\n        \n        return isMatch(s.subString(1),p.subString(1);\n    } else {\n        \n        return c1 == d1 && isMatch(s.subString(1), p.subString(1));\n    }\n}\n```\n\nemmm23333\n\n```java\npublic boolean isMatch(String s, String p){\n    if (p.length() <= 0) return s.length() <= 0;\n    boolean match = (s.length() > 0 && (s.charAt(0) == p.charAt(0) || p.charAt(0) == '.'));\n    if (p.length() > 1 && p.charAt(1) == '*'){\n        return isMatch(s, p.substring(2)) || (match && isMatch(s.substring(1), p));\n    } else {\n        return match && isMatch(s.substring(1), p.substring(1));\n    }\n}\n```\n\n\n\n{% asset_img result1.png result1 %}\n\nemmm28%\n\n\n\n## \n\n### \n\nemmm\n\n`fib(6)``fib(6) = fib(5) + fib(4)``fib(5)``fib(4)``fib(5) = fib(4) + fib(3)``fib(4) = fib(3) + fib(2) ``fib(3) = fib(2) + fib(1) ``fib(1) = 1`  `fib(2) = 1``fib(6)`\n\n{% asset_img fib6.png fib %}\n\nfib(4)2fib(3)3fib(6)fib(66)\n\nfib(6)`fib(3) = fib(2) + fib(1) ``fib(4) = fib(3) + fib(2) ``fib(5) = fib(4) + fib(3)``fib(6) = fib(5) + fib(4)`\n\n\n\n\n\n`fib(n)`\n\n\n\n`fib(1) = 1``fib(2) = 1`\n\n`fib(n) = f(n - 1) + f(n -2)  (n > 2)`\n\n### \n\n\n\n`s[i:]`sip[j:]pj `match(i,j)` `s[i:]``p[j:]`truefalse\n\n`match(i,j)``p[j + 1]`'*'\n\ncurMatch = i < s.length() && s[i] == p[j] || p[j] == '.';\n1. p[j + 1] != '*'match(i,j) = curMatch && match(i + 1, j + 1)\n2. p[j + 1] == '*'match(i,j) = match(i, j + 2) || curMatch && match(i + 1, j)\n\n\n\n`s = \"aab\"; p = \"c*a*b\"`ijmatch(0,0)`f``false``t``true`\n\n{% asset_img solution2-1.png solution2 %}\n\n\n\n```java\n1. match(0,0): i = 0; j = 0; curMatch = false;\n2. p[1] == * -> match(0,0) = match(0,2) || false && match(1,0)\n3. match(0,2)match(1,0)\n4. match(0,2): i = 0; j = 2; curMatch = true;\n5. p[1] == * -> match(0,2) = match(0,4) || true && match(1,2)\n6. match(0,4): i = 0; j = 4; curMatch = false;\n7. j + 1 == 5 >= p.length() -> match(0,4) = curMatch = false;\n8. match(0,4) = false;\n9. match(1,2): i = 1; j = 2; curMatch = true;\n10. p[3] == * -> match(1,2) = match(1,4) || true && match(2,2)\n11. match(1,4): i = 1; j = 4; curMatch = false;\n12. j + 1 == 5 >= p.length() -> match(1,4) = curMatch = false;\n13. match(1,4) = false;\n14. 10match(2,2): i = 2; j = 2; curMatch = false;\n15. p[3] == * -> match(2,2) = match(2,4) || false && match(3,2)\n16. match(2,4): i = 2; j = 4; curMatch = true;\n17.  j + 1 == 5 >= p.length() -> match(2,4) = curMatch = true;\n18. match(2,4) = true;\n19. 15\n20. match(2,2) = true;\n21. 10\n22. match(1,2) = true;\n23. 5\n24. match(0,2) = true;\n25. 2\n26. match(0,0) = true;\n27. \n```\n\n{% asset_img solution2-2.png solution2 %}\n\n\n\n\n\n```java\nenum Result {\n    TRUE, FALSE\n}\n\nclass Solution {\n    // \n    Result[][] memo;\n\n    public boolean isMatch(String text, String pattern) {\n        memo = new Result[text.length() + 1][pattern.length() + 1];\n        return match(0, 0, text, pattern);\n    }\n\n    public boolean match(int i, int j, String text, String pattern) {\n        if (memo[i][j] != null) {\n            return memo[i][j] == Result.TRUE;\n        }\n        boolean ans;\n        if (j == pattern.length()){\n            ans = i == text.length();\n        } else{\n            boolean curMatch = (i < text.length() &&\n                                   (pattern.charAt(j) == text.charAt(i) ||\n                                    pattern.charAt(j) == '.'));\n\n            if (j + 1 < pattern.length() && pattern.charAt(j+1) == '*'){\n                ans = (match(i, j+2, text, pattern) ||\n                       curMatch && match(i+1, j, text, pattern));\n            } else {\n                ans = curMatch && match(i+1, j+1, text, pattern);\n            }\n        }\n        memo[i][j] = ans ? Result.TRUE : Result.FALSE;\n        return ans;\n    }\n}\n```\n\n\n\n{% asset_img result2.png result2 %}\n\n99.95%\n\n\n\ni = 3, j = 5 match(3,5) == true\n\n```java\n1. match(3,5) = true;\n2. match(3,4): i = 3; j = 4; curMatch = false;\n3. j + 1 == 5 >= p.length() -> match(3,4) = curMatch = false;\n4. match(3,4) = false;\n5. match(3,3): i = 3; j = 3; curMatch = false;\n6. p[4] == b -> match(3,3) = curMatch = false;\n7. match(3,3) = false;\n8. match(3,2): i = 3; j = 2; curMatch = false;\n9. p[3] == * -> match(3,2) = match(3,4) || false && match(4,2)\n10. match(3,2) = false;\n11. match(3,1): i = 3; j = 1; curMatch = false;\n12. p[2] == a -> match(3,1) = curMatch = false;\n13. match(3,1) = false;\n14. match(3,0): i = 3; j = 0; curMatch = false;\n15. p[1] == * -> match(3,0) = match(3,2) || false && match(4,0)\n16. match(3,0) = false;\n17. ....\n```\n\n\n\n```java \nclass Solution {\n    public boolean isMatch(String text, String pattern) {\n        boolean[][] memo = new boolean[text.length() + 1][pattern.length() + 1];\n        memo[text.length()][pattern.length()] = true;\n\n        for (int i = text.length(); i >= 0; i--){\n            for (int j = pattern.length() - 1; j >= 0; j--){\n                boolean curMatch = (i < text.length() &&\n                                       (pattern.charAt(j) == text.charAt(i) ||\n                                        pattern.charAt(j) == '.'));\n                if (j + 1 < pattern.length() && pattern.charAt(j+1) == '*'){\n                    memo[i][j] = memo[i][j+2] || curMatch && memo[i+1][j];\n                } else {\n                    memo[i][j] = curMatch && memo[i+1][j+1];\n                }\n            }\n        }\n        return memo[0][0];\n    }\n}\n```\n\n\n\n{% asset_img result3.png result3 %}\n\n\n\n## \n\n\n\n\n\n\n\n\n\n\n\n\n\n1. \n2. \n3. \n","source":"_posts/leetcode/day4-regular-expression-matching.md","raw":"---\ntitle: LeetCode\ndate: 2019-03-03 15:40:30\ntags: \n - Java\n - \n - LeetCode\n - \ncategories: \n---\n\n## \n\n (s)  (p) '.'  '*' \n\n'.' \n'*' \n (s) \n\n:\n\ns  a-z \np  a-z  .  *\n 1:\n\n```bash\n:\ns = \"aa\"\np = \"a\"\n: false\n: \"a\"  \"aa\" \n```\n\n 2:\n```bash\n:\ns = \"aa\"\np = \"a*\"\n: true\n: '*' ,  'a' ,  'a' ,  \"aa\"\n```\n\n 3:\n```bash\n:\ns = \"ab\"\np = \".*\"\n: true\n: \".*\" ('*')('.')\n```\n\n 4:\n```bash\n:\ns = \"aab\"\np = \"c*a*b\"\n: true\n: 'c' , 'a'  \"aab\"\n```\n\n 5:\n```bash\n:\ns = \"mississippi\"\np = \"mis*is*p*.\"\n: false\n```\n\n\n\n## \n\n\n\n`.``*` `^[A-Z]:\\\\{1,2}[^/:\\*\\?<>\\|]+\\.(jpg|gif|png|bmp)$` emmmm``\n\n\n\n\n\nspsp\n\n\n\n{% asset_img example1.png example1 %}\n\n{% asset_img example2.png example2 %}\n\n{% asset_img example3.png example3 %}\n\n{% asset_img example4.png example4 %}\n\n\n\npc\n\n1. c == '.'\n2. c == '*'\n3. c \n\n`c == '.'``s``c`\n\n`c == *``a*``a``aaaa``aaaaa``*`\n\n`*`00\n\nps`*`sfalse`*`0pss\n\n`*`\n\n{% asset_img solution1-1.png solution1 %}\n\n{% asset_img solution1-2.png solution1 %}\n\n{% asset_img solution1-3.png solution1 %}\n\n{% asset_img solution1-4.png solution1 %}\n\n\n\n## \n\n\n\n```java\nboolean isMatch (String s, String p){\n    pc1sd1\n    pc2\n    if (c2 == '*'){\n        c1c2s\n        return isMatch(s,p.subString(2)) || (( c1 == '.' || c1 == d1) && isMatch(s.subString(1),p)));\n    } else if(c1 == '.'){\n        \n        return isMatch(s.subString(1),p.subString(1);\n    } else {\n        \n        return c1 == d1 && isMatch(s.subString(1), p.subString(1));\n    }\n}\n```\n\nemmm23333\n\n```java\npublic boolean isMatch(String s, String p){\n    if (p.length() <= 0) return s.length() <= 0;\n    boolean match = (s.length() > 0 && (s.charAt(0) == p.charAt(0) || p.charAt(0) == '.'));\n    if (p.length() > 1 && p.charAt(1) == '*'){\n        return isMatch(s, p.substring(2)) || (match && isMatch(s.substring(1), p));\n    } else {\n        return match && isMatch(s.substring(1), p.substring(1));\n    }\n}\n```\n\n\n\n{% asset_img result1.png result1 %}\n\nemmm28%\n\n\n\n## \n\n### \n\nemmm\n\n`fib(6)``fib(6) = fib(5) + fib(4)``fib(5)``fib(4)``fib(5) = fib(4) + fib(3)``fib(4) = fib(3) + fib(2) ``fib(3) = fib(2) + fib(1) ``fib(1) = 1`  `fib(2) = 1``fib(6)`\n\n{% asset_img fib6.png fib %}\n\nfib(4)2fib(3)3fib(6)fib(66)\n\nfib(6)`fib(3) = fib(2) + fib(1) ``fib(4) = fib(3) + fib(2) ``fib(5) = fib(4) + fib(3)``fib(6) = fib(5) + fib(4)`\n\n\n\n\n\n`fib(n)`\n\n\n\n`fib(1) = 1``fib(2) = 1`\n\n`fib(n) = f(n - 1) + f(n -2)  (n > 2)`\n\n### \n\n\n\n`s[i:]`sip[j:]pj `match(i,j)` `s[i:]``p[j:]`truefalse\n\n`match(i,j)``p[j + 1]`'*'\n\ncurMatch = i < s.length() && s[i] == p[j] || p[j] == '.';\n1. p[j + 1] != '*'match(i,j) = curMatch && match(i + 1, j + 1)\n2. p[j + 1] == '*'match(i,j) = match(i, j + 2) || curMatch && match(i + 1, j)\n\n\n\n`s = \"aab\"; p = \"c*a*b\"`ijmatch(0,0)`f``false``t``true`\n\n{% asset_img solution2-1.png solution2 %}\n\n\n\n```java\n1. match(0,0): i = 0; j = 0; curMatch = false;\n2. p[1] == * -> match(0,0) = match(0,2) || false && match(1,0)\n3. match(0,2)match(1,0)\n4. match(0,2): i = 0; j = 2; curMatch = true;\n5. p[1] == * -> match(0,2) = match(0,4) || true && match(1,2)\n6. match(0,4): i = 0; j = 4; curMatch = false;\n7. j + 1 == 5 >= p.length() -> match(0,4) = curMatch = false;\n8. match(0,4) = false;\n9. match(1,2): i = 1; j = 2; curMatch = true;\n10. p[3] == * -> match(1,2) = match(1,4) || true && match(2,2)\n11. match(1,4): i = 1; j = 4; curMatch = false;\n12. j + 1 == 5 >= p.length() -> match(1,4) = curMatch = false;\n13. match(1,4) = false;\n14. 10match(2,2): i = 2; j = 2; curMatch = false;\n15. p[3] == * -> match(2,2) = match(2,4) || false && match(3,2)\n16. match(2,4): i = 2; j = 4; curMatch = true;\n17.  j + 1 == 5 >= p.length() -> match(2,4) = curMatch = true;\n18. match(2,4) = true;\n19. 15\n20. match(2,2) = true;\n21. 10\n22. match(1,2) = true;\n23. 5\n24. match(0,2) = true;\n25. 2\n26. match(0,0) = true;\n27. \n```\n\n{% asset_img solution2-2.png solution2 %}\n\n\n\n\n\n```java\nenum Result {\n    TRUE, FALSE\n}\n\nclass Solution {\n    // \n    Result[][] memo;\n\n    public boolean isMatch(String text, String pattern) {\n        memo = new Result[text.length() + 1][pattern.length() + 1];\n        return match(0, 0, text, pattern);\n    }\n\n    public boolean match(int i, int j, String text, String pattern) {\n        if (memo[i][j] != null) {\n            return memo[i][j] == Result.TRUE;\n        }\n        boolean ans;\n        if (j == pattern.length()){\n            ans = i == text.length();\n        } else{\n            boolean curMatch = (i < text.length() &&\n                                   (pattern.charAt(j) == text.charAt(i) ||\n                                    pattern.charAt(j) == '.'));\n\n            if (j + 1 < pattern.length() && pattern.charAt(j+1) == '*'){\n                ans = (match(i, j+2, text, pattern) ||\n                       curMatch && match(i+1, j, text, pattern));\n            } else {\n                ans = curMatch && match(i+1, j+1, text, pattern);\n            }\n        }\n        memo[i][j] = ans ? Result.TRUE : Result.FALSE;\n        return ans;\n    }\n}\n```\n\n\n\n{% asset_img result2.png result2 %}\n\n99.95%\n\n\n\ni = 3, j = 5 match(3,5) == true\n\n```java\n1. match(3,5) = true;\n2. match(3,4): i = 3; j = 4; curMatch = false;\n3. j + 1 == 5 >= p.length() -> match(3,4) = curMatch = false;\n4. match(3,4) = false;\n5. match(3,3): i = 3; j = 3; curMatch = false;\n6. p[4] == b -> match(3,3) = curMatch = false;\n7. match(3,3) = false;\n8. match(3,2): i = 3; j = 2; curMatch = false;\n9. p[3] == * -> match(3,2) = match(3,4) || false && match(4,2)\n10. match(3,2) = false;\n11. match(3,1): i = 3; j = 1; curMatch = false;\n12. p[2] == a -> match(3,1) = curMatch = false;\n13. match(3,1) = false;\n14. match(3,0): i = 3; j = 0; curMatch = false;\n15. p[1] == * -> match(3,0) = match(3,2) || false && match(4,0)\n16. match(3,0) = false;\n17. ....\n```\n\n\n\n```java \nclass Solution {\n    public boolean isMatch(String text, String pattern) {\n        boolean[][] memo = new boolean[text.length() + 1][pattern.length() + 1];\n        memo[text.length()][pattern.length()] = true;\n\n        for (int i = text.length(); i >= 0; i--){\n            for (int j = pattern.length() - 1; j >= 0; j--){\n                boolean curMatch = (i < text.length() &&\n                                       (pattern.charAt(j) == text.charAt(i) ||\n                                        pattern.charAt(j) == '.'));\n                if (j + 1 < pattern.length() && pattern.charAt(j+1) == '*'){\n                    memo[i][j] = memo[i][j+2] || curMatch && memo[i+1][j];\n                } else {\n                    memo[i][j] = curMatch && memo[i+1][j+1];\n                }\n            }\n        }\n        return memo[0][0];\n    }\n}\n```\n\n\n\n{% asset_img result3.png result3 %}\n\n\n\n## \n\n\n\n\n\n\n\n\n\n\n\n\n\n1. \n2. \n3. \n","slug":"leetcode/day4-regular-expression-matching","published":1,"updated":"2019-06-04T01:29:57.438Z","_id":"cjxze3gpc001y0cvw806qtrv7","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> (s)  (p) .  * </p>\n<p>. <br>* <br> (s) </p>\n<p>:</p>\n<p>s  a-z <br>p  a-z  .  *<br> 1:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:</span><br><span class=\"line\">s = <span class=\"string\">\"aa\"</span></span><br><span class=\"line\">p = <span class=\"string\">\"a\"</span></span><br><span class=\"line\">: <span class=\"literal\">false</span></span><br><span class=\"line\">: <span class=\"string\">\"a\"</span>  <span class=\"string\">\"aa\"</span> </span><br></pre></td></tr></table></figure>\n<p> 2:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:</span><br><span class=\"line\">s = <span class=\"string\">\"aa\"</span></span><br><span class=\"line\">p = <span class=\"string\">\"a*\"</span></span><br><span class=\"line\">: <span class=\"literal\">true</span></span><br><span class=\"line\">: <span class=\"string\">'*'</span> ,  <span class=\"string\">'a'</span> ,  <span class=\"string\">'a'</span> ,  <span class=\"string\">\"aa\"</span></span><br></pre></td></tr></table></figure></p>\n<p> 3:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:</span><br><span class=\"line\">s = <span class=\"string\">\"ab\"</span></span><br><span class=\"line\">p = <span class=\"string\">\".*\"</span></span><br><span class=\"line\">: <span class=\"literal\">true</span></span><br><span class=\"line\">: <span class=\"string\">\".*\"</span> (<span class=\"string\">'*'</span>)(<span class=\"string\">'.'</span>)</span><br></pre></td></tr></table></figure></p>\n<p> 4:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:</span><br><span class=\"line\">s = <span class=\"string\">\"aab\"</span></span><br><span class=\"line\">p = <span class=\"string\">\"c*a*b\"</span></span><br><span class=\"line\">: <span class=\"literal\">true</span></span><br><span class=\"line\">: <span class=\"string\">'c'</span> , <span class=\"string\">'a'</span>  <span class=\"string\">\"aab\"</span></span><br></pre></td></tr></table></figure></p>\n<p> 5:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:</span><br><span class=\"line\">s = <span class=\"string\">\"mississippi\"</span></span><br><span class=\"line\">p = <span class=\"string\">\"mis*is*p*.\"</span></span><br><span class=\"line\">: <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p><code>.</code><code>*</code> <code>^[A-Z]:\\\\{1,2}[^/:\\*\\?&lt;&gt;\\|]+\\.(jpg|gif|png|bmp)$</code> emmmm<code></code></p>\n<p></p>\n<p></p>\n<p>spsp</p>\n<p></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/example1.png\" title=\"example1\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/example2.png\" title=\"example2\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/example3.png\" title=\"example3\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/example4.png\" title=\"example4\">\n<p></p>\n<p>pc</p>\n<ol>\n<li>c == .</li>\n<li>c == *</li>\n<li>c </li>\n</ol>\n<p><code>c == &#39;.&#39;</code><code>s</code><code>c</code></p>\n<p><code>c == *</code><code>a*</code><code>a</code><code>aaaa</code><code>aaaaa</code><code>*</code></p>\n<p><code>*</code>00</p>\n<p>ps<code>*</code>sfalse<code>*</code>0pss</p>\n<p><code>*</code></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution1-1.png\" title=\"solution1\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution1-2.png\" title=\"solution1\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution1-3.png\" title=\"solution1\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution1-4.png\" title=\"solution1\">\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">isMatch</span> <span class=\"params\">(String s, String p)</span></span>&#123;</span><br><span class=\"line\">    pc1sd1</span><br><span class=\"line\">    pc2</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (c2 == <span class=\"string\">'*'</span>)&#123;</span><br><span class=\"line\">        c1c2s</span><br><span class=\"line\">        <span class=\"keyword\">return</span> isMatch(s,p.subString(<span class=\"number\">2</span>)) || (( c1 == <span class=\"string\">'.'</span> || c1 == d1) &amp;&amp; isMatch(s.subString(<span class=\"number\">1</span>),p)));</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(c1 == <span class=\"string\">'.'</span>)&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> isMatch(s.subString(<span class=\"number\">1</span>),p.subString(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> c1 == d1 &amp;&amp; isMatch(s.subString(<span class=\"number\">1</span>), p.subString(<span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emmm23333</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isMatch</span><span class=\"params\">(String s, String p)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p.length() &lt;= <span class=\"number\">0</span>) <span class=\"keyword\">return</span> s.length() &lt;= <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> match = (s.length() &gt; <span class=\"number\">0</span> &amp;&amp; (s.charAt(<span class=\"number\">0</span>) == p.charAt(<span class=\"number\">0</span>) || p.charAt(<span class=\"number\">0</span>) == <span class=\"string\">'.'</span>));</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p.length() &gt; <span class=\"number\">1</span> &amp;&amp; p.charAt(<span class=\"number\">1</span>) == <span class=\"string\">'*'</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> isMatch(s, p.substring(<span class=\"number\">2</span>)) || (match &amp;&amp; isMatch(s.substring(<span class=\"number\">1</span>), p));</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> match &amp;&amp; isMatch(s.substring(<span class=\"number\">1</span>), p.substring(<span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/result1.png\" title=\"result1\">\n<p>emmm28%</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>emmm</p>\n<p><code>fib(6)</code><code>fib(6) = fib(5) + fib(4)</code><code>fib(5)</code><code>fib(4)</code><code>fib(5) = fib(4) + fib(3)</code><code>fib(4) = fib(3) + fib(2)</code><code>fib(3) = fib(2) + fib(1)</code><code>fib(1) = 1</code>  <code>fib(2) = 1</code><code>fib(6)</code></p>\n\n<p>fib(4)2fib(3)3fib(6)fib(66)</p>\n<p>fib(6)<code>fib(3) = fib(2) + fib(1)</code><code>fib(4) = fib(3) + fib(2)</code><code>fib(5) = fib(4) + fib(3)</code><code>fib(6) = fib(5) + fib(4)</code></p>\n<p></p>\n<p></p>\n<p><code>fib(n)</code></p>\n<p></p>\n<p><code>fib(1) = 1</code><code>fib(2) = 1</code></p>\n<p><code>fib(n) = f(n - 1) + f(n -2)  (n &gt; 2)</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><code>s[i:]</code>sip[j:]pj <code>match(i,j)</code> <code>s[i:]</code><code>p[j:]</code>truefalse</p>\n<p><code>match(i,j)</code><code>p[j + 1]</code>*</p>\n<p>curMatch = i &lt; s.length() &amp;&amp; s[i] == p[j] || p[j] == .;</p>\n<ol>\n<li>p[j + 1] != *match(i,j) = curMatch &amp;&amp; match(i + 1, j + 1)</li>\n<li>p[j + 1] == *match(i,j) = match(i, j + 2) || curMatch &amp;&amp; match(i + 1, j)</li>\n</ol>\n<p></p>\n<p><code>s = &quot;aab&quot;; p = &quot;c*a*b&quot;</code>ijmatch(0,0)<code>f</code><code>false</code><code>t</code><code>true</code></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution2-1.png\" title=\"solution2\">\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>. match(<span class=\"number\">0</span>,<span class=\"number\">0</span>): i = <span class=\"number\">0</span>; j = <span class=\"number\">0</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">2</span>. p[<span class=\"number\">1</span>] == * -&gt; match(<span class=\"number\">0</span>,<span class=\"number\">0</span>) = match(<span class=\"number\">0</span>,<span class=\"number\">2</span>) || <span class=\"keyword\">false</span> &amp;&amp; match(<span class=\"number\">1</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"number\">3</span>. match(<span class=\"number\">0</span>,<span class=\"number\">2</span>)match(<span class=\"number\">1</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"number\">4</span>. match(<span class=\"number\">0</span>,<span class=\"number\">2</span>): i = <span class=\"number\">0</span>; j = <span class=\"number\">2</span>; curMatch = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">5</span>. p[<span class=\"number\">1</span>] == * -&gt; match(<span class=\"number\">0</span>,<span class=\"number\">2</span>) = match(<span class=\"number\">0</span>,<span class=\"number\">4</span>) || <span class=\"keyword\">true</span> &amp;&amp; match(<span class=\"number\">1</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"number\">6</span>. match(<span class=\"number\">0</span>,<span class=\"number\">4</span>): i = <span class=\"number\">0</span>; j = <span class=\"number\">4</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">7</span>. j + <span class=\"number\">1</span> == <span class=\"number\">5</span> &gt;= p.length() -&gt; match(<span class=\"number\">0</span>,<span class=\"number\">4</span>) = curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">8</span>. match(<span class=\"number\">0</span>,<span class=\"number\">4</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">9</span>. match(<span class=\"number\">1</span>,<span class=\"number\">2</span>): i = <span class=\"number\">1</span>; j = <span class=\"number\">2</span>; curMatch = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>. p[<span class=\"number\">3</span>] == * -&gt; match(<span class=\"number\">1</span>,<span class=\"number\">2</span>) = match(<span class=\"number\">1</span>,<span class=\"number\">4</span>) || <span class=\"keyword\">true</span> &amp;&amp; match(<span class=\"number\">2</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"number\">11</span>. match(<span class=\"number\">1</span>,<span class=\"number\">4</span>): i = <span class=\"number\">1</span>; j = <span class=\"number\">4</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">12</span>. j + <span class=\"number\">1</span> == <span class=\"number\">5</span> &gt;= p.length() -&gt; match(<span class=\"number\">1</span>,<span class=\"number\">4</span>) = curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">13</span>. match(<span class=\"number\">1</span>,<span class=\"number\">4</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">14</span>. <span class=\"number\">10</span>match(<span class=\"number\">2</span>,<span class=\"number\">2</span>): i = <span class=\"number\">2</span>; j = <span class=\"number\">2</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">15</span>. p[<span class=\"number\">3</span>] == * -&gt; match(<span class=\"number\">2</span>,<span class=\"number\">2</span>) = match(<span class=\"number\">2</span>,<span class=\"number\">4</span>) || <span class=\"keyword\">false</span> &amp;&amp; match(<span class=\"number\">3</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"number\">16</span>. match(<span class=\"number\">2</span>,<span class=\"number\">4</span>): i = <span class=\"number\">2</span>; j = <span class=\"number\">4</span>; curMatch = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">17</span>.  j + <span class=\"number\">1</span> == <span class=\"number\">5</span> &gt;= p.length() -&gt; match(<span class=\"number\">2</span>,<span class=\"number\">4</span>) = curMatch = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">18</span>. match(<span class=\"number\">2</span>,<span class=\"number\">4</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">19</span>. <span class=\"number\">15</span></span><br><span class=\"line\"><span class=\"number\">20</span>. match(<span class=\"number\">2</span>,<span class=\"number\">2</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">21</span>. <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"number\">22</span>. match(<span class=\"number\">1</span>,<span class=\"number\">2</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">23</span>. <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"number\">24</span>. match(<span class=\"number\">0</span>,<span class=\"number\">2</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">25</span>. <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">26</span>. match(<span class=\"number\">0</span>,<span class=\"number\">0</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">27</span>. </span><br></pre></td></tr></table></figure>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution2-2.png\" title=\"solution2\">\n<p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">enum</span> Result &#123;</span><br><span class=\"line\">    TRUE, FALSE</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    Result[][] memo;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isMatch</span><span class=\"params\">(String text, String pattern)</span> </span>&#123;</span><br><span class=\"line\">        memo = <span class=\"keyword\">new</span> Result[text.length() + <span class=\"number\">1</span>][pattern.length() + <span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"keyword\">return</span> match(<span class=\"number\">0</span>, <span class=\"number\">0</span>, text, pattern);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">match</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> j, String text, String pattern)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (memo[i][j] != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> memo[i][j] == Result.TRUE;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> ans;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (j == pattern.length())&#123;</span><br><span class=\"line\">            ans = i == text.length();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">boolean</span> curMatch = (i &lt; text.length() &amp;&amp;</span><br><span class=\"line\">                                   (pattern.charAt(j) == text.charAt(i) ||</span><br><span class=\"line\">                                    pattern.charAt(j) == <span class=\"string\">'.'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (j + <span class=\"number\">1</span> &lt; pattern.length() &amp;&amp; pattern.charAt(j+<span class=\"number\">1</span>) == <span class=\"string\">'*'</span>)&#123;</span><br><span class=\"line\">                ans = (match(i, j+<span class=\"number\">2</span>, text, pattern) ||</span><br><span class=\"line\">                       curMatch &amp;&amp; match(i+<span class=\"number\">1</span>, j, text, pattern));</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                ans = curMatch &amp;&amp; match(i+<span class=\"number\">1</span>, j+<span class=\"number\">1</span>, text, pattern);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        memo[i][j] = ans ? Result.TRUE : Result.FALSE;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/result2.png\" title=\"result2\">\n<p>99.95%</p>\n<p></p>\n<p>i = 3, j = 5 match(3,5) == true</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>. match(<span class=\"number\">3</span>,<span class=\"number\">5</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">2</span>. match(<span class=\"number\">3</span>,<span class=\"number\">4</span>): i = <span class=\"number\">3</span>; j = <span class=\"number\">4</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">3</span>. j + <span class=\"number\">1</span> == <span class=\"number\">5</span> &gt;= p.length() -&gt; match(<span class=\"number\">3</span>,<span class=\"number\">4</span>) = curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">4</span>. match(<span class=\"number\">3</span>,<span class=\"number\">4</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">5</span>. match(<span class=\"number\">3</span>,<span class=\"number\">3</span>): i = <span class=\"number\">3</span>; j = <span class=\"number\">3</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">6</span>. p[<span class=\"number\">4</span>] == b -&gt; match(<span class=\"number\">3</span>,<span class=\"number\">3</span>) = curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">7</span>. match(<span class=\"number\">3</span>,<span class=\"number\">3</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">8</span>. match(<span class=\"number\">3</span>,<span class=\"number\">2</span>): i = <span class=\"number\">3</span>; j = <span class=\"number\">2</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">9</span>. p[<span class=\"number\">3</span>] == * -&gt; match(<span class=\"number\">3</span>,<span class=\"number\">2</span>) = match(<span class=\"number\">3</span>,<span class=\"number\">4</span>) || <span class=\"keyword\">false</span> &amp;&amp; match(<span class=\"number\">4</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"number\">10</span>. match(<span class=\"number\">3</span>,<span class=\"number\">2</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">11</span>. match(<span class=\"number\">3</span>,<span class=\"number\">1</span>): i = <span class=\"number\">3</span>; j = <span class=\"number\">1</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">12</span>. p[<span class=\"number\">2</span>] == a -&gt; match(<span class=\"number\">3</span>,<span class=\"number\">1</span>) = curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">13</span>. match(<span class=\"number\">3</span>,<span class=\"number\">1</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">14</span>. match(<span class=\"number\">3</span>,<span class=\"number\">0</span>): i = <span class=\"number\">3</span>; j = <span class=\"number\">0</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">15</span>. p[<span class=\"number\">1</span>] == * -&gt; match(<span class=\"number\">3</span>,<span class=\"number\">0</span>) = match(<span class=\"number\">3</span>,<span class=\"number\">2</span>) || <span class=\"keyword\">false</span> &amp;&amp; match(<span class=\"number\">4</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"number\">16</span>. match(<span class=\"number\">3</span>,<span class=\"number\">0</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">17</span>. ....</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isMatch</span><span class=\"params\">(String text, String pattern)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">boolean</span>[][] memo = <span class=\"keyword\">new</span> <span class=\"keyword\">boolean</span>[text.length() + <span class=\"number\">1</span>][pattern.length() + <span class=\"number\">1</span>];</span><br><span class=\"line\">        memo[text.length()][pattern.length()] = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = text.length(); i &gt;= <span class=\"number\">0</span>; i--)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = pattern.length() - <span class=\"number\">1</span>; j &gt;= <span class=\"number\">0</span>; j--)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">boolean</span> curMatch = (i &lt; text.length() &amp;&amp;</span><br><span class=\"line\">                                       (pattern.charAt(j) == text.charAt(i) ||</span><br><span class=\"line\">                                        pattern.charAt(j) == <span class=\"string\">'.'</span>));</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (j + <span class=\"number\">1</span> &lt; pattern.length() &amp;&amp; pattern.charAt(j+<span class=\"number\">1</span>) == <span class=\"string\">'*'</span>)&#123;</span><br><span class=\"line\">                    memo[i][j] = memo[i][j+<span class=\"number\">2</span>] || curMatch &amp;&amp; memo[i+<span class=\"number\">1</span>][j];</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    memo[i][j] = curMatch &amp;&amp; memo[i+<span class=\"number\">1</span>][j+<span class=\"number\">1</span>];</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> memo[<span class=\"number\">0</span>][<span class=\"number\">0</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/result3.png\" title=\"result3\">\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> (s)  (p) .  * </p>\n<p>. <br>* <br> (s) </p>\n<p>:</p>\n<p>s  a-z <br>p  a-z  .  *<br> 1:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:</span><br><span class=\"line\">s = <span class=\"string\">\"aa\"</span></span><br><span class=\"line\">p = <span class=\"string\">\"a\"</span></span><br><span class=\"line\">: <span class=\"literal\">false</span></span><br><span class=\"line\">: <span class=\"string\">\"a\"</span>  <span class=\"string\">\"aa\"</span> </span><br></pre></td></tr></table></figure>\n<p> 2:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:</span><br><span class=\"line\">s = <span class=\"string\">\"aa\"</span></span><br><span class=\"line\">p = <span class=\"string\">\"a*\"</span></span><br><span class=\"line\">: <span class=\"literal\">true</span></span><br><span class=\"line\">: <span class=\"string\">'*'</span> ,  <span class=\"string\">'a'</span> ,  <span class=\"string\">'a'</span> ,  <span class=\"string\">\"aa\"</span></span><br></pre></td></tr></table></figure></p>\n<p> 3:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:</span><br><span class=\"line\">s = <span class=\"string\">\"ab\"</span></span><br><span class=\"line\">p = <span class=\"string\">\".*\"</span></span><br><span class=\"line\">: <span class=\"literal\">true</span></span><br><span class=\"line\">: <span class=\"string\">\".*\"</span> (<span class=\"string\">'*'</span>)(<span class=\"string\">'.'</span>)</span><br></pre></td></tr></table></figure></p>\n<p> 4:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:</span><br><span class=\"line\">s = <span class=\"string\">\"aab\"</span></span><br><span class=\"line\">p = <span class=\"string\">\"c*a*b\"</span></span><br><span class=\"line\">: <span class=\"literal\">true</span></span><br><span class=\"line\">: <span class=\"string\">'c'</span> , <span class=\"string\">'a'</span>  <span class=\"string\">\"aab\"</span></span><br></pre></td></tr></table></figure></p>\n<p> 5:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:</span><br><span class=\"line\">s = <span class=\"string\">\"mississippi\"</span></span><br><span class=\"line\">p = <span class=\"string\">\"mis*is*p*.\"</span></span><br><span class=\"line\">: <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p><code>.</code><code>*</code> <code>^[A-Z]:\\\\{1,2}[^/:\\*\\?&lt;&gt;\\|]+\\.(jpg|gif|png|bmp)$</code> emmmm<code></code></p>\n<p></p>\n<p></p>\n<p>spsp</p>\n<p></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/example1.png\" title=\"example1\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/example2.png\" title=\"example2\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/example3.png\" title=\"example3\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/example4.png\" title=\"example4\">\n<p></p>\n<p>pc</p>\n<ol>\n<li>c == .</li>\n<li>c == *</li>\n<li>c </li>\n</ol>\n<p><code>c == &#39;.&#39;</code><code>s</code><code>c</code></p>\n<p><code>c == *</code><code>a*</code><code>a</code><code>aaaa</code><code>aaaaa</code><code>*</code></p>\n<p><code>*</code>00</p>\n<p>ps<code>*</code>sfalse<code>*</code>0pss</p>\n<p><code>*</code></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution1-1.png\" title=\"solution1\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution1-2.png\" title=\"solution1\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution1-3.png\" title=\"solution1\">\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution1-4.png\" title=\"solution1\">\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">isMatch</span> <span class=\"params\">(String s, String p)</span></span>&#123;</span><br><span class=\"line\">    pc1sd1</span><br><span class=\"line\">    pc2</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (c2 == <span class=\"string\">'*'</span>)&#123;</span><br><span class=\"line\">        c1c2s</span><br><span class=\"line\">        <span class=\"keyword\">return</span> isMatch(s,p.subString(<span class=\"number\">2</span>)) || (( c1 == <span class=\"string\">'.'</span> || c1 == d1) &amp;&amp; isMatch(s.subString(<span class=\"number\">1</span>),p)));</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(c1 == <span class=\"string\">'.'</span>)&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> isMatch(s.subString(<span class=\"number\">1</span>),p.subString(<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> c1 == d1 &amp;&amp; isMatch(s.subString(<span class=\"number\">1</span>), p.subString(<span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emmm23333</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isMatch</span><span class=\"params\">(String s, String p)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p.length() &lt;= <span class=\"number\">0</span>) <span class=\"keyword\">return</span> s.length() &lt;= <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> match = (s.length() &gt; <span class=\"number\">0</span> &amp;&amp; (s.charAt(<span class=\"number\">0</span>) == p.charAt(<span class=\"number\">0</span>) || p.charAt(<span class=\"number\">0</span>) == <span class=\"string\">'.'</span>));</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (p.length() &gt; <span class=\"number\">1</span> &amp;&amp; p.charAt(<span class=\"number\">1</span>) == <span class=\"string\">'*'</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> isMatch(s, p.substring(<span class=\"number\">2</span>)) || (match &amp;&amp; isMatch(s.substring(<span class=\"number\">1</span>), p));</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> match &amp;&amp; isMatch(s.substring(<span class=\"number\">1</span>), p.substring(<span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/result1.png\" title=\"result1\">\n<p>emmm28%</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>emmm</p>\n<p><code>fib(6)</code><code>fib(6) = fib(5) + fib(4)</code><code>fib(5)</code><code>fib(4)</code><code>fib(5) = fib(4) + fib(3)</code><code>fib(4) = fib(3) + fib(2)</code><code>fib(3) = fib(2) + fib(1)</code><code>fib(1) = 1</code>  <code>fib(2) = 1</code><code>fib(6)</code></p>\n\n<p>fib(4)2fib(3)3fib(6)fib(66)</p>\n<p>fib(6)<code>fib(3) = fib(2) + fib(1)</code><code>fib(4) = fib(3) + fib(2)</code><code>fib(5) = fib(4) + fib(3)</code><code>fib(6) = fib(5) + fib(4)</code></p>\n<p></p>\n<p></p>\n<p><code>fib(n)</code></p>\n<p></p>\n<p><code>fib(1) = 1</code><code>fib(2) = 1</code></p>\n<p><code>fib(n) = f(n - 1) + f(n -2)  (n &gt; 2)</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><code>s[i:]</code>sip[j:]pj <code>match(i,j)</code> <code>s[i:]</code><code>p[j:]</code>truefalse</p>\n<p><code>match(i,j)</code><code>p[j + 1]</code>*</p>\n<p>curMatch = i &lt; s.length() &amp;&amp; s[i] == p[j] || p[j] == .;</p>\n<ol>\n<li>p[j + 1] != *match(i,j) = curMatch &amp;&amp; match(i + 1, j + 1)</li>\n<li>p[j + 1] == *match(i,j) = match(i, j + 2) || curMatch &amp;&amp; match(i + 1, j)</li>\n</ol>\n<p></p>\n<p><code>s = &quot;aab&quot;; p = &quot;c*a*b&quot;</code>ijmatch(0,0)<code>f</code><code>false</code><code>t</code><code>true</code></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution2-1.png\" title=\"solution2\">\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>. match(<span class=\"number\">0</span>,<span class=\"number\">0</span>): i = <span class=\"number\">0</span>; j = <span class=\"number\">0</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">2</span>. p[<span class=\"number\">1</span>] == * -&gt; match(<span class=\"number\">0</span>,<span class=\"number\">0</span>) = match(<span class=\"number\">0</span>,<span class=\"number\">2</span>) || <span class=\"keyword\">false</span> &amp;&amp; match(<span class=\"number\">1</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"number\">3</span>. match(<span class=\"number\">0</span>,<span class=\"number\">2</span>)match(<span class=\"number\">1</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"number\">4</span>. match(<span class=\"number\">0</span>,<span class=\"number\">2</span>): i = <span class=\"number\">0</span>; j = <span class=\"number\">2</span>; curMatch = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">5</span>. p[<span class=\"number\">1</span>] == * -&gt; match(<span class=\"number\">0</span>,<span class=\"number\">2</span>) = match(<span class=\"number\">0</span>,<span class=\"number\">4</span>) || <span class=\"keyword\">true</span> &amp;&amp; match(<span class=\"number\">1</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"number\">6</span>. match(<span class=\"number\">0</span>,<span class=\"number\">4</span>): i = <span class=\"number\">0</span>; j = <span class=\"number\">4</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">7</span>. j + <span class=\"number\">1</span> == <span class=\"number\">5</span> &gt;= p.length() -&gt; match(<span class=\"number\">0</span>,<span class=\"number\">4</span>) = curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">8</span>. match(<span class=\"number\">0</span>,<span class=\"number\">4</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">9</span>. match(<span class=\"number\">1</span>,<span class=\"number\">2</span>): i = <span class=\"number\">1</span>; j = <span class=\"number\">2</span>; curMatch = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>. p[<span class=\"number\">3</span>] == * -&gt; match(<span class=\"number\">1</span>,<span class=\"number\">2</span>) = match(<span class=\"number\">1</span>,<span class=\"number\">4</span>) || <span class=\"keyword\">true</span> &amp;&amp; match(<span class=\"number\">2</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"number\">11</span>. match(<span class=\"number\">1</span>,<span class=\"number\">4</span>): i = <span class=\"number\">1</span>; j = <span class=\"number\">4</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">12</span>. j + <span class=\"number\">1</span> == <span class=\"number\">5</span> &gt;= p.length() -&gt; match(<span class=\"number\">1</span>,<span class=\"number\">4</span>) = curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">13</span>. match(<span class=\"number\">1</span>,<span class=\"number\">4</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">14</span>. <span class=\"number\">10</span>match(<span class=\"number\">2</span>,<span class=\"number\">2</span>): i = <span class=\"number\">2</span>; j = <span class=\"number\">2</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">15</span>. p[<span class=\"number\">3</span>] == * -&gt; match(<span class=\"number\">2</span>,<span class=\"number\">2</span>) = match(<span class=\"number\">2</span>,<span class=\"number\">4</span>) || <span class=\"keyword\">false</span> &amp;&amp; match(<span class=\"number\">3</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"number\">16</span>. match(<span class=\"number\">2</span>,<span class=\"number\">4</span>): i = <span class=\"number\">2</span>; j = <span class=\"number\">4</span>; curMatch = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">17</span>.  j + <span class=\"number\">1</span> == <span class=\"number\">5</span> &gt;= p.length() -&gt; match(<span class=\"number\">2</span>,<span class=\"number\">4</span>) = curMatch = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">18</span>. match(<span class=\"number\">2</span>,<span class=\"number\">4</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">19</span>. <span class=\"number\">15</span></span><br><span class=\"line\"><span class=\"number\">20</span>. match(<span class=\"number\">2</span>,<span class=\"number\">2</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">21</span>. <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"number\">22</span>. match(<span class=\"number\">1</span>,<span class=\"number\">2</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">23</span>. <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"number\">24</span>. match(<span class=\"number\">0</span>,<span class=\"number\">2</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">25</span>. <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">26</span>. match(<span class=\"number\">0</span>,<span class=\"number\">0</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">27</span>. </span><br></pre></td></tr></table></figure>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/solution2-2.png\" title=\"solution2\">\n<p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">enum</span> Result &#123;</span><br><span class=\"line\">    TRUE, FALSE</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    Result[][] memo;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isMatch</span><span class=\"params\">(String text, String pattern)</span> </span>&#123;</span><br><span class=\"line\">        memo = <span class=\"keyword\">new</span> Result[text.length() + <span class=\"number\">1</span>][pattern.length() + <span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"keyword\">return</span> match(<span class=\"number\">0</span>, <span class=\"number\">0</span>, text, pattern);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">match</span><span class=\"params\">(<span class=\"keyword\">int</span> i, <span class=\"keyword\">int</span> j, String text, String pattern)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (memo[i][j] != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> memo[i][j] == Result.TRUE;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> ans;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (j == pattern.length())&#123;</span><br><span class=\"line\">            ans = i == text.length();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">boolean</span> curMatch = (i &lt; text.length() &amp;&amp;</span><br><span class=\"line\">                                   (pattern.charAt(j) == text.charAt(i) ||</span><br><span class=\"line\">                                    pattern.charAt(j) == <span class=\"string\">'.'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (j + <span class=\"number\">1</span> &lt; pattern.length() &amp;&amp; pattern.charAt(j+<span class=\"number\">1</span>) == <span class=\"string\">'*'</span>)&#123;</span><br><span class=\"line\">                ans = (match(i, j+<span class=\"number\">2</span>, text, pattern) ||</span><br><span class=\"line\">                       curMatch &amp;&amp; match(i+<span class=\"number\">1</span>, j, text, pattern));</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                ans = curMatch &amp;&amp; match(i+<span class=\"number\">1</span>, j+<span class=\"number\">1</span>, text, pattern);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        memo[i][j] = ans ? Result.TRUE : Result.FALSE;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/result2.png\" title=\"result2\">\n<p>99.95%</p>\n<p></p>\n<p>i = 3, j = 5 match(3,5) == true</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>. match(<span class=\"number\">3</span>,<span class=\"number\">5</span>) = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"><span class=\"number\">2</span>. match(<span class=\"number\">3</span>,<span class=\"number\">4</span>): i = <span class=\"number\">3</span>; j = <span class=\"number\">4</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">3</span>. j + <span class=\"number\">1</span> == <span class=\"number\">5</span> &gt;= p.length() -&gt; match(<span class=\"number\">3</span>,<span class=\"number\">4</span>) = curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">4</span>. match(<span class=\"number\">3</span>,<span class=\"number\">4</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">5</span>. match(<span class=\"number\">3</span>,<span class=\"number\">3</span>): i = <span class=\"number\">3</span>; j = <span class=\"number\">3</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">6</span>. p[<span class=\"number\">4</span>] == b -&gt; match(<span class=\"number\">3</span>,<span class=\"number\">3</span>) = curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">7</span>. match(<span class=\"number\">3</span>,<span class=\"number\">3</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">8</span>. match(<span class=\"number\">3</span>,<span class=\"number\">2</span>): i = <span class=\"number\">3</span>; j = <span class=\"number\">2</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">9</span>. p[<span class=\"number\">3</span>] == * -&gt; match(<span class=\"number\">3</span>,<span class=\"number\">2</span>) = match(<span class=\"number\">3</span>,<span class=\"number\">4</span>) || <span class=\"keyword\">false</span> &amp;&amp; match(<span class=\"number\">4</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"number\">10</span>. match(<span class=\"number\">3</span>,<span class=\"number\">2</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">11</span>. match(<span class=\"number\">3</span>,<span class=\"number\">1</span>): i = <span class=\"number\">3</span>; j = <span class=\"number\">1</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">12</span>. p[<span class=\"number\">2</span>] == a -&gt; match(<span class=\"number\">3</span>,<span class=\"number\">1</span>) = curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">13</span>. match(<span class=\"number\">3</span>,<span class=\"number\">1</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">14</span>. match(<span class=\"number\">3</span>,<span class=\"number\">0</span>): i = <span class=\"number\">3</span>; j = <span class=\"number\">0</span>; curMatch = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">15</span>. p[<span class=\"number\">1</span>] == * -&gt; match(<span class=\"number\">3</span>,<span class=\"number\">0</span>) = match(<span class=\"number\">3</span>,<span class=\"number\">2</span>) || <span class=\"keyword\">false</span> &amp;&amp; match(<span class=\"number\">4</span>,<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"number\">16</span>. match(<span class=\"number\">3</span>,<span class=\"number\">0</span>) = <span class=\"keyword\">false</span>;</span><br><span class=\"line\"><span class=\"number\">17</span>. ....</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isMatch</span><span class=\"params\">(String text, String pattern)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">boolean</span>[][] memo = <span class=\"keyword\">new</span> <span class=\"keyword\">boolean</span>[text.length() + <span class=\"number\">1</span>][pattern.length() + <span class=\"number\">1</span>];</span><br><span class=\"line\">        memo[text.length()][pattern.length()] = <span class=\"keyword\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = text.length(); i &gt;= <span class=\"number\">0</span>; i--)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = pattern.length() - <span class=\"number\">1</span>; j &gt;= <span class=\"number\">0</span>; j--)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">boolean</span> curMatch = (i &lt; text.length() &amp;&amp;</span><br><span class=\"line\">                                       (pattern.charAt(j) == text.charAt(i) ||</span><br><span class=\"line\">                                        pattern.charAt(j) == <span class=\"string\">'.'</span>));</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (j + <span class=\"number\">1</span> &lt; pattern.length() &amp;&amp; pattern.charAt(j+<span class=\"number\">1</span>) == <span class=\"string\">'*'</span>)&#123;</span><br><span class=\"line\">                    memo[i][j] = memo[i][j+<span class=\"number\">2</span>] || curMatch &amp;&amp; memo[i+<span class=\"number\">1</span>][j];</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    memo[i][j] = curMatch &amp;&amp; memo[i+<span class=\"number\">1</span>][j+<span class=\"number\">1</span>];</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> memo[<span class=\"number\">0</span>][<span class=\"number\">0</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/leetcode/day4-regular-expression-matching/result3.png\" title=\"result3\">\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n"},{"title":"SSH","date":"2019-03-27T15:00:23.000Z","categorys":null,"_content":"\n## \n\n\n\n![20190327230716.png](https://i.loli.net/2019/03/27/5c9b91a70e5ca.png)\n\nshellgithubAB\n\n\n\n## Shell\n\nShell`github`https://github.com/MFrank2016/GotoSSH\n\n`AutoSSH`\n\n## \n\n`GotoSSH`SSH\n\n## \n\nCentOS :\n\n```shell\n$ sudo yum install -y expect\n```\n\nUbuntu :\n\n```shell\n$ sudo apt-get install tcl tk expect\n```\n\nMac :\n\n```shell\n$ sudo brew install expect\n```\n\n##  GotoSSH\n\n```shell\n$ git clone https://github.com/MFrank2016/GotoSSH.git\n$ cd GotoSSH\n$ chmod a+x gotossh\n$ sudo cp gotossh /usr/local/bin/\n```\n\n## \n\n```shell\n$ vim ~/.gotossh_config\nserver_name|ip|username|password|port|rely_server_no\n```\n\n0AB\n\n## \n\n```shell\n$ vim ~/.gotossh_config\ntest_server|192.168.0.1|root|password|22|0\nonline_server|192.168.2.2|root|password|22|1\n```\n\n## \n\n```shell\n$ gotossh\n######################################################################################\n#                                  [GOTO SSH]                                        #\n#                                                                                    #\n#                                                                                    #\n# [1] test_server - 192.168.0.1:root                                                 #\n# [2] online_server - 192.168.2.2:root                                               #\n#                                                                                    #\n#                                                                                    #\n######################################################################################\nServer Number:(Input Server Number Here)\n```\n\nOR\n\n```shell\ngotossh 1\n```\n\nOR\n\n```shell\ngotossh 2\n```\n\n2112\n\n\n\n![20190327231606.png](https://i.loli.net/2019/03/27/5c9b93b7d1c8a.png)\n\n## \n\n\n\n\n\nstar\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","source":"_posts/shell/shell-gotossh.md","raw":"---\ntitle: SSH\ndate: 2019-03-27 23:00:23\ntags:\ncategorys:\n---\n\n## \n\n\n\n![20190327230716.png](https://i.loli.net/2019/03/27/5c9b91a70e5ca.png)\n\nshellgithubAB\n\n\n\n## Shell\n\nShell`github`https://github.com/MFrank2016/GotoSSH\n\n`AutoSSH`\n\n## \n\n`GotoSSH`SSH\n\n## \n\nCentOS :\n\n```shell\n$ sudo yum install -y expect\n```\n\nUbuntu :\n\n```shell\n$ sudo apt-get install tcl tk expect\n```\n\nMac :\n\n```shell\n$ sudo brew install expect\n```\n\n##  GotoSSH\n\n```shell\n$ git clone https://github.com/MFrank2016/GotoSSH.git\n$ cd GotoSSH\n$ chmod a+x gotossh\n$ sudo cp gotossh /usr/local/bin/\n```\n\n## \n\n```shell\n$ vim ~/.gotossh_config\nserver_name|ip|username|password|port|rely_server_no\n```\n\n0AB\n\n## \n\n```shell\n$ vim ~/.gotossh_config\ntest_server|192.168.0.1|root|password|22|0\nonline_server|192.168.2.2|root|password|22|1\n```\n\n## \n\n```shell\n$ gotossh\n######################################################################################\n#                                  [GOTO SSH]                                        #\n#                                                                                    #\n#                                                                                    #\n# [1] test_server - 192.168.0.1:root                                                 #\n# [2] online_server - 192.168.2.2:root                                               #\n#                                                                                    #\n#                                                                                    #\n######################################################################################\nServer Number:(Input Server Number Here)\n```\n\nOR\n\n```shell\ngotossh 1\n```\n\nOR\n\n```shell\ngotossh 2\n```\n\n2112\n\n\n\n![20190327231606.png](https://i.loli.net/2019/03/27/5c9b93b7d1c8a.png)\n\n## \n\n\n\n\n\nstar\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","slug":"shell/shell-gotossh","published":1,"updated":"2019-06-04T01:29:57.638Z","_id":"cjxze3gpc00210cvwbb5v8glj","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/27/5c9b91a70e5ca.png\" alt=\"20190327230716.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190327230716.png</div>\n            </figure>\n<p>shellgithubAB</p>\n<p></p>\n<h2 id=\"Shell\"><a href=\"#Shell\" class=\"headerlink\" title=\"Shell\"></a>Shell</h2><p>Shell<code>github</code><a href=\"https://github.com/MFrank2016/GotoSSH\" target=\"_blank\" rel=\"noopener\">https://github.com/MFrank2016/GotoSSH</a></p>\n<p><code>AutoSSH</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>GotoSSH</code>SSH</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>CentOS :</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo yum install -y expect</span></span><br></pre></td></tr></table></figure>\n<p>Ubuntu :</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo apt-get install tcl tk expect</span></span><br></pre></td></tr></table></figure>\n<p>Mac :</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo brew install expect</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"-GotoSSH\"><a href=\"#-GotoSSH\" class=\"headerlink\" title=\" GotoSSH\"></a> GotoSSH</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">clone</span> https://github.com/MFrank2016/GotoSSH.git</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> GotoSSH</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> chmod a+x gotossh</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo cp gotossh /usr/<span class=\"built_in\">local</span>/bin/</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim ~/.gotossh_config</span></span><br><span class=\"line\">server_name|ip|username|password|port|rely_server_no</span><br></pre></td></tr></table></figure>\n<p>0AB</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim ~/.gotossh_config</span></span><br><span class=\"line\">test_server|192.168.0.1|root|password|22|0</span><br><span class=\"line\">online_server|192.168.2.2|root|password|22|1</span><br></pre></td></tr></table></figure>\n<h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> gotossh</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#####################################################################################</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">                                  [GOTO SSH]                                        <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">                                                                                    <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">                                                                                    <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> [1] test_server - 192.168.0.1:root                                                 <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> [2] online_server - 192.168.2.2:root                                               <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">                                                                                    <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">                                                                                    <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#####################################################################################</span></span></span><br><span class=\"line\">Server Number:(Input Server Number Here)</span><br></pre></td></tr></table></figure>\n<p>OR</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 1</span><br></pre></td></tr></table></figure>\n<p>OR</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 2</span><br></pre></td></tr></table></figure>\n<p>2112</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/27/5c9b93b7d1c8a.png\" alt=\"20190327231606.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190327231606.png</div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p>star</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/27/5c9b91a70e5ca.png\" alt=\"20190327230716.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190327230716.png</div>\n            </figure>\n<p>shellgithubAB</p>\n<p></p>\n<h2 id=\"Shell\"><a href=\"#Shell\" class=\"headerlink\" title=\"Shell\"></a>Shell</h2><p>Shell<code>github</code><a href=\"https://github.com/MFrank2016/GotoSSH\" target=\"_blank\" rel=\"noopener\">https://github.com/MFrank2016/GotoSSH</a></p>\n<p><code>AutoSSH</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>GotoSSH</code>SSH</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>CentOS :</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo yum install -y expect</span></span><br></pre></td></tr></table></figure>\n<p>Ubuntu :</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo apt-get install tcl tk expect</span></span><br></pre></td></tr></table></figure>\n<p>Mac :</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo brew install expect</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"-GotoSSH\"><a href=\"#-GotoSSH\" class=\"headerlink\" title=\" GotoSSH\"></a> GotoSSH</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">clone</span> https://github.com/MFrank2016/GotoSSH.git</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> GotoSSH</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> chmod a+x gotossh</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo cp gotossh /usr/<span class=\"built_in\">local</span>/bin/</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim ~/.gotossh_config</span></span><br><span class=\"line\">server_name|ip|username|password|port|rely_server_no</span><br></pre></td></tr></table></figure>\n<p>0AB</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> vim ~/.gotossh_config</span></span><br><span class=\"line\">test_server|192.168.0.1|root|password|22|0</span><br><span class=\"line\">online_server|192.168.2.2|root|password|22|1</span><br></pre></td></tr></table></figure>\n<h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> gotossh</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#####################################################################################</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">                                  [GOTO SSH]                                        <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">                                                                                    <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">                                                                                    <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> [1] test_server - 192.168.0.1:root                                                 <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> [2] online_server - 192.168.2.2:root                                               <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">                                                                                    <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">                                                                                    <span class=\"comment\">#</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#####################################################################################</span></span></span><br><span class=\"line\">Server Number:(Input Server Number Here)</span><br></pre></td></tr></table></figure>\n<p>OR</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 1</span><br></pre></td></tr></table></figure>\n<p>OR</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 2</span><br></pre></td></tr></table></figure>\n<p>2112</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/27/5c9b93b7d1c8a.png\" alt=\"20190327231606.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190327231606.png</div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<p>star</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>"},{"title":"SSH","date":"2019-03-28T16:26:30.000Z","categorys":null,"_content":"\n## \n\nGotoSSH\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf654b339b.gif)\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf6c81ad1f.gif)\n\n![](https://i.loli.net/2019/03/29/5c9cf6ee38d18.gif)\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf72b7b707.gif)\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf76aad6ac.gif)\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf782c0db4.gif)\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf7b506db0.gif)\n\n![20190329003615.png](https://i.loli.net/2019/03/29/5c9cf80147c31.png)\n\n\n\n## Shell\n\nShell`github`https://github.com/MFrank2016/GotoSSH\n\nstar\n\n## \n\nCentOS :\n```\n$ sudo yum install -y expect\n```\n\nUbuntu :\n```\n$ sudo apt-get install tcl tk expect\n```\n\nMac :\n```\n$ sudo brew install expect\n```\n\n##  GotoSSH\n\n```\n$ git clone https://github.com/MFrank2016/GotoSSH.git\n$ cd GotoSSH\n$ chmod a+x gotossh\n$ sudo cp gotossh /usr/local/bin/\n```\n\n## \n\n```\n$ vim ~/.gotossh_config\nserver_name|ip|username|password|port|rely_server_no\n\n[Server1]\ncommend=tail -f -n 10 testlog.log\n\n[scp]\nlog1=~/testlog.log\n```\n\n\n\n\n\n```\nserver_name|ip|username|password|port|rely_server_no\n```\n\n\n\n```\nJumpServer1|118.24.163.31|root|testpassword|22|0\nOnlineServerB|111.231.59.85|root|testpassword2|22|1\n```\n\n0\n\n\n\n```\n[Server1]\ncommend=tail -f -n 10 testlog.log\n```\n\nServer1 Server2\n\ncommend \n\n\n\n```\ngotossh 1 commend\n```\n\n`tail -f -n 10 testlog.log`\n\n|\n\n\n\n```\n[Server1]\ncommend=scp root@111.231.59.85:/var/log/test-service/test-service.log ./test-server.log|testpassword2\n```\n\n`rm -rf xxx`\n\nscp\n\n```\n[scp]\nlog1=~/testlog.log\nlog2=/var/log/test-service/test-service.log\n```\n\nlog1  log2 \n\n```\ngotossh 1 scp log1\n```\n\n`~/testlog.log`\n\n```\ngotossh 2 scp log2\n```\n\n\n\n## \n```\n$ vim ~/.gotossh_config\nJumpServer1|118.24.163.31|root|testpassword|22|0\nOnlineServerB|111.231.59.85|root|testpassword2|22|1\n\n[Server1]\nlog=tail -f -n 20 testlog.log\n\n[Server2]\nlog=tail -f -n 20 /var/log/test-service/test-service.log\ncd=cd /var/log/test-service/\n\n[scp]\nlog3=~/testlog.log\nlog4=/var/log/test-service/test-service.log\n```\n\n## \n```\n$ gotossh\n######################################################################################\n#                                  [GOTO SSH]                                        #\n#                                                                                    #\n#                                                                                    #\n# [1] test_server - 192.168.0.1:root                                                 #\n# [2] online_server - 192.168.2.2:root                                               #\n#                                                                                    #\n#                                                                                    #\n######################################################################################\nServer Number:(Input Server Number Here)\n```\n\n```\ngotossh 1\ngotossh 2\ngotossh 1 log\ngotossh 2 log\ngotossh 2 cd\ngotossh 1 scp log3\ngotossh 2 scp log4\n```\n\n## \n\n1. ipGotoSSH\n2. \n3. `scp`\n\nhttps://github.com/MFrank2016/GotoSSH\n\nstar\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)\n","source":"_posts/shell/gotossh-update.md","raw":"---\ntitle: SSH\ndate: 2019-03-29 00:26:30\ntags:\ncategorys:\n---\n\n## \n\nGotoSSH\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf654b339b.gif)\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf6c81ad1f.gif)\n\n![](https://i.loli.net/2019/03/29/5c9cf6ee38d18.gif)\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf72b7b707.gif)\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf76aad6ac.gif)\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf782c0db4.gif)\n\n\n\n![](https://i.loli.net/2019/03/29/5c9cf7b506db0.gif)\n\n![20190329003615.png](https://i.loli.net/2019/03/29/5c9cf80147c31.png)\n\n\n\n## Shell\n\nShell`github`https://github.com/MFrank2016/GotoSSH\n\nstar\n\n## \n\nCentOS :\n```\n$ sudo yum install -y expect\n```\n\nUbuntu :\n```\n$ sudo apt-get install tcl tk expect\n```\n\nMac :\n```\n$ sudo brew install expect\n```\n\n##  GotoSSH\n\n```\n$ git clone https://github.com/MFrank2016/GotoSSH.git\n$ cd GotoSSH\n$ chmod a+x gotossh\n$ sudo cp gotossh /usr/local/bin/\n```\n\n## \n\n```\n$ vim ~/.gotossh_config\nserver_name|ip|username|password|port|rely_server_no\n\n[Server1]\ncommend=tail -f -n 10 testlog.log\n\n[scp]\nlog1=~/testlog.log\n```\n\n\n\n\n\n```\nserver_name|ip|username|password|port|rely_server_no\n```\n\n\n\n```\nJumpServer1|118.24.163.31|root|testpassword|22|0\nOnlineServerB|111.231.59.85|root|testpassword2|22|1\n```\n\n0\n\n\n\n```\n[Server1]\ncommend=tail -f -n 10 testlog.log\n```\n\nServer1 Server2\n\ncommend \n\n\n\n```\ngotossh 1 commend\n```\n\n`tail -f -n 10 testlog.log`\n\n|\n\n\n\n```\n[Server1]\ncommend=scp root@111.231.59.85:/var/log/test-service/test-service.log ./test-server.log|testpassword2\n```\n\n`rm -rf xxx`\n\nscp\n\n```\n[scp]\nlog1=~/testlog.log\nlog2=/var/log/test-service/test-service.log\n```\n\nlog1  log2 \n\n```\ngotossh 1 scp log1\n```\n\n`~/testlog.log`\n\n```\ngotossh 2 scp log2\n```\n\n\n\n## \n```\n$ vim ~/.gotossh_config\nJumpServer1|118.24.163.31|root|testpassword|22|0\nOnlineServerB|111.231.59.85|root|testpassword2|22|1\n\n[Server1]\nlog=tail -f -n 20 testlog.log\n\n[Server2]\nlog=tail -f -n 20 /var/log/test-service/test-service.log\ncd=cd /var/log/test-service/\n\n[scp]\nlog3=~/testlog.log\nlog4=/var/log/test-service/test-service.log\n```\n\n## \n```\n$ gotossh\n######################################################################################\n#                                  [GOTO SSH]                                        #\n#                                                                                    #\n#                                                                                    #\n# [1] test_server - 192.168.0.1:root                                                 #\n# [2] online_server - 192.168.2.2:root                                               #\n#                                                                                    #\n#                                                                                    #\n######################################################################################\nServer Number:(Input Server Number Here)\n```\n\n```\ngotossh 1\ngotossh 2\ngotossh 1 log\ngotossh 2 log\ngotossh 2 cd\ngotossh 1 scp log3\ngotossh 2 scp log4\n```\n\n## \n\n1. ipGotoSSH\n2. \n3. `scp`\n\nhttps://github.com/MFrank2016/GotoSSH\n\nstar\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)\n","slug":"shell/gotossh-update","published":1,"updated":"2019-06-04T01:29:57.588Z","_id":"cjxze3gpc00250cvwda23pozc","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GotoSSH</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf654b339b.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf6c81ad1f.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf6ee38d18.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf72b7b707.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf76aad6ac.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf782c0db4.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf7b506db0.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf80147c31.png\" alt=\"20190329003615.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190329003615.png</div>\n            </figure>\n<p></p>\n<h2 id=\"Shell\"><a href=\"#Shell\" class=\"headerlink\" title=\"Shell\"></a>Shell</h2><p>Shell<code>github</code><a href=\"https://github.com/MFrank2016/GotoSSH\" target=\"_blank\" rel=\"noopener\">https://github.com/MFrank2016/GotoSSH</a></p>\n<p>star</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>CentOS :<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo yum install -y expect</span><br></pre></td></tr></table></figure></p>\n<p>Ubuntu :<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get install tcl tk expect</span><br></pre></td></tr></table></figure></p>\n<p>Mac :<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo brew install expect</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"-GotoSSH\"><a href=\"#-GotoSSH\" class=\"headerlink\" title=\" GotoSSH\"></a> GotoSSH</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git clone https://github.com/MFrank2016/GotoSSH.git</span><br><span class=\"line\">$ cd GotoSSH</span><br><span class=\"line\">$ chmod a+x gotossh</span><br><span class=\"line\">$ sudo cp gotossh /usr/local/bin/</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vim ~/.gotossh_config</span><br><span class=\"line\">server_name|ip|username|password|port|rely_server_no</span><br><span class=\"line\"></span><br><span class=\"line\">[Server1]</span><br><span class=\"line\">commend=tail -f -n 10 testlog.log</span><br><span class=\"line\"></span><br><span class=\"line\">[scp]</span><br><span class=\"line\">log1=~/testlog.log</span><br></pre></td></tr></table></figure>\n<p></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server_name|ip|username|password|port|rely_server_no</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JumpServer1|118.24.163.31|root|testpassword|22|0</span><br><span class=\"line\">OnlineServerB|111.231.59.85|root|testpassword2|22|1</span><br></pre></td></tr></table></figure>\n<p>0</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Server1]</span><br><span class=\"line\">commend=tail -f -n 10 testlog.log</span><br></pre></td></tr></table></figure>\n<p>Server1 Server2</p>\n<p>commend </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 1 commend</span><br></pre></td></tr></table></figure>\n<p><code>tail -f -n 10 testlog.log</code></p>\n<p>|</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Server1]</span><br><span class=\"line\">commend=scp root@111.231.59.85:/var/log/test-service/test-service.log ./test-server.log|testpassword2</span><br></pre></td></tr></table></figure>\n<p><code>rm -rf xxx</code></p>\n<p>scp</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[scp]</span><br><span class=\"line\">log1=~/testlog.log</span><br><span class=\"line\">log2=/var/log/test-service/test-service.log</span><br></pre></td></tr></table></figure>\n<p>log1  log2 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 1 scp log1</span><br></pre></td></tr></table></figure>\n<p><code>~/testlog.log</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 2 scp log2</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vim ~/.gotossh_config</span><br><span class=\"line\">JumpServer1|118.24.163.31|root|testpassword|22|0</span><br><span class=\"line\">OnlineServerB|111.231.59.85|root|testpassword2|22|1</span><br><span class=\"line\"></span><br><span class=\"line\">[Server1]</span><br><span class=\"line\">log=tail -f -n 20 testlog.log</span><br><span class=\"line\"></span><br><span class=\"line\">[Server2]</span><br><span class=\"line\">log=tail -f -n 20 /var/log/test-service/test-service.log</span><br><span class=\"line\">cd=cd /var/log/test-service/</span><br><span class=\"line\"></span><br><span class=\"line\">[scp]</span><br><span class=\"line\">log3=~/testlog.log</span><br><span class=\"line\">log4=/var/log/test-service/test-service.log</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ gotossh</span><br><span class=\"line\">######################################################################################</span><br><span class=\"line\">#                                  [GOTO SSH]                                        #</span><br><span class=\"line\">#                                                                                    #</span><br><span class=\"line\">#                                                                                    #</span><br><span class=\"line\"># [1] test_server - 192.168.0.1:root                                                 #</span><br><span class=\"line\"># [2] online_server - 192.168.2.2:root                                               #</span><br><span class=\"line\">#                                                                                    #</span><br><span class=\"line\">#                                                                                    #</span><br><span class=\"line\">######################################################################################</span><br><span class=\"line\">Server Number:(Input Server Number Here)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 1</span><br><span class=\"line\">gotossh 2</span><br><span class=\"line\">gotossh 1 log</span><br><span class=\"line\">gotossh 2 log</span><br><span class=\"line\">gotossh 2 cd</span><br><span class=\"line\">gotossh 1 scp log3</span><br><span class=\"line\">gotossh 2 scp log4</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li>ipGotoSSH</li>\n<li></li>\n<li><code>scp</code></li>\n</ol>\n<p><a href=\"https://github.com/MFrank2016/GotoSSH\" target=\"_blank\" rel=\"noopener\">https://github.com/MFrank2016/GotoSSH</a></p>\n<p>star</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GotoSSH</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf654b339b.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf6c81ad1f.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf6ee38d18.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf72b7b707.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf76aad6ac.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf782c0db4.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf7b506db0.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/29/5c9cf80147c31.png\" alt=\"20190329003615.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190329003615.png</div>\n            </figure>\n<p></p>\n<h2 id=\"Shell\"><a href=\"#Shell\" class=\"headerlink\" title=\"Shell\"></a>Shell</h2><p>Shell<code>github</code><a href=\"https://github.com/MFrank2016/GotoSSH\" target=\"_blank\" rel=\"noopener\">https://github.com/MFrank2016/GotoSSH</a></p>\n<p>star</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>CentOS :<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo yum install -y expect</span><br></pre></td></tr></table></figure></p>\n<p>Ubuntu :<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get install tcl tk expect</span><br></pre></td></tr></table></figure></p>\n<p>Mac :<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo brew install expect</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"-GotoSSH\"><a href=\"#-GotoSSH\" class=\"headerlink\" title=\" GotoSSH\"></a> GotoSSH</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git clone https://github.com/MFrank2016/GotoSSH.git</span><br><span class=\"line\">$ cd GotoSSH</span><br><span class=\"line\">$ chmod a+x gotossh</span><br><span class=\"line\">$ sudo cp gotossh /usr/local/bin/</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vim ~/.gotossh_config</span><br><span class=\"line\">server_name|ip|username|password|port|rely_server_no</span><br><span class=\"line\"></span><br><span class=\"line\">[Server1]</span><br><span class=\"line\">commend=tail -f -n 10 testlog.log</span><br><span class=\"line\"></span><br><span class=\"line\">[scp]</span><br><span class=\"line\">log1=~/testlog.log</span><br></pre></td></tr></table></figure>\n<p></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server_name|ip|username|password|port|rely_server_no</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JumpServer1|118.24.163.31|root|testpassword|22|0</span><br><span class=\"line\">OnlineServerB|111.231.59.85|root|testpassword2|22|1</span><br></pre></td></tr></table></figure>\n<p>0</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Server1]</span><br><span class=\"line\">commend=tail -f -n 10 testlog.log</span><br></pre></td></tr></table></figure>\n<p>Server1 Server2</p>\n<p>commend </p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 1 commend</span><br></pre></td></tr></table></figure>\n<p><code>tail -f -n 10 testlog.log</code></p>\n<p>|</p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Server1]</span><br><span class=\"line\">commend=scp root@111.231.59.85:/var/log/test-service/test-service.log ./test-server.log|testpassword2</span><br></pre></td></tr></table></figure>\n<p><code>rm -rf xxx</code></p>\n<p>scp</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[scp]</span><br><span class=\"line\">log1=~/testlog.log</span><br><span class=\"line\">log2=/var/log/test-service/test-service.log</span><br></pre></td></tr></table></figure>\n<p>log1  log2 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 1 scp log1</span><br></pre></td></tr></table></figure>\n<p><code>~/testlog.log</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 2 scp log2</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vim ~/.gotossh_config</span><br><span class=\"line\">JumpServer1|118.24.163.31|root|testpassword|22|0</span><br><span class=\"line\">OnlineServerB|111.231.59.85|root|testpassword2|22|1</span><br><span class=\"line\"></span><br><span class=\"line\">[Server1]</span><br><span class=\"line\">log=tail -f -n 20 testlog.log</span><br><span class=\"line\"></span><br><span class=\"line\">[Server2]</span><br><span class=\"line\">log=tail -f -n 20 /var/log/test-service/test-service.log</span><br><span class=\"line\">cd=cd /var/log/test-service/</span><br><span class=\"line\"></span><br><span class=\"line\">[scp]</span><br><span class=\"line\">log3=~/testlog.log</span><br><span class=\"line\">log4=/var/log/test-service/test-service.log</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ gotossh</span><br><span class=\"line\">######################################################################################</span><br><span class=\"line\">#                                  [GOTO SSH]                                        #</span><br><span class=\"line\">#                                                                                    #</span><br><span class=\"line\">#                                                                                    #</span><br><span class=\"line\"># [1] test_server - 192.168.0.1:root                                                 #</span><br><span class=\"line\"># [2] online_server - 192.168.2.2:root                                               #</span><br><span class=\"line\">#                                                                                    #</span><br><span class=\"line\">#                                                                                    #</span><br><span class=\"line\">######################################################################################</span><br><span class=\"line\">Server Number:(Input Server Number Here)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gotossh 1</span><br><span class=\"line\">gotossh 2</span><br><span class=\"line\">gotossh 1 log</span><br><span class=\"line\">gotossh 2 log</span><br><span class=\"line\">gotossh 2 cd</span><br><span class=\"line\">gotossh 1 scp log3</span><br><span class=\"line\">gotossh 2 scp log4</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li>ipGotoSSH</li>\n<li></li>\n<li><code>scp</code></li>\n</ol>\n<p><a href=\"https://github.com/MFrank2016/GotoSSH\" target=\"_blank\" rel=\"noopener\">https://github.com/MFrank2016/GotoSSH</a></p>\n<p>star</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n"},{"title":"SSH","date":"2019-04-04T11:10:39.000Z","categorys":null,"_content":"\n## \n\nGotoSSHshell~\n\nbug\n\nshell\n\nshell\n\n## \n\n:\n\n![](https://i.loli.net/2019/04/08/5caa300e3e11c.gif)\n\n\n\n![](https://i.loli.net/2019/04/08/5caa305847211.gif)\n\n![](https://i.loli.net/2019/04/08/5caa30d31db3a.gif)\n\n\n\n![](https://i.loli.net/2019/04/08/5caa36045135c.gif)\n\n![](https://i.loli.net/2019/04/08/5caa3603366a4.gif)\n\n\n\n![](https://i.loli.net/2019/04/08/5caa3ac235cf7.gif)\n\n\n\n![](https://i.loli.net/2019/04/08/5caab56a6e3c3.gif)\n\n\n\n![](https://i.loli.net/2019/04/08/5caab6078e829.gif)\n\n:\n\n![](https://i.loli.net/2019/04/08/5caab7530dc2c.gif)\n\n:\n\n![list-all-the-commands.gif](https://i.loli.net/2019/04/08/5caab7d733ef1.gif)\n\n## v3\n\n1. \n   \n`gotossh``ctrl + c`emmmm\n\n![](https://i.loli.net/2019/04/08/5caab7530dc2c.gif)\n\n`gotossh -l`\n\n\n\n![list-all-the-commands.gif](https://i.loli.net/2019/04/08/5caab7d733ef1.gif)\n\n2. `setting``common-command`\n   \nversion\n\n\n\nA`/var/log/server-a/service-a.log`B`/var/log/server-b/server-b.log`\n\n\n\n```\n[common-command]\nlog=/var/log/[service-name]/[service-name].log\n```\n\nab\n\n```\n[Server-Attribute-service-a]\nservice-name=service-a\n\n[Server-Attribute-service-b]\nservice-name=service-b\n```\n\n\n\n3. |||\n   \n|||emmm\n\n4. `link_name`\n\n`Server-ServerNo``Server-link_name`\n\n5. \n\n`Server-Attribute-link_name`\n\n`[P1][P2]`\n\n```\n[Server-service-a]\ncd=cd [P1]\n```\n\n`gotossh 1 cd /var/log/service-a`service-a`cd /var/log/service-a``[P1]``/var/log/service-a``[P2]`\n\n6. \n\nshell\n\n## \n\n\n\n1. `/usr/local/bin/`shell\n2. \n\n```shell\n$ brew install gnu-sed --with-default-names\n$ export PATH=\"$(brew --prefix coreutils)/libexec/gnubin:/usr/local/bin:$PATH\"\n$ export MANPATH=\"/usr/local/opt/coreutils/libexec/gnuman:$MANPATH\"\n```\n3. \n\n```shell\n$ git clone https://github.com/MFrank2016/GotoSSH.git\n$ cd GotoSSH\n$ chmod a+x gotossh\n$ sudo cp gotossh /usr/local/bin/\n```\n\nshell`common-command`\n\n## \n\n`GotoSSH`star\n\n","source":"_posts/shell/gotossh-v3-md.md","raw":"---\ntitle: SSH\ndate: 2019-04-04 19:10:39\ntags:\ncategorys:\n---\n\n## \n\nGotoSSHshell~\n\nbug\n\nshell\n\nshell\n\n## \n\n:\n\n![](https://i.loli.net/2019/04/08/5caa300e3e11c.gif)\n\n\n\n![](https://i.loli.net/2019/04/08/5caa305847211.gif)\n\n![](https://i.loli.net/2019/04/08/5caa30d31db3a.gif)\n\n\n\n![](https://i.loli.net/2019/04/08/5caa36045135c.gif)\n\n![](https://i.loli.net/2019/04/08/5caa3603366a4.gif)\n\n\n\n![](https://i.loli.net/2019/04/08/5caa3ac235cf7.gif)\n\n\n\n![](https://i.loli.net/2019/04/08/5caab56a6e3c3.gif)\n\n\n\n![](https://i.loli.net/2019/04/08/5caab6078e829.gif)\n\n:\n\n![](https://i.loli.net/2019/04/08/5caab7530dc2c.gif)\n\n:\n\n![list-all-the-commands.gif](https://i.loli.net/2019/04/08/5caab7d733ef1.gif)\n\n## v3\n\n1. \n   \n`gotossh``ctrl + c`emmmm\n\n![](https://i.loli.net/2019/04/08/5caab7530dc2c.gif)\n\n`gotossh -l`\n\n\n\n![list-all-the-commands.gif](https://i.loli.net/2019/04/08/5caab7d733ef1.gif)\n\n2. `setting``common-command`\n   \nversion\n\n\n\nA`/var/log/server-a/service-a.log`B`/var/log/server-b/server-b.log`\n\n\n\n```\n[common-command]\nlog=/var/log/[service-name]/[service-name].log\n```\n\nab\n\n```\n[Server-Attribute-service-a]\nservice-name=service-a\n\n[Server-Attribute-service-b]\nservice-name=service-b\n```\n\n\n\n3. |||\n   \n|||emmm\n\n4. `link_name`\n\n`Server-ServerNo``Server-link_name`\n\n5. \n\n`Server-Attribute-link_name`\n\n`[P1][P2]`\n\n```\n[Server-service-a]\ncd=cd [P1]\n```\n\n`gotossh 1 cd /var/log/service-a`service-a`cd /var/log/service-a``[P1]``/var/log/service-a``[P2]`\n\n6. \n\nshell\n\n## \n\n\n\n1. `/usr/local/bin/`shell\n2. \n\n```shell\n$ brew install gnu-sed --with-default-names\n$ export PATH=\"$(brew --prefix coreutils)/libexec/gnubin:/usr/local/bin:$PATH\"\n$ export MANPATH=\"/usr/local/opt/coreutils/libexec/gnuman:$MANPATH\"\n```\n3. \n\n```shell\n$ git clone https://github.com/MFrank2016/GotoSSH.git\n$ cd GotoSSH\n$ chmod a+x gotossh\n$ sudo cp gotossh /usr/local/bin/\n```\n\nshell`common-command`\n\n## \n\n`GotoSSH`star\n\n","slug":"shell/gotossh-v3-md","published":1,"updated":"2019-06-04T01:29:57.612Z","_id":"cjxze3gq600340cvwa3a902j4","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GotoSSHshell~</p>\n<p>bug</p>\n<p>shell</p>\n<p>shell</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>:</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa300e3e11c.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa305847211.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa30d31db3a.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa36045135c.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa3603366a4.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa3ac235cf7.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab56a6e3c3.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab6078e829.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>:</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab7530dc2c.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>:</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab7d733ef1.gif\" alt=\"list-all-the-commands.gif\" title=\"\">\n                </div>\n                <div class=\"image-caption\">list-all-the-commands.gif</div>\n            </figure>\n<h2 id=\"v3\"><a href=\"#v3\" class=\"headerlink\" title=\"v3\"></a>v3</h2><ol>\n<li></li>\n</ol>\n<p><code>gotossh</code><code>ctrl + c</code>emmmm</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab7530dc2c.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>gotossh -l</code></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab7d733ef1.gif\" alt=\"list-all-the-commands.gif\" title=\"\">\n                </div>\n                <div class=\"image-caption\">list-all-the-commands.gif</div>\n            </figure>\n<ol start=\"2\">\n<li><code>setting</code><code>common-command</code></li>\n</ol>\n<p>version</p>\n<p></p>\n<p>A<code>/var/log/server-a/service-a.log</code>B<code>/var/log/server-b/server-b.log</code></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[common-command]</span><br><span class=\"line\">log=/var/log/[service-name]/[service-name].log</span><br></pre></td></tr></table></figure>\n<p>ab</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Server-Attribute-service-a]</span><br><span class=\"line\">service-name=service-a</span><br><span class=\"line\"></span><br><span class=\"line\">[Server-Attribute-service-b]</span><br><span class=\"line\">service-name=service-b</span><br></pre></td></tr></table></figure>\n<p></p>\n<ol start=\"3\">\n<li>|||</li>\n</ol>\n<p>|||emmm</p>\n<ol start=\"4\">\n<li><code>link_name</code></li>\n</ol>\n<p><code>Server-ServerNo</code><code>Server-link_name</code></p>\n<ol start=\"5\">\n<li></li>\n</ol>\n<p><code>Server-Attribute-link_name</code></p>\n<p><code>[P1][P2]</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Server-service-a]</span><br><span class=\"line\">cd=cd [P1]</span><br></pre></td></tr></table></figure>\n<p><code>gotossh 1 cd /var/log/service-a</code>service-a<code>cd /var/log/service-a</code><code>[P1]</code><code>/var/log/service-a</code><code>[P2]</code></p>\n<ol start=\"6\">\n<li></li>\n</ol>\n<p>shell</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li><code>/usr/local/bin/</code>shell</li>\n<li></li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> brew install gnu-sed --with-default-names</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">export</span> PATH=<span class=\"string\">\"<span class=\"variable\">$(brew --prefix coreutils)</span>/libexec/gnubin:/usr/local/bin:<span class=\"variable\">$PATH</span>\"</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">export</span> MANPATH=<span class=\"string\">\"/usr/local/opt/coreutils/libexec/gnuman:<span class=\"variable\">$MANPATH</span>\"</span></span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li></li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">clone</span> https://github.com/MFrank2016/GotoSSH.git</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> GotoSSH</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> chmod a+x gotossh</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo cp gotossh /usr/<span class=\"built_in\">local</span>/bin/</span></span><br></pre></td></tr></table></figure>\n<p>shell<code>common-command</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>GotoSSH</code>star</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GotoSSHshell~</p>\n<p>bug</p>\n<p>shell</p>\n<p>shell</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>:</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa300e3e11c.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa305847211.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa30d31db3a.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa36045135c.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa3603366a4.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caa3ac235cf7.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab56a6e3c3.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab6078e829.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>:</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab7530dc2c.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>:</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab7d733ef1.gif\" alt=\"list-all-the-commands.gif\" title=\"\">\n                </div>\n                <div class=\"image-caption\">list-all-the-commands.gif</div>\n            </figure>\n<h2 id=\"v3\"><a href=\"#v3\" class=\"headerlink\" title=\"v3\"></a>v3</h2><ol>\n<li></li>\n</ol>\n<p><code>gotossh</code><code>ctrl + c</code>emmmm</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab7530dc2c.gif\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>gotossh -l</code></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/08/5caab7d733ef1.gif\" alt=\"list-all-the-commands.gif\" title=\"\">\n                </div>\n                <div class=\"image-caption\">list-all-the-commands.gif</div>\n            </figure>\n<ol start=\"2\">\n<li><code>setting</code><code>common-command</code></li>\n</ol>\n<p>version</p>\n<p></p>\n<p>A<code>/var/log/server-a/service-a.log</code>B<code>/var/log/server-b/server-b.log</code></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[common-command]</span><br><span class=\"line\">log=/var/log/[service-name]/[service-name].log</span><br></pre></td></tr></table></figure>\n<p>ab</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Server-Attribute-service-a]</span><br><span class=\"line\">service-name=service-a</span><br><span class=\"line\"></span><br><span class=\"line\">[Server-Attribute-service-b]</span><br><span class=\"line\">service-name=service-b</span><br></pre></td></tr></table></figure>\n<p></p>\n<ol start=\"3\">\n<li>|||</li>\n</ol>\n<p>|||emmm</p>\n<ol start=\"4\">\n<li><code>link_name</code></li>\n</ol>\n<p><code>Server-ServerNo</code><code>Server-link_name</code></p>\n<ol start=\"5\">\n<li></li>\n</ol>\n<p><code>Server-Attribute-link_name</code></p>\n<p><code>[P1][P2]</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Server-service-a]</span><br><span class=\"line\">cd=cd [P1]</span><br></pre></td></tr></table></figure>\n<p><code>gotossh 1 cd /var/log/service-a</code>service-a<code>cd /var/log/service-a</code><code>[P1]</code><code>/var/log/service-a</code><code>[P2]</code></p>\n<ol start=\"6\">\n<li></li>\n</ol>\n<p>shell</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li><code>/usr/local/bin/</code>shell</li>\n<li></li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> brew install gnu-sed --with-default-names</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">export</span> PATH=<span class=\"string\">\"<span class=\"variable\">$(brew --prefix coreutils)</span>/libexec/gnubin:/usr/local/bin:<span class=\"variable\">$PATH</span>\"</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">export</span> MANPATH=<span class=\"string\">\"/usr/local/opt/coreutils/libexec/gnuman:<span class=\"variable\">$MANPATH</span>\"</span></span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li></li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">clone</span> https://github.com/MFrank2016/GotoSSH.git</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> GotoSSH</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> chmod a+x gotossh</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo cp gotossh /usr/<span class=\"built_in\">local</span>/bin/</span></span><br></pre></td></tr></table></figure>\n<p>shell<code>common-command</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>GotoSSH</code>star</p>\n"},{"title":"Java ","date":"2018-12-26T11:55:51.000Z","_content":"> \n> \n\n## \n\n[](https://mubu.com/doc/lW2C-KYYy0)\n\n##  Java\n\n1. ````\n2. \n3. ``\n4. Java\n5. Java\n6. Java``Thread.currentThread()\n7. \n\n|                |                                                    |                                                      |\n| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ID         | Long                                   | Java |\n| name       | StringThread- |  |\n| Daemon | booleantrue | setDaemon |\n| Priority | intJava1~10105 |    |\n\n8. ``JavaJava``Java\n9. Thread`join`\n10. `yield`\n11. `sleep`\n12. ABBA``AB``\n13. Java\n14. \n15. `Thread.State`\n    1. `NEW` \n    2. `RUNNABLE`READYRUNNING\n    3. `BLOCKED`\n    4. `WAITING`Object.wait(),Thread.join(),LockSupport.park(),Condition.await()WAITINGRUNNABLEObjeck.notify()/notifyAll()LockSupport.unpark()Condition.signal()\n    5. `TIMED WAITING`\n    6. `TERMINATED`\n16. Java\n17. \n    1. ****\n    2. ****\n    3. \n    4. \n    5. \n18. \n    1. \n    2. \n    3. \n    4. \n\n##  \n\n1. ``\n2. ``\n3. ``\n4. ``\n5. ``\n6. `read-modify-write`--`check-then-act`\n7. ``\n8. ``\n9. Java```CAS`\n10. ``\n11. JIT````\n12. ``\n13. `volatile`JITJITvolatilevolatile\n14. \n15. \n16. `join`\n17. ``\n18. ``````\n19. \n20. \n21. \n22. \n23. LoadLoadStoreStoreLoadStoreStoreLoad\n24. \n25. \n26. ``\n27. \n28. Thread.sleep()Object.wait()Thread.join()LockSupport.park()\n29. \n30. ********\n    1. \n    2. \n    3. \n    4. \n31. RUNNABLERUNNABLE``\n    1. \n    2. \n    3. \n    4. \n32. ````\n33. ``\n34. ``\n35. ````\n36. ``\n37. ********\n38. \n39. ****\n40. ****\n\n##  Java\n\n1. ``\n\n2. \n\n3. ``\n\n4. Java````\n\n5. ``\n\n6. ``\n\n7. \n\n8. ``\n\n9. Java``````\n\n10. Java``\n\n11. \n\n12. ``/````\n\n13. \n\n    1. \n    2. \n\n14. `ReetrantReadWriteLock```ReetrantReadWriteLock``\n\n15. `ReetrantReadWriteLock`\n\n16. ``****\n\n17. ``````********JavaMonitorExit``JavaMonitorEnter``\n\n18. ``````********JavaMonitorEnterMonitorExit\n\n19. \n\n    1. \n\n    2. \n\n    3. \n\n    4. \n\n    5. \n\n    6. \n\n    7. \n\n20. `volatile`volatile\n\n21. `volatile```volatilevolatile\n\n22. \n\n    ```java\n    volatile Map aMap = new HashMap();\n    ```\n\n    \n\n    ```java\n    objRef = allocate(HashMap.class); // 1\n    invokeConstructor(objRef); // 2objRef\n    aMap = objRef; // 3aMap\n    ```\n\n    volatile312aMap\n\n23. volatileJava````\n\n24. volatileJava````\n\n25. volatile****\n\n26. volatile****\n\n27. volatilevolatile\n\n28. volatilevolatile\n\n29. volatile\n\n    1. volatile``\n\n    2. volatile``\n\n    3. volatile\n\n    4. volatile\n\n30. volatilevolatilevolatile\n\n31. ``CAS`read-modify-write`\n\n32. ``\n\n33. \n\n    1. public\n\n    2. private\n\n    3. \n\n    4. \n\n34. `static`\n\n35. `static`\n\n36. `static` \n\n37. `final`\n\n38. `final``final`\n\n39. finalfinalfinal\n\n40. ``\n\n41. ``\n\n42. \n\n    1. this\n\n    2. this\n\n    3. \n\n43. this\n\n44. \n\n    1. staic\n\n    2. final\n\n    3. volatile\n\n    4. AtomicReference\n\n    5. \n\n##  \n\n1. ********\n\n2. ``\n\n   1. \n\n   2. \n\n   3. \n\n   4. \n\n3. \n\n4.  `CPU``IO`\n\n5. CPUCPUCPUIOIOIO\n\n6. ``\n\n7. `Amdahls `\n   $$\n   S_{max} = \\frac{1}{P + \\frac{1 - P}{N}}\n   $$\n   NP\n\n8. ****\n\n9. \n\n10. \n\n    1. CPU$N_{cpu} $CPU$N_{cpu}  + 1$\n\n    2. IOIO$2 * N_{cpu} $\n\n11. ****\n\n12. \n\n##  \n\n1. ``\n\n2. ``\n\n3. waitObject.wait()\n\n4. Object.wait()\n\n5. `Object.wait()`wait\n\n6. `Object.notify()`Object.notify()Object.notify() Object.notify()\n\n7. ````\n\n8. Java``Java``Object.wait()\n\n9. wait/notify\n\n   1. \n\n   2. \n\n   3. \n\n   4. \n\n10. `Object.notify()``Object.notify()``notifyAll`\n\n    1. \n\n    2. \n\n11. `join(long)``join(long)``wait/notify`\n\n12. Javarun`notifyAll`\n\n13. `Condition``wait/notify`/`Object.wait(long)`\n\n14. `Condition.await()/signal()`ConditionConditionCondition\n\n15. `Condition`await`signal/signalAll`\n\n16. `Condition.awaitUntil(Date deadline)``signal/signalAll`\n\n17. `Condition.await()/awaitUntil(Date)``Condition.await()/awaitUntil(Date)`\n\n18. `CountDownLatch```\n\n19. `CountDownLatch`0CountDownLatchawait`CountDownLatch.countDown()``finally`\n\n20. `CyclicBarrier````CyclicBarrier.await()`\n\n21. `CyclicBarrier.await()``CyclicBarrier`\n\n22. `CyclicBarrier``CyclicBarrier`\n\n23. CyclicBarriertrip/CyclicBarrierCyclicBarrier\n\n24. CyclicBarrier.await()parties0barrierAction.run() trip.signalAll()CyclicBarrierparties\n\n25. CyclicBarrier:\n\n    1. \n\n    2. \n\n26. \n\n27. /\n\n28. Interger.MAX_VALUE($2^{31} - 1$)\n\n29. ArrayBlockingQueueputtake\n\n30. LinkedBlockingQueue\n\n31. LinkedBlockingQueue\bputtakeputLocktakeLock\bLinkedBlockingQueueputtakeLinkedBlockingQueue\n\n32. SynchronousQueue\n\n33. SynchronousQueue\n34. ArrayBlockingQueueSynchronousQueueLinkedBlockingQueue\n35. LinkedBlockingQueueArrayBlockingQueue\n36. put\n37. Semaphore.acquire()  Semaphore.release()\n38. Semaphore.release()finally\n39. Semaphorepermits1SemaphoreSemaphore.acquire()Semaphore.release()\n40. PipedOutputStreamPipedInputStream-\n41. \n42. \n43. Exchanger.exchange(V)xExchanger.exchange(V)\n44. Java\n45. \n46. trueInterruptedException\n47. Java\n48. -run\n\n##  \n","source":"_posts/reading/java-multithread-programming-guide-in-action-digest.md","raw":"---\ntitle: Java \ntags: \n - \n - Java\n - \ncategories: \ndate: 2018-12-26 19:55:51\n---\n> \n> \n\n## \n\n[](https://mubu.com/doc/lW2C-KYYy0)\n\n##  Java\n\n1. ````\n2. \n3. ``\n4. Java\n5. Java\n6. Java``Thread.currentThread()\n7. \n\n|                |                                                    |                                                      |\n| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ID         | Long                                   | Java |\n| name       | StringThread- |  |\n| Daemon | booleantrue | setDaemon |\n| Priority | intJava1~10105 |    |\n\n8. ``JavaJava``Java\n9. Thread`join`\n10. `yield`\n11. `sleep`\n12. ABBA``AB``\n13. Java\n14. \n15. `Thread.State`\n    1. `NEW` \n    2. `RUNNABLE`READYRUNNING\n    3. `BLOCKED`\n    4. `WAITING`Object.wait(),Thread.join(),LockSupport.park(),Condition.await()WAITINGRUNNABLEObjeck.notify()/notifyAll()LockSupport.unpark()Condition.signal()\n    5. `TIMED WAITING`\n    6. `TERMINATED`\n16. Java\n17. \n    1. ****\n    2. ****\n    3. \n    4. \n    5. \n18. \n    1. \n    2. \n    3. \n    4. \n\n##  \n\n1. ``\n2. ``\n3. ``\n4. ``\n5. ``\n6. `read-modify-write`--`check-then-act`\n7. ``\n8. ``\n9. Java```CAS`\n10. ``\n11. JIT````\n12. ``\n13. `volatile`JITJITvolatilevolatile\n14. \n15. \n16. `join`\n17. ``\n18. ``````\n19. \n20. \n21. \n22. \n23. LoadLoadStoreStoreLoadStoreStoreLoad\n24. \n25. \n26. ``\n27. \n28. Thread.sleep()Object.wait()Thread.join()LockSupport.park()\n29. \n30. ********\n    1. \n    2. \n    3. \n    4. \n31. RUNNABLERUNNABLE``\n    1. \n    2. \n    3. \n    4. \n32. ````\n33. ``\n34. ``\n35. ````\n36. ``\n37. ********\n38. \n39. ****\n40. ****\n\n##  Java\n\n1. ``\n\n2. \n\n3. ``\n\n4. Java````\n\n5. ``\n\n6. ``\n\n7. \n\n8. ``\n\n9. Java``````\n\n10. Java``\n\n11. \n\n12. ``/````\n\n13. \n\n    1. \n    2. \n\n14. `ReetrantReadWriteLock```ReetrantReadWriteLock``\n\n15. `ReetrantReadWriteLock`\n\n16. ``****\n\n17. ``````********JavaMonitorExit``JavaMonitorEnter``\n\n18. ``````********JavaMonitorEnterMonitorExit\n\n19. \n\n    1. \n\n    2. \n\n    3. \n\n    4. \n\n    5. \n\n    6. \n\n    7. \n\n20. `volatile`volatile\n\n21. `volatile```volatilevolatile\n\n22. \n\n    ```java\n    volatile Map aMap = new HashMap();\n    ```\n\n    \n\n    ```java\n    objRef = allocate(HashMap.class); // 1\n    invokeConstructor(objRef); // 2objRef\n    aMap = objRef; // 3aMap\n    ```\n\n    volatile312aMap\n\n23. volatileJava````\n\n24. volatileJava````\n\n25. volatile****\n\n26. volatile****\n\n27. volatilevolatile\n\n28. volatilevolatile\n\n29. volatile\n\n    1. volatile``\n\n    2. volatile``\n\n    3. volatile\n\n    4. volatile\n\n30. volatilevolatilevolatile\n\n31. ``CAS`read-modify-write`\n\n32. ``\n\n33. \n\n    1. public\n\n    2. private\n\n    3. \n\n    4. \n\n34. `static`\n\n35. `static`\n\n36. `static` \n\n37. `final`\n\n38. `final``final`\n\n39. finalfinalfinal\n\n40. ``\n\n41. ``\n\n42. \n\n    1. this\n\n    2. this\n\n    3. \n\n43. this\n\n44. \n\n    1. staic\n\n    2. final\n\n    3. volatile\n\n    4. AtomicReference\n\n    5. \n\n##  \n\n1. ********\n\n2. ``\n\n   1. \n\n   2. \n\n   3. \n\n   4. \n\n3. \n\n4.  `CPU``IO`\n\n5. CPUCPUCPUIOIOIO\n\n6. ``\n\n7. `Amdahls `\n   $$\n   S_{max} = \\frac{1}{P + \\frac{1 - P}{N}}\n   $$\n   NP\n\n8. ****\n\n9. \n\n10. \n\n    1. CPU$N_{cpu} $CPU$N_{cpu}  + 1$\n\n    2. IOIO$2 * N_{cpu} $\n\n11. ****\n\n12. \n\n##  \n\n1. ``\n\n2. ``\n\n3. waitObject.wait()\n\n4. Object.wait()\n\n5. `Object.wait()`wait\n\n6. `Object.notify()`Object.notify()Object.notify() Object.notify()\n\n7. ````\n\n8. Java``Java``Object.wait()\n\n9. wait/notify\n\n   1. \n\n   2. \n\n   3. \n\n   4. \n\n10. `Object.notify()``Object.notify()``notifyAll`\n\n    1. \n\n    2. \n\n11. `join(long)``join(long)``wait/notify`\n\n12. Javarun`notifyAll`\n\n13. `Condition``wait/notify`/`Object.wait(long)`\n\n14. `Condition.await()/signal()`ConditionConditionCondition\n\n15. `Condition`await`signal/signalAll`\n\n16. `Condition.awaitUntil(Date deadline)``signal/signalAll`\n\n17. `Condition.await()/awaitUntil(Date)``Condition.await()/awaitUntil(Date)`\n\n18. `CountDownLatch```\n\n19. `CountDownLatch`0CountDownLatchawait`CountDownLatch.countDown()``finally`\n\n20. `CyclicBarrier````CyclicBarrier.await()`\n\n21. `CyclicBarrier.await()``CyclicBarrier`\n\n22. `CyclicBarrier``CyclicBarrier`\n\n23. CyclicBarriertrip/CyclicBarrierCyclicBarrier\n\n24. CyclicBarrier.await()parties0barrierAction.run() trip.signalAll()CyclicBarrierparties\n\n25. CyclicBarrier:\n\n    1. \n\n    2. \n\n26. \n\n27. /\n\n28. Interger.MAX_VALUE($2^{31} - 1$)\n\n29. ArrayBlockingQueueputtake\n\n30. LinkedBlockingQueue\n\n31. LinkedBlockingQueue\bputtakeputLocktakeLock\bLinkedBlockingQueueputtakeLinkedBlockingQueue\n\n32. SynchronousQueue\n\n33. SynchronousQueue\n34. ArrayBlockingQueueSynchronousQueueLinkedBlockingQueue\n35. LinkedBlockingQueueArrayBlockingQueue\n36. put\n37. Semaphore.acquire()  Semaphore.release()\n38. Semaphore.release()finally\n39. Semaphorepermits1SemaphoreSemaphore.acquire()Semaphore.release()\n40. PipedOutputStreamPipedInputStream-\n41. \n42. \n43. Exchanger.exchange(V)xExchanger.exchange(V)\n44. Java\n45. \n46. trueInterruptedException\n47. Java\n48. -run\n\n##  \n","slug":"reading/java-multithread-programming-guide-in-action-digest","published":1,"updated":"2019-06-04T01:29:57.498Z","_id":"cjxze3gqg00350cvwvkwr261w","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p><br></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://mubu.com/doc/lW2C-KYYy0\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2><ol>\n<li><code></code><code></code></li>\n<li></li>\n<li><code></code></li>\n<li>Java</li>\n<li>Java</li>\n<li>Java<code></code>Thread.currentThread()</li>\n<li></li>\n</ol>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ID</td>\n<td>Long</td>\n<td>Java</td>\n</tr>\n<tr>\n<td>name</td>\n<td>StringThread-</td>\n<td></td>\n</tr>\n<tr>\n<td>Daemon</td>\n<td>booleantrue</td>\n<td>setDaemon</td>\n</tr>\n<tr>\n<td>Priority</td>\n<td>intJava1~10105</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<ol start=\"8\">\n<li><code></code>JavaJava<code></code>Java</li>\n<li>Thread<code>join</code></li>\n<li><code>yield</code></li>\n<li><code>sleep</code></li>\n<li>ABBA<code></code>AB<code></code></li>\n<li>Java</li>\n<li></li>\n<li><code>Thread.State</code><ol>\n<li><code>NEW</code> </li>\n<li><code>RUNNABLE</code>READYRUNNING</li>\n<li><code>BLOCKED</code></li>\n<li><code>WAITING</code>Object.wait(),Thread.join(),LockSupport.park(),Condition.await()WAITINGRUNNABLEObjeck.notify()/notifyAll()LockSupport.unpark()Condition.signal()</li>\n<li><code>TIMED WAITING</code></li>\n<li><code>TERMINATED</code></li>\n</ol>\n</li>\n<li>Java</li>\n<li><ol>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code>read-modify-write</code>--<code>check-then-act</code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li>Java<code></code><code>CAS</code></li>\n<li><code></code></li>\n<li>JIT<code></code><code></code></li>\n<li><code></code></li>\n<li><code>volatile</code>JITJITvolatilevolatile</li>\n<li></li>\n<li></li>\n<li><code>join</code></li>\n<li><code></code></li>\n<li><code></code><code></code><code></code></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>LoadLoadStoreStoreLoadStoreStoreLoad</li>\n<li></li>\n<li></li>\n<li><code></code></li>\n<li></li>\n<li>Thread.sleep()Object.wait()Thread.join()LockSupport.park()</li>\n<li></li>\n<li><strong></strong><strong></strong><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li>RUNNABLERUNNABLE<code></code><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><code></code><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code><code></code></li>\n<li><code></code></li>\n<li><strong></strong><strong></strong></li>\n<li></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ol>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2><ol>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>Java<code></code><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>Java<code></code><code></code><code></code></p>\n</li>\n<li><p>Java<code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code>/<code></code><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><p><code>ReetrantReadWriteLock</code><code></code>ReetrantReadWriteLock<code></code></p>\n</li>\n<li><p><code>ReetrantReadWriteLock</code></p>\n</li>\n<li><p><code></code><strong></strong></p>\n</li>\n<li><p><code></code><code></code><code></code><strong></strong><strong></strong>JavaMonitorExit<code></code>JavaMonitorEnter<code></code></p>\n</li>\n<li><p><code></code><code></code><code></code><strong></strong><strong></strong>JavaMonitorEnterMonitorExit</p>\n</li>\n<li><p></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>volatile</code>volatile</p>\n</li>\n<li><p><code>volatile</code><code></code>volatilevolatile</p>\n</li>\n<li><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">volatile</span> Map aMap = <span class=\"keyword\">new</span> HashMap();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">objRef = allocate(HashMap.class); <span class=\"comment\">// 1</span></span><br><span class=\"line\">invokeConstructor(objRef); <span class=\"comment\">// 2objRef</span></span><br><span class=\"line\">aMap = objRef; <span class=\"comment\">// 3aMap</span></span><br></pre></td></tr></table></figure>\n<p>volatile312aMap</p>\n</li>\n<li><p>volatileJava<code></code><code></code></p>\n</li>\n<li><p>volatileJava<code></code><code></code></p>\n</li>\n<li><p>volatile<strong></strong></p>\n</li>\n<li><p>volatile<strong></strong></p>\n</li>\n<li><p>volatilevolatile</p>\n</li>\n<li><p>volatilevolatile</p>\n</li>\n<li><p>volatile</p>\n<ol>\n<li><p>volatile<code></code></p>\n</li>\n<li><p>volatile<code></code></p>\n</li>\n<li><p>volatile</p>\n</li>\n<li><p>volatile</p>\n</li>\n</ol>\n</li>\n<li><p>volatilevolatilevolatile</p>\n</li>\n<li><p><code></code>CAS<code>read-modify-write</code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>public</p>\n</li>\n<li><p>private</p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>static</code></p>\n</li>\n<li><p><code>static</code></p>\n</li>\n<li><p><code>static</code> </p>\n</li>\n<li><p><code>final</code></p>\n</li>\n<li><p><code>final</code><code>final</code></p>\n</li>\n<li><p>finalfinalfinal</p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>this</p>\n</li>\n<li><p>this</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p>this</p>\n</li>\n<li><p></p>\n<ol>\n<li><p>staic</p>\n</li>\n<li><p>final</p>\n</li>\n<li><p>volatile</p>\n</li>\n<li><p>AtomicReference</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><p><strong></strong><strong></strong></p>\n</li>\n<li><p><code></code></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p></p>\n</li>\n<li><p> <code>CPU</code><code>IO</code></p>\n</li>\n<li><p>CPUCPUCPUIOIOIO</p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code>Amdahls </code><br>$$<br>S_{max} = \\frac{1}{P + \\frac{1 - P}{N}}<br>$$<br>NP</p>\n</li>\n<li><p><strong></strong></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>CPU$N_{cpu} $CPU$N_{cpu}  + 1$</p>\n</li>\n<li><p>IOIO$2 * N_{cpu} $</p>\n</li>\n</ol>\n</li>\n<li><p><strong></strong></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>waitObject.wait()</p>\n</li>\n<li><p>Object.wait()</p>\n</li>\n<li><p><code>Object.wait()</code>wait</p>\n</li>\n<li><p><code>Object.notify()</code>Object.notify()Object.notify() Object.notify()</p>\n</li>\n<li><p><code></code><code></code></p>\n</li>\n<li><p>Java<code></code>Java<code></code>Object.wait()</p>\n</li>\n<li><p>wait/notify</p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>Object.notify()</code><code>Object.notify()</code><code>notifyAll</code></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>join(long)</code><code>join(long)</code><code>wait/notify</code></p>\n</li>\n<li><p>Javarun<code>notifyAll</code></p>\n</li>\n<li><p><code>Condition</code><code>wait/notify</code>/<code>Object.wait(long)</code></p>\n</li>\n<li><p><code>Condition.await()/signal()</code>ConditionConditionCondition</p>\n</li>\n<li><p><code>Condition</code>await<code>signal/signalAll</code></p>\n</li>\n<li><p><code>Condition.awaitUntil(Date deadline)</code><code>signal/signalAll</code></p>\n</li>\n<li><p><code>Condition.await()/awaitUntil(Date)</code><code>Condition.await()/awaitUntil(Date)</code></p>\n</li>\n<li><p><code>CountDownLatch</code><code></code></p>\n</li>\n<li><p><code>CountDownLatch</code>0CountDownLatchawait<code>CountDownLatch.countDown()</code><code>finally</code></p>\n</li>\n<li><p><code>CyclicBarrier</code><code></code><code>CyclicBarrier.await()</code></p>\n</li>\n<li><p><code>CyclicBarrier.await()</code><code>CyclicBarrier</code></p>\n</li>\n<li><p><code>CyclicBarrier</code><code>CyclicBarrier</code></p>\n</li>\n<li><p>CyclicBarriertrip/CyclicBarrierCyclicBarrier</p>\n</li>\n<li><p>CyclicBarrier.await()parties0barrierAction.run() trip.signalAll()CyclicBarrierparties</p>\n</li>\n<li><p>CyclicBarrier:</p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p></p>\n</li>\n<li><p>/</p>\n</li>\n<li><p>Interger.MAX_VALUE($2^{31} - 1$)</p>\n</li>\n<li><p>ArrayBlockingQueueputtake</p>\n</li>\n<li><p>LinkedBlockingQueue</p>\n</li>\n<li><p>LinkedBlockingQueue\bputtakeputLocktakeLock\bLinkedBlockingQueueputtakeLinkedBlockingQueue</p>\n</li>\n<li><p>SynchronousQueue</p>\n</li>\n<li><p>SynchronousQueue</p>\n</li>\n<li>ArrayBlockingQueueSynchronousQueueLinkedBlockingQueue</li>\n<li>LinkedBlockingQueueArrayBlockingQueue</li>\n<li>put</li>\n<li>Semaphore.acquire()  Semaphore.release()</li>\n<li>Semaphore.release()finally</li>\n<li>Semaphorepermits1SemaphoreSemaphore.acquire()Semaphore.release()</li>\n<li>PipedOutputStreamPipedInputStream-</li>\n<li></li>\n<li></li>\n<li>Exchanger.exchange(V)xExchanger.exchange(V)</li>\n<li>Java</li>\n<li></li>\n<li>trueInterruptedException</li>\n<li>Java</li>\n<li>-run</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p><br></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://mubu.com/doc/lW2C-KYYy0\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2><ol>\n<li><code></code><code></code></li>\n<li></li>\n<li><code></code></li>\n<li>Java</li>\n<li>Java</li>\n<li>Java<code></code>Thread.currentThread()</li>\n<li></li>\n</ol>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ID</td>\n<td>Long</td>\n<td>Java</td>\n</tr>\n<tr>\n<td>name</td>\n<td>StringThread-</td>\n<td></td>\n</tr>\n<tr>\n<td>Daemon</td>\n<td>booleantrue</td>\n<td>setDaemon</td>\n</tr>\n<tr>\n<td>Priority</td>\n<td>intJava1~10105</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<ol start=\"8\">\n<li><code></code>JavaJava<code></code>Java</li>\n<li>Thread<code>join</code></li>\n<li><code>yield</code></li>\n<li><code>sleep</code></li>\n<li>ABBA<code></code>AB<code></code></li>\n<li>Java</li>\n<li></li>\n<li><code>Thread.State</code><ol>\n<li><code>NEW</code> </li>\n<li><code>RUNNABLE</code>READYRUNNING</li>\n<li><code>BLOCKED</code></li>\n<li><code>WAITING</code>Object.wait(),Thread.join(),LockSupport.park(),Condition.await()WAITINGRUNNABLEObjeck.notify()/notifyAll()LockSupport.unpark()Condition.signal()</li>\n<li><code>TIMED WAITING</code></li>\n<li><code>TERMINATED</code></li>\n</ol>\n</li>\n<li>Java</li>\n<li><ol>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code>read-modify-write</code>--<code>check-then-act</code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li>Java<code></code><code>CAS</code></li>\n<li><code></code></li>\n<li>JIT<code></code><code></code></li>\n<li><code></code></li>\n<li><code>volatile</code>JITJITvolatilevolatile</li>\n<li></li>\n<li></li>\n<li><code>join</code></li>\n<li><code></code></li>\n<li><code></code><code></code><code></code></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>LoadLoadStoreStoreLoadStoreStoreLoad</li>\n<li></li>\n<li></li>\n<li><code></code></li>\n<li></li>\n<li>Thread.sleep()Object.wait()Thread.join()LockSupport.park()</li>\n<li></li>\n<li><strong></strong><strong></strong><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li>RUNNABLERUNNABLE<code></code><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><code></code><code></code></li>\n<li><code></code></li>\n<li><code></code></li>\n<li><code></code><code></code></li>\n<li><code></code></li>\n<li><strong></strong><strong></strong></li>\n<li></li>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ol>\n<h2 id=\"-Java\"><a href=\"#-Java\" class=\"headerlink\" title=\" Java\"></a> Java</h2><ol>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>Java<code></code><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>Java<code></code><code></code><code></code></p>\n</li>\n<li><p>Java<code></code></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code></code>/<code></code><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li><p><code>ReetrantReadWriteLock</code><code></code>ReetrantReadWriteLock<code></code></p>\n</li>\n<li><p><code>ReetrantReadWriteLock</code></p>\n</li>\n<li><p><code></code><strong></strong></p>\n</li>\n<li><p><code></code><code></code><code></code><strong></strong><strong></strong>JavaMonitorExit<code></code>JavaMonitorEnter<code></code></p>\n</li>\n<li><p><code></code><code></code><code></code><strong></strong><strong></strong>JavaMonitorEnterMonitorExit</p>\n</li>\n<li><p></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>volatile</code>volatile</p>\n</li>\n<li><p><code>volatile</code><code></code>volatilevolatile</p>\n</li>\n<li><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">volatile</span> Map aMap = <span class=\"keyword\">new</span> HashMap();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">objRef = allocate(HashMap.class); <span class=\"comment\">// 1</span></span><br><span class=\"line\">invokeConstructor(objRef); <span class=\"comment\">// 2objRef</span></span><br><span class=\"line\">aMap = objRef; <span class=\"comment\">// 3aMap</span></span><br></pre></td></tr></table></figure>\n<p>volatile312aMap</p>\n</li>\n<li><p>volatileJava<code></code><code></code></p>\n</li>\n<li><p>volatileJava<code></code><code></code></p>\n</li>\n<li><p>volatile<strong></strong></p>\n</li>\n<li><p>volatile<strong></strong></p>\n</li>\n<li><p>volatilevolatile</p>\n</li>\n<li><p>volatilevolatile</p>\n</li>\n<li><p>volatile</p>\n<ol>\n<li><p>volatile<code></code></p>\n</li>\n<li><p>volatile<code></code></p>\n</li>\n<li><p>volatile</p>\n</li>\n<li><p>volatile</p>\n</li>\n</ol>\n</li>\n<li><p>volatilevolatilevolatile</p>\n</li>\n<li><p><code></code>CAS<code>read-modify-write</code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>public</p>\n</li>\n<li><p>private</p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>static</code></p>\n</li>\n<li><p><code>static</code></p>\n</li>\n<li><p><code>static</code> </p>\n</li>\n<li><p><code>final</code></p>\n</li>\n<li><p><code>final</code><code>final</code></p>\n</li>\n<li><p>finalfinalfinal</p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>this</p>\n</li>\n<li><p>this</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p>this</p>\n</li>\n<li><p></p>\n<ol>\n<li><p>staic</p>\n</li>\n<li><p>final</p>\n</li>\n<li><p>volatile</p>\n</li>\n<li><p>AtomicReference</p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><p><strong></strong><strong></strong></p>\n</li>\n<li><p><code></code></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p></p>\n</li>\n<li><p> <code>CPU</code><code>IO</code></p>\n</li>\n<li><p>CPUCPUCPUIOIOIO</p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p><code>Amdahls </code><br>$$<br>S_{max} = \\frac{1}{P + \\frac{1 - P}{N}}<br>$$<br>NP</p>\n</li>\n<li><p><strong></strong></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n<ol>\n<li><p>CPU$N_{cpu} $CPU$N_{cpu}  + 1$</p>\n</li>\n<li><p>IOIO$2 * N_{cpu} $</p>\n</li>\n</ol>\n</li>\n<li><p><strong></strong></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2><ol>\n<li><p><code></code></p>\n</li>\n<li><p><code></code></p>\n</li>\n<li><p>waitObject.wait()</p>\n</li>\n<li><p>Object.wait()</p>\n</li>\n<li><p><code>Object.wait()</code>wait</p>\n</li>\n<li><p><code>Object.notify()</code>Object.notify()Object.notify() Object.notify()</p>\n</li>\n<li><p><code></code><code></code></p>\n</li>\n<li><p>Java<code></code>Java<code></code>Object.wait()</p>\n</li>\n<li><p>wait/notify</p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>Object.notify()</code><code>Object.notify()</code><code>notifyAll</code></p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p><code>join(long)</code><code>join(long)</code><code>wait/notify</code></p>\n</li>\n<li><p>Javarun<code>notifyAll</code></p>\n</li>\n<li><p><code>Condition</code><code>wait/notify</code>/<code>Object.wait(long)</code></p>\n</li>\n<li><p><code>Condition.await()/signal()</code>ConditionConditionCondition</p>\n</li>\n<li><p><code>Condition</code>await<code>signal/signalAll</code></p>\n</li>\n<li><p><code>Condition.awaitUntil(Date deadline)</code><code>signal/signalAll</code></p>\n</li>\n<li><p><code>Condition.await()/awaitUntil(Date)</code><code>Condition.await()/awaitUntil(Date)</code></p>\n</li>\n<li><p><code>CountDownLatch</code><code></code></p>\n</li>\n<li><p><code>CountDownLatch</code>0CountDownLatchawait<code>CountDownLatch.countDown()</code><code>finally</code></p>\n</li>\n<li><p><code>CyclicBarrier</code><code></code><code>CyclicBarrier.await()</code></p>\n</li>\n<li><p><code>CyclicBarrier.await()</code><code>CyclicBarrier</code></p>\n</li>\n<li><p><code>CyclicBarrier</code><code>CyclicBarrier</code></p>\n</li>\n<li><p>CyclicBarriertrip/CyclicBarrierCyclicBarrier</p>\n</li>\n<li><p>CyclicBarrier.await()parties0barrierAction.run() trip.signalAll()CyclicBarrierparties</p>\n</li>\n<li><p>CyclicBarrier:</p>\n<ol>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n</ol>\n</li>\n<li><p></p>\n</li>\n<li><p>/</p>\n</li>\n<li><p>Interger.MAX_VALUE($2^{31} - 1$)</p>\n</li>\n<li><p>ArrayBlockingQueueputtake</p>\n</li>\n<li><p>LinkedBlockingQueue</p>\n</li>\n<li><p>LinkedBlockingQueue\bputtakeputLocktakeLock\bLinkedBlockingQueueputtakeLinkedBlockingQueue</p>\n</li>\n<li><p>SynchronousQueue</p>\n</li>\n<li><p>SynchronousQueue</p>\n</li>\n<li>ArrayBlockingQueueSynchronousQueueLinkedBlockingQueue</li>\n<li>LinkedBlockingQueueArrayBlockingQueue</li>\n<li>put</li>\n<li>Semaphore.acquire()  Semaphore.release()</li>\n<li>Semaphore.release()finally</li>\n<li>Semaphorepermits1SemaphoreSemaphore.acquire()Semaphore.release()</li>\n<li>PipedOutputStreamPipedInputStream-</li>\n<li></li>\n<li></li>\n<li>Exchanger.exchange(V)xExchanger.exchange(V)</li>\n<li>Java</li>\n<li></li>\n<li>trueInterruptedException</li>\n<li>Java</li>\n<li>-run</li>\n</ol>\n<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\" \"></a> </h2>"},{"_content":"","source":"_posts/java/basic/java-data-type.md","raw":"","slug":"java/basic/java-data-type","published":1,"date":"2019-01-02T14:25:23.238Z","updated":"2019-01-02T14:25:23.238Z","title":"","comments":1,"layout":"post","photos":[],"link":"","_id":"cjxze3gqg00360cvwj6qr8zpg","content":"<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":""},{"_content":"","source":"_posts/java/basic/java-operator.md","raw":"","slug":"java/basic/java-operator","published":1,"date":"2019-01-02T14:25:23.238Z","updated":"2019-01-02T14:25:23.238Z","title":"","comments":1,"layout":"post","photos":[],"link":"","_id":"cjxze3gqg00380cvwwy1ni3bz","content":"<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":""},{"title":"","date":"2018-12-28T16:01:00.000Z","_content":"\n# \n\n## \n\n## \n","source":"_posts/architecture/domain-driven-design/ddd-steps.md","raw":"---\ntitle: \ntags: \n - \ncategories: \ndate: 2018-12-29 00:01:00\n---\n\n# \n\n## \n\n## \n","slug":"architecture/domain-driven-design/ddd-steps","published":1,"updated":"2019-06-04T01:29:57.093Z","_id":"cjxze3gt8003c0cvwedynwmt3","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>"},{"title":"Java","date":"2018-12-28T16:01:00.000Z","_content":"\n>  -- \n\n## \n\nJava Boss\n\nJavaJavaJavaJavaJava\n\n\n\n\n\n\n","source":"_posts/java/basic/java-basic.md","raw":"---\ntitle: Java\ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-29 00:01:00\n---\n\n>  -- \n\n## \n\nJava Boss\n\nJavaJavaJavaJavaJava\n\n\n\n\n\n\n","slug":"java/basic/java-basic","published":1,"updated":"2019-06-04T01:29:57.095Z","_id":"cjxze3gt8003d0cvwb0lqwidg","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java Boss</p>\n<p>JavaJavaJavaJavaJava</p>\n<p></p>\n<p></p>\n<p></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java Boss</p>\n<p>JavaJavaJavaJavaJava</p>\n<p></p>\n<p></p>\n<p></p>\n"},{"title":"","date":"2018-12-28T16:01:00.000Z","_content":"\n## \n\n\n\nDDDWebDDD\n\n## \n\nDDD\n\nserviceservice\n\n\n\n\n\n\n\n## \n\n1Eric Evans\n\n2 Vaughn Vernon\n\n3[DDD](https://www.jianshu.com/p/6e2917551e63)\n","source":"_posts/architecture/domain-driven-design/ddd-recommendation.md","raw":"---\ntitle: \ntags: \n - \ncategories: \ndate: 2018-12-29 00:01:00\n---\n\n## \n\n\n\nDDDWebDDD\n\n## \n\nDDD\n\nserviceservice\n\n\n\n\n\n\n\n## \n\n1Eric Evans\n\n2 Vaughn Vernon\n\n3[DDD](https://www.jianshu.com/p/6e2917551e63)\n","slug":"architecture/domain-driven-design/ddd-recommendation","published":1,"updated":"2019-06-04T01:29:57.093Z","_id":"cjxze3gti003f0cvww7vef0nc","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>DDDWebDDD</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>DDD</p>\n<p>serviceservice</p>\n<p></p>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>1Eric Evans</p>\n<p>2 Vaughn Vernon</p>\n<p>3<a href=\"https://www.jianshu.com/p/6e2917551e63\" target=\"_blank\" rel=\"noopener\">DDD</a></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>DDDWebDDD</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>DDD</p>\n<p>serviceservice</p>\n<p></p>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>1Eric Evans</p>\n<p>2 Vaughn Vernon</p>\n<p>3<a href=\"https://www.jianshu.com/p/6e2917551e63\" target=\"_blank\" rel=\"noopener\">DDD</a></p>\n"},{"title":"","date":"2018-12-28T16:01:00.000Z","_content":"\n## \n\nDomain-Driven-DesignDDD\n\n1. \n2. \n3. \n4. \n   1. \n   2. \n   3. \n   4. \n   5. \n   6. \n   7. \n5. \n6. MVCDDD\n7. \n8. ","source":"_posts/architecture/domain-driven-design/ddd-outline.md","raw":"---\ntitle: \ntags: \n - \ncategories: \ndate: 2018-12-29 00:01:00\n---\n\n## \n\nDomain-Driven-DesignDDD\n\n1. \n2. \n3. \n4. \n   1. \n   2. \n   3. \n   4. \n   5. \n   6. \n   7. \n5. \n6. MVCDDD\n7. \n8. ","slug":"architecture/domain-driven-design/ddd-outline","published":1,"updated":"2019-06-04T01:29:57.093Z","_id":"cjxze3gti003g0cvwmpx266el","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Domain-Driven-DesignDDD</p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li></li>\n<li>MVCDDD</li>\n<li></li>\n<li></li>\n</ol>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Domain-Driven-DesignDDD</p>\n<ol>\n<li></li>\n<li></li>\n<li></li>\n<li><ol>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ol>\n</li>\n<li></li>\n<li>MVCDDD</li>\n<li></li>\n<li></li>\n</ol>\n"},{"title":"Java","date":"2019-01-02T00:00:00.000Z","_content":"\n## \n\n``\n\nJava\n\n****\n\n## \n\nJava\n\n\n\n1. JDK\n2. \n3. JVM\n4. Spring\n5. Dubbo\n6. \n7. \n8. Mysql\n9. Redis\n10. \n\nbug.jpg\n\n","source":"_posts/java/interview/daily-interview-test.md","raw":"---\ntitle: Java\ntags: \n - Java\n - \ncategories: \ndate: 2019-01-02 08:00:00\n---\n\n## \n\n``\n\nJava\n\n****\n\n## \n\nJava\n\n\n\n1. JDK\n2. \n3. JVM\n4. Spring\n5. Dubbo\n6. \n7. \n8. Mysql\n9. Redis\n10. \n\nbug.jpg\n\n","slug":"java/interview/daily-interview-test","published":1,"updated":"2019-06-04T01:29:57.099Z","_id":"cjxze3gti003i0cvw5iyp6f9l","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<p>Java</p>\n<p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p></p>\n<ol>\n<li>JDK</li>\n<li></li>\n<li>JVM</li>\n<li>Spring</li>\n<li>Dubbo</li>\n<li></li>\n<li></li>\n<li>Mysql</li>\n<li>Redis</li>\n<li></li>\n</ol>\n<p>bug.jpg</p>\n<p></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code></p>\n<p>Java</p>\n<p><strong></strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p></p>\n<ol>\n<li>JDK</li>\n<li></li>\n<li>JVM</li>\n<li>Spring</li>\n<li>Dubbo</li>\n<li></li>\n<li></li>\n<li>Mysql</li>\n<li>Redis</li>\n<li></li>\n</ol>\n<p>bug.jpg</p>\n<p></p>\n"},{"title":"JavaJava packageimport","date":"2018-12-28T16:03:00.000Z","_content":"\n>   -- \n\n## \n\nJava\n\nJavapackageimport\n\n\n\n## package\n\nSimpleCalculatorSimpleCalculator.java\n\n\n\n```java\npackage hello;\n```\n\nhello\n\n## package\n\npackage\n\npackage\n\npackageJava\n\n## package\n\n\n\npackage`.//..`indionempersprivteamcom\n\n\n\ncom.frank.hello.controllerfrankfrank.comhellocontroller\n\n\n\nok\n\n## package\n\n1. package\n2. package\n3. package\n4. package`.``package com.frank.hello;`comfrankcomhellofrank\n5. \n6. package,java(java.lang)\n\n## import\n\n`SimpleCalculator`\n\n```java\nimport java.util.Scanner;\n```\n\nimport\n\nimportjava\n\nJDKimportScannerSystemSystem\n\njava.langimportjava.lang\n\n\n\n`*`\n\n```java\nimport java.util.*\n```\n\n`java.util`\n\n`*``*`\n\n# \n\npackageimport","source":"_posts/java/basic/java-package.md","raw":"---\ntitle: JavaJava packageimport\ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-29 00:03:00\n---\n\n>   -- \n\n## \n\nJava\n\nJavapackageimport\n\n\n\n## package\n\nSimpleCalculatorSimpleCalculator.java\n\n\n\n```java\npackage hello;\n```\n\nhello\n\n## package\n\npackage\n\npackage\n\npackageJava\n\n## package\n\n\n\npackage`.//..`indionempersprivteamcom\n\n\n\ncom.frank.hello.controllerfrankfrank.comhellocontroller\n\n\n\nok\n\n## package\n\n1. package\n2. package\n3. package\n4. package`.``package com.frank.hello;`comfrankcomhellofrank\n5. \n6. package,java(java.lang)\n\n## import\n\n`SimpleCalculator`\n\n```java\nimport java.util.Scanner;\n```\n\nimport\n\nimportjava\n\nJDKimportScannerSystemSystem\n\njava.langimportjava.lang\n\n\n\n`*`\n\n```java\nimport java.util.*\n```\n\n`java.util`\n\n`*``*`\n\n# \n\npackageimport","slug":"java/basic/java-package","published":1,"updated":"2019-06-04T01:29:57.096Z","_id":"cjxze3gti003m0cvwyjtapemc","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>   </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>Javapackageimport</p>\n<p></p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p>SimpleCalculatorSimpleCalculator.java</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br></pre></td></tr></table></figure>\n<p>hello</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p>package</p>\n<p>package</p>\n<p>packageJava</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p></p>\n<p>package<code>.//..</code>indionempersprivteamcom</p>\n<p></p>\n<p>com.frank.hello.controllerfrankfrank.comhellocontroller</p>\n<p></p>\n<p>ok</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><ol>\n<li>package</li>\n<li>package</li>\n<li>package</li>\n<li>package<code>.</code><code>package com.frank.hello;</code>comfrankcomhellofrank</li>\n<li></li>\n<li>package,java(java.lang)</li>\n</ol>\n<h2 id=\"import\"><a href=\"#import\" class=\"headerlink\" title=\"import\"></a>import</h2><p><code>SimpleCalculator</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br></pre></td></tr></table></figure>\n<p>import</p>\n<p>importjava</p>\n<p>JDKimportScannerSystemSystem</p>\n<p>java.langimportjava.lang</p>\n<p></p>\n<p><code>*</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.*</span><br></pre></td></tr></table></figure>\n<p><code>java.util</code></p>\n<p><code>*</code><code>*</code></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>packageimport</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>   </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>Javapackageimport</p>\n<p></p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p>SimpleCalculatorSimpleCalculator.java</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br></pre></td></tr></table></figure>\n<p>hello</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p>package</p>\n<p>package</p>\n<p>packageJava</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><p></p>\n<p>package<code>.//..</code>indionempersprivteamcom</p>\n<p></p>\n<p>com.frank.hello.controllerfrankfrank.comhellocontroller</p>\n<p></p>\n<p>ok</p>\n<h2 id=\"package\"><a href=\"#package\" class=\"headerlink\" title=\"package\"></a>package</h2><ol>\n<li>package</li>\n<li>package</li>\n<li>package</li>\n<li>package<code>.</code><code>package com.frank.hello;</code>comfrankcomhellofrank</li>\n<li></li>\n<li>package,java(java.lang)</li>\n</ol>\n<h2 id=\"import\"><a href=\"#import\" class=\"headerlink\" title=\"import\"></a>import</h2><p><code>SimpleCalculator</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br></pre></td></tr></table></figure>\n<p>import</p>\n<p>importjava</p>\n<p>JDKimportScannerSystemSystem</p>\n<p>java.langimportjava.lang</p>\n<p></p>\n<p><code>*</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.*</span><br></pre></td></tr></table></figure>\n<p><code>java.util</code></p>\n<p><code>*</code><code>*</code></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>packageimport</p>\n"},{"title":"JavaJava ","date":"2018-12-28T16:02:00.000Z","_content":"\n>No matter how small and unimportant what we are doing may seem, if we do it well, it may soon become the step that will lead us to better things.\t\t\t\t Channing Pollock, Writer\n>\n>\t\t\t\t\t\t\t\t  ()\n\n## \n\nJava\n\nJava\n\n\n\n## \n\nJavaJava\n\n\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class SimpleCalculator {\n    public static void main(String[] args){\n        System.out.print(\":\");\n        Scanner in = new Scanner(System.in);\n        int a = in.nextInt();\n        System.out.print(\":\");\n        int b = in.nextInt();\n        int sum = a + b;\n        System.out.print(\":\" + sum);\n    }\n}\n```\n\nJava\n\n[](../introduction/java-package.md)\n\n```java\npublic class SimpleCalculator {\n    ...\n}\n```\n\n`SimpleCalculator``public` **`public` `class` \n\n**Java**\n\n```java\npublic static void main(String[] args){\n    ...\n}\n```\n\nmainclass`public``static``void``main``String[] args`String`args`\n\n\n\n`main`java`main``main`\n\nJava\n\n```java\nSystem.out.print(\":\");\nScanner in = new Scanner(System.in);\nint a = in.nextInt();\nSystem.out.print(\":\");\nint b = in.nextInt();\nint sum = a + b;\nSystem.out.print(\":\" + sum);\n```\n\nJava`System.out.print(...)``System.out``print`\n\n# \n\nJavaJavamain\n","source":"_posts/java/basic/java-simple-structure.md","raw":"---\ntitle: JavaJava \ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-29 00:02:00\n---\n\n>No matter how small and unimportant what we are doing may seem, if we do it well, it may soon become the step that will lead us to better things.\t\t\t\t Channing Pollock, Writer\n>\n>\t\t\t\t\t\t\t\t  ()\n\n## \n\nJava\n\nJava\n\n\n\n## \n\nJavaJava\n\n\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class SimpleCalculator {\n    public static void main(String[] args){\n        System.out.print(\":\");\n        Scanner in = new Scanner(System.in);\n        int a = in.nextInt();\n        System.out.print(\":\");\n        int b = in.nextInt();\n        int sum = a + b;\n        System.out.print(\":\" + sum);\n    }\n}\n```\n\nJava\n\n[](../introduction/java-package.md)\n\n```java\npublic class SimpleCalculator {\n    ...\n}\n```\n\n`SimpleCalculator``public` **`public` `class` \n\n**Java**\n\n```java\npublic static void main(String[] args){\n    ...\n}\n```\n\nmainclass`public``static``void``main``String[] args`String`args`\n\n\n\n`main`java`main``main`\n\nJava\n\n```java\nSystem.out.print(\":\");\nScanner in = new Scanner(System.in);\nint a = in.nextInt();\nSystem.out.print(\":\");\nint b = in.nextInt();\nint sum = a + b;\nSystem.out.print(\":\" + sum);\n```\n\nJava`System.out.print(...)``System.out``print`\n\n# \n\nJavaJavamain\n","slug":"java/basic/java-simple-structure","published":1,"updated":"2019-06-04T01:29:57.096Z","_id":"cjxze3gts003p0cvwtocl9s2y","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>No matter how small and unimportant what we are doing may seem, if we do it well, it may soon become the step that will lead us to better things.                 Channing Pollock, Writer</p>\n<p>                                  ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Java</p>\n<p><a href=\"../introduction/java-package.md\"></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>SimpleCalculator</code><code>public</code> <em></em><code>public</code> <code>class</code> </p>\n<p><strong>Java</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>mainclass<code>public</code><code>static</code><code>void</code><code>main</code><code>String[] args</code>String<code>args</code></p>\n<p></p>\n<p><code>main</code>java<code>main</code><code>main</code></p>\n<p>Java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\"><span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\"><span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br></pre></td></tr></table></figure>\n<p>Java<code>System.out.print(...)</code><code>System.out</code><code>print</code></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>JavaJavamain</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>No matter how small and unimportant what we are doing may seem, if we do it well, it may soon become the step that will lead us to better things.                 Channing Pollock, Writer</p>\n<p>                                  ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Java</p>\n<p><a href=\"../introduction/java-package.md\"></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>SimpleCalculator</code><code>public</code> <em></em><code>public</code> <code>class</code> </p>\n<p><strong>Java</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>mainclass<code>public</code><code>static</code><code>void</code><code>main</code><code>String[] args</code>String<code>args</code></p>\n<p></p>\n<p><code>main</code>java<code>main</code><code>main</code></p>\n<p>Java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\"><span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\"><span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br></pre></td></tr></table></figure>\n<p>Java<code>System.out.print(...)</code><code>System.out</code><code>print</code></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>JavaJavamain</p>\n"},{"title":"JavaJava ","date":"2018-12-28T16:04:00.000Z","_content":"\n>**The superior man makes the difficulty to be overcome his first interest; success comes only later.**\n>\n> William Jennings Bryan\n>\n>****      ()\n\n## \n\nJavaJava\n\n\n\n\n\n## \n\n\n\n\n\n### \n\nJava\n\n\n\n\n\n```java\npublic static void main(String[] args){\n    System.out.print(\":\");\n    Scanner in = new Scanner(System.in);\n    int a = in.nextInt();\n    System.out.print(\":\");\n    int b = in.nextInt();\n    int sum = a + b;\n    System.out.print(\":\" + sum);\n}\n```\n\n`in`Scanner`a``b``sum``a``b`\n\n\n\n### \n\n\n\n```java\npublic static void main(String[] args){\n    System.out.print(\"\");\n}\n```\n\nemmm\n\n\n\n### \n\n\n\n```java\n[] + []\n```\n\n`int a`  `int` `a` \n\n\n\n`=` java\n\n\n\n```java\npublic static void main(String[] args){\n    int a = 1;\n    System.out.println(\"a\" + a);\n    a = 2;\n    System.out.println(\"a\" + a);\n    a = 3;\n    System.out.println(\"a\" + a);\n    int b;\n    System.out.println(\"b\" + b);\n    b = a;\n    System.out.println(\"b\" + b);\n}\n```\n\n\n\n```java\na1\na2\na3\nb0\nb3\n```\n\n`System.out.println`  `System.out.print` \n\n### \n\n$javajava `public``static``int``void`\n\n`a1``a2``a3`\n\nJava`totalDays``paperWidth`\n\n## \n\nJava\n","source":"_posts/java/basic/java-variable.md","raw":"---\ntitle: JavaJava \ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-29 00:04:00\n---\n\n>**The superior man makes the difficulty to be overcome his first interest; success comes only later.**\n>\n> William Jennings Bryan\n>\n>****      ()\n\n## \n\nJavaJava\n\n\n\n\n\n## \n\n\n\n\n\n### \n\nJava\n\n\n\n\n\n```java\npublic static void main(String[] args){\n    System.out.print(\":\");\n    Scanner in = new Scanner(System.in);\n    int a = in.nextInt();\n    System.out.print(\":\");\n    int b = in.nextInt();\n    int sum = a + b;\n    System.out.print(\":\" + sum);\n}\n```\n\n`in`Scanner`a``b``sum``a``b`\n\n\n\n### \n\n\n\n```java\npublic static void main(String[] args){\n    System.out.print(\"\");\n}\n```\n\nemmm\n\n\n\n### \n\n\n\n```java\n[] + []\n```\n\n`int a`  `int` `a` \n\n\n\n`=` java\n\n\n\n```java\npublic static void main(String[] args){\n    int a = 1;\n    System.out.println(\"a\" + a);\n    a = 2;\n    System.out.println(\"a\" + a);\n    a = 3;\n    System.out.println(\"a\" + a);\n    int b;\n    System.out.println(\"b\" + b);\n    b = a;\n    System.out.println(\"b\" + b);\n}\n```\n\n\n\n```java\na1\na2\na3\nb0\nb3\n```\n\n`System.out.println`  `System.out.print` \n\n### \n\n$javajava `public``static``int``void`\n\n`a1``a2``a3`\n\nJava`totalDays``paperWidth`\n\n## \n\nJava\n","slug":"java/basic/java-variable","published":1,"updated":"2019-06-04T01:29:57.096Z","_id":"cjxze3gts003t0cvw5vjgjxgw","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p><strong>The superior man makes the difficulty to be overcome his first interest; success comes only later.</strong></p>\n<p> William Jennings Bryan</p>\n<p><strong></strong>      ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Java</p>\n<p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">    Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>in</code>Scanner<code>a</code><code>b</code><code>sum</code><code>a</code><code>b</code></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emmm</p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[] + []</span><br></pre></td></tr></table></figure>\n<p><code>int a</code>  <code>int</code> <code>a</code> </p>\n<p></p>\n<p><code>=</code> java</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    a = <span class=\"number\">2</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    a = <span class=\"number\">3</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> b;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"b\"</span> + b);</span><br><span class=\"line\">    b = a;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"b\"</span> + b);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a<span class=\"number\">1</span></span><br><span class=\"line\">a<span class=\"number\">2</span></span><br><span class=\"line\">a<span class=\"number\">3</span></span><br><span class=\"line\">b<span class=\"number\">0</span></span><br><span class=\"line\">b<span class=\"number\">3</span></span><br></pre></td></tr></table></figure>\n<p><code>System.out.println</code>  <code>System.out.print</code> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>$javajava <code>public</code><code>static</code><code>int</code><code>void</code></p>\n<p><code>a1</code><code>a2</code><code>a3</code></p>\n<p>Java<code>totalDays</code><code>paperWidth</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p><strong>The superior man makes the difficulty to be overcome his first interest; success comes only later.</strong></p>\n<p> William Jennings Bryan</p>\n<p><strong></strong>      ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Java</p>\n<p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">    Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>in</code>Scanner<code>a</code><code>b</code><code>sum</code><code>a</code><code>b</code></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    System.out.print(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emmm</p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[] + []</span><br></pre></td></tr></table></figure>\n<p><code>int a</code>  <code>int</code> <code>a</code> </p>\n<p></p>\n<p><code>=</code> java</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    a = <span class=\"number\">2</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    a = <span class=\"number\">3</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"a\"</span> + a);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> b;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"b\"</span> + b);</span><br><span class=\"line\">    b = a;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"b\"</span> + b);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a<span class=\"number\">1</span></span><br><span class=\"line\">a<span class=\"number\">2</span></span><br><span class=\"line\">a<span class=\"number\">3</span></span><br><span class=\"line\">b<span class=\"number\">0</span></span><br><span class=\"line\">b<span class=\"number\">3</span></span><br></pre></td></tr></table></figure>\n<p><code>System.out.println</code>  <code>System.out.print</code> </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>$javajava <code>public</code><code>static</code><code>int</code><code>void</code></p>\n<p><code>a1</code><code>a2</code><code>a3</code></p>\n<p>Java<code>totalDays</code><code>paperWidth</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n"},{"title":"JavaJava","date":"2018-12-28T11:00:01.000Z","_content":"\n> \n\n## \n\nJavaJDK\n\nJVMJREJDK\n\n## JVMJava Virtual Machine\n\nJVM  JavaJava\n\nJavawindowslinuxmacJVMJVMJava.class\n\nJVMHotSpotJ9 VMZing VM\n\n## JREJava Runtime Environment\n\nJRE  Java Java JVMJVMJavaJavaJVMclassclassJVMlib JVMJRE \n\n## JDKJava Development Kit\n\nJDK  Java  Java JRE\n\nJDKJREJREJVMJDKJavaJDKJavaJRE\n","source":"_posts/java/introduction/java-environment.md","raw":"---\ntitle: JavaJava\ntags: \n - Java\n - Java\n - \ncategories: \ndate: 2018-12-28 19:00:01\n---\n\n> \n\n## \n\nJavaJDK\n\nJVMJREJDK\n\n## JVMJava Virtual Machine\n\nJVM  JavaJava\n\nJavawindowslinuxmacJVMJVMJava.class\n\nJVMHotSpotJ9 VMZing VM\n\n## JREJava Runtime Environment\n\nJRE  Java Java JVMJVMJavaJavaJVMclassclassJVMlib JVMJRE \n\n## JDKJava Development Kit\n\nJDK  Java  Java JRE\n\nJDKJREJREJVMJDKJavaJDKJavaJRE\n","slug":"java/introduction/java-environment","published":1,"updated":"2019-06-04T01:29:57.318Z","_id":"cjxze3gu2003w0cvwfcifyf9a","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJDK</p>\n<p>JVMJREJDK</p>\n<h2 id=\"JVMJava-Virtual-Machine\"><a href=\"#JVMJava-Virtual-Machine\" class=\"headerlink\" title=\"JVMJava Virtual Machine\"></a>JVMJava Virtual Machine</h2><p>JVM  JavaJava</p>\n<p>JavawindowslinuxmacJVMJVMJava.class</p>\n<p>JVMHotSpotJ9 VMZing VM</p>\n<h2 id=\"JREJava-Runtime-Environment\"><a href=\"#JREJava-Runtime-Environment\" class=\"headerlink\" title=\"JREJava Runtime Environment\"></a>JREJava Runtime Environment</h2><p>JRE  Java Java JVMJVMJavaJavaJVMclassclassJVMlib JVMJRE </p>\n<h2 id=\"JDKJava-Development-Kit\"><a href=\"#JDKJava-Development-Kit\" class=\"headerlink\" title=\"JDKJava Development Kit\"></a>JDKJava Development Kit</h2><p>JDK  Java  Java JRE</p>\n<p>JDKJREJREJVMJDKJavaJDKJavaJRE</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJDK</p>\n<p>JVMJREJDK</p>\n<h2 id=\"JVMJava-Virtual-Machine\"><a href=\"#JVMJava-Virtual-Machine\" class=\"headerlink\" title=\"JVMJava Virtual Machine\"></a>JVMJava Virtual Machine</h2><p>JVM  JavaJava</p>\n<p>JavawindowslinuxmacJVMJVMJava.class</p>\n<p>JVMHotSpotJ9 VMZing VM</p>\n<h2 id=\"JREJava-Runtime-Environment\"><a href=\"#JREJava-Runtime-Environment\" class=\"headerlink\" title=\"JREJava Runtime Environment\"></a>JREJava Runtime Environment</h2><p>JRE  Java Java JVMJVMJavaJavaJVMclassclassJVMlib JVMJRE </p>\n<h2 id=\"JDKJava-Development-Kit\"><a href=\"#JDKJava-Development-Kit\" class=\"headerlink\" title=\"JDKJava Development Kit\"></a>JDKJava Development Kit</h2><p>JDK  Java  Java JRE</p>\n<p>JDKJREJREJVMJDKJavaJDKJavaJRE</p>\n"},{"title":"JavaJavaMac","date":"2018-12-28T11:00:03.000Z","_content":"\n>  --\n\n## \n\n\n\n1.OracleJDK1.8\n\n2.\n\n3.\n\n4.JDK1.8\n\njdk8[](https://blog.csdn.net/deliciousion/article/details/78046007)\n\n## JDK8\n\nOracleJDK1.8\n\nhttps://www.oracle.com/index.html\n\nOracle\n\n{% asset_img 1-jdk-mac.png jdk-mac %}\n\nDownload Java for Developers\n\n{% asset_img 2-jdk-mac.png jdk-mac %}\n\nJDK1.8JDK1.8NetBeansJAVA IDE\n\n{% asset_img 3-jdk-mac.png jdk-mac %}\n\nAccept License AgreementJDKMAC OS X\n\n{% asset_img 4-jdk-mac.png jdk-mac %}\n\n## JDK\n\ndmg jdk-8u144-macosx-x64.dmg Java 8144JDK\n\n{% asset_img 5-jdk-mac.png jdk-mac %}\n\ndmg\n\n{% asset_img 6-jdk-mac.png jdk-mac %}\n\npkg\n\n{% asset_img 7-jdk-mac.png jdk-mac %}\n\n{% asset_img 9-jdk-mac.png jdk-mac %}\n\n{% asset_img 10-jdk-mac.png jdk-mac %}\n\n## \n\nJDK1.8terminalJAVAJDK1.8\n\nJDKJDKJDK1.8\n\n/Library/Java/JavaVirtualMachines\n\n{% asset_img 11-jdk-mac.png jdk-mac %}\n\n\nMACWINDOWSjdk\n\n/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home\n\nterminalhomecd\n\n{% asset_img 12-jdk-mac.png jdk-mac %}\n\n vim .bash_profile \n\n{% asset_img 13-jdk-mac.png jdk-mac %}\n\nvimIESC:wq\n\n{% asset_img 14-jdk-mac.png jdk-mac %}\n\n\n\n```bash\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home\n```\n\njdk1.8.0_45JDK/Library/Java/JavaVirtualMachines/\n\n## JDK1.8\n\njava,\n\n{% asset_img 15-jdk-mac.png jdk-mac %}\n\njava -version\n\n{% asset_img 16-jdk-mac.png jdk-mac %}\n\nJDK1.8\n","source":"_posts/java/introduction/java-environment-mac.md","raw":"---\ntitle: JavaJavaMac\ntags: \n - Java\n - Java\n - \ncategories: \ndate: 2018-12-28 19:00:03\n---\n\n>  --\n\n## \n\n\n\n1.OracleJDK1.8\n\n2.\n\n3.\n\n4.JDK1.8\n\njdk8[](https://blog.csdn.net/deliciousion/article/details/78046007)\n\n## JDK8\n\nOracleJDK1.8\n\nhttps://www.oracle.com/index.html\n\nOracle\n\n{% asset_img 1-jdk-mac.png jdk-mac %}\n\nDownload Java for Developers\n\n{% asset_img 2-jdk-mac.png jdk-mac %}\n\nJDK1.8JDK1.8NetBeansJAVA IDE\n\n{% asset_img 3-jdk-mac.png jdk-mac %}\n\nAccept License AgreementJDKMAC OS X\n\n{% asset_img 4-jdk-mac.png jdk-mac %}\n\n## JDK\n\ndmg jdk-8u144-macosx-x64.dmg Java 8144JDK\n\n{% asset_img 5-jdk-mac.png jdk-mac %}\n\ndmg\n\n{% asset_img 6-jdk-mac.png jdk-mac %}\n\npkg\n\n{% asset_img 7-jdk-mac.png jdk-mac %}\n\n{% asset_img 9-jdk-mac.png jdk-mac %}\n\n{% asset_img 10-jdk-mac.png jdk-mac %}\n\n## \n\nJDK1.8terminalJAVAJDK1.8\n\nJDKJDKJDK1.8\n\n/Library/Java/JavaVirtualMachines\n\n{% asset_img 11-jdk-mac.png jdk-mac %}\n\n\nMACWINDOWSjdk\n\n/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home\n\nterminalhomecd\n\n{% asset_img 12-jdk-mac.png jdk-mac %}\n\n vim .bash_profile \n\n{% asset_img 13-jdk-mac.png jdk-mac %}\n\nvimIESC:wq\n\n{% asset_img 14-jdk-mac.png jdk-mac %}\n\n\n\n```bash\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home\n```\n\njdk1.8.0_45JDK/Library/Java/JavaVirtualMachines/\n\n## JDK1.8\n\njava,\n\n{% asset_img 15-jdk-mac.png jdk-mac %}\n\njava -version\n\n{% asset_img 16-jdk-mac.png jdk-mac %}\n\nJDK1.8\n","slug":"java/introduction/java-environment-mac","published":1,"updated":"2019-06-04T01:29:57.294Z","_id":"cjxze3guc00400cvw3xggpta5","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p> </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>1.OracleJDK1.8</p>\n<p>2.</p>\n<p>3.</p>\n<p>4.JDK1.8</p>\n<p>jdk8<a href=\"https://blog.csdn.net/deliciousion/article/details/78046007\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h2 id=\"JDK8\"><a href=\"#JDK8\" class=\"headerlink\" title=\"JDK8\"></a>JDK8</h2><p>OracleJDK1.8</p>\n<p><a href=\"https://www.oracle.com/index.html\" target=\"_blank\" rel=\"noopener\">https://www.oracle.com/index.html</a></p>\n<p>Oracle</p>\n<img src=\"/programming/java/introduction/java-environment-mac/1-jdk-mac.png\" title=\"jdk-mac\">\n<p>Download Java for Developers</p>\n<img src=\"/programming/java/introduction/java-environment-mac/2-jdk-mac.png\" title=\"jdk-mac\">\n<p>JDK1.8JDK1.8NetBeansJAVA IDE</p>\n<img src=\"/programming/java/introduction/java-environment-mac/3-jdk-mac.png\" title=\"jdk-mac\">\n<p>Accept License AgreementJDKMAC OS X</p>\n<img src=\"/programming/java/introduction/java-environment-mac/4-jdk-mac.png\" title=\"jdk-mac\">\n<h2 id=\"JDK\"><a href=\"#JDK\" class=\"headerlink\" title=\"JDK\"></a>JDK</h2><p>dmg jdk-8u144-macosx-x64.dmg Java 8144JDK</p>\n<img src=\"/programming/java/introduction/java-environment-mac/5-jdk-mac.png\" title=\"jdk-mac\">\n<p>dmg</p>\n<img src=\"/programming/java/introduction/java-environment-mac/6-jdk-mac.png\" title=\"jdk-mac\">\n<p>pkg</p>\n<img src=\"/programming/java/introduction/java-environment-mac/7-jdk-mac.png\" title=\"jdk-mac\">\n<img src=\"/programming/java/introduction/java-environment-mac/9-jdk-mac.png\" title=\"jdk-mac\">\n<img src=\"/programming/java/introduction/java-environment-mac/10-jdk-mac.png\" title=\"jdk-mac\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK1.8terminalJAVAJDK1.8</p>\n<p>JDKJDKJDK1.8</p>\n<p>/Library/Java/JavaVirtualMachines</p>\n<img src=\"/programming/java/introduction/java-environment-mac/11-jdk-mac.png\" title=\"jdk-mac\">\n<p>MACWINDOWSjdk</p>\n<p>/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home</p>\n<p>terminalhomecd</p>\n<img src=\"/programming/java/introduction/java-environment-mac/12-jdk-mac.png\" title=\"jdk-mac\">\n<p> vim .bash_profile </p>\n<img src=\"/programming/java/introduction/java-environment-mac/13-jdk-mac.png\" title=\"jdk-mac\">\n<p>vimIESC:wq</p>\n<img src=\"/programming/java/introduction/java-environment-mac/14-jdk-mac.png\" title=\"jdk-mac\">\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home</span><br></pre></td></tr></table></figure>\n<p>jdk1.8.0_45JDK/Library/Java/JavaVirtualMachines/</p>\n<h2 id=\"JDK1-8\"><a href=\"#JDK1-8\" class=\"headerlink\" title=\"JDK1.8\"></a>JDK1.8</h2><p>java,</p>\n<img src=\"/programming/java/introduction/java-environment-mac/15-jdk-mac.png\" title=\"jdk-mac\">\n<p>java -version</p>\n<img src=\"/programming/java/introduction/java-environment-mac/16-jdk-mac.png\" title=\"jdk-mac\">\n<p>JDK1.8</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p> </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>1.OracleJDK1.8</p>\n<p>2.</p>\n<p>3.</p>\n<p>4.JDK1.8</p>\n<p>jdk8<a href=\"https://blog.csdn.net/deliciousion/article/details/78046007\" target=\"_blank\" rel=\"noopener\"></a></p>\n<h2 id=\"JDK8\"><a href=\"#JDK8\" class=\"headerlink\" title=\"JDK8\"></a>JDK8</h2><p>OracleJDK1.8</p>\n<p><a href=\"https://www.oracle.com/index.html\" target=\"_blank\" rel=\"noopener\">https://www.oracle.com/index.html</a></p>\n<p>Oracle</p>\n<img src=\"/programming/java/introduction/java-environment-mac/1-jdk-mac.png\" title=\"jdk-mac\">\n<p>Download Java for Developers</p>\n<img src=\"/programming/java/introduction/java-environment-mac/2-jdk-mac.png\" title=\"jdk-mac\">\n<p>JDK1.8JDK1.8NetBeansJAVA IDE</p>\n<img src=\"/programming/java/introduction/java-environment-mac/3-jdk-mac.png\" title=\"jdk-mac\">\n<p>Accept License AgreementJDKMAC OS X</p>\n<img src=\"/programming/java/introduction/java-environment-mac/4-jdk-mac.png\" title=\"jdk-mac\">\n<h2 id=\"JDK\"><a href=\"#JDK\" class=\"headerlink\" title=\"JDK\"></a>JDK</h2><p>dmg jdk-8u144-macosx-x64.dmg Java 8144JDK</p>\n<img src=\"/programming/java/introduction/java-environment-mac/5-jdk-mac.png\" title=\"jdk-mac\">\n<p>dmg</p>\n<img src=\"/programming/java/introduction/java-environment-mac/6-jdk-mac.png\" title=\"jdk-mac\">\n<p>pkg</p>\n<img src=\"/programming/java/introduction/java-environment-mac/7-jdk-mac.png\" title=\"jdk-mac\">\n<img src=\"/programming/java/introduction/java-environment-mac/9-jdk-mac.png\" title=\"jdk-mac\">\n<img src=\"/programming/java/introduction/java-environment-mac/10-jdk-mac.png\" title=\"jdk-mac\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK1.8terminalJAVAJDK1.8</p>\n<p>JDKJDKJDK1.8</p>\n<p>/Library/Java/JavaVirtualMachines</p>\n<img src=\"/programming/java/introduction/java-environment-mac/11-jdk-mac.png\" title=\"jdk-mac\">\n<p>MACWINDOWSjdk</p>\n<p>/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home</p>\n<p>terminalhomecd</p>\n<img src=\"/programming/java/introduction/java-environment-mac/12-jdk-mac.png\" title=\"jdk-mac\">\n<p> vim .bash_profile </p>\n<img src=\"/programming/java/introduction/java-environment-mac/13-jdk-mac.png\" title=\"jdk-mac\">\n<p>vimIESC:wq</p>\n<img src=\"/programming/java/introduction/java-environment-mac/14-jdk-mac.png\" title=\"jdk-mac\">\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home</span><br></pre></td></tr></table></figure>\n<p>jdk1.8.0_45JDK/Library/Java/JavaVirtualMachines/</p>\n<h2 id=\"JDK1-8\"><a href=\"#JDK1-8\" class=\"headerlink\" title=\"JDK1.8\"></a>JDK1.8</h2><p>java,</p>\n<img src=\"/programming/java/introduction/java-environment-mac/15-jdk-mac.png\" title=\"jdk-mac\">\n<p>java -version</p>\n<img src=\"/programming/java/introduction/java-environment-mac/16-jdk-mac.png\" title=\"jdk-mac\">\n<p>JDK1.8</p>\n"},{"title":"JavaJava ","date":"2018-12-28T16:05:00.000Z","_content":"\n# Java \n\n>**Sometimes we stare so long at a door that is closing that we see too late the one that is open.**\n>\n> Alexander Graham Bell, Inventor\n>\n>****  ()\n\n## \n\nJavaJava\n\nJava\n\n\n\n## \n\nObject Oriented Programming OOPJavaOOPJava\n\n\n\n\n\n>  +  = \n\n\n\nOOP\n\n100010010101000\n\n## Java\n\n\n\n\n\n\n\n> \n\n\n\n## \n\n\n\n```java\npublic class Person{\n    private String name;\n    private int age;\n    \n    public Person(String name, int age){\n        this.name = name;\n        this.age = age;\n    }\n    \n    public void eat(){\n        System.out.println(\"...\");\n    }\n    \n    public void say(){\n        System.out.println(\"\" + name + \"\" + age + \"\");\n    }\n}\n```\n\n`Person``name``age`Person\n\n\n\n```java\npublic class Person{\n\t...\n}\n```\n\n\n\n> [] + class + [] \n\n`public`\n\n`class`Java\n\n$JavaSmallCarSecondhandBook\n\n## \n\nPerson\n\n```java\nprivate String name;\nprivate int age;\n```\n\nPersonPerson`name``age`\n\n\n\n> [] + [] + []\n\n\n\n> [] + [] + []\n\n```java\npublic void eat(){\n    System.out.println(\"...\");\n}\n\npublic void say(){\n    System.out.println(\"\" + name + \"\" + age + \"\");\n}\n```\n\n`void``a1``a2`\n\n\n\n```java\npublic Person(String name, int age){\n    this.name = name;\n    this.age = age;\n}\n```\n\n****`String``int``name``age``this``this.name``this.age`\n\n## \n\n`new`PersonmainmainPerson\n\n```java\npublic class Person {\n    ...\n\n    public static void main(String[] args){\n        Person alice = new Person(\"Alice\", 18);\n        alice.say();\n        alice.eat();\n    }\n}\n```\n\n\n\n```bash\nAlice18\n...\n```\n\n`new`\n\n```java\nPerson alice = new Person(\"Alice\", 18);\n```\n\n\n\n> [] + []\n\nPersonalice`Alice``18`alice\n\n`say``eat`\n\n> [] +  + [] + []\n\n```java\nalice.say();\nalice.eat();\n```\n\n\n\n# \n\n\n\n","source":"_posts/java/basic/java-class.md","raw":"---\ntitle: JavaJava \ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-29 00:05:00\n---\n\n# Java \n\n>**Sometimes we stare so long at a door that is closing that we see too late the one that is open.**\n>\n> Alexander Graham Bell, Inventor\n>\n>****  ()\n\n## \n\nJavaJava\n\nJava\n\n\n\n## \n\nObject Oriented Programming OOPJavaOOPJava\n\n\n\n\n\n>  +  = \n\n\n\nOOP\n\n100010010101000\n\n## Java\n\n\n\n\n\n\n\n> \n\n\n\n## \n\n\n\n```java\npublic class Person{\n    private String name;\n    private int age;\n    \n    public Person(String name, int age){\n        this.name = name;\n        this.age = age;\n    }\n    \n    public void eat(){\n        System.out.println(\"...\");\n    }\n    \n    public void say(){\n        System.out.println(\"\" + name + \"\" + age + \"\");\n    }\n}\n```\n\n`Person``name``age`Person\n\n\n\n```java\npublic class Person{\n\t...\n}\n```\n\n\n\n> [] + class + [] \n\n`public`\n\n`class`Java\n\n$JavaSmallCarSecondhandBook\n\n## \n\nPerson\n\n```java\nprivate String name;\nprivate int age;\n```\n\nPersonPerson`name``age`\n\n\n\n> [] + [] + []\n\n\n\n> [] + [] + []\n\n```java\npublic void eat(){\n    System.out.println(\"...\");\n}\n\npublic void say(){\n    System.out.println(\"\" + name + \"\" + age + \"\");\n}\n```\n\n`void``a1``a2`\n\n\n\n```java\npublic Person(String name, int age){\n    this.name = name;\n    this.age = age;\n}\n```\n\n****`String``int``name``age``this``this.name``this.age`\n\n## \n\n`new`PersonmainmainPerson\n\n```java\npublic class Person {\n    ...\n\n    public static void main(String[] args){\n        Person alice = new Person(\"Alice\", 18);\n        alice.say();\n        alice.eat();\n    }\n}\n```\n\n\n\n```bash\nAlice18\n...\n```\n\n`new`\n\n```java\nPerson alice = new Person(\"Alice\", 18);\n```\n\n\n\n> [] + []\n\nPersonalice`Alice``18`alice\n\n`say``eat`\n\n> [] +  + [] + []\n\n```java\nalice.say();\nalice.eat();\n```\n\n\n\n# \n\n\n\n","slug":"java/basic/java-class","published":1,"updated":"2019-06-04T01:29:57.095Z","_id":"cjxze3gum00430cvwm6fg8irc","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h1><blockquote>\n<p><strong>Sometimes we stare so long at a door that is closing that we see too late the one that is open.</strong></p>\n<p> Alexander Graham Bell, Inventor</p>\n<p><strong></strong>  ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Object Oriented Programming OOPJavaOOPJava</p>\n<p></p>\n<p></p>\n<blockquote>\n<p> +  = </p>\n</blockquote>\n<p></p>\n<p>OOP</p>\n<p>100010010101000</p>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p></p>\n<p></p>\n<p></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Person</span><span class=\"params\">(String name, <span class=\"keyword\">int</span> age)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">eat</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"...\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">say</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + name + <span class=\"string\">\"\"</span> + age + <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Person</code><code>name</code><code>age</code>Person</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span>&#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>[] + class + [] </p>\n</blockquote>\n<p><code>public</code></p>\n<p><code>class</code>Java</p>\n<p>$JavaSmallCarSecondhandBook</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Person</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br></pre></td></tr></table></figure>\n<p>PersonPerson<code>name</code><code>age</code></p>\n<p></p>\n<blockquote>\n<p>[] + [] + []</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>[] + [] + []</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">eat</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"...\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">say</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\"</span> + name + <span class=\"string\">\"\"</span> + age + <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>void</code><code>a1</code><code>a2</code></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Person</span><span class=\"params\">(String name, <span class=\"keyword\">int</span> age)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong><code>String</code><code>int</code><code>name</code><code>age</code><code>this</code><code>this.name</code><code>this.age</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>new</code>PersonmainmainPerson</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        Person alice = <span class=\"keyword\">new</span> Person(<span class=\"string\">\"Alice\"</span>, <span class=\"number\">18</span>);</span><br><span class=\"line\">        alice.say();</span><br><span class=\"line\">        alice.eat();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Alice18</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p><code>new</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Person alice = <span class=\"keyword\">new</span> Person(<span class=\"string\">\"Alice\"</span>, <span class=\"number\">18</span>);</span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>[] + []</p>\n</blockquote>\n<p>Personalice<code>Alice</code><code>18</code>alice</p>\n<p><code>say</code><code>eat</code></p>\n<blockquote>\n<p>[] +  + [] + []</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alice.say();</span><br><span class=\"line\">alice.eat();</span><br></pre></td></tr></table></figure>\n<p></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<p></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"Java-\"><a href=\"#Java-\" class=\"headerlink\" title=\"Java \"></a>Java </h1><blockquote>\n<p><strong>Sometimes we stare so long at a door that is closing that we see too late the one that is open.</strong></p>\n<p> Alexander Graham Bell, Inventor</p>\n<p><strong></strong>  ()</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJava</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Object Oriented Programming OOPJavaOOPJava</p>\n<p></p>\n<p></p>\n<blockquote>\n<p> +  = </p>\n</blockquote>\n<p></p>\n<p>OOP</p>\n<p>100010010101000</p>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p></p>\n<p></p>\n<p></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Person</span><span class=\"params\">(String name, <span class=\"keyword\">int</span> age)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">eat</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"...\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">say</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + name + <span class=\"string\">\"\"</span> + age + <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Person</code><code>name</code><code>age</code>Person</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span>&#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>[] + class + [] </p>\n</blockquote>\n<p><code>public</code></p>\n<p><code>class</code>Java</p>\n<p>$JavaSmallCarSecondhandBook</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Person</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br></pre></td></tr></table></figure>\n<p>PersonPerson<code>name</code><code>age</code></p>\n<p></p>\n<blockquote>\n<p>[] + [] + []</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>[] + [] + []</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">eat</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"...\"</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">say</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\"</span> + name + <span class=\"string\">\"\"</span> + age + <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>void</code><code>a1</code><code>a2</code></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Person</span><span class=\"params\">(String name, <span class=\"keyword\">int</span> age)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong></strong><code>String</code><code>int</code><code>name</code><code>age</code><code>this</code><code>this.name</code><code>this.age</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>new</code>PersonmainmainPerson</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        Person alice = <span class=\"keyword\">new</span> Person(<span class=\"string\">\"Alice\"</span>, <span class=\"number\">18</span>);</span><br><span class=\"line\">        alice.say();</span><br><span class=\"line\">        alice.eat();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Alice18</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p><code>new</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Person alice = <span class=\"keyword\">new</span> Person(<span class=\"string\">\"Alice\"</span>, <span class=\"number\">18</span>);</span><br></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>[] + []</p>\n</blockquote>\n<p>Personalice<code>Alice</code><code>18</code>alice</p>\n<p><code>say</code><code>eat</code></p>\n<blockquote>\n<p>[] +  + [] + []</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alice.say();</span><br><span class=\"line\">alice.eat();</span><br></pre></td></tr></table></figure>\n<p></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n<p></p>\n"},{"title":"JavaJava ","date":"2018-12-28T11:00:05.000Z","_content":"\n>   -- \n\n## \n\nJava\n\nJavaIDEJava IDE\n\n\n\n## \n\nJava\n\nJavaJavaJavaJavaQQ\n\nJavaJava\n\nJavaJava\n\nJava\n\n\n\nIT\n\nJava\n\n\n\n## \n\n\n\nJavaJava\n\nboss\n\n \n\n\n\n\n\nJavaJavatxtExcel\n\n## \n\n\n\nJava:stuck_out_tongue_closed_eyes:\n","source":"_posts/java/introduction/java-introduction.md","raw":"---\ntitle: JavaJava \ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-28 19:00:05\n---\n\n>   -- \n\n## \n\nJava\n\nJavaIDEJava IDE\n\n\n\n## \n\nJava\n\nJavaJavaJavaJavaQQ\n\nJavaJava\n\nJavaJava\n\nJava\n\n\n\nIT\n\nJava\n\n\n\n## \n\n\n\nJavaJava\n\nboss\n\n \n\n\n\n\n\nJavaJavatxtExcel\n\n## \n\n\n\nJava:stuck_out_tongue_closed_eyes:\n","slug":"java/introduction/java-introduction","published":1,"updated":"2019-06-04T01:29:57.327Z","_id":"cjxze3guw00470cvw56eqtear","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>   </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>JavaIDEJava IDE</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>JavaJavaJavaJavaQQ</p>\n<p>JavaJava</p>\n<p>JavaJava</p>\n<p>Java</p>\n<p></p>\n<p>IT</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>JavaJava</p>\n<p>boss</p>\n<p> </p>\n<p></p>\n<p></p>\n<p>JavaJavatxtExcel</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>Java:stuck_out_tongue_closed_eyes:</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>   </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>JavaIDEJava IDE</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>JavaJavaJavaJavaQQ</p>\n<p>JavaJava</p>\n<p>JavaJava</p>\n<p>Java</p>\n<p></p>\n<p>IT</p>\n<p>Java</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>JavaJava</p>\n<p>boss</p>\n<p> </p>\n<p></p>\n<p></p>\n<p>JavaJavatxtExcel</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>Java:stuck_out_tongue_closed_eyes:</p>\n"},{"title":"WeakHashMap","date":"2019-01-03T15:10:00.000Z","_content":"\n> `JDK8`\n\n## \n\nJava`WeakHashMap` `Map``HashMap`HashMapHashMap\n\n`WeakHashMap` `WeakHashMap` `entry``remove()``clear()`entryisEmptycontainsKeysize\n\n\n\n1WeakHashMapEntry\n\n2WeakHashMapHashMap\n\n3WeakHashMap\n\n## WeakHashMap\n\nWeakHashMapEntryEntryHashMapEntryMap\n\n[](../reference/weak-reference.html)WeakHashMapkeykeyGC\n\nkeyvaluevaluekeykey\n\n[](../reference/four-kinds-of-reference.html)\n\n\n\n## \n\n{% asset_img weakhashmap-1.png weakhashmap-1 %}\n\nWeakHashMapHashMapAbstractMapHashMap\n\n## \n\nWeakHashMap+HashMapJDK8keyHashMapWeakHashMap\n\n{% asset_img weakhashmap-4.png weakhashmap-4 %}\n\n## \n\n```java\n// 2\nprivate static final int DEFAULT_INITIAL_CAPACITY = 16;\n\n// \nprivate static final int MAXIMUM_CAPACITY = 1 << 30;\n\n// \nprivate static final float DEFAULT_LOAD_FACTOR = 0.75f;\n\n// Entry2\nEntry<K,V>[] table;\n\n// \nprivate int size;\n\n//  \nprivate int threshold;\n\n// \nprivate final float loadFactor;\n\n// \nprivate final ReferenceQueue<Object> queue = new ReferenceQueue<>();\n\n// \nint modCount;\n```\n\nHashMapReferenceQueueReferenceQueue[](../reference/reference-queue-code-detail.html)\n\n## \n\nWeakHashMap\n\n```java\npublic WeakHashMap(int initialCapacity, float loadFactor) {\n\t...\n}\n\npublic WeakHashMap(int initialCapacity) {\n    this(initialCapacity, DEFAULT_LOAD_FACTOR);\n}\n\npublic WeakHashMap() {\n    this(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);\n}\n\npublic WeakHashMap(Map<? extends K, ? extends V> m) {\n    this(Math.max((int) (m.size() / DEFAULT_LOAD_FACTOR) + 1,\n                  DEFAULT_INITIAL_CAPACITY),\n         DEFAULT_LOAD_FACTOR);\n    putAll(m);\n}\n```\n\n\n\n```java\n// initialCapacity\nif (initialCapacity < 0)\n    throw new IllegalArgumentException(\"Illegal Initial Capacity: \"+\n                                       initialCapacity);\nif (initialCapacity > MAXIMUM_CAPACITY)\n    initialCapacity = MAXIMUM_CAPACITY;\n\n// loadFactor\nif (loadFactor <= 0 || Float.isNaN(loadFactor))\n    throw new IllegalArgumentException(\"Illegal Load factor: \"+\n                                       loadFactor);\nint capacity = 1;\n// initialCapacity2\nwhile (capacity < initialCapacity)\n    capacity <<= 1;\ntable = newTable(capacity);\nthis.loadFactor = loadFactor;\nthreshold = (int)(capacity * loadFactor);\n```\n\nnewTable\n\n```java\nprivate Entry<K,V>[] newTable(int n) {\n    return (Entry<K,V>[]) new Entry<?,?>[n];\n}\n```\n\nEntry\n\n## Entry\n\nWeakHashMapEntryWeakHashMaptableEntry\n\n```java\nEntry<K,V>[] table;\n```\n\nEntry\n\n```java\nprivate static class Entry<K,V> extends WeakReference<Object> implements Map.Entry<K,V> {\n\t...   \n}\n```\n\nEntryWeakReference\n\n{% asset_img weakhashmap-2.png weakhashmap-2 %}\n\nEntry\n\n```java\n// \nV value;\nfinal int hash;\nEntry<K,V> next;\n\n// \nEntry(Object key, V value,\n      ReferenceQueue<Object> queue,\n      int hash, Entry<K,V> next) {\n    super(key, queue);\n    this.value = value;\n    this.hash  = hash;\n    this.next  = next;\n}\n```\n\nkeykey\n\n```java\nsuper(key, queue);\n```\n\nWeakReferencekeyReferencereferentReferenceWeakReference[](../reference/reference-code-detail.html)[](../reference/weak-reference-code-detail.html)\n\n\n\n```java\n@SuppressWarnings(\"unchecked\")\npublic K getKey() {\n    // Referencegetreferent\n    // WeakHashMapkeynullNULL_KEY\n    return (K) WeakHashMap.unmaskNull(get());\n}\n\npublic V getValue() {\n    return value;\n}\n\npublic V setValue(V newValue) {\n    V oldValue = value;\n    value = newValue;\n    return oldValue;\n}\n\npublic boolean equals(Object o) {\n    if (!(o instanceof Map.Entry))\n        return false;\n    Map.Entry<?,?> e = (Map.Entry<?,?>)o;\n    K k1 = getKey();\n    Object k2 = e.getKey();\n    if (k1 == k2 || (k1 != null && k1.equals(k2))) {\n        V v1 = getValue();\n        Object v2 = e.getValue();\n        if (v1 == v2 || (v1 != null && v1.equals(v2)))\n            return true;\n    }\n    return false;\n}\n\npublic int hashCode() {\n    K k = getKey();\n    V v = getValue();\n    // keyvaluehashcode\n    return Objects.hashCode(k) ^ Objects.hashCode(v);\n}\n\npublic String toString() {\n    return getKey() + \"=\" + getValue();\n}\n```\n\ngetKeyWeakHashMap.unmaskNullWeakHashMapkeynull\n\n```java\nprivate static final Object NULL_KEY = new Object();\n```\n\n\n\n```java\nprivate static Object maskNull(Object key) {\n    return (key == null) ? NULL_KEY : key;\n}\n\nstatic Object unmaskNull(Object key) {\n    return (key == NULL_KEY) ? null : key;\n}\n```\n\nWeakHashMapEntryWeakReferencekeyWeakReferenceWeakHashMapWeakReference\n\n## \n\n\n\n```java\nvoid                   clear()\nObject                 clone()\nboolean                containsKey(Object key)\nboolean                containsValue(Object value)\nSet<Entry<K, V>>       entrySet()\nV                      get(Object key)\nboolean                isEmpty()\nSet<K>                 keySet()\nV                      put(K key, V value)\nvoid                   putAll(Map<? extends K, ? extends V> map)\nV                      remove(Object key)\nint                    size()\nCollection<V>          values()\n```\n\n\n\n### put\n\n```java\npublic V put(K key, V value) {\n    // null\n    Object k = maskNull(key);\n    // hash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int i = indexFor(h, tab.length);\n\n    // Entry\n    for (Entry<K,V> e = tab[i]; e != null; e = e.next) {\n        if (h == e.hash && eq(k, e.get())) {\n            V oldValue = e.value;\n            if (value != oldValue)\n                e.value = value;\n            return oldValue;\n        }\n    }\n\t\n    modCount++;\n    Entry<K,V> e = tab[i];\n    tab[i] = new Entry<>(k, value, queue, h, e);\n    // \n    if (++size >= threshold)\n        resize(tab.length * 2);\n    return null;\n}\n```\n\n\n\nhash\n\n```java\nfinal int hash(Object k) {\n    int h = k.hashCode();\n    // \n    h ^= (h >>> 20) ^ (h >>> 12);\n    return h ^ (h >>> 7) ^ (h >>> 4);\n}\n```\n\nhashkeyhashcodeEntry2indexget\n\n20,12,7,4emmm\n\nindexFor1hashcodelength21hashcode mod length\n\n```java\nprivate static int indexFor(int h, int length) {\n    return h & (length-1);\n}\n```\n\ngetTable\n\n```java\nprivate Entry<K,V>[] getTable() {\n    // Entry\n    expungeStaleEntries();\n    return table;\n}\n\nprivate void expungeStaleEntries() {\n    for (Object x; (x = queue.poll()) != null; ) {\n        // \n        synchronized (queue) {\n            @SuppressWarnings(\"unchecked\")\n            Entry<K,V> e = (Entry<K,V>) x;\n            // \n            int i = indexFor(e.hash, table.length);\n\n            // Entry\n            Entry<K,V> prev = table[i];\n            Entry<K,V> p = prev;\n            // \n            while (p != null) {\n                Entry<K,V> next = p.next;\n                if (p == e) {\n                    if (prev == e)\n                        table[i] = next;\n                    else\n                        prev.next = next;\n                    // valuenullGC\n                    e.value = null;\n                    size--;\n                    break;\n                }\n                prev = p;\n                p = next;\n            }\n        }\n    }\n}\n```\n\ngetTabletablekeyEntry\n\nresize\n\n```java\nvoid resize(int newCapacity) {\n    // table\n    Entry<K,V>[] oldTable = getTable();\n    int oldCapacity = oldTable.length;\n    if (oldCapacity == MAXIMUM_CAPACITY) {\n        threshold = Integer.MAX_VALUE;\n        return;\n    }\n\n    // table\n    Entry<K,V>[] newTable = newTable(newCapacity);\n    // tabletable\n    transfer(oldTable, newTable);\n    table = newTable;\n\n    if (size >= threshold / 2) {\n        threshold = (int)(newCapacity * loadFactor);\n    } else {\n        expungeStaleEntries();\n        transfer(newTable, oldTable);\n        table = oldTable;\n    }\n}\n// Entry\nprivate Entry<K,V>[] newTable(int n) {\n    return (Entry<K,V>[]) new Entry<?,?>[n];\n}\n\nprivate void transfer(Entry<K,V>[] src, Entry<K,V>[] dest) {\n    for (int j = 0; j < src.length; ++j) {\n        Entry<K,V> e = src[j];\n        src[j] = null;\n        while (e != null) {\n            Entry<K,V> next = e.next;\n            Object key = e.get();\n            if (key == null) {\n                e.next = null; \n                e.value = null; \n                size--;\n            } else {\n                int i = indexFor(e.hash, dest.length);\n                e.next = dest[i];\n                dest[i] = e;\n            }\n            e = next;\n        }\n    }\n}\n```\n\n### get\n\n```java\npublic V get(Object key) {\n    // null\n    Object k = maskNull(key);\n    // keyhash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int index = indexFor(h, tab.length);\n    Entry<K,V> e = tab[index];\n    // \n    while (e != null) {\n        if (e.hash == h && eq(k, e.get()))\n            return e.value;\n        e = e.next;\n    }\n    return null;\n}\n```\n\neq\n\n```java\nprivate static boolean eq(Object x, Object y) {\n    return x == y || x.equals(y);\n}\n```\n\n### remove\n\n```java\npublic V remove(Object key) {\n    // null\n    Object k = maskNull(key);\n    // keyhash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int i = indexFor(h, tab.length);\n    Entry<K,V> prev = tab[i];\n    Entry<K,V> e = prev;\n\n    while (e != null) {\n        Entry<K,V> next = e.next;\n        // Entry\n        if (h == e.hash && eq(k, e.get())) {\n            modCount++;\n            size--;\n            if (prev == e)\n                tab[i] = next;\n            else\n                prev.next = next;\n            // Entryvalue\n            return e.value;\n        }\n        prev = e;\n        e = next;\n    }\n\n    return null;\n}\n```\n\n## \n\n```java\npublic class WeakHashMapTest {\n    public static void main(String[] args){\n        testWeakHashMap();\n    }\n\n    private static void testWeakHashMap() {\n        // 3Stringkey\n        String w1 = new String(\"key1\");\n        String w2 = new String(\"key2\");\n        String w3 = new String(\"key3\");\n\n        // WeakHashMap\n        Map weakHashMap = new WeakHashMap();\n\n        // \n        weakHashMap.put(w1, \"v1\");\n        weakHashMap.put(w2, \"v2\");\n        weakHashMap.put(w3, \"v3\");\n\n        // weakHashMap\n        System.out.printf(\"weakHashMap:%s\\n\", weakHashMap);\n\n        // containsKey(Object key) :key\n        System.out.printf(\"contains key key1 : %s\\n\",weakHashMap.containsKey(\"key1\"));\n        System.out.printf(\"contains key key4 : %s\\n\",weakHashMap.containsKey(\"key4\"));\n\n        // containsValue(Object value) :value\n        System.out.printf(\"contains value v1 : %s\\n\",weakHashMap.containsValue(\"v1\"));\n        System.out.printf(\"contains value 0 : %s\\n\",weakHashMap.containsValue(0));\n\n        // remove(Object key)  key\n        weakHashMap.remove(\"three\");\n\n        System.out.printf(\"weakHashMap: %s\\n\", weakHashMap);\n\n\n        // ----  WeakHashMap  ----\n\n        // w1null\n        // w1gcWeakHashMapw1\n        w1 = null;\n\n        // WeakHashMapw1\n        System.gc();\n\n        // WeakHashMap\n        Iterator iter = weakHashMap.entrySet().iterator();\n        while (iter.hasNext()) {\n            Map.Entry en = (Map.Entry)iter.next();\n            System.out.printf(\"next : %s - %s\\n\",en.getKey(),en.getValue());\n        }\n        // WeakHashMap\n        System.out.printf(\"after gc WeakHashMap size:%s\\n\", weakHashMap.size());\n    }\n}\n```\n\n\n\n```java\nweakHashMap:{key1=w1, key2=w2, key3=w3}\ncontains key key1 : true\ncontains key key4 : false\ncontains value w1 : true\ncontains value 0 : false\nweakHashMap: {key1=w1, key2=w2, key3=w3}\nnext : key2 - w2\nnext : key3 - w3\nafter gc WeakHashMap size:2\n```\n\nw1EntryWeakHashMap\n\n## \n\nWeakHashMapEntry\n\n```java\npublic final class ConcurrentCache<K,V> {\n\n    private final int size;\n\n    private final Map<K,V> eden;\n\n    private final Map<K,V> longterm;\n\n    public ConcurrentCache(int size) {\n        this.size = size;\n        this.eden = new ConcurrentHashMap<>(size);\n        this.longterm = new WeakHashMap<>(size);\n    }\n\n    public V get(K k) {\n        V v = this.eden.get(k);\n        if (v == null) {\n            synchronized (longterm) {\n                v = this.longterm.get(k);\n            }\n            if (v != null) {\n                this.eden.put(k, v);\n            }\n        }\n        return v;\n    }\n\n    public void put(K k, V v) {\n        if (this.eden.size() >= size) {\n            synchronized (longterm) {\n                this.longterm.putAll(this.eden);\n            }\n            this.eden.clear();\n        }\n        this.eden.put(k, v);\n    }\n}\n```\n\nputedenedenedenlongtermlongtermedeneden\n\ngetedenvaluelongtermeden\n\nedenlongtermWeakHashMapEntrylongtermOOM\n\nWeakHashMap\n\n```java\nWeakHashMap<String,Map<K,V>> transactionCache;\n```\n\nkeyStringidvaluemapHashMapLinkedHashMap\n\nidkeymap\n\n## \n\n- WeakHashMapEntryMap\n- WeakHashMapHashMap\n- WeakHashMap+\n- WeakHashMap","source":"_posts/java/collection/weakhashmap-code-detail.md","raw":"---\ntitle: WeakHashMap\ntags: \n - Java\n - Java\ncategories: \ndate: 2019-01-03 23:10:00\n---\n\n> `JDK8`\n\n## \n\nJava`WeakHashMap` `Map``HashMap`HashMapHashMap\n\n`WeakHashMap` `WeakHashMap` `entry``remove()``clear()`entryisEmptycontainsKeysize\n\n\n\n1WeakHashMapEntry\n\n2WeakHashMapHashMap\n\n3WeakHashMap\n\n## WeakHashMap\n\nWeakHashMapEntryEntryHashMapEntryMap\n\n[](../reference/weak-reference.html)WeakHashMapkeykeyGC\n\nkeyvaluevaluekeykey\n\n[](../reference/four-kinds-of-reference.html)\n\n\n\n## \n\n{% asset_img weakhashmap-1.png weakhashmap-1 %}\n\nWeakHashMapHashMapAbstractMapHashMap\n\n## \n\nWeakHashMap+HashMapJDK8keyHashMapWeakHashMap\n\n{% asset_img weakhashmap-4.png weakhashmap-4 %}\n\n## \n\n```java\n// 2\nprivate static final int DEFAULT_INITIAL_CAPACITY = 16;\n\n// \nprivate static final int MAXIMUM_CAPACITY = 1 << 30;\n\n// \nprivate static final float DEFAULT_LOAD_FACTOR = 0.75f;\n\n// Entry2\nEntry<K,V>[] table;\n\n// \nprivate int size;\n\n//  \nprivate int threshold;\n\n// \nprivate final float loadFactor;\n\n// \nprivate final ReferenceQueue<Object> queue = new ReferenceQueue<>();\n\n// \nint modCount;\n```\n\nHashMapReferenceQueueReferenceQueue[](../reference/reference-queue-code-detail.html)\n\n## \n\nWeakHashMap\n\n```java\npublic WeakHashMap(int initialCapacity, float loadFactor) {\n\t...\n}\n\npublic WeakHashMap(int initialCapacity) {\n    this(initialCapacity, DEFAULT_LOAD_FACTOR);\n}\n\npublic WeakHashMap() {\n    this(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);\n}\n\npublic WeakHashMap(Map<? extends K, ? extends V> m) {\n    this(Math.max((int) (m.size() / DEFAULT_LOAD_FACTOR) + 1,\n                  DEFAULT_INITIAL_CAPACITY),\n         DEFAULT_LOAD_FACTOR);\n    putAll(m);\n}\n```\n\n\n\n```java\n// initialCapacity\nif (initialCapacity < 0)\n    throw new IllegalArgumentException(\"Illegal Initial Capacity: \"+\n                                       initialCapacity);\nif (initialCapacity > MAXIMUM_CAPACITY)\n    initialCapacity = MAXIMUM_CAPACITY;\n\n// loadFactor\nif (loadFactor <= 0 || Float.isNaN(loadFactor))\n    throw new IllegalArgumentException(\"Illegal Load factor: \"+\n                                       loadFactor);\nint capacity = 1;\n// initialCapacity2\nwhile (capacity < initialCapacity)\n    capacity <<= 1;\ntable = newTable(capacity);\nthis.loadFactor = loadFactor;\nthreshold = (int)(capacity * loadFactor);\n```\n\nnewTable\n\n```java\nprivate Entry<K,V>[] newTable(int n) {\n    return (Entry<K,V>[]) new Entry<?,?>[n];\n}\n```\n\nEntry\n\n## Entry\n\nWeakHashMapEntryWeakHashMaptableEntry\n\n```java\nEntry<K,V>[] table;\n```\n\nEntry\n\n```java\nprivate static class Entry<K,V> extends WeakReference<Object> implements Map.Entry<K,V> {\n\t...   \n}\n```\n\nEntryWeakReference\n\n{% asset_img weakhashmap-2.png weakhashmap-2 %}\n\nEntry\n\n```java\n// \nV value;\nfinal int hash;\nEntry<K,V> next;\n\n// \nEntry(Object key, V value,\n      ReferenceQueue<Object> queue,\n      int hash, Entry<K,V> next) {\n    super(key, queue);\n    this.value = value;\n    this.hash  = hash;\n    this.next  = next;\n}\n```\n\nkeykey\n\n```java\nsuper(key, queue);\n```\n\nWeakReferencekeyReferencereferentReferenceWeakReference[](../reference/reference-code-detail.html)[](../reference/weak-reference-code-detail.html)\n\n\n\n```java\n@SuppressWarnings(\"unchecked\")\npublic K getKey() {\n    // Referencegetreferent\n    // WeakHashMapkeynullNULL_KEY\n    return (K) WeakHashMap.unmaskNull(get());\n}\n\npublic V getValue() {\n    return value;\n}\n\npublic V setValue(V newValue) {\n    V oldValue = value;\n    value = newValue;\n    return oldValue;\n}\n\npublic boolean equals(Object o) {\n    if (!(o instanceof Map.Entry))\n        return false;\n    Map.Entry<?,?> e = (Map.Entry<?,?>)o;\n    K k1 = getKey();\n    Object k2 = e.getKey();\n    if (k1 == k2 || (k1 != null && k1.equals(k2))) {\n        V v1 = getValue();\n        Object v2 = e.getValue();\n        if (v1 == v2 || (v1 != null && v1.equals(v2)))\n            return true;\n    }\n    return false;\n}\n\npublic int hashCode() {\n    K k = getKey();\n    V v = getValue();\n    // keyvaluehashcode\n    return Objects.hashCode(k) ^ Objects.hashCode(v);\n}\n\npublic String toString() {\n    return getKey() + \"=\" + getValue();\n}\n```\n\ngetKeyWeakHashMap.unmaskNullWeakHashMapkeynull\n\n```java\nprivate static final Object NULL_KEY = new Object();\n```\n\n\n\n```java\nprivate static Object maskNull(Object key) {\n    return (key == null) ? NULL_KEY : key;\n}\n\nstatic Object unmaskNull(Object key) {\n    return (key == NULL_KEY) ? null : key;\n}\n```\n\nWeakHashMapEntryWeakReferencekeyWeakReferenceWeakHashMapWeakReference\n\n## \n\n\n\n```java\nvoid                   clear()\nObject                 clone()\nboolean                containsKey(Object key)\nboolean                containsValue(Object value)\nSet<Entry<K, V>>       entrySet()\nV                      get(Object key)\nboolean                isEmpty()\nSet<K>                 keySet()\nV                      put(K key, V value)\nvoid                   putAll(Map<? extends K, ? extends V> map)\nV                      remove(Object key)\nint                    size()\nCollection<V>          values()\n```\n\n\n\n### put\n\n```java\npublic V put(K key, V value) {\n    // null\n    Object k = maskNull(key);\n    // hash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int i = indexFor(h, tab.length);\n\n    // Entry\n    for (Entry<K,V> e = tab[i]; e != null; e = e.next) {\n        if (h == e.hash && eq(k, e.get())) {\n            V oldValue = e.value;\n            if (value != oldValue)\n                e.value = value;\n            return oldValue;\n        }\n    }\n\t\n    modCount++;\n    Entry<K,V> e = tab[i];\n    tab[i] = new Entry<>(k, value, queue, h, e);\n    // \n    if (++size >= threshold)\n        resize(tab.length * 2);\n    return null;\n}\n```\n\n\n\nhash\n\n```java\nfinal int hash(Object k) {\n    int h = k.hashCode();\n    // \n    h ^= (h >>> 20) ^ (h >>> 12);\n    return h ^ (h >>> 7) ^ (h >>> 4);\n}\n```\n\nhashkeyhashcodeEntry2indexget\n\n20,12,7,4emmm\n\nindexFor1hashcodelength21hashcode mod length\n\n```java\nprivate static int indexFor(int h, int length) {\n    return h & (length-1);\n}\n```\n\ngetTable\n\n```java\nprivate Entry<K,V>[] getTable() {\n    // Entry\n    expungeStaleEntries();\n    return table;\n}\n\nprivate void expungeStaleEntries() {\n    for (Object x; (x = queue.poll()) != null; ) {\n        // \n        synchronized (queue) {\n            @SuppressWarnings(\"unchecked\")\n            Entry<K,V> e = (Entry<K,V>) x;\n            // \n            int i = indexFor(e.hash, table.length);\n\n            // Entry\n            Entry<K,V> prev = table[i];\n            Entry<K,V> p = prev;\n            // \n            while (p != null) {\n                Entry<K,V> next = p.next;\n                if (p == e) {\n                    if (prev == e)\n                        table[i] = next;\n                    else\n                        prev.next = next;\n                    // valuenullGC\n                    e.value = null;\n                    size--;\n                    break;\n                }\n                prev = p;\n                p = next;\n            }\n        }\n    }\n}\n```\n\ngetTabletablekeyEntry\n\nresize\n\n```java\nvoid resize(int newCapacity) {\n    // table\n    Entry<K,V>[] oldTable = getTable();\n    int oldCapacity = oldTable.length;\n    if (oldCapacity == MAXIMUM_CAPACITY) {\n        threshold = Integer.MAX_VALUE;\n        return;\n    }\n\n    // table\n    Entry<K,V>[] newTable = newTable(newCapacity);\n    // tabletable\n    transfer(oldTable, newTable);\n    table = newTable;\n\n    if (size >= threshold / 2) {\n        threshold = (int)(newCapacity * loadFactor);\n    } else {\n        expungeStaleEntries();\n        transfer(newTable, oldTable);\n        table = oldTable;\n    }\n}\n// Entry\nprivate Entry<K,V>[] newTable(int n) {\n    return (Entry<K,V>[]) new Entry<?,?>[n];\n}\n\nprivate void transfer(Entry<K,V>[] src, Entry<K,V>[] dest) {\n    for (int j = 0; j < src.length; ++j) {\n        Entry<K,V> e = src[j];\n        src[j] = null;\n        while (e != null) {\n            Entry<K,V> next = e.next;\n            Object key = e.get();\n            if (key == null) {\n                e.next = null; \n                e.value = null; \n                size--;\n            } else {\n                int i = indexFor(e.hash, dest.length);\n                e.next = dest[i];\n                dest[i] = e;\n            }\n            e = next;\n        }\n    }\n}\n```\n\n### get\n\n```java\npublic V get(Object key) {\n    // null\n    Object k = maskNull(key);\n    // keyhash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int index = indexFor(h, tab.length);\n    Entry<K,V> e = tab[index];\n    // \n    while (e != null) {\n        if (e.hash == h && eq(k, e.get()))\n            return e.value;\n        e = e.next;\n    }\n    return null;\n}\n```\n\neq\n\n```java\nprivate static boolean eq(Object x, Object y) {\n    return x == y || x.equals(y);\n}\n```\n\n### remove\n\n```java\npublic V remove(Object key) {\n    // null\n    Object k = maskNull(key);\n    // keyhash\n    int h = hash(k);\n    // table\n    Entry<K,V>[] tab = getTable();\n    // \n    int i = indexFor(h, tab.length);\n    Entry<K,V> prev = tab[i];\n    Entry<K,V> e = prev;\n\n    while (e != null) {\n        Entry<K,V> next = e.next;\n        // Entry\n        if (h == e.hash && eq(k, e.get())) {\n            modCount++;\n            size--;\n            if (prev == e)\n                tab[i] = next;\n            else\n                prev.next = next;\n            // Entryvalue\n            return e.value;\n        }\n        prev = e;\n        e = next;\n    }\n\n    return null;\n}\n```\n\n## \n\n```java\npublic class WeakHashMapTest {\n    public static void main(String[] args){\n        testWeakHashMap();\n    }\n\n    private static void testWeakHashMap() {\n        // 3Stringkey\n        String w1 = new String(\"key1\");\n        String w2 = new String(\"key2\");\n        String w3 = new String(\"key3\");\n\n        // WeakHashMap\n        Map weakHashMap = new WeakHashMap();\n\n        // \n        weakHashMap.put(w1, \"v1\");\n        weakHashMap.put(w2, \"v2\");\n        weakHashMap.put(w3, \"v3\");\n\n        // weakHashMap\n        System.out.printf(\"weakHashMap:%s\\n\", weakHashMap);\n\n        // containsKey(Object key) :key\n        System.out.printf(\"contains key key1 : %s\\n\",weakHashMap.containsKey(\"key1\"));\n        System.out.printf(\"contains key key4 : %s\\n\",weakHashMap.containsKey(\"key4\"));\n\n        // containsValue(Object value) :value\n        System.out.printf(\"contains value v1 : %s\\n\",weakHashMap.containsValue(\"v1\"));\n        System.out.printf(\"contains value 0 : %s\\n\",weakHashMap.containsValue(0));\n\n        // remove(Object key)  key\n        weakHashMap.remove(\"three\");\n\n        System.out.printf(\"weakHashMap: %s\\n\", weakHashMap);\n\n\n        // ----  WeakHashMap  ----\n\n        // w1null\n        // w1gcWeakHashMapw1\n        w1 = null;\n\n        // WeakHashMapw1\n        System.gc();\n\n        // WeakHashMap\n        Iterator iter = weakHashMap.entrySet().iterator();\n        while (iter.hasNext()) {\n            Map.Entry en = (Map.Entry)iter.next();\n            System.out.printf(\"next : %s - %s\\n\",en.getKey(),en.getValue());\n        }\n        // WeakHashMap\n        System.out.printf(\"after gc WeakHashMap size:%s\\n\", weakHashMap.size());\n    }\n}\n```\n\n\n\n```java\nweakHashMap:{key1=w1, key2=w2, key3=w3}\ncontains key key1 : true\ncontains key key4 : false\ncontains value w1 : true\ncontains value 0 : false\nweakHashMap: {key1=w1, key2=w2, key3=w3}\nnext : key2 - w2\nnext : key3 - w3\nafter gc WeakHashMap size:2\n```\n\nw1EntryWeakHashMap\n\n## \n\nWeakHashMapEntry\n\n```java\npublic final class ConcurrentCache<K,V> {\n\n    private final int size;\n\n    private final Map<K,V> eden;\n\n    private final Map<K,V> longterm;\n\n    public ConcurrentCache(int size) {\n        this.size = size;\n        this.eden = new ConcurrentHashMap<>(size);\n        this.longterm = new WeakHashMap<>(size);\n    }\n\n    public V get(K k) {\n        V v = this.eden.get(k);\n        if (v == null) {\n            synchronized (longterm) {\n                v = this.longterm.get(k);\n            }\n            if (v != null) {\n                this.eden.put(k, v);\n            }\n        }\n        return v;\n    }\n\n    public void put(K k, V v) {\n        if (this.eden.size() >= size) {\n            synchronized (longterm) {\n                this.longterm.putAll(this.eden);\n            }\n            this.eden.clear();\n        }\n        this.eden.put(k, v);\n    }\n}\n```\n\nputedenedenedenlongtermlongtermedeneden\n\ngetedenvaluelongtermeden\n\nedenlongtermWeakHashMapEntrylongtermOOM\n\nWeakHashMap\n\n```java\nWeakHashMap<String,Map<K,V>> transactionCache;\n```\n\nkeyStringidvaluemapHashMapLinkedHashMap\n\nidkeymap\n\n## \n\n- WeakHashMapEntryMap\n- WeakHashMapHashMap\n- WeakHashMap+\n- WeakHashMap","slug":"java/collection/weakhashmap-code-detail","published":1,"updated":"2019-06-04T01:29:57.097Z","_id":"cjxze3guw004a0cvw1sd62ppr","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p><code>JDK8</code></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java<code>WeakHashMap</code> <code>Map</code><code>HashMap</code>HashMapHashMap</p>\n<p><code>WeakHashMap</code> <code>WeakHashMap</code> <code>entry</code><code>remove()</code><code>clear()</code>entryisEmptycontainsKeysize</p>\n<p></p>\n<p>1WeakHashMapEntry</p>\n<p>2WeakHashMapHashMap</p>\n<p>3WeakHashMap</p>\n<h2 id=\"WeakHashMap\"><a href=\"#WeakHashMap\" class=\"headerlink\" title=\"WeakHashMap\"></a>WeakHashMap</h2><p>WeakHashMapEntryEntryHashMapEntryMap</p>\n<p><a href=\"../reference/weak-reference.html\"></a>WeakHashMapkeykeyGC</p>\n<p>keyvaluevaluekeykey</p>\n<p><a href=\"../reference/four-kinds-of-reference.html\"></a></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><img src=\"/programming/java/collection/weakhashmap-code-detail/weakhashmap-1.png\" title=\"weakhashmap-1\">\n<p>WeakHashMapHashMapAbstractMapHashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMap+HashMapJDK8keyHashMapWeakHashMap</p>\n<img src=\"/programming/java/collection/weakhashmap-code-detail/weakhashmap-4.png\" title=\"weakhashmap-4\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DEFAULT_INITIAL_CAPACITY = <span class=\"number\">16</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAXIMUM_CAPACITY = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">30</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> DEFAULT_LOAD_FACTOR = <span class=\"number\">0.75f</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Entry2</span></span><br><span class=\"line\">Entry&lt;K,V&gt;[] table;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> threshold;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> loadFactor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;Object&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">int</span> modCount;</span><br></pre></td></tr></table></figure>\n<p>HashMapReferenceQueueReferenceQueue<a href=\"../reference/reference-queue-code-detail.html\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity, <span class=\"keyword\">float</span> loadFactor)</span> </span>&#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(Math.max((<span class=\"keyword\">int</span>) (m.size() / DEFAULT_LOAD_FACTOR) + <span class=\"number\">1</span>,</span><br><span class=\"line\">                  DEFAULT_INITIAL_CAPACITY),</span><br><span class=\"line\">         DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">    putAll(m);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// initialCapacity</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (initialCapacity &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal Initial Capacity: \"</span>+</span><br><span class=\"line\">                                       initialCapacity);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class=\"line\">    initialCapacity = MAXIMUM_CAPACITY;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// loadFactor</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (loadFactor &lt;= <span class=\"number\">0</span> || Float.isNaN(loadFactor))</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal Load factor: \"</span>+</span><br><span class=\"line\">                                       loadFactor);</span><br><span class=\"line\"><span class=\"keyword\">int</span> capacity = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"comment\">// initialCapacity2</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (capacity &lt; initialCapacity)</span><br><span class=\"line\">    capacity &lt;&lt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">table = newTable(capacity);</span><br><span class=\"line\"><span class=\"keyword\">this</span>.loadFactor = loadFactor;</span><br><span class=\"line\">threshold = (<span class=\"keyword\">int</span>)(capacity * loadFactor);</span><br></pre></td></tr></table></figure>\n<p>newTable</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] newTable(<span class=\"keyword\">int</span> n) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (Entry&lt;K,V&gt;[]) <span class=\"keyword\">new</span> Entry&lt;?,?&gt;[n];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Entry</p>\n<h2 id=\"Entry\"><a href=\"#Entry\" class=\"headerlink\" title=\"Entry\"></a>Entry</h2><p>WeakHashMapEntryWeakHashMaptableEntry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Entry&lt;K,V&gt;[] table;</span><br></pre></td></tr></table></figure>\n<p>Entry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">WeakReference</span>&lt;<span class=\"title\">Object</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">Map</span>.<span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">\t...   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>EntryWeakReference</p>\n<img src=\"/programming/java/collection/weakhashmap-code-detail/weakhashmap-2.png\" title=\"weakhashmap-2\">\n<p>Entry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">V value;</span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"keyword\">int</span> hash;</span><br><span class=\"line\">Entry&lt;K,V&gt; next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Entry(Object key, V value,</span><br><span class=\"line\">      ReferenceQueue&lt;Object&gt; queue,</span><br><span class=\"line\">      <span class=\"keyword\">int</span> hash, Entry&lt;K,V&gt; next) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(key, queue);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hash  = hash;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.next  = next;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>keykey</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">super</span>(key, queue);</span><br></pre></td></tr></table></figure>\n<p>WeakReferencekeyReferencereferentReferenceWeakReference<a href=\"../reference/reference-code-detail.html\"></a><a href=\"../reference/weak-reference-code-detail.html\"></a></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> K <span class=\"title\">getKey</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Referencegetreferent</span></span><br><span class=\"line\">    <span class=\"comment\">// WeakHashMapkeynullNULL_KEY</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (K) WeakHashMap.unmaskNull(get());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">setValue</span><span class=\"params\">(V newValue)</span> </span>&#123;</span><br><span class=\"line\">    V oldValue = value;</span><br><span class=\"line\">    value = newValue;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">equals</span><span class=\"params\">(Object o)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(o <span class=\"keyword\">instanceof</span> Map.Entry))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class=\"line\">    K k1 = getKey();</span><br><span class=\"line\">    Object k2 = e.getKey();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (k1 == k2 || (k1 != <span class=\"keyword\">null</span> &amp;&amp; k1.equals(k2))) &#123;</span><br><span class=\"line\">        V v1 = getValue();</span><br><span class=\"line\">        Object v2 = e.getValue();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v1 == v2 || (v1 != <span class=\"keyword\">null</span> &amp;&amp; v1.equals(v2)))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">hashCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    K k = getKey();</span><br><span class=\"line\">    V v = getValue();</span><br><span class=\"line\">    <span class=\"comment\">// keyvaluehashcode</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Objects.hashCode(k) ^ Objects.hashCode(v);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> getKey() + <span class=\"string\">\"=\"</span> + getValue();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getKeyWeakHashMap.unmaskNullWeakHashMapkeynull</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object NULL_KEY = <span class=\"keyword\">new</span> Object();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Object <span class=\"title\">maskNull</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == <span class=\"keyword\">null</span>) ? NULL_KEY : key;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> Object <span class=\"title\">unmaskNull</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == NULL_KEY) ? <span class=\"keyword\">null</span> : key;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>WeakHashMapEntryWeakReferencekeyWeakReferenceWeakHashMapWeakReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>                   <span class=\"title\">clear</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Object                 <span class=\"title\">clone</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">containsKey</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">containsValue</span><span class=\"params\">(Object value)</span></span></span><br><span class=\"line\"><span class=\"function\">Set&lt;Entry&lt;K, V&gt;&gt;       <span class=\"title\">entrySet</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">get</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">isEmpty</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Set&lt;K&gt;                 <span class=\"title\">keySet</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>                   <span class=\"title\">putAll</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; map)</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">remove</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span>                    <span class=\"title\">size</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Collection&lt;V&gt;          <span class=\"title\">values</span><span class=\"params\">()</span></span></span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"put\"><a href=\"#put\" class=\"headerlink\" title=\"put\"></a>put</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// hash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = indexFor(h, tab.length);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Entry</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Entry&lt;K,V&gt; e = tab[i]; e != <span class=\"keyword\">null</span>; e = e.next) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (h == e.hash &amp;&amp; eq(k, e.get())) &#123;</span><br><span class=\"line\">            V oldValue = e.value;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (value != oldValue)</span><br><span class=\"line\">                e.value = value;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    modCount++;</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = tab[i];</span><br><span class=\"line\">    tab[i] = <span class=\"keyword\">new</span> Entry&lt;&gt;(k, value, queue, h, e);</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (++size &gt;= threshold)</span><br><span class=\"line\">        resize(tab.length * <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>hash</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">final</span> <span class=\"keyword\">int</span> <span class=\"title\">hash</span><span class=\"params\">(Object k)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = k.hashCode();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    h ^= (h &gt;&gt;&gt; <span class=\"number\">20</span>) ^ (h &gt;&gt;&gt; <span class=\"number\">12</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h ^ (h &gt;&gt;&gt; <span class=\"number\">7</span>) ^ (h &gt;&gt;&gt; <span class=\"number\">4</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>hashkeyhashcodeEntry2indexget</p>\n<p>20,12,7,4emmm</p>\n<p>indexFor1hashcodelength21hashcode mod length</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">indexFor</span><span class=\"params\">(<span class=\"keyword\">int</span> h, <span class=\"keyword\">int</span> length)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h &amp; (length-<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getTable</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] getTable() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Entry</span></span><br><span class=\"line\">    expungeStaleEntries();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> table;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">expungeStaleEntries</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Object x; (x = queue.poll()) != <span class=\"keyword\">null</span>; ) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (queue) &#123;</span><br><span class=\"line\">            <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">            Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) x;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> i = indexFor(e.hash, table.length);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// Entry</span></span><br><span class=\"line\">            Entry&lt;K,V&gt; prev = table[i];</span><br><span class=\"line\">            Entry&lt;K,V&gt; p = prev;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> (p != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                Entry&lt;K,V&gt; next = p.next;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (p == e) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (prev == e)</span><br><span class=\"line\">                        table[i] = next;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span></span><br><span class=\"line\">                        prev.next = next;</span><br><span class=\"line\">                    <span class=\"comment\">// valuenullGC</span></span><br><span class=\"line\">                    e.value = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                    size--;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                prev = p;</span><br><span class=\"line\">                p = next;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getTabletablekeyEntry</p>\n<p>resize</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">resize</span><span class=\"params\">(<span class=\"keyword\">int</span> newCapacity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] oldTable = getTable();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> oldCapacity = oldTable.length;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldCapacity == MAXIMUM_CAPACITY) &#123;</span><br><span class=\"line\">        threshold = Integer.MAX_VALUE;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] newTable = newTable(newCapacity);</span><br><span class=\"line\">    <span class=\"comment\">// tabletable</span></span><br><span class=\"line\">    transfer(oldTable, newTable);</span><br><span class=\"line\">    table = newTable;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (size &gt;= threshold / <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">        threshold = (<span class=\"keyword\">int</span>)(newCapacity * loadFactor);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        expungeStaleEntries();</span><br><span class=\"line\">        transfer(newTable, oldTable);</span><br><span class=\"line\">        table = oldTable;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Entry</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] newTable(<span class=\"keyword\">int</span> n) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (Entry&lt;K,V&gt;[]) <span class=\"keyword\">new</span> Entry&lt;?,?&gt;[n];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">transfer</span><span class=\"params\">(Entry&lt;K,V&gt;[] src, Entry&lt;K,V&gt;[] dest)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; src.length; ++j) &#123;</span><br><span class=\"line\">        Entry&lt;K,V&gt; e = src[j];</span><br><span class=\"line\">        src[j] = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            Entry&lt;K,V&gt; next = e.next;</span><br><span class=\"line\">            Object key = e.get();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (key == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                e.next = <span class=\"keyword\">null</span>; </span><br><span class=\"line\">                e.value = <span class=\"keyword\">null</span>; </span><br><span class=\"line\">                size--;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> i = indexFor(e.hash, dest.length);</span><br><span class=\"line\">                e.next = dest[i];</span><br><span class=\"line\">                dest[i] = e;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            e = next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// keyhash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> index = indexFor(h, tab.length);</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = tab[index];</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e.hash == h &amp;&amp; eq(k, e.get()))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> e.value;</span><br><span class=\"line\">        e = e.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>eq</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">eq</span><span class=\"params\">(Object x, Object y)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x == y || x.equals(y);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"remove\"><a href=\"#remove\" class=\"headerlink\" title=\"remove\"></a>remove</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">remove</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// keyhash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = indexFor(h, tab.length);</span><br><span class=\"line\">    Entry&lt;K,V&gt; prev = tab[i];</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = prev;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        Entry&lt;K,V&gt; next = e.next;</span><br><span class=\"line\">        <span class=\"comment\">// Entry</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (h == e.hash &amp;&amp; eq(k, e.get())) &#123;</span><br><span class=\"line\">            modCount++;</span><br><span class=\"line\">            size--;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (prev == e)</span><br><span class=\"line\">                tab[i] = next;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                prev.next = next;</span><br><span class=\"line\">            <span class=\"comment\">// Entryvalue</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> e.value;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        prev = e;</span><br><span class=\"line\">        e = next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakHashMapTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        testWeakHashMap();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testWeakHashMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 3Stringkey</span></span><br><span class=\"line\">        String w1 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key1\"</span>);</span><br><span class=\"line\">        String w2 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key2\"</span>);</span><br><span class=\"line\">        String w3 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key3\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        Map weakHashMap = <span class=\"keyword\">new</span> WeakHashMap();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        weakHashMap.put(w1, <span class=\"string\">\"v1\"</span>);</span><br><span class=\"line\">        weakHashMap.put(w2, <span class=\"string\">\"v2\"</span>);</span><br><span class=\"line\">        weakHashMap.put(w3, <span class=\"string\">\"v3\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// weakHashMap</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"weakHashMap:%s\\n\"</span>, weakHashMap);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// containsKey(Object key) :key</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains key key1 : %s\\n\"</span>,weakHashMap.containsKey(<span class=\"string\">\"key1\"</span>));</span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains key key4 : %s\\n\"</span>,weakHashMap.containsKey(<span class=\"string\">\"key4\"</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// containsValue(Object value) :value</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains value v1 : %s\\n\"</span>,weakHashMap.containsValue(<span class=\"string\">\"v1\"</span>));</span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains value 0 : %s\\n\"</span>,weakHashMap.containsValue(<span class=\"number\">0</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// remove(Object key)  key</span></span><br><span class=\"line\">        weakHashMap.remove(<span class=\"string\">\"three\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"weakHashMap: %s\\n\"</span>, weakHashMap);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// ----  WeakHashMap  ----</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// w1null</span></span><br><span class=\"line\">        <span class=\"comment\">// w1gcWeakHashMapw1</span></span><br><span class=\"line\">        w1 = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMapw1</span></span><br><span class=\"line\">        System.gc();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        Iterator iter = weakHashMap.entrySet().iterator();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (iter.hasNext()) &#123;</span><br><span class=\"line\">            Map.Entry en = (Map.Entry)iter.next();</span><br><span class=\"line\">            System.out.printf(<span class=\"string\">\"next : %s - %s\\n\"</span>,en.getKey(),en.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"after gc WeakHashMap size:%s\\n\"</span>, weakHashMap.size());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">weakHashMap:&#123;key1=w1, key2=w2, key3=w3&#125;</span><br><span class=\"line\">contains key key1 : <span class=\"keyword\">true</span></span><br><span class=\"line\">contains key key4 : <span class=\"keyword\">false</span></span><br><span class=\"line\">contains value w1 : <span class=\"keyword\">true</span></span><br><span class=\"line\">contains value <span class=\"number\">0</span> : <span class=\"keyword\">false</span></span><br><span class=\"line\">weakHashMap: &#123;key1=w1, key2=w2, key3=w3&#125;</span><br><span class=\"line\">next : key2 - w2</span><br><span class=\"line\">next : key3 - w3</span><br><span class=\"line\">after gc WeakHashMap size:<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<p>w1EntryWeakHashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMapEntry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcurrentCache</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; eden;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; longterm;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ConcurrentCache</span><span class=\"params\">(<span class=\"keyword\">int</span> size)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.size = size;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden = <span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(size);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.longterm = <span class=\"keyword\">new</span> WeakHashMap&lt;&gt;(size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(K k)</span> </span>&#123;</span><br><span class=\"line\">        V v = <span class=\"keyword\">this</span>.eden.get(k);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                v = <span class=\"keyword\">this</span>.longterm.get(k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (v != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> v;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(K k, V v)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.eden.size() &gt;= size) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.longterm.putAll(<span class=\"keyword\">this</span>.eden);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.eden.clear();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>putedenedenedenlongtermlongtermedeneden</p>\n<p>getedenvaluelongtermeden</p>\n<p>edenlongtermWeakHashMapEntrylongtermOOM</p>\n<p>WeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WeakHashMap&lt;String,Map&lt;K,V&gt;&gt; transactionCache;</span><br></pre></td></tr></table></figure>\n<p>keyStringidvaluemapHashMapLinkedHashMap</p>\n<p>idkeymap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>WeakHashMapEntryMap</li>\n<li>WeakHashMapHashMap</li>\n<li>WeakHashMap+</li>\n<li>WeakHashMap</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p><code>JDK8</code></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java<code>WeakHashMap</code> <code>Map</code><code>HashMap</code>HashMapHashMap</p>\n<p><code>WeakHashMap</code> <code>WeakHashMap</code> <code>entry</code><code>remove()</code><code>clear()</code>entryisEmptycontainsKeysize</p>\n<p></p>\n<p>1WeakHashMapEntry</p>\n<p>2WeakHashMapHashMap</p>\n<p>3WeakHashMap</p>\n<h2 id=\"WeakHashMap\"><a href=\"#WeakHashMap\" class=\"headerlink\" title=\"WeakHashMap\"></a>WeakHashMap</h2><p>WeakHashMapEntryEntryHashMapEntryMap</p>\n<p><a href=\"../reference/weak-reference.html\"></a>WeakHashMapkeykeyGC</p>\n<p>keyvaluevaluekeykey</p>\n<p><a href=\"../reference/four-kinds-of-reference.html\"></a></p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><img src=\"/programming/java/collection/weakhashmap-code-detail/weakhashmap-1.png\" title=\"weakhashmap-1\">\n<p>WeakHashMapHashMapAbstractMapHashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMap+HashMapJDK8keyHashMapWeakHashMap</p>\n<img src=\"/programming/java/collection/weakhashmap-code-detail/weakhashmap-4.png\" title=\"weakhashmap-4\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DEFAULT_INITIAL_CAPACITY = <span class=\"number\">16</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAXIMUM_CAPACITY = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">30</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> DEFAULT_LOAD_FACTOR = <span class=\"number\">0.75f</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Entry2</span></span><br><span class=\"line\">Entry&lt;K,V&gt;[] table;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> threshold;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> loadFactor;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;Object&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">int</span> modCount;</span><br></pre></td></tr></table></figure>\n<p>HashMapReferenceQueueReferenceQueue<a href=\"../reference/reference-queue-code-detail.html\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity, <span class=\"keyword\">float</span> loadFactor)</span> </span>&#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakHashMap</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(Math.max((<span class=\"keyword\">int</span>) (m.size() / DEFAULT_LOAD_FACTOR) + <span class=\"number\">1</span>,</span><br><span class=\"line\">                  DEFAULT_INITIAL_CAPACITY),</span><br><span class=\"line\">         DEFAULT_LOAD_FACTOR);</span><br><span class=\"line\">    putAll(m);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// initialCapacity</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (initialCapacity &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal Initial Capacity: \"</span>+</span><br><span class=\"line\">                                       initialCapacity);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class=\"line\">    initialCapacity = MAXIMUM_CAPACITY;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// loadFactor</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (loadFactor &lt;= <span class=\"number\">0</span> || Float.isNaN(loadFactor))</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Illegal Load factor: \"</span>+</span><br><span class=\"line\">                                       loadFactor);</span><br><span class=\"line\"><span class=\"keyword\">int</span> capacity = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"comment\">// initialCapacity2</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> (capacity &lt; initialCapacity)</span><br><span class=\"line\">    capacity &lt;&lt;= <span class=\"number\">1</span>;</span><br><span class=\"line\">table = newTable(capacity);</span><br><span class=\"line\"><span class=\"keyword\">this</span>.loadFactor = loadFactor;</span><br><span class=\"line\">threshold = (<span class=\"keyword\">int</span>)(capacity * loadFactor);</span><br></pre></td></tr></table></figure>\n<p>newTable</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] newTable(<span class=\"keyword\">int</span> n) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (Entry&lt;K,V&gt;[]) <span class=\"keyword\">new</span> Entry&lt;?,?&gt;[n];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Entry</p>\n<h2 id=\"Entry\"><a href=\"#Entry\" class=\"headerlink\" title=\"Entry\"></a>Entry</h2><p>WeakHashMapEntryWeakHashMaptableEntry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Entry&lt;K,V&gt;[] table;</span><br></pre></td></tr></table></figure>\n<p>Entry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">WeakReference</span>&lt;<span class=\"title\">Object</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">Map</span>.<span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">\t...   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>EntryWeakReference</p>\n<img src=\"/programming/java/collection/weakhashmap-code-detail/weakhashmap-2.png\" title=\"weakhashmap-2\">\n<p>Entry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">V value;</span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"keyword\">int</span> hash;</span><br><span class=\"line\">Entry&lt;K,V&gt; next;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">Entry(Object key, V value,</span><br><span class=\"line\">      ReferenceQueue&lt;Object&gt; queue,</span><br><span class=\"line\">      <span class=\"keyword\">int</span> hash, Entry&lt;K,V&gt; next) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(key, queue);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.value = value;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.hash  = hash;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.next  = next;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>keykey</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">super</span>(key, queue);</span><br></pre></td></tr></table></figure>\n<p>WeakReferencekeyReferencereferentReferenceWeakReference<a href=\"../reference/reference-code-detail.html\"></a><a href=\"../reference/weak-reference-code-detail.html\"></a></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> K <span class=\"title\">getKey</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Referencegetreferent</span></span><br><span class=\"line\">    <span class=\"comment\">// WeakHashMapkeynullNULL_KEY</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (K) WeakHashMap.unmaskNull(get());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> value;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">setValue</span><span class=\"params\">(V newValue)</span> </span>&#123;</span><br><span class=\"line\">    V oldValue = value;</span><br><span class=\"line\">    value = newValue;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">equals</span><span class=\"params\">(Object o)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(o <span class=\"keyword\">instanceof</span> Map.Entry))</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class=\"line\">    K k1 = getKey();</span><br><span class=\"line\">    Object k2 = e.getKey();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (k1 == k2 || (k1 != <span class=\"keyword\">null</span> &amp;&amp; k1.equals(k2))) &#123;</span><br><span class=\"line\">        V v1 = getValue();</span><br><span class=\"line\">        Object v2 = e.getValue();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v1 == v2 || (v1 != <span class=\"keyword\">null</span> &amp;&amp; v1.equals(v2)))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">hashCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    K k = getKey();</span><br><span class=\"line\">    V v = getValue();</span><br><span class=\"line\">    <span class=\"comment\">// keyvaluehashcode</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Objects.hashCode(k) ^ Objects.hashCode(v);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> getKey() + <span class=\"string\">\"=\"</span> + getValue();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getKeyWeakHashMap.unmaskNullWeakHashMapkeynull</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object NULL_KEY = <span class=\"keyword\">new</span> Object();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Object <span class=\"title\">maskNull</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == <span class=\"keyword\">null</span>) ? NULL_KEY : key;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> Object <span class=\"title\">unmaskNull</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (key == NULL_KEY) ? <span class=\"keyword\">null</span> : key;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>WeakHashMapEntryWeakReferencekeyWeakReferenceWeakHashMapWeakReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>                   <span class=\"title\">clear</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Object                 <span class=\"title\">clone</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">containsKey</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">containsValue</span><span class=\"params\">(Object value)</span></span></span><br><span class=\"line\"><span class=\"function\">Set&lt;Entry&lt;K, V&gt;&gt;       <span class=\"title\">entrySet</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">get</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span>                <span class=\"title\">isEmpty</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Set&lt;K&gt;                 <span class=\"title\">keySet</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span>                   <span class=\"title\">putAll</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; map)</span></span></span><br><span class=\"line\"><span class=\"function\">V                      <span class=\"title\">remove</span><span class=\"params\">(Object key)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span>                    <span class=\"title\">size</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">Collection&lt;V&gt;          <span class=\"title\">values</span><span class=\"params\">()</span></span></span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"put\"><a href=\"#put\" class=\"headerlink\" title=\"put\"></a>put</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// hash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = indexFor(h, tab.length);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Entry</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Entry&lt;K,V&gt; e = tab[i]; e != <span class=\"keyword\">null</span>; e = e.next) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (h == e.hash &amp;&amp; eq(k, e.get())) &#123;</span><br><span class=\"line\">            V oldValue = e.value;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (value != oldValue)</span><br><span class=\"line\">                e.value = value;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> oldValue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    modCount++;</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = tab[i];</span><br><span class=\"line\">    tab[i] = <span class=\"keyword\">new</span> Entry&lt;&gt;(k, value, queue, h, e);</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (++size &gt;= threshold)</span><br><span class=\"line\">        resize(tab.length * <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>hash</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">final</span> <span class=\"keyword\">int</span> <span class=\"title\">hash</span><span class=\"params\">(Object k)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = k.hashCode();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    h ^= (h &gt;&gt;&gt; <span class=\"number\">20</span>) ^ (h &gt;&gt;&gt; <span class=\"number\">12</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h ^ (h &gt;&gt;&gt; <span class=\"number\">7</span>) ^ (h &gt;&gt;&gt; <span class=\"number\">4</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>hashkeyhashcodeEntry2indexget</p>\n<p>20,12,7,4emmm</p>\n<p>indexFor1hashcodelength21hashcode mod length</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">indexFor</span><span class=\"params\">(<span class=\"keyword\">int</span> h, <span class=\"keyword\">int</span> length)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> h &amp; (length-<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getTable</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] getTable() &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Entry</span></span><br><span class=\"line\">    expungeStaleEntries();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> table;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">expungeStaleEntries</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Object x; (x = queue.poll()) != <span class=\"keyword\">null</span>; ) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (queue) &#123;</span><br><span class=\"line\">            <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">            Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) x;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> i = indexFor(e.hash, table.length);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// Entry</span></span><br><span class=\"line\">            Entry&lt;K,V&gt; prev = table[i];</span><br><span class=\"line\">            Entry&lt;K,V&gt; p = prev;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> (p != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                Entry&lt;K,V&gt; next = p.next;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (p == e) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (prev == e)</span><br><span class=\"line\">                        table[i] = next;</span><br><span class=\"line\">                    <span class=\"keyword\">else</span></span><br><span class=\"line\">                        prev.next = next;</span><br><span class=\"line\">                    <span class=\"comment\">// valuenullGC</span></span><br><span class=\"line\">                    e.value = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                    size--;</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                prev = p;</span><br><span class=\"line\">                p = next;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getTabletablekeyEntry</p>\n<p>resize</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">resize</span><span class=\"params\">(<span class=\"keyword\">int</span> newCapacity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] oldTable = getTable();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> oldCapacity = oldTable.length;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (oldCapacity == MAXIMUM_CAPACITY) &#123;</span><br><span class=\"line\">        threshold = Integer.MAX_VALUE;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] newTable = newTable(newCapacity);</span><br><span class=\"line\">    <span class=\"comment\">// tabletable</span></span><br><span class=\"line\">    transfer(oldTable, newTable);</span><br><span class=\"line\">    table = newTable;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (size &gt;= threshold / <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">        threshold = (<span class=\"keyword\">int</span>)(newCapacity * loadFactor);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        expungeStaleEntries();</span><br><span class=\"line\">        transfer(newTable, oldTable);</span><br><span class=\"line\">        table = oldTable;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Entry</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> Entry&lt;K,V&gt;[] newTable(<span class=\"keyword\">int</span> n) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (Entry&lt;K,V&gt;[]) <span class=\"keyword\">new</span> Entry&lt;?,?&gt;[n];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">transfer</span><span class=\"params\">(Entry&lt;K,V&gt;[] src, Entry&lt;K,V&gt;[] dest)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; src.length; ++j) &#123;</span><br><span class=\"line\">        Entry&lt;K,V&gt; e = src[j];</span><br><span class=\"line\">        src[j] = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            Entry&lt;K,V&gt; next = e.next;</span><br><span class=\"line\">            Object key = e.get();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (key == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                e.next = <span class=\"keyword\">null</span>; </span><br><span class=\"line\">                e.value = <span class=\"keyword\">null</span>; </span><br><span class=\"line\">                size--;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> i = indexFor(e.hash, dest.length);</span><br><span class=\"line\">                e.next = dest[i];</span><br><span class=\"line\">                dest[i] = e;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            e = next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// keyhash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> index = indexFor(h, tab.length);</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = tab[index];</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (e.hash == h &amp;&amp; eq(k, e.get()))</span><br><span class=\"line\">            <span class=\"keyword\">return</span> e.value;</span><br><span class=\"line\">        e = e.next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>eq</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">eq</span><span class=\"params\">(Object x, Object y)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x == y || x.equals(y);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"remove\"><a href=\"#remove\" class=\"headerlink\" title=\"remove\"></a>remove</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">remove</span><span class=\"params\">(Object key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// null</span></span><br><span class=\"line\">    Object k = maskNull(key);</span><br><span class=\"line\">    <span class=\"comment\">// keyhash</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> h = hash(k);</span><br><span class=\"line\">    <span class=\"comment\">// table</span></span><br><span class=\"line\">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = indexFor(h, tab.length);</span><br><span class=\"line\">    Entry&lt;K,V&gt; prev = tab[i];</span><br><span class=\"line\">    Entry&lt;K,V&gt; e = prev;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        Entry&lt;K,V&gt; next = e.next;</span><br><span class=\"line\">        <span class=\"comment\">// Entry</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (h == e.hash &amp;&amp; eq(k, e.get())) &#123;</span><br><span class=\"line\">            modCount++;</span><br><span class=\"line\">            size--;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (prev == e)</span><br><span class=\"line\">                tab[i] = next;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                prev.next = next;</span><br><span class=\"line\">            <span class=\"comment\">// Entryvalue</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> e.value;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        prev = e;</span><br><span class=\"line\">        e = next;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakHashMapTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        testWeakHashMap();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testWeakHashMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 3Stringkey</span></span><br><span class=\"line\">        String w1 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key1\"</span>);</span><br><span class=\"line\">        String w2 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key2\"</span>);</span><br><span class=\"line\">        String w3 = <span class=\"keyword\">new</span> String(<span class=\"string\">\"key3\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        Map weakHashMap = <span class=\"keyword\">new</span> WeakHashMap();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        weakHashMap.put(w1, <span class=\"string\">\"v1\"</span>);</span><br><span class=\"line\">        weakHashMap.put(w2, <span class=\"string\">\"v2\"</span>);</span><br><span class=\"line\">        weakHashMap.put(w3, <span class=\"string\">\"v3\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// weakHashMap</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"weakHashMap:%s\\n\"</span>, weakHashMap);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// containsKey(Object key) :key</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains key key1 : %s\\n\"</span>,weakHashMap.containsKey(<span class=\"string\">\"key1\"</span>));</span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains key key4 : %s\\n\"</span>,weakHashMap.containsKey(<span class=\"string\">\"key4\"</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// containsValue(Object value) :value</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains value v1 : %s\\n\"</span>,weakHashMap.containsValue(<span class=\"string\">\"v1\"</span>));</span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"contains value 0 : %s\\n\"</span>,weakHashMap.containsValue(<span class=\"number\">0</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// remove(Object key)  key</span></span><br><span class=\"line\">        weakHashMap.remove(<span class=\"string\">\"three\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"weakHashMap: %s\\n\"</span>, weakHashMap);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// ----  WeakHashMap  ----</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// w1null</span></span><br><span class=\"line\">        <span class=\"comment\">// w1gcWeakHashMapw1</span></span><br><span class=\"line\">        w1 = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMapw1</span></span><br><span class=\"line\">        System.gc();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        Iterator iter = weakHashMap.entrySet().iterator();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (iter.hasNext()) &#123;</span><br><span class=\"line\">            Map.Entry en = (Map.Entry)iter.next();</span><br><span class=\"line\">            System.out.printf(<span class=\"string\">\"next : %s - %s\\n\"</span>,en.getKey(),en.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// WeakHashMap</span></span><br><span class=\"line\">        System.out.printf(<span class=\"string\">\"after gc WeakHashMap size:%s\\n\"</span>, weakHashMap.size());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">weakHashMap:&#123;key1=w1, key2=w2, key3=w3&#125;</span><br><span class=\"line\">contains key key1 : <span class=\"keyword\">true</span></span><br><span class=\"line\">contains key key4 : <span class=\"keyword\">false</span></span><br><span class=\"line\">contains value w1 : <span class=\"keyword\">true</span></span><br><span class=\"line\">contains value <span class=\"number\">0</span> : <span class=\"keyword\">false</span></span><br><span class=\"line\">weakHashMap: &#123;key1=w1, key2=w2, key3=w3&#125;</span><br><span class=\"line\">next : key2 - w2</span><br><span class=\"line\">next : key3 - w3</span><br><span class=\"line\">after gc WeakHashMap size:<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<p>w1EntryWeakHashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakHashMapEntry</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcurrentCache</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; eden;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; longterm;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ConcurrentCache</span><span class=\"params\">(<span class=\"keyword\">int</span> size)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.size = size;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden = <span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(size);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.longterm = <span class=\"keyword\">new</span> WeakHashMap&lt;&gt;(size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(K k)</span> </span>&#123;</span><br><span class=\"line\">        V v = <span class=\"keyword\">this</span>.eden.get(k);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                v = <span class=\"keyword\">this</span>.longterm.get(k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (v != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> v;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(K k, V v)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.eden.size() &gt;= size) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.longterm.putAll(<span class=\"keyword\">this</span>.eden);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.eden.clear();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>putedenedenedenlongtermlongtermedeneden</p>\n<p>getedenvaluelongtermeden</p>\n<p>edenlongtermWeakHashMapEntrylongtermOOM</p>\n<p>WeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WeakHashMap&lt;String,Map&lt;K,V&gt;&gt; transactionCache;</span><br></pre></td></tr></table></figure>\n<p>keyStringidvaluemapHashMapLinkedHashMap</p>\n<p>idkeymap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>WeakHashMapEntryMap</li>\n<li>WeakHashMapHashMap</li>\n<li>WeakHashMap+</li>\n<li>WeakHashMap</li>\n</ul>\n"},{"title":"Java","date":"2018-12-28T11:00:07.000Z","_content":"\n>  -- \n\n## \n\nJava\n\n1. Java\n2. JDK\n3. IDEA\n4. IDEA\n5. IDEA\n\nJavaJava\n\nJava","source":"_posts/java/introduction/java-primer-conclusion.md","raw":"---\ntitle: Java\ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-28 19:00:07\n---\n\n>  -- \n\n## \n\nJava\n\n1. Java\n2. JDK\n3. IDEA\n4. IDEA\n5. IDEA\n\nJavaJava\n\nJava","slug":"java/introduction/java-primer-conclusion","published":1,"updated":"2019-06-04T01:29:57.327Z","_id":"cjxze3gv6004e0cvwngbasiic","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<ol>\n<li>Java</li>\n<li>JDK</li>\n<li>IDEA</li>\n<li>IDEA</li>\n<li>IDEA</li>\n</ol>\n<p>JavaJava</p>\n<p>Java</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<ol>\n<li>Java</li>\n<li>JDK</li>\n<li>IDEA</li>\n<li>IDEA</li>\n<li>IDEA</li>\n</ol>\n<p>JavaJava</p>\n<p>Java</p>\n"},{"title":"Java","date":"2018-12-26T11:55:51.000Z","_content":"\n## \n\nJavaJavadanteng\n\n\n\n+ \n+ \n\n## \n\nC++JavaJVM\n\n\"\"\n\n\n\nJava Java Java\n\nJava100%\n\n## \n\nJVMJVMJVM\n\n<img src=\"../reference/0190.png\" width=\"40\"/>\n\nJVMJVMOutOfMemoryError\n\nJVM\n","source":"_posts/java/jvm/garbage-collection.md","raw":"---\ntitle: Java\ntags: \n - Java\n - \ncategories: \ndate: 2018-12-26 19:55:51\n---\n\n## \n\nJavaJavadanteng\n\n\n\n+ \n+ \n\n## \n\nC++JavaJVM\n\n\"\"\n\n\n\nJava Java Java\n\nJava100%\n\n## \n\nJVMJVMJVM\n\n<img src=\"../reference/0190.png\" width=\"40\"/>\n\nJVMJVMOutOfMemoryError\n\nJVM\n","slug":"java/jvm/garbage-collection","published":1,"updated":"2019-06-04T01:29:57.336Z","_id":"cjxze3gvg004h0cvwzl1jzq7d","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJavadanteng</p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>C++JavaJVM</p>\n<p></p>\n<p></p>\n<p>Java Java Java</p>\n<p>Java100%</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JVMJVMJVM</p>\n<p><img src=\"../reference/0190.png\" width=\"40\"></p>\n<p>JVMJVMOutOfMemoryError</p>\n<p>JVM</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaJavadanteng</p>\n<p></p>\n<ul>\n<li></li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>C++JavaJVM</p>\n<p></p>\n<p></p>\n<p>Java Java Java</p>\n<p>Java100%</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JVMJVMJVM</p>\n<p><img src=\"../reference/0190.png\" width=\"40\"></p>\n<p>JVMJVMOutOfMemoryError</p>\n<p>JVM</p>\n"},{"title":"JavaJavaIDE","date":"2018-12-28T11:00:04.000Z","_content":"\n>   --\n\n## \n\nJDKJava\n\nIDE\n\n## IDE\n\nIDEintegrated development enviroment\n\nIDE\n\n## IDE\n\nIDE\n\n99\n\n## IDE\n\nIDEAhttp://www.jetbrains.com/idea/\n\n{% asset_img java-ide-1.png jdk-ide %}\n\n{% asset_img java-ide-2.png jdk-ide %}\n\nultimatecommunityultimate\n\nhttp://idea.lanyus.com/ 0.0.0.0 account.jetbrains.comhosts\n\n\n\n## \n\nHelloWorld\n\n{% asset_img java-ide-3.png jdk-ide %}\n\n{% asset_img java-ide-4.png jdk-ide %}\n\n{% asset_img java-ide-5.png jdk-ide %}\n\nsrcpackagehellopackageHelloWorld\n\n{% asset_img java-ide-6.png jdk-ide %}\n\n{% asset_img java-ide-7.png jdk-ide %}\n\n{% asset_img java-ide-8.png jdk-ide %}\n\n\n\n```java\npackage hello;\nimport java.lang.System;\n\npublic class HelloWorld {\n    public static void main(String[] args){\n        System.out.println(\"Hello World!\");\n    }\n}\n```\n\nRunHelloWorld\n\n{% asset_img java-ide-9.png jdk-ide %}\n\nIDE\n\n529253292","source":"_posts/java/introduction/java-ide.md","raw":"---\ntitle: JavaJavaIDE\ntags: \n - Java\n - Java\n - \ncategories: \ndate: 2018-12-28 19:00:04\n---\n\n>   --\n\n## \n\nJDKJava\n\nIDE\n\n## IDE\n\nIDEintegrated development enviroment\n\nIDE\n\n## IDE\n\nIDE\n\n99\n\n## IDE\n\nIDEAhttp://www.jetbrains.com/idea/\n\n{% asset_img java-ide-1.png jdk-ide %}\n\n{% asset_img java-ide-2.png jdk-ide %}\n\nultimatecommunityultimate\n\nhttp://idea.lanyus.com/ 0.0.0.0 account.jetbrains.comhosts\n\n\n\n## \n\nHelloWorld\n\n{% asset_img java-ide-3.png jdk-ide %}\n\n{% asset_img java-ide-4.png jdk-ide %}\n\n{% asset_img java-ide-5.png jdk-ide %}\n\nsrcpackagehellopackageHelloWorld\n\n{% asset_img java-ide-6.png jdk-ide %}\n\n{% asset_img java-ide-7.png jdk-ide %}\n\n{% asset_img java-ide-8.png jdk-ide %}\n\n\n\n```java\npackage hello;\nimport java.lang.System;\n\npublic class HelloWorld {\n    public static void main(String[] args){\n        System.out.println(\"Hello World!\");\n    }\n}\n```\n\nRunHelloWorld\n\n{% asset_img java-ide-9.png jdk-ide %}\n\nIDE\n\n529253292","slug":"java/introduction/java-ide","published":1,"updated":"2019-06-04T01:29:57.319Z","_id":"cjxze3gvg004l0cvwekducab4","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDKJava</p>\n<p>IDE</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDEintegrated development enviroment</p>\n<p>IDE</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDE</p>\n<p>99</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDEA<a href=\"http://www.jetbrains.com/idea/\" target=\"_blank\" rel=\"noopener\">http://www.jetbrains.com/idea/</a></p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-1.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-2.png\" title=\"jdk-ide\">\n<p>ultimatecommunityultimate</p>\n<p><a href=\"http://idea.lanyus.com/\" target=\"_blank\" rel=\"noopener\">http://idea.lanyus.com/</a> 0.0.0.0 account.jetbrains.comhosts</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-3.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-4.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-5.png\" title=\"jdk-ide\">\n<p>srcpackagehellopackageHelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-6.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-7.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-8.png\" title=\"jdk-ide\">\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.System;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloWorld</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Hello World!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>RunHelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-9.png\" title=\"jdk-ide\">\n<p>IDE</p>\n<p>529253292</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDKJava</p>\n<p>IDE</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDEintegrated development enviroment</p>\n<p>IDE</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDE</p>\n<p>99</p>\n<h2 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE\"></a>IDE</h2><p>IDEA<a href=\"http://www.jetbrains.com/idea/\" target=\"_blank\" rel=\"noopener\">http://www.jetbrains.com/idea/</a></p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-1.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-2.png\" title=\"jdk-ide\">\n<p>ultimatecommunityultimate</p>\n<p><a href=\"http://idea.lanyus.com/\" target=\"_blank\" rel=\"noopener\">http://idea.lanyus.com/</a> 0.0.0.0 account.jetbrains.comhosts</p>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-3.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-4.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-5.png\" title=\"jdk-ide\">\n<p>srcpackagehellopackageHelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-6.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-7.png\" title=\"jdk-ide\">\n<img src=\"/programming/java/introduction/java-ide/java-ide-8.png\" title=\"jdk-ide\">\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.lang.System;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloWorld</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Hello World!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>RunHelloWorld</p>\n<img src=\"/programming/java/introduction/java-ide/java-ide-9.png\" title=\"jdk-ide\">\n<p>IDE</p>\n<p>529253292</p>\n"},{"title":"Java","date":"2018-12-26T11:55:51.000Z","_content":"\n## \n\n\n\n## \n\nJava\n\nOOM\n\n(new)(delete)45,\n\n## \n\n1\n\nHashMapVectorObjectVector\n\n2remove()\n\n3\n\n\n\n4\n\ndataSourse.getConnection()(socket)iocloseGC \n\n5\n\nA A B  public void registerMsg(Object b); BB \n\n6\n\nJVMJVM","source":"_posts/java/jvm/memory-leak.md","raw":"---\ntitle: Java\ntags: \n - Java\n - \ncategories: \ndate: 2018-12-26 19:55:51\n---\n\n## \n\n\n\n## \n\nJava\n\nOOM\n\n(new)(delete)45,\n\n## \n\n1\n\nHashMapVectorObjectVector\n\n2remove()\n\n3\n\n\n\n4\n\ndataSourse.getConnection()(socket)iocloseGC \n\n5\n\nA A B  public void registerMsg(Object b); BB \n\n6\n\nJVMJVM","slug":"java/jvm/memory-leak","published":1,"updated":"2019-06-04T01:29:57.337Z","_id":"cjxze3gvq004o0cvw41jihbeh","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>OOM</p>\n<p>(new)(delete)45,</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>1</p>\n<p>HashMapVectorObjectVector</p>\n<p>2remove()</p>\n<p>3</p>\n<p></p>\n<p>4</p>\n<p>dataSourse.getConnection()(socket)iocloseGC </p>\n<p>5</p>\n<p>A A B  public void registerMsg(Object b); BB </p>\n<p>6</p>\n<p>JVMJVM</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<p>OOM</p>\n<p>(new)(delete)45,</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>1</p>\n<p>HashMapVectorObjectVector</p>\n<p>2remove()</p>\n<p>3</p>\n<p></p>\n<p>4</p>\n<p>dataSourse.getConnection()(socket)iocloseGC </p>\n<p>5</p>\n<p>A A B  public void registerMsg(Object b); BB </p>\n<p>6</p>\n<p>JVMJVM</p>\n"},{"title":"JavaJava","date":"2018-12-28T11:00:06.000Z","_content":"\n> \n\n## \n\n\n\nHello WorldJava\n\n## \n\nJava\n\n## \n\n\n\n\n\n### \n\n `System.out.println()`emmm\n\nidea[](java-ide.md)\n\nhelloPrintTest\n\n```java\npackage hello;\n\npublic class PrintTest {\n    public static void main(String[] args){\n        System.out.println(\"\");\n    }\n}\n```\n\n`ctrl+shift+R`\n\n{% asset_img java-simple-example-1.png java-example %}\n\nSystem `System.out.print() `\n\n### \n\n\n\nScannerScannerScannerSystem.inInputTest\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class InputTest {\n    public static void main(String[] args){\n        Scanner in = new Scanner(System.in);\n        System.out.print(\":\");\n        int a = in.nextInt();\n        System.out.println(\"\" + a);\n    }\n}\n```\n\n20\n\n{% asset_img java-simple-example-2.png java-example %}\n\n\n\n## \n\n\n\n```java\nSystem.out.print(\":\");\n```\n\nint\n\n```java\nScanner in = new Scanner(System.in);\nint a = in.nextInt();\n```\n\n\n\n```java\nSystem.out.print(\":\");\n```\n\nint\n\n```java\nint b = in.nextInt();\n```\n\n\n\n```java\nint sum = a + b;\n```\n\n\n\n```java\nSystem.out.print(\":\" + sum);\n```\n\n\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class SimpleCalculator {\n    public static void main(String[] args){\n        System.out.print(\":\");\n        Scanner in = new Scanner(System.in);\n        int a = in.nextInt();\n        System.out.print(\":\");\n        int b = in.nextInt();\n        int sum = a + b;\n        System.out.print(\":\" + sum);\n    }\n}\n```\n\n\n\n{% asset_img java-simple-example-3.png java-example %}\n\n\n\n`SimpleCalculator`mainScannerpackageimport\n","source":"_posts/java/introduction/java-simple-example.md","raw":"---\ntitle: JavaJava\ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-28 19:00:06\n---\n\n> \n\n## \n\n\n\nHello WorldJava\n\n## \n\nJava\n\n## \n\n\n\n\n\n### \n\n `System.out.println()`emmm\n\nidea[](java-ide.md)\n\nhelloPrintTest\n\n```java\npackage hello;\n\npublic class PrintTest {\n    public static void main(String[] args){\n        System.out.println(\"\");\n    }\n}\n```\n\n`ctrl+shift+R`\n\n{% asset_img java-simple-example-1.png java-example %}\n\nSystem `System.out.print() `\n\n### \n\n\n\nScannerScannerScannerSystem.inInputTest\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class InputTest {\n    public static void main(String[] args){\n        Scanner in = new Scanner(System.in);\n        System.out.print(\":\");\n        int a = in.nextInt();\n        System.out.println(\"\" + a);\n    }\n}\n```\n\n20\n\n{% asset_img java-simple-example-2.png java-example %}\n\n\n\n## \n\n\n\n```java\nSystem.out.print(\":\");\n```\n\nint\n\n```java\nScanner in = new Scanner(System.in);\nint a = in.nextInt();\n```\n\n\n\n```java\nSystem.out.print(\":\");\n```\n\nint\n\n```java\nint b = in.nextInt();\n```\n\n\n\n```java\nint sum = a + b;\n```\n\n\n\n```java\nSystem.out.print(\":\" + sum);\n```\n\n\n\n```java\npackage hello;\n\nimport java.util.Scanner;\n\npublic class SimpleCalculator {\n    public static void main(String[] args){\n        System.out.print(\":\");\n        Scanner in = new Scanner(System.in);\n        int a = in.nextInt();\n        System.out.print(\":\");\n        int b = in.nextInt();\n        int sum = a + b;\n        System.out.print(\":\" + sum);\n    }\n}\n```\n\n\n\n{% asset_img java-simple-example-3.png java-example %}\n\n\n\n`SimpleCalculator`mainScannerpackageimport\n","slug":"java/introduction/java-simple-example","published":1,"updated":"2019-06-04T01:29:57.328Z","_id":"cjxze3gw0004r0cvwam3xiz7c","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>Hello WorldJava</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>System.out.println()</code>emmm</p>\n<p>idea<a href=\"java-ide.md\"></a></p>\n<p>helloPrintTest</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PrintTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>ctrl+shift+R</code></p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-1.png\" title=\"java-example\">\n<p>System <code>System.out.print()</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>ScannerScannerScannerSystem.inInputTest</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">InputTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + a);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>20</p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-2.png\" title=\"java-example\">\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\"><span class=\"keyword\">int</span> a = in.nextInt();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> b = in.nextInt();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> sum = a + b;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-3.png\" title=\"java-example\">\n<p></p>\n<p><code>SimpleCalculator</code>mainScannerpackageimport</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>Hello WorldJava</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Java</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <code>System.out.println()</code>emmm</p>\n<p>idea<a href=\"java-ide.md\"></a></p>\n<p>helloPrintTest</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PrintTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>ctrl+shift+R</code></p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-1.png\" title=\"java-example\">\n<p>System <code>System.out.print()</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>ScannerScannerScannerSystem.inInputTest</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">InputTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"\"</span> + a);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>20</p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-2.png\" title=\"java-example\">\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\"><span class=\"keyword\">int</span> a = in.nextInt();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span>);</span><br></pre></td></tr></table></figure>\n<p>int</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> b = in.nextInt();</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> sum = a + b;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> hello;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SimpleCalculator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> a = in.nextInt();</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> b = in.nextInt();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = a + b;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">\":\"</span> + sum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<img src=\"/programming/java/introduction/java-simple-example/java-simple-example-3.png\" title=\"java-example\">\n<p></p>\n<p><code>SimpleCalculator</code>mainScannerpackageimport</p>\n"},{"title":"","date":"2018-12-26T11:55:51.000Z","_content":"\n# \n\n\n","source":"_posts/java/jvm/object-self-rescue.md","raw":"---\ntitle: \ntags: \n - Java\ncategories: \ndate: 2018-12-26 19:55:51\n---\n\n# \n\n\n","slug":"java/jvm/object-self-rescue","published":1,"updated":"2019-06-04T01:29:57.337Z","_id":"cjxze3gw0004v0cvwlyvez3vo","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p>\n"},{"title":"HotSpot","date":"2018-12-27T11:55:51.000Z","_content":"\n## \n\nJavaHotSpotHotSpot\n\n## OopMap\n\nGC ROOTGC ROOT\n\nGCstop the worldCMS\n\nHotSpot\n\nOopMap\n\nJVMGC+HotSpotOopMap\n\nOopMapOopMapJITGC \n\n## Safepoint\n\nGC RootsOopMapOopMap\n\nHotSpotOopMapSafepoints\n\n\n\nGC******** \n\n- GC\n\n- \n\n## safe region\n\nGCsleepblockedJVM\n\n**) **\n\nJVMGCGCJVM","source":"_posts/java/jvm/reachable-in-hotspot.md","raw":"---\ntitle: HotSpot\ntags: \n - Java\n - \ncategories: \ndate: 2018-12-27 19:55:51\n---\n\n## \n\nJavaHotSpotHotSpot\n\n## OopMap\n\nGC ROOTGC ROOT\n\nGCstop the worldCMS\n\nHotSpot\n\nOopMap\n\nJVMGC+HotSpotOopMap\n\nOopMapOopMapJITGC \n\n## Safepoint\n\nGC RootsOopMapOopMap\n\nHotSpotOopMapSafepoints\n\n\n\nGC******** \n\n- GC\n\n- \n\n## safe region\n\nGCsleepblockedJVM\n\n**) **\n\nJVMGCGCJVM","slug":"java/jvm/reachable-in-hotspot","published":1,"updated":"2019-06-04T01:29:57.337Z","_id":"cjxze3gw0004y0cvwi4cslmm4","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaHotSpotHotSpot</p>\n<h2 id=\"OopMap\"><a href=\"#OopMap\" class=\"headerlink\" title=\"OopMap\"></a>OopMap</h2><p>GC ROOTGC ROOT</p>\n<p>GCstop the worldCMS</p>\n<p>HotSpot</p>\n<p>OopMap</p>\n<p>JVMGC+HotSpotOopMap</p>\n<p>OopMapOopMapJITGC </p>\n<h2 id=\"Safepoint\"><a href=\"#Safepoint\" class=\"headerlink\" title=\"Safepoint\"></a>Safepoint</h2><p>GC RootsOopMapOopMap</p>\n<p>HotSpotOopMapSafepoints</p>\n<p></p>\n<p>GC<strong></strong><strong></strong> </p>\n<ul>\n<li><p>GC</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<h2 id=\"safe-region\"><a href=\"#safe-region\" class=\"headerlink\" title=\"safe region\"></a>safe region</h2><p>GCsleepblockedJVM</p>\n<p><strong>) </strong></p>\n<p>JVMGCGCJVM</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaHotSpotHotSpot</p>\n<h2 id=\"OopMap\"><a href=\"#OopMap\" class=\"headerlink\" title=\"OopMap\"></a>OopMap</h2><p>GC ROOTGC ROOT</p>\n<p>GCstop the worldCMS</p>\n<p>HotSpot</p>\n<p>OopMap</p>\n<p>JVMGC+HotSpotOopMap</p>\n<p>OopMapOopMapJITGC </p>\n<h2 id=\"Safepoint\"><a href=\"#Safepoint\" class=\"headerlink\" title=\"Safepoint\"></a>Safepoint</h2><p>GC RootsOopMapOopMap</p>\n<p>HotSpotOopMapSafepoints</p>\n<p></p>\n<p>GC<strong></strong><strong></strong> </p>\n<ul>\n<li><p>GC</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<h2 id=\"safe-region\"><a href=\"#safe-region\" class=\"headerlink\" title=\"safe region\"></a>safe region</h2><p>GCsleepblockedJVM</p>\n<p><strong>) </strong></p>\n<p>JVMGCGCJVM</p>\n"},{"title":"Java ","date":"2018-12-29T11:55:51.000Z","_content":"\n## \n","source":"_posts/java/multithread/multithread-start.md","raw":"---\ntitle: Java \ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 19:55:51\n---\n\n## \n","slug":"java/multithread/multithread-start","published":1,"updated":"2019-06-04T01:29:57.371Z","_id":"cjxze3gwa00520cvwciw7wbfl","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>"},{"title":"List","date":"2019-05-18T01:00:02.000Z","_content":"\n## \n\n\n\n![](https://i.loli.net/2019/05/18/5cdf7e9f2047e23793.png)\n\nGuavaListAB\n\n```java\npublic class ArrayListTest {\n    // HashMap\n    private Map<String, List<Long>> cache = new HashMap<>();\n    \n    private void save(){\n        List<Long> listA = createListA();\n        cache.put(\"listA\", listA);\n    }\n    \n    private void get(){\n        List<Long> listB = createListB();\n        List<Long> listA = cache.get(\"listA\");\n        listA.removeAll(listB);\n    }\n    \n    private List<Long> createListA(){\n        \n    }\n\n    private List<Long> createListB(){\n        \n    }\n\n    public static void main(String[] args){\n        ArrayListTest test = new ArrayListTest();\n        test.save();\n        test.get();\n    }\n}\n```\n\nsaveget\n\n![](https://i.loli.net/2019/05/18/5cdf7ec98fddd17705.png)\n\n```shell\nException in thread \"main\" java.lang.UnsupportedOperationException\n\tat java.util.AbstractList.remove(AbstractList.java:161)\n\tat java.util.AbstractList$Itr.remove(AbstractList.java:374)\n\tat java.util.AbstractCollection.removeAll(AbstractCollection.java:376)\n    ...\n```\n\n![](https://i.loli.net/2019/05/18/5cdf6539270f631562.jpg)\n\n## \n\nListdebug\n\n\n\nArrayList\n\n```java\n@Test\npublic void testArrayList() {\n    List<Long> listA = new ArrayList<>();\n    listA.add(1L);\n    listA.add(2L);\n    List<Long> listB = new ArrayList<>();\n    listB.add(2L);\n    listB.add(3L);\n    listA.removeAll(listB);\n    System.out.println(JSON.toJSONString(listA));\n}\n```\n\n\n\n```\n[1]\n```\n\n\n\n![](https://i.loli.net/2019/05/18/5cdf7f0e86fbc84596.png)\n\n `UnsupportedOperationException`  `AbstractList`  `AbstractList`\n\n```java\npublic E remove(int index) {\n    throw new UnsupportedOperationException();\n}\n```\n\n`AbstractList` remove\n\nA\n\nA `Arrays.asList()` \n\n```java\npublic static <T> List<T> asList(T... a) {\n    return new ArrayList<>(a);\n}\n```\n\n `ArrayList` `ArrayList` `ArrayList`\n\n `Arrays.asList()`  `List`  `Arrays`  `ArrayList`  `ArrayList`  `ArrayList`\n\n![20190518101356.png](https://i.loli.net/2019/05/18/5cdf6a655276187010.png)\n\n![20190518101255.png](https://i.loli.net/2019/05/18/5cdf6a292b1d070453.png)\n\n `AbstractList`  `remove`  `remove` \n\n## Arrays.asList\n\n\n\n```\n /**\n* Returns a fixed-size list backed by the specified array.  (Changes to\n* the returned list \"write through\" to the array.)  This method acts\n* as bridge between array-based and collection-based APIs, in\n* combination with {@link Collection#toArray}.  The returned list is\n* serializable and implements {@link RandomAccess}.\n*\n* <p>This method also provides a convenient way to create a fixed-size\n* list initialized to contain several elements:\n* <pre>\n*     List&lt;String&gt; stooges = Arrays.asList(\"Larry\", \"Moe\", \"Curly\");\n* </pre>\n*\n* @param <T> the class of the objects in the array\n* @param a the array by which the list will be backed\n* @return a list view of the specified array\n*/\n```\n\n\n\n1\n\nArrayListaddremove\n\nsetreplaceAllsort\n\n2\n\nTest\n\n```java\n@Test\npublic void testArrays() {\n    Long[] longs = {1L,2L,4L,3L};\n    List<Long> longList = Arrays.asList(longs);\n    System.out.println(\"longList:\" + JSON.toJSONString(longList) + \"longs:\" + JSON.toJSONString(longs));\n\n    longList.set(1, 5L);\n    System.out.println(\"longList:\" + JSON.toJSONString(longList) + \"longs:\" + JSON.toJSONString(longs));\n\n    longList.replaceAll(a -> a + 1L);\n    System.out.println(\"longList:\" + JSON.toJSONString(longList) + \"longs:\" + JSON.toJSONString(longs));\n\n    longList.sort(Long::compareTo);\n    System.out.println(\"longList:\" + JSON.toJSONString(longList) + \"longs:\" + JSON.toJSONString(longs));\n\n    longs[2] = 7L;\n    System.out.println(\"longList:\" + JSON.toJSONString(longList) + \"longs:\" + JSON.toJSONString(longs));\n}\n```\n\n\n\n```\nlongList:[1,2,4,3]longs:[1,2,4,3]\nlongList:[1,5,4,3]longs:[1,5,4,3]\nlongList:[2,6,5,4]longs:[2,6,5,4]\nlongList:[2,4,5,6]longs:[2,4,5,6]\nlongList:[2,4,7,6]longs:[2,4,7,6]\n```\n\n\n\n3\n\n\n\n```java\n@Test\npublic void testArrays2() {\n    int[] ints = { 1, 2, 3 };\n    List list = Arrays.asList(ints);\n    System.out.println(list.size());\n}\n```\n\n`1`\n\n\n\n```java\n@param <T> the class of the objects in the array\n```\n\nT\n\n```java\n@Test\npublic void testArrays2() {\n    int[] ints = { 1, 2, 3 };\n    System.out.println(ints.getClass());\n    List list = Arrays.asList(ints);\n    System.out.println(JSON.toJSONString(list));\n}\n```\n\n\n\n```\nclass [I\n[[1,2,3]]\n```\n\nInteger\n\n```java\n@Test\npublic void testArrays2() {\n    Integer[] ints = { 1, 2, 3 };\n    System.out.println(ints.getClass());\n    List list = Arrays.asList(ints);\n    System.out.println(list.size());\n}\n```\n\n```\nclass [Ljava.lang.Integer;\n3\n```\n\n## \n\n `Arrays.asList()` \n\n![](https://i.loli.net/2019/05/18/5cdf7f4a7282234332.png)\n\n`Arrays.asList()`Guavafastjsonspringredisdubbo\n\n\n\n\n\n\n\n![](https://i.loli.net/2019/05/18/5cdf7daf74e9241031.png)","source":"_posts/java/problem/the-correct-operation-of-arrays.md","raw":"---\ntitle: List\ndate: 2019-05-18 09:00:02\ntags: \n - Java\n - \ncategories: \n---\n\n## \n\n\n\n![](https://i.loli.net/2019/05/18/5cdf7e9f2047e23793.png)\n\nGuavaListAB\n\n```java\npublic class ArrayListTest {\n    // HashMap\n    private Map<String, List<Long>> cache = new HashMap<>();\n    \n    private void save(){\n        List<Long> listA = createListA();\n        cache.put(\"listA\", listA);\n    }\n    \n    private void get(){\n        List<Long> listB = createListB();\n        List<Long> listA = cache.get(\"listA\");\n        listA.removeAll(listB);\n    }\n    \n    private List<Long> createListA(){\n        \n    }\n\n    private List<Long> createListB(){\n        \n    }\n\n    public static void main(String[] args){\n        ArrayListTest test = new ArrayListTest();\n        test.save();\n        test.get();\n    }\n}\n```\n\nsaveget\n\n![](https://i.loli.net/2019/05/18/5cdf7ec98fddd17705.png)\n\n```shell\nException in thread \"main\" java.lang.UnsupportedOperationException\n\tat java.util.AbstractList.remove(AbstractList.java:161)\n\tat java.util.AbstractList$Itr.remove(AbstractList.java:374)\n\tat java.util.AbstractCollection.removeAll(AbstractCollection.java:376)\n    ...\n```\n\n![](https://i.loli.net/2019/05/18/5cdf6539270f631562.jpg)\n\n## \n\nListdebug\n\n\n\nArrayList\n\n```java\n@Test\npublic void testArrayList() {\n    List<Long> listA = new ArrayList<>();\n    listA.add(1L);\n    listA.add(2L);\n    List<Long> listB = new ArrayList<>();\n    listB.add(2L);\n    listB.add(3L);\n    listA.removeAll(listB);\n    System.out.println(JSON.toJSONString(listA));\n}\n```\n\n\n\n```\n[1]\n```\n\n\n\n![](https://i.loli.net/2019/05/18/5cdf7f0e86fbc84596.png)\n\n `UnsupportedOperationException`  `AbstractList`  `AbstractList`\n\n```java\npublic E remove(int index) {\n    throw new UnsupportedOperationException();\n}\n```\n\n`AbstractList` remove\n\nA\n\nA `Arrays.asList()` \n\n```java\npublic static <T> List<T> asList(T... a) {\n    return new ArrayList<>(a);\n}\n```\n\n `ArrayList` `ArrayList` `ArrayList`\n\n `Arrays.asList()`  `List`  `Arrays`  `ArrayList`  `ArrayList`  `ArrayList`\n\n![20190518101356.png](https://i.loli.net/2019/05/18/5cdf6a655276187010.png)\n\n![20190518101255.png](https://i.loli.net/2019/05/18/5cdf6a292b1d070453.png)\n\n `AbstractList`  `remove`  `remove` \n\n## Arrays.asList\n\n\n\n```\n /**\n* Returns a fixed-size list backed by the specified array.  (Changes to\n* the returned list \"write through\" to the array.)  This method acts\n* as bridge between array-based and collection-based APIs, in\n* combination with {@link Collection#toArray}.  The returned list is\n* serializable and implements {@link RandomAccess}.\n*\n* <p>This method also provides a convenient way to create a fixed-size\n* list initialized to contain several elements:\n* <pre>\n*     List&lt;String&gt; stooges = Arrays.asList(\"Larry\", \"Moe\", \"Curly\");\n* </pre>\n*\n* @param <T> the class of the objects in the array\n* @param a the array by which the list will be backed\n* @return a list view of the specified array\n*/\n```\n\n\n\n1\n\nArrayListaddremove\n\nsetreplaceAllsort\n\n2\n\nTest\n\n```java\n@Test\npublic void testArrays() {\n    Long[] longs = {1L,2L,4L,3L};\n    List<Long> longList = Arrays.asList(longs);\n    System.out.println(\"longList:\" + JSON.toJSONString(longList) + \"longs:\" + JSON.toJSONString(longs));\n\n    longList.set(1, 5L);\n    System.out.println(\"longList:\" + JSON.toJSONString(longList) + \"longs:\" + JSON.toJSONString(longs));\n\n    longList.replaceAll(a -> a + 1L);\n    System.out.println(\"longList:\" + JSON.toJSONString(longList) + \"longs:\" + JSON.toJSONString(longs));\n\n    longList.sort(Long::compareTo);\n    System.out.println(\"longList:\" + JSON.toJSONString(longList) + \"longs:\" + JSON.toJSONString(longs));\n\n    longs[2] = 7L;\n    System.out.println(\"longList:\" + JSON.toJSONString(longList) + \"longs:\" + JSON.toJSONString(longs));\n}\n```\n\n\n\n```\nlongList:[1,2,4,3]longs:[1,2,4,3]\nlongList:[1,5,4,3]longs:[1,5,4,3]\nlongList:[2,6,5,4]longs:[2,6,5,4]\nlongList:[2,4,5,6]longs:[2,4,5,6]\nlongList:[2,4,7,6]longs:[2,4,7,6]\n```\n\n\n\n3\n\n\n\n```java\n@Test\npublic void testArrays2() {\n    int[] ints = { 1, 2, 3 };\n    List list = Arrays.asList(ints);\n    System.out.println(list.size());\n}\n```\n\n`1`\n\n\n\n```java\n@param <T> the class of the objects in the array\n```\n\nT\n\n```java\n@Test\npublic void testArrays2() {\n    int[] ints = { 1, 2, 3 };\n    System.out.println(ints.getClass());\n    List list = Arrays.asList(ints);\n    System.out.println(JSON.toJSONString(list));\n}\n```\n\n\n\n```\nclass [I\n[[1,2,3]]\n```\n\nInteger\n\n```java\n@Test\npublic void testArrays2() {\n    Integer[] ints = { 1, 2, 3 };\n    System.out.println(ints.getClass());\n    List list = Arrays.asList(ints);\n    System.out.println(list.size());\n}\n```\n\n```\nclass [Ljava.lang.Integer;\n3\n```\n\n## \n\n `Arrays.asList()` \n\n![](https://i.loli.net/2019/05/18/5cdf7f4a7282234332.png)\n\n`Arrays.asList()`Guavafastjsonspringredisdubbo\n\n\n\n\n\n\n\n![](https://i.loli.net/2019/05/18/5cdf7daf74e9241031.png)","slug":"java/problem/the-correct-operation-of-arrays","published":1,"updated":"2019-06-04T01:29:57.373Z","_id":"cjxze3gwa00550cvwlu8qcz9r","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf7e9f2047e23793.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>GuavaListAB</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ArrayListTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// HashMap</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Map&lt;String, List&lt;Long&gt;&gt; cache = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        List&lt;Long&gt; listA = createListA();</span><br><span class=\"line\">        cache.put(<span class=\"string\">\"listA\"</span>, listA);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">get</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        List&lt;Long&gt; listB = createListB();</span><br><span class=\"line\">        List&lt;Long&gt; listA = cache.get(<span class=\"string\">\"listA\"</span>);</span><br><span class=\"line\">        listA.removeAll(listB);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> List&lt;Long&gt; <span class=\"title\">createListA</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> List&lt;Long&gt; <span class=\"title\">createListB</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        ArrayListTest test = <span class=\"keyword\">new</span> ArrayListTest();</span><br><span class=\"line\">        test.save();</span><br><span class=\"line\">        test.get();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>saveget</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf7ec98fddd17705.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Exception in thread \"main\" java.lang.UnsupportedOperationException</span><br><span class=\"line\">\tat java.util.AbstractList.remove(AbstractList.java:161)</span><br><span class=\"line\">\tat java.util.AbstractList$Itr.remove(AbstractList.java:374)</span><br><span class=\"line\">\tat java.util.AbstractCollection.removeAll(AbstractCollection.java:376)</span><br><span class=\"line\">    ...</span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf6539270f631562.jpg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Listdebug</p>\n<p></p>\n<p>ArrayList</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testArrayList</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    List&lt;Long&gt; listA = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">    listA.add(<span class=\"number\">1L</span>);</span><br><span class=\"line\">    listA.add(<span class=\"number\">2L</span>);</span><br><span class=\"line\">    List&lt;Long&gt; listB = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">    listB.add(<span class=\"number\">2L</span>);</span><br><span class=\"line\">    listB.add(<span class=\"number\">3L</span>);</span><br><span class=\"line\">    listA.removeAll(listB);</span><br><span class=\"line\">    System.out.println(JSON.toJSONString(listA));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[1]</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf7f0e86fbc84596.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p> <code>UnsupportedOperationException</code>  <code>AbstractList</code>  <code>AbstractList</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> E <span class=\"title\">remove</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>AbstractList</code> remove</p>\n<p>A</p>\n<p>A <code>Arrays.asList()</code> </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;T&gt; <span class=\"function\">List&lt;T&gt; <span class=\"title\">asList</span><span class=\"params\">(T... a)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ArrayList&lt;&gt;(a);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>ArrayList</code> <code>ArrayList</code> <code>ArrayList</code></p>\n<p> <code>Arrays.asList()</code>  <code>List</code>  <code>Arrays</code>  <code>ArrayList</code>  <code>ArrayList</code>  <code>ArrayList</code></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf6a655276187010.png\" alt=\"20190518101356.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190518101356.png</div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf6a292b1d070453.png\" alt=\"20190518101255.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190518101255.png</div>\n            </figure>\n<p> <code>AbstractList</code>  <code>remove</code>  <code>remove</code> </p>\n<h2 id=\"Arrays-asList\"><a href=\"#Arrays-asList\" class=\"headerlink\" title=\"Arrays.asList\"></a>Arrays.asList</h2><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> /**</span><br><span class=\"line\">* Returns a fixed-size list backed by the specified array.  (Changes to</span><br><span class=\"line\">* the returned list &quot;write through&quot; to the array.)  This method acts</span><br><span class=\"line\">* as bridge between array-based and collection-based APIs, in</span><br><span class=\"line\">* combination with &#123;@link Collection#toArray&#125;.  The returned list is</span><br><span class=\"line\">* serializable and implements &#123;@link RandomAccess&#125;.</span><br><span class=\"line\">*</span><br><span class=\"line\">* &lt;p&gt;This method also provides a convenient way to create a fixed-size</span><br><span class=\"line\">* list initialized to contain several elements:</span><br><span class=\"line\">* &lt;pre&gt;</span><br><span class=\"line\">*     List&amp;lt;String&amp;gt; stooges = Arrays.asList(&quot;Larry&quot;, &quot;Moe&quot;, &quot;Curly&quot;);</span><br><span class=\"line\">* &lt;/pre&gt;</span><br><span class=\"line\">*</span><br><span class=\"line\">* @param &lt;T&gt; the class of the objects in the array</span><br><span class=\"line\">* @param a the array by which the list will be backed</span><br><span class=\"line\">* @return a list view of the specified array</span><br><span class=\"line\">*/</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>1</p>\n<p>ArrayListaddremove</p>\n<p>setreplaceAllsort</p>\n<p>2</p>\n<p>Test</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testArrays</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    Long[] longs = &#123;<span class=\"number\">1L</span>,<span class=\"number\">2L</span>,<span class=\"number\">4L</span>,<span class=\"number\">3L</span>&#125;;</span><br><span class=\"line\">    List&lt;Long&gt; longList = Arrays.asList(longs);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"longList:\"</span> + JSON.toJSONString(longList) + <span class=\"string\">\"longs:\"</span> + JSON.toJSONString(longs));</span><br><span class=\"line\"></span><br><span class=\"line\">    longList.set(<span class=\"number\">1</span>, <span class=\"number\">5L</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"longList:\"</span> + JSON.toJSONString(longList) + <span class=\"string\">\"longs:\"</span> + JSON.toJSONString(longs));</span><br><span class=\"line\"></span><br><span class=\"line\">    longList.replaceAll(a -&gt; a + <span class=\"number\">1L</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"longList:\"</span> + JSON.toJSONString(longList) + <span class=\"string\">\"longs:\"</span> + JSON.toJSONString(longs));</span><br><span class=\"line\"></span><br><span class=\"line\">    longList.sort(Long::compareTo);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"longList:\"</span> + JSON.toJSONString(longList) + <span class=\"string\">\"longs:\"</span> + JSON.toJSONString(longs));</span><br><span class=\"line\"></span><br><span class=\"line\">    longs[<span class=\"number\">2</span>] = <span class=\"number\">7L</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"longList:\"</span> + JSON.toJSONString(longList) + <span class=\"string\">\"longs:\"</span> + JSON.toJSONString(longs));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">longList:[1,2,4,3]longs:[1,2,4,3]</span><br><span class=\"line\">longList:[1,5,4,3]longs:[1,5,4,3]</span><br><span class=\"line\">longList:[2,6,5,4]longs:[2,6,5,4]</span><br><span class=\"line\">longList:[2,4,5,6]longs:[2,4,5,6]</span><br><span class=\"line\">longList:[2,4,7,6]longs:[2,4,7,6]</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>3</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testArrays2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ints = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> &#125;;</span><br><span class=\"line\">    List list = Arrays.asList(ints);</span><br><span class=\"line\">    System.out.println(list.size());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>1</code></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@param</span> &lt;T&gt; the <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">of</span> <span class=\"title\">the</span> <span class=\"title\">objects</span> <span class=\"title\">in</span> <span class=\"title\">the</span> <span class=\"title\">array</span></span></span><br></pre></td></tr></table></figure>\n<p>T</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testArrays2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ints = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> &#125;;</span><br><span class=\"line\">    System.out.println(ints.getClass());</span><br><span class=\"line\">    List list = Arrays.asList(ints);</span><br><span class=\"line\">    System.out.println(JSON.toJSONString(list));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class [I</span><br><span class=\"line\">[[1,2,3]]</span><br></pre></td></tr></table></figure>\n<p>Integer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testArrays2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    Integer[] ints = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> &#125;;</span><br><span class=\"line\">    System.out.println(ints.getClass());</span><br><span class=\"line\">    List list = Arrays.asList(ints);</span><br><span class=\"line\">    System.out.println(list.size());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class [Ljava.lang.Integer;</span><br><span class=\"line\">3</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <code>Arrays.asList()</code> </p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf7f4a7282234332.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>Arrays.asList()</code>Guavafastjsonspringredisdubbo</p>\n<p></p>\n<p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf7daf74e9241031.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf7e9f2047e23793.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>GuavaListAB</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ArrayListTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// HashMap</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Map&lt;String, List&lt;Long&gt;&gt; cache = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">save</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        List&lt;Long&gt; listA = createListA();</span><br><span class=\"line\">        cache.put(<span class=\"string\">\"listA\"</span>, listA);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">get</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        List&lt;Long&gt; listB = createListB();</span><br><span class=\"line\">        List&lt;Long&gt; listA = cache.get(<span class=\"string\">\"listA\"</span>);</span><br><span class=\"line\">        listA.removeAll(listB);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> List&lt;Long&gt; <span class=\"title\">createListA</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> List&lt;Long&gt; <span class=\"title\">createListB</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        ArrayListTest test = <span class=\"keyword\">new</span> ArrayListTest();</span><br><span class=\"line\">        test.save();</span><br><span class=\"line\">        test.get();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>saveget</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf7ec98fddd17705.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Exception in thread \"main\" java.lang.UnsupportedOperationException</span><br><span class=\"line\">\tat java.util.AbstractList.remove(AbstractList.java:161)</span><br><span class=\"line\">\tat java.util.AbstractList$Itr.remove(AbstractList.java:374)</span><br><span class=\"line\">\tat java.util.AbstractCollection.removeAll(AbstractCollection.java:376)</span><br><span class=\"line\">    ...</span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf6539270f631562.jpg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Listdebug</p>\n<p></p>\n<p>ArrayList</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testArrayList</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    List&lt;Long&gt; listA = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">    listA.add(<span class=\"number\">1L</span>);</span><br><span class=\"line\">    listA.add(<span class=\"number\">2L</span>);</span><br><span class=\"line\">    List&lt;Long&gt; listB = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">    listB.add(<span class=\"number\">2L</span>);</span><br><span class=\"line\">    listB.add(<span class=\"number\">3L</span>);</span><br><span class=\"line\">    listA.removeAll(listB);</span><br><span class=\"line\">    System.out.println(JSON.toJSONString(listA));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[1]</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf7f0e86fbc84596.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p> <code>UnsupportedOperationException</code>  <code>AbstractList</code>  <code>AbstractList</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> E <span class=\"title\">remove</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsupportedOperationException();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>AbstractList</code> remove</p>\n<p>A</p>\n<p>A <code>Arrays.asList()</code> </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;T&gt; <span class=\"function\">List&lt;T&gt; <span class=\"title\">asList</span><span class=\"params\">(T... a)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ArrayList&lt;&gt;(a);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>ArrayList</code> <code>ArrayList</code> <code>ArrayList</code></p>\n<p> <code>Arrays.asList()</code>  <code>List</code>  <code>Arrays</code>  <code>ArrayList</code>  <code>ArrayList</code>  <code>ArrayList</code></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf6a655276187010.png\" alt=\"20190518101356.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190518101356.png</div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf6a292b1d070453.png\" alt=\"20190518101255.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190518101255.png</div>\n            </figure>\n<p> <code>AbstractList</code>  <code>remove</code>  <code>remove</code> </p>\n<h2 id=\"Arrays-asList\"><a href=\"#Arrays-asList\" class=\"headerlink\" title=\"Arrays.asList\"></a>Arrays.asList</h2><p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> /**</span><br><span class=\"line\">* Returns a fixed-size list backed by the specified array.  (Changes to</span><br><span class=\"line\">* the returned list &quot;write through&quot; to the array.)  This method acts</span><br><span class=\"line\">* as bridge between array-based and collection-based APIs, in</span><br><span class=\"line\">* combination with &#123;@link Collection#toArray&#125;.  The returned list is</span><br><span class=\"line\">* serializable and implements &#123;@link RandomAccess&#125;.</span><br><span class=\"line\">*</span><br><span class=\"line\">* &lt;p&gt;This method also provides a convenient way to create a fixed-size</span><br><span class=\"line\">* list initialized to contain several elements:</span><br><span class=\"line\">* &lt;pre&gt;</span><br><span class=\"line\">*     List&amp;lt;String&amp;gt; stooges = Arrays.asList(&quot;Larry&quot;, &quot;Moe&quot;, &quot;Curly&quot;);</span><br><span class=\"line\">* &lt;/pre&gt;</span><br><span class=\"line\">*</span><br><span class=\"line\">* @param &lt;T&gt; the class of the objects in the array</span><br><span class=\"line\">* @param a the array by which the list will be backed</span><br><span class=\"line\">* @return a list view of the specified array</span><br><span class=\"line\">*/</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>1</p>\n<p>ArrayListaddremove</p>\n<p>setreplaceAllsort</p>\n<p>2</p>\n<p>Test</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testArrays</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    Long[] longs = &#123;<span class=\"number\">1L</span>,<span class=\"number\">2L</span>,<span class=\"number\">4L</span>,<span class=\"number\">3L</span>&#125;;</span><br><span class=\"line\">    List&lt;Long&gt; longList = Arrays.asList(longs);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"longList:\"</span> + JSON.toJSONString(longList) + <span class=\"string\">\"longs:\"</span> + JSON.toJSONString(longs));</span><br><span class=\"line\"></span><br><span class=\"line\">    longList.set(<span class=\"number\">1</span>, <span class=\"number\">5L</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"longList:\"</span> + JSON.toJSONString(longList) + <span class=\"string\">\"longs:\"</span> + JSON.toJSONString(longs));</span><br><span class=\"line\"></span><br><span class=\"line\">    longList.replaceAll(a -&gt; a + <span class=\"number\">1L</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"longList:\"</span> + JSON.toJSONString(longList) + <span class=\"string\">\"longs:\"</span> + JSON.toJSONString(longs));</span><br><span class=\"line\"></span><br><span class=\"line\">    longList.sort(Long::compareTo);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"longList:\"</span> + JSON.toJSONString(longList) + <span class=\"string\">\"longs:\"</span> + JSON.toJSONString(longs));</span><br><span class=\"line\"></span><br><span class=\"line\">    longs[<span class=\"number\">2</span>] = <span class=\"number\">7L</span>;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"longList:\"</span> + JSON.toJSONString(longList) + <span class=\"string\">\"longs:\"</span> + JSON.toJSONString(longs));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">longList:[1,2,4,3]longs:[1,2,4,3]</span><br><span class=\"line\">longList:[1,5,4,3]longs:[1,5,4,3]</span><br><span class=\"line\">longList:[2,6,5,4]longs:[2,6,5,4]</span><br><span class=\"line\">longList:[2,4,5,6]longs:[2,4,5,6]</span><br><span class=\"line\">longList:[2,4,7,6]longs:[2,4,7,6]</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>3</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testArrays2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ints = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> &#125;;</span><br><span class=\"line\">    List list = Arrays.asList(ints);</span><br><span class=\"line\">    System.out.println(list.size());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>1</code></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@param</span> &lt;T&gt; the <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">of</span> <span class=\"title\">the</span> <span class=\"title\">objects</span> <span class=\"title\">in</span> <span class=\"title\">the</span> <span class=\"title\">array</span></span></span><br></pre></td></tr></table></figure>\n<p>T</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testArrays2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] ints = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> &#125;;</span><br><span class=\"line\">    System.out.println(ints.getClass());</span><br><span class=\"line\">    List list = Arrays.asList(ints);</span><br><span class=\"line\">    System.out.println(JSON.toJSONString(list));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class [I</span><br><span class=\"line\">[[1,2,3]]</span><br></pre></td></tr></table></figure>\n<p>Integer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testArrays2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    Integer[] ints = &#123; <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span> &#125;;</span><br><span class=\"line\">    System.out.println(ints.getClass());</span><br><span class=\"line\">    List list = Arrays.asList(ints);</span><br><span class=\"line\">    System.out.println(list.size());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class [Ljava.lang.Integer;</span><br><span class=\"line\">3</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <code>Arrays.asList()</code> </p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf7f4a7282234332.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>Arrays.asList()</code>Guavafastjsonspringredisdubbo</p>\n<p></p>\n<p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf7daf74e9241031.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>"},{"title":"","date":"2018-12-28T11:55:51.000Z","_content":"\n## \n\nJavaReachableGC RootsReference ChainGC Roots\n\n## \n\n\n\nstrongly reachablesoftly reachableweakly reachablephantom reachableunreachable\n\n``` bash\n\n\n\n\n\n```\n\nJava\n\n{% asset_img accessibility1.png accessibility %}\n\n## GC Roots\n\nGC RootsGC Roots\n\n```bash\n1. ()\n2. \n3. \n4. JNINative\n```\n\n## \n\nJVMGCGC Roots \n\n{% asset_img accessibility2.png accessibility %}\n\nJVM\n\n1. \n2. \n\nObj43:1->62->53->4, Obj42->5Obj4strong reachable\n\nObj41->6,Obj4SoftReference,Obj4softly-reachable\n\nHotSpot[](./reachable-in-hotspot.md)\n","source":"_posts/java/jvm/reachable.md","raw":"---\ntitle: \ntags: \n - Java\ncategories: \ndate: 2018-12-28 19:55:51\n---\n\n## \n\nJavaReachableGC RootsReference ChainGC Roots\n\n## \n\n\n\nstrongly reachablesoftly reachableweakly reachablephantom reachableunreachable\n\n``` bash\n\n\n\n\n\n```\n\nJava\n\n{% asset_img accessibility1.png accessibility %}\n\n## GC Roots\n\nGC RootsGC Roots\n\n```bash\n1. ()\n2. \n3. \n4. JNINative\n```\n\n## \n\nJVMGCGC Roots \n\n{% asset_img accessibility2.png accessibility %}\n\nJVM\n\n1. \n2. \n\nObj43:1->62->53->4, Obj42->5Obj4strong reachable\n\nObj41->6,Obj4SoftReference,Obj4softly-reachable\n\nHotSpot[](./reachable-in-hotspot.md)\n","slug":"java/jvm/reachable","published":1,"updated":"2019-06-04T01:29:57.338Z","_id":"cjxze3gwk00590cvwnvqe92ba","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaReachableGC RootsReference ChainGC Roots</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>strongly reachablesoftly reachableweakly reachablephantom reachableunreachable</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>Java</p>\n\n<h2 id=\"GC-Roots\"><a href=\"#GC-Roots\" class=\"headerlink\" title=\"GC Roots\"></a>GC Roots</h2><p>GC RootsGC Roots</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. ()</span><br><span class=\"line\">2. </span><br><span class=\"line\">3. </span><br><span class=\"line\">4. JNINative</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JVMGCGC Roots </p>\n<img src=\"/programming/java/jvm/reachable/accessibility2.png\" title=\"accessibility\">\n<p>JVM</p>\n<ol>\n<li></li>\n<li></li>\n</ol>\n<p>Obj43:1-&gt;62-&gt;53-&gt;4, Obj42-&gt;5Obj4strong reachable</p>\n<p>Obj41-&gt;6,Obj4SoftReference,Obj4softly-reachable</p>\n<p>HotSpot<a href=\"./reachable-in-hotspot.md\"></a></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavaReachableGC RootsReference ChainGC Roots</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>strongly reachablesoftly reachableweakly reachablephantom reachableunreachable</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>Java</p>\n\n<h2 id=\"GC-Roots\"><a href=\"#GC-Roots\" class=\"headerlink\" title=\"GC Roots\"></a>GC Roots</h2><p>GC RootsGC Roots</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. ()</span><br><span class=\"line\">2. </span><br><span class=\"line\">3. </span><br><span class=\"line\">4. JNINative</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JVMGCGC Roots </p>\n<img src=\"/programming/java/jvm/reachable/accessibility2.png\" title=\"accessibility\">\n<p>JVM</p>\n<ol>\n<li></li>\n<li></li>\n</ol>\n<p>Obj43:1-&gt;62-&gt;53-&gt;4, Obj42-&gt;5Obj4strong reachable</p>\n<p>Obj41-&gt;6,Obj4SoftReference,Obj4softly-reachable</p>\n<p>HotSpot<a href=\"./reachable-in-hotspot.md\"></a></p>\n"},{"title":"PhantomReference","date":"2018-12-29T12:20:51.000Z","_content":"\n## \n\nPhantomReference\n\n## \n\nPhantomReferenceWeakReference\n\n```java\npublic class PhantomReference<T> extends Reference<T> {\n    public T get() {\n        return null;\n    }\n\n    /**\n     * null\n     */\n    public PhantomReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n}\n```\n\ngetnull\n\n<img src=\"/images/06.png\" width=\"40\"/>","source":"_posts/java/reference/phantom-reference-code-detail.md","raw":"---\ntitle: PhantomReference\ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 20:20:51\n---\n\n## \n\nPhantomReference\n\n## \n\nPhantomReferenceWeakReference\n\n```java\npublic class PhantomReference<T> extends Reference<T> {\n    public T get() {\n        return null;\n    }\n\n    /**\n     * null\n     */\n    public PhantomReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n}\n```\n\ngetnull\n\n<img src=\"/images/06.png\" width=\"40\"/>","slug":"java/reference/phantom-reference-code-detail","published":1,"updated":"2019-06-04T01:29:57.400Z","_id":"cjxze3gwk005c0cvwle6qbx0f","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>PhantomReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>PhantomReferenceWeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PhantomReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * null</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PhantomReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getnull</p>\n<p><img src=\"/images/06.png\" width=\"40\"></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>PhantomReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>PhantomReferenceWeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PhantomReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * null</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PhantomReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>getnull</p>\n<p><img src=\"/images/06.png\" width=\"40\"></p>\n"},{"title":"FinalReference  Finalizer ","date":"2018-12-29T11:55:51.000Z","_content":"\n# FinalReference  Finalizer \n\n## \n\nFinalReferenceFinalizer\n\n<img src=\"/images/0012.png\"/>\n\n<img src=\"/images/0190.png\" width=\"40\"/>\n\nFinalReferenceReference\n\n```java\nclass FinalReference<T> extends Reference<T> {\n    public FinalReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n}\n```\n\n\n\nFinalReferenceJVMJVMObjectfinalize()FinalReference JVMFinalizerFinalizer\n\n## Finalizer\n\nfinalabstractpublicJVMfinalizerObjectfinalizefinalizerJVMfGCfinalize\n\n## Finalizer\n\njava.lang.refFinalReferenceFinalizer<img src=\"/images/06.png\" width=\"40\"/>\n\n```java\nfinal class Finalizer extends FinalReference<Object> {\n    ...\n}\n```\n\nemm.FinalizerFinalReferencefinal\n\nJVM\n\nfinalizeJVMFinalizerJVMFinalizer.register()Finalizer\n\n### \n\nFinalizer\n\n```java\nprivate Finalizer\n        next = null,\n        prev = null;\n```\n\nFinalizernextprev\n\n```java\nprivate static final Object lock = new Object();\n```\n\nlock\n\n```java\nprivate static Finalizer unfinalized = null;\n```\n\nunfinalizedffffinalizeGC\n\n```java\nprivate static ReferenceQueue<Object> queue = new ReferenceQueue<>();\n```\n\nqueueJVMFfqueueFinalizerThreadGCGC\n\n### \n\n```java\nprivate Finalizer(Object finalizee) {\n    super(finalizee, queue);\n    add();\n}\n```\n\naddFinalizerf\n\n### \n\nFinalizerFinalizerregisterFinalizer\n\n```java\nstatic void register(Object finalizee) {\n    new Finalizer(finalizee);\n}\n```\n\nJVM\n\nJVMFinalizer.registerFinalizerf\n\nclonefcloneFinalizer.register\n\n```java\nprivate void add() {\n    synchronized (lock) {\n        if (unfinalized != null) {\n            this.next = unfinalized;\n            unfinalized.prev = this;\n        }\n        unfinalized = this;\n    }\n}\n```\n\naddlockf\n\n```java\nprivate void remove() {\n    synchronized (lock) {\n        if (unfinalized == this) {\n            if (this.next != null) {\n                unfinalized = this.next;\n            } else {\n                unfinalized = this.prev;\n            }\n        }\n        if (this.next != null) {\n            this.next.prev = this.prev;\n        }\n        if (this.prev != null) {\n            this.prev.next = this.next;\n        }\n        this.next = this; \n        this.prev = this;\n    }\n}\n```\n\nremovelockfnextprevffinalize\n\n```java\nprivate boolean hasBeenFinalized() {\n    return (next == this);\n}\n```\n\nhasBeenFinalizedffinalizenext == this\n\n### FinalizerThread\n\nFinalizerFinalizerThread\n\n```java\nstatic {\n    ThreadGroup tg = Thread.currentThread().getThreadGroup();\n    for (ThreadGroup tgn = tg;\n         tgn != null;\n         tg = tgn, tgn = tg.getParent());\n    Thread finalizer = new FinalizerThread(tg);\n    finalizer.setPriority(Thread.MAX_PRIORITY - 2);\n    finalizer.setDaemon(true);\n    finalizer.start();\n}\n```\n\nReferenceHandler\n\n```java\nfinalizer.setPriority(Thread.MAX_PRIORITY - 2);\n```\n\nCPU\n\n```java\nprivate static class FinalizerThread extends Thread {\n    // \n    private volatile boolean running;\n    FinalizerThread(ThreadGroup g) {\n        super(g, \"Finalizer\");\n    }\n    public void run() {\n        // \n        if (running)\n            return;\n\n        // Finalizer System.initializeSystemClass \n        // JVM\n        while (!VM.isBooted()) {\n            try {\n                VM.awaitBooted();\n            } catch (InterruptedException x) {\n            }\n        }\n        final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n        running = true;\n        for (;;) {\n            try {\n                // \n                Finalizer f = (Finalizer)queue.remove();\n                // runFinalizer\n                f.runFinalizer(jla);\n            } catch (InterruptedException x) {\n                // \n            }\n        }\n    }\n}\n```\n\nJVMrunFinalizertrycatch**finalize**\n\n```java\nprivate void runFinalizer(JavaLangAccess jla) {\n    synchronized (this) {\n        // finalize\n        if (hasBeenFinalized()) return;\n        remove();\n    }\n    try {\n        // \n        Object finalizee = this.get();\n        // nullEnum\n        if (finalizee != null && !(finalizee instanceof java.lang.Enum)) {\n            // finalize\n            jla.invokeFinalize(finalizee);\n\n            // GC\n            finalizee = null;\n        }\n    } catch (Throwable x) { }\n    // Referenceclear\n    super.clear();\n}\n```\n\nfinalize**finalize**ffinalizefinalizeJVM\n\nFinalizerfinalizenull\n\n### SecondaryFinalizer\n\nemmm.runFinalizationrunAllFinalizersqueueFinalizerrunFinalizerfrunFinalizer\n\n```java\nstatic void runFinalization() {\n    if (!VM.isBooted()) {\n        return;\n    }\n\n    forkSecondaryFinalizer(new Runnable() {\n        private volatile boolean running;\n        public void run() {\n            // \n            if (running)\n                return;\n            final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n            running = true;\n            for (;;) {\n                Finalizer f = (Finalizer)queue.poll();\n                if (f == null) break;\n                f.runFinalizer(jla);\n            }\n        }\n    });\n}\n```\n\nrunFinalizationFinalizerThreadrunFinalizerRuntimeShutdownJVM\n\nSystem.runFinalizationRuntime.runFinalizationFinalizer.runFinalization\n\nrunAllFinalizers\n\n```java\nstatic void runAllFinalizers() {\n    if (!VM.isBooted()) {\n        return;\n    }\n\n    forkSecondaryFinalizer(new Runnable() {\n        private volatile boolean running;\n        public void run() {\n            // \n            if (running)\n                return;\n            final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n            running = true;\n            for (;;) {\n                Finalizer f;\n                synchronized (lock) {\n                    f = unfinalized;\n                    if (f == null) break;\n                    unfinalized = f.next;\n                }\n                f.runFinalizer(jla);\n            }}});\n}\n```\n\nqueueunfinalized\n\njava.lang.ShutDownsequencerunAllFinalizer\n\n```java\nif (rfoe) runAllFinalizers();\n```\n\nJVMFinalizerrunAllFinalizer\n\n```java\n/* Wormhole for invoking java.lang.ref.Finalizer.runAllFinalizers */\nprivate static native void runAllFinalizers();\n```\n\nforkSecondaryFinalizer\n\n```java\nprivate static void forkSecondaryFinalizer(final Runnable proc) {\n    AccessController.doPrivileged(\n        new PrivilegedAction<Void>() {\n            public Void run() {\n                ThreadGroup tg = Thread.currentThread().getThreadGroup();\n                for (ThreadGroup tgn = tg;\n                     tgn != null;\n                     tg = tgn, tgn = tg.getParent());\n                Thread sft = new Thread(tg, proc, \"Secondary finalizer\");\n                sft.start();\n                try {\n                    sft.join();\n                } catch (InterruptedException x) {\n                    Thread.currentThread().interrupt();\n                }\n                return null;\n            }});\n}\n```\n\nAccessController.doPrivileged[Java](https://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/)\n\nrunrun\n\n### Finalizer\n\nfinalize\n\nfinalizeJavaFinalizer;\n\n> Finalizerfinalizerfinalize\n\nfinalizefinalizefinalize\n\nfinalizefinalizebugJava\n\nfinalizefinalizationJVMJVMfinalization\n\nFinalizeThreadCPUFinalizerffinalize\n\nfGCGCfinalizeGCGCFinalizerThread\n\nf<img src=\"/images/0190.png\" width=\"40\"/>\n\nfFinalizerfunfinalizedFinalizerFinalizer\n\nfinalizeSystem.runFinalization\n\n### Finalizer \n\nFinalizer<img src=\"/images/0012.png\" width=\"50\"/>\n\nFinalizernativaCmallocfinalizenativefree\n\nsocketsFinalizerFinalizer\n\n## \n\n\n\n+ FinalReferencefinalize\n+ ObjectfinalizefJVM\n+ fFinalizer\n+ fGC\n+ ffinalizefGCfinalizeGC\n+ FinalizerGCGCFinalizerunfinalizedfinalize\n+ ffinalize\n+ ffinalizefoldGCFull GCGC\n","source":"_posts/java/reference/final-reference-code-detail.md","raw":"---\ntitle: FinalReference  Finalizer \ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 19:55:51\n---\n\n# FinalReference  Finalizer \n\n## \n\nFinalReferenceFinalizer\n\n<img src=\"/images/0012.png\"/>\n\n<img src=\"/images/0190.png\" width=\"40\"/>\n\nFinalReferenceReference\n\n```java\nclass FinalReference<T> extends Reference<T> {\n    public FinalReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n}\n```\n\n\n\nFinalReferenceJVMJVMObjectfinalize()FinalReference JVMFinalizerFinalizer\n\n## Finalizer\n\nfinalabstractpublicJVMfinalizerObjectfinalizefinalizerJVMfGCfinalize\n\n## Finalizer\n\njava.lang.refFinalReferenceFinalizer<img src=\"/images/06.png\" width=\"40\"/>\n\n```java\nfinal class Finalizer extends FinalReference<Object> {\n    ...\n}\n```\n\nemm.FinalizerFinalReferencefinal\n\nJVM\n\nfinalizeJVMFinalizerJVMFinalizer.register()Finalizer\n\n### \n\nFinalizer\n\n```java\nprivate Finalizer\n        next = null,\n        prev = null;\n```\n\nFinalizernextprev\n\n```java\nprivate static final Object lock = new Object();\n```\n\nlock\n\n```java\nprivate static Finalizer unfinalized = null;\n```\n\nunfinalizedffffinalizeGC\n\n```java\nprivate static ReferenceQueue<Object> queue = new ReferenceQueue<>();\n```\n\nqueueJVMFfqueueFinalizerThreadGCGC\n\n### \n\n```java\nprivate Finalizer(Object finalizee) {\n    super(finalizee, queue);\n    add();\n}\n```\n\naddFinalizerf\n\n### \n\nFinalizerFinalizerregisterFinalizer\n\n```java\nstatic void register(Object finalizee) {\n    new Finalizer(finalizee);\n}\n```\n\nJVM\n\nJVMFinalizer.registerFinalizerf\n\nclonefcloneFinalizer.register\n\n```java\nprivate void add() {\n    synchronized (lock) {\n        if (unfinalized != null) {\n            this.next = unfinalized;\n            unfinalized.prev = this;\n        }\n        unfinalized = this;\n    }\n}\n```\n\naddlockf\n\n```java\nprivate void remove() {\n    synchronized (lock) {\n        if (unfinalized == this) {\n            if (this.next != null) {\n                unfinalized = this.next;\n            } else {\n                unfinalized = this.prev;\n            }\n        }\n        if (this.next != null) {\n            this.next.prev = this.prev;\n        }\n        if (this.prev != null) {\n            this.prev.next = this.next;\n        }\n        this.next = this; \n        this.prev = this;\n    }\n}\n```\n\nremovelockfnextprevffinalize\n\n```java\nprivate boolean hasBeenFinalized() {\n    return (next == this);\n}\n```\n\nhasBeenFinalizedffinalizenext == this\n\n### FinalizerThread\n\nFinalizerFinalizerThread\n\n```java\nstatic {\n    ThreadGroup tg = Thread.currentThread().getThreadGroup();\n    for (ThreadGroup tgn = tg;\n         tgn != null;\n         tg = tgn, tgn = tg.getParent());\n    Thread finalizer = new FinalizerThread(tg);\n    finalizer.setPriority(Thread.MAX_PRIORITY - 2);\n    finalizer.setDaemon(true);\n    finalizer.start();\n}\n```\n\nReferenceHandler\n\n```java\nfinalizer.setPriority(Thread.MAX_PRIORITY - 2);\n```\n\nCPU\n\n```java\nprivate static class FinalizerThread extends Thread {\n    // \n    private volatile boolean running;\n    FinalizerThread(ThreadGroup g) {\n        super(g, \"Finalizer\");\n    }\n    public void run() {\n        // \n        if (running)\n            return;\n\n        // Finalizer System.initializeSystemClass \n        // JVM\n        while (!VM.isBooted()) {\n            try {\n                VM.awaitBooted();\n            } catch (InterruptedException x) {\n            }\n        }\n        final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n        running = true;\n        for (;;) {\n            try {\n                // \n                Finalizer f = (Finalizer)queue.remove();\n                // runFinalizer\n                f.runFinalizer(jla);\n            } catch (InterruptedException x) {\n                // \n            }\n        }\n    }\n}\n```\n\nJVMrunFinalizertrycatch**finalize**\n\n```java\nprivate void runFinalizer(JavaLangAccess jla) {\n    synchronized (this) {\n        // finalize\n        if (hasBeenFinalized()) return;\n        remove();\n    }\n    try {\n        // \n        Object finalizee = this.get();\n        // nullEnum\n        if (finalizee != null && !(finalizee instanceof java.lang.Enum)) {\n            // finalize\n            jla.invokeFinalize(finalizee);\n\n            // GC\n            finalizee = null;\n        }\n    } catch (Throwable x) { }\n    // Referenceclear\n    super.clear();\n}\n```\n\nfinalize**finalize**ffinalizefinalizeJVM\n\nFinalizerfinalizenull\n\n### SecondaryFinalizer\n\nemmm.runFinalizationrunAllFinalizersqueueFinalizerrunFinalizerfrunFinalizer\n\n```java\nstatic void runFinalization() {\n    if (!VM.isBooted()) {\n        return;\n    }\n\n    forkSecondaryFinalizer(new Runnable() {\n        private volatile boolean running;\n        public void run() {\n            // \n            if (running)\n                return;\n            final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n            running = true;\n            for (;;) {\n                Finalizer f = (Finalizer)queue.poll();\n                if (f == null) break;\n                f.runFinalizer(jla);\n            }\n        }\n    });\n}\n```\n\nrunFinalizationFinalizerThreadrunFinalizerRuntimeShutdownJVM\n\nSystem.runFinalizationRuntime.runFinalizationFinalizer.runFinalization\n\nrunAllFinalizers\n\n```java\nstatic void runAllFinalizers() {\n    if (!VM.isBooted()) {\n        return;\n    }\n\n    forkSecondaryFinalizer(new Runnable() {\n        private volatile boolean running;\n        public void run() {\n            // \n            if (running)\n                return;\n            final JavaLangAccess jla = SharedSecrets.getJavaLangAccess();\n            running = true;\n            for (;;) {\n                Finalizer f;\n                synchronized (lock) {\n                    f = unfinalized;\n                    if (f == null) break;\n                    unfinalized = f.next;\n                }\n                f.runFinalizer(jla);\n            }}});\n}\n```\n\nqueueunfinalized\n\njava.lang.ShutDownsequencerunAllFinalizer\n\n```java\nif (rfoe) runAllFinalizers();\n```\n\nJVMFinalizerrunAllFinalizer\n\n```java\n/* Wormhole for invoking java.lang.ref.Finalizer.runAllFinalizers */\nprivate static native void runAllFinalizers();\n```\n\nforkSecondaryFinalizer\n\n```java\nprivate static void forkSecondaryFinalizer(final Runnable proc) {\n    AccessController.doPrivileged(\n        new PrivilegedAction<Void>() {\n            public Void run() {\n                ThreadGroup tg = Thread.currentThread().getThreadGroup();\n                for (ThreadGroup tgn = tg;\n                     tgn != null;\n                     tg = tgn, tgn = tg.getParent());\n                Thread sft = new Thread(tg, proc, \"Secondary finalizer\");\n                sft.start();\n                try {\n                    sft.join();\n                } catch (InterruptedException x) {\n                    Thread.currentThread().interrupt();\n                }\n                return null;\n            }});\n}\n```\n\nAccessController.doPrivileged[Java](https://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/)\n\nrunrun\n\n### Finalizer\n\nfinalize\n\nfinalizeJavaFinalizer;\n\n> Finalizerfinalizerfinalize\n\nfinalizefinalizefinalize\n\nfinalizefinalizebugJava\n\nfinalizefinalizationJVMJVMfinalization\n\nFinalizeThreadCPUFinalizerffinalize\n\nfGCGCfinalizeGCGCFinalizerThread\n\nf<img src=\"/images/0190.png\" width=\"40\"/>\n\nfFinalizerfunfinalizedFinalizerFinalizer\n\nfinalizeSystem.runFinalization\n\n### Finalizer \n\nFinalizer<img src=\"/images/0012.png\" width=\"50\"/>\n\nFinalizernativaCmallocfinalizenativefree\n\nsocketsFinalizerFinalizer\n\n## \n\n\n\n+ FinalReferencefinalize\n+ ObjectfinalizefJVM\n+ fFinalizer\n+ fGC\n+ ffinalizefGCfinalizeGC\n+ FinalizerGCGCFinalizerunfinalizedfinalize\n+ ffinalize\n+ ffinalizefoldGCFull GCGC\n","slug":"java/reference/final-reference-code-detail","published":1,"updated":"2019-06-04T01:29:57.399Z","_id":"cjxze3gwk005g0cvwp414mbt1","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"FinalReference--Finalizer-\"><a href=\"#FinalReference--Finalizer-\" class=\"headerlink\" title=\"FinalReference  Finalizer \"></a>FinalReference  Finalizer </h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>FinalReferenceFinalizer</p>\n<p><img src=\"/images/0012.png\"></p>\n<p><img src=\"/images/0190.png\" width=\"40\"></p>\n<p>FinalReferenceReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FinalReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FinalReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>FinalReferenceJVMJVMObjectfinalize()FinalReference JVMFinalizerFinalizer</p>\n<h2 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h2><p>finalabstractpublicJVMfinalizerObjectfinalizefinalizerJVMfGCfinalize</p>\n<h2 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h2><p>java.lang.refFinalReferenceFinalizer<img src=\"/images/06.png\" width=\"40\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Finalizer</span> <span class=\"keyword\">extends</span> <span class=\"title\">FinalReference</span>&lt;<span class=\"title\">Object</span>&gt; </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emm.FinalizerFinalReferencefinal</p>\n<p>JVM</p>\n<p>finalizeJVMFinalizerJVMFinalizer.register()Finalizer</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Finalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Finalizer</span><br><span class=\"line\">        next = <span class=\"keyword\">null</span>,</span><br><span class=\"line\">        prev = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>Finalizernextprev</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object lock = <span class=\"keyword\">new</span> Object();</span><br></pre></td></tr></table></figure>\n<p>lock</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Finalizer unfinalized = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>unfinalizedffffinalizeGC</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>queueJVMFfqueueFinalizerThreadGCGC</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Finalizer</span><span class=\"params\">(Object finalizee)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(finalizee, queue);</span><br><span class=\"line\">    add();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>addFinalizerf</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>FinalizerFinalizerregisterFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">register</span><span class=\"params\">(Object finalizee)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Finalizer(finalizee);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>JVM</p>\n<p>JVMFinalizer.registerFinalizerf</p>\n<p>clonefcloneFinalizer.register</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (unfinalized != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.next = unfinalized;</span><br><span class=\"line\">            unfinalized.prev = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        unfinalized = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>addlockf</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (unfinalized == <span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                unfinalized = <span class=\"keyword\">this</span>.next;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                unfinalized = <span class=\"keyword\">this</span>.prev;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.next.prev = <span class=\"keyword\">this</span>.prev;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.prev != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.prev.next = <span class=\"keyword\">this</span>.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.next = <span class=\"keyword\">this</span>; </span><br><span class=\"line\">        <span class=\"keyword\">this</span>.prev = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>removelockfnextprevffinalize</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasBeenFinalized</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (next == <span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>hasBeenFinalizedffinalizenext == this</p>\n<h3 id=\"FinalizerThread\"><a href=\"#FinalizerThread\" class=\"headerlink\" title=\"FinalizerThread\"></a>FinalizerThread</h3><p>FinalizerFinalizerThread</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">         tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">         tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">    Thread finalizer = <span class=\"keyword\">new</span> FinalizerThread(tg);</span><br><span class=\"line\">    finalizer.setPriority(Thread.MAX_PRIORITY - <span class=\"number\">2</span>);</span><br><span class=\"line\">    finalizer.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    finalizer.start();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceHandler</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">finalizer.setPriority(Thread.MAX_PRIORITY - <span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n<p>CPU</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FinalizerThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">    FinalizerThread(ThreadGroup g) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(g, <span class=\"string\">\"Finalizer\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Finalizer System.initializeSystemClass </span></span><br><span class=\"line\">        <span class=\"comment\">// JVM</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                VM.awaitBooted();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">        running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                Finalizer f = (Finalizer)queue.remove();</span><br><span class=\"line\">                <span class=\"comment\">// runFinalizer</span></span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>JVMrunFinalizertrycatch<strong>finalize</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">runFinalizer</span><span class=\"params\">(JavaLangAccess jla)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// finalize</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (hasBeenFinalized()) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        remove();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        Object finalizee = <span class=\"keyword\">this</span>.get();</span><br><span class=\"line\">        <span class=\"comment\">// nullEnum</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (finalizee != <span class=\"keyword\">null</span> &amp;&amp; !(finalizee <span class=\"keyword\">instanceof</span> java.lang.Enum)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// finalize</span></span><br><span class=\"line\">            jla.invokeFinalize(finalizee);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// GC</span></span><br><span class=\"line\">            finalizee = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Throwable x) &#123; &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Referenceclear</span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>.clear();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>finalize<strong>finalize</strong>ffinalizefinalizeJVM</p>\n<p>Finalizerfinalizenull</p>\n<h3 id=\"SecondaryFinalizer\"><a href=\"#SecondaryFinalizer\" class=\"headerlink\" title=\"SecondaryFinalizer\"></a>SecondaryFinalizer</h3><p>emmm.runFinalizationrunAllFinalizersqueueFinalizerrunFinalizerfrunFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">runFinalization</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    forkSecondaryFinalizer(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">            running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">                Finalizer f = (Finalizer)queue.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (f == <span class=\"keyword\">null</span>) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>runFinalizationFinalizerThreadrunFinalizerRuntimeShutdownJVM</p>\n<p>System.runFinalizationRuntime.runFinalizationFinalizer.runFinalization</p>\n<p>runAllFinalizers</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">runAllFinalizers</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    forkSecondaryFinalizer(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">            running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">                Finalizer f;</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">                    f = unfinalized;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (f == <span class=\"keyword\">null</span>) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    unfinalized = f.next;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125;&#125;&#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>queueunfinalized</p>\n<p>java.lang.ShutDownsequencerunAllFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (rfoe) runAllFinalizers();</span><br></pre></td></tr></table></figure>\n<p>JVMFinalizerrunAllFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Wormhole for invoking java.lang.ref.Finalizer.runAllFinalizers */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> <span class=\"keyword\">void</span> <span class=\"title\">runAllFinalizers</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<p>forkSecondaryFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">forkSecondaryFinalizer</span><span class=\"params\">(<span class=\"keyword\">final</span> Runnable proc)</span> </span>&#123;</span><br><span class=\"line\">    AccessController.doPrivileged(</span><br><span class=\"line\">        <span class=\"keyword\">new</span> PrivilegedAction&lt;Void&gt;() &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> Void <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">                     tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                     tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">                Thread sft = <span class=\"keyword\">new</span> Thread(tg, proc, <span class=\"string\">\"Secondary finalizer\"</span>);</span><br><span class=\"line\">                sft.start();</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    sft.join();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;&#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>AccessController.doPrivileged<a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/\" target=\"_blank\" rel=\"noopener\">Java</a></p>\n<p>runrun</p>\n<h3 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h3><p>finalize</p>\n<p>finalizeJavaFinalizer;</p>\n<blockquote>\n<p>Finalizerfinalizerfinalize</p>\n</blockquote>\n<p>finalizefinalizefinalize</p>\n<p>finalizefinalizebugJava</p>\n<p>finalizefinalizationJVMJVMfinalization</p>\n<p>FinalizeThreadCPUFinalizerffinalize</p>\n<p>fGCGCfinalizeGCGCFinalizerThread</p>\n<p>f<img src=\"/images/0190.png\" width=\"40\"></p>\n<p>fFinalizerfunfinalizedFinalizerFinalizer</p>\n<p>finalizeSystem.runFinalization</p>\n<h3 id=\"Finalizer-\"><a href=\"#Finalizer-\" class=\"headerlink\" title=\"Finalizer \"></a>Finalizer </h3><p>Finalizer<img src=\"/images/0012.png\" width=\"50\"></p>\n<p>FinalizernativaCmallocfinalizenativefree</p>\n<p>socketsFinalizerFinalizer</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ul>\n<li>FinalReferencefinalize</li>\n<li>ObjectfinalizefJVM</li>\n<li>fFinalizer</li>\n<li>fGC</li>\n<li>ffinalizefGCfinalizeGC</li>\n<li>FinalizerGCGCFinalizerunfinalizedfinalize</li>\n<li>ffinalize</li>\n<li>ffinalizefoldGCFull GCGC</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h1 id=\"FinalReference--Finalizer-\"><a href=\"#FinalReference--Finalizer-\" class=\"headerlink\" title=\"FinalReference  Finalizer \"></a>FinalReference  Finalizer </h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>FinalReferenceFinalizer</p>\n<p><img src=\"/images/0012.png\"></p>\n<p><img src=\"/images/0190.png\" width=\"40\"></p>\n<p>FinalReferenceReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FinalReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FinalReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<p>FinalReferenceJVMJVMObjectfinalize()FinalReference JVMFinalizerFinalizer</p>\n<h2 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h2><p>finalabstractpublicJVMfinalizerObjectfinalizefinalizerJVMfGCfinalize</p>\n<h2 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h2><p>java.lang.refFinalReferenceFinalizer<img src=\"/images/06.png\" width=\"40\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Finalizer</span> <span class=\"keyword\">extends</span> <span class=\"title\">FinalReference</span>&lt;<span class=\"title\">Object</span>&gt; </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>emm.FinalizerFinalReferencefinal</p>\n<p>JVM</p>\n<p>finalizeJVMFinalizerJVMFinalizer.register()Finalizer</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Finalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Finalizer</span><br><span class=\"line\">        next = <span class=\"keyword\">null</span>,</span><br><span class=\"line\">        prev = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>Finalizernextprev</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object lock = <span class=\"keyword\">new</span> Object();</span><br></pre></td></tr></table></figure>\n<p>lock</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Finalizer unfinalized = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>unfinalizedffffinalizeGC</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>queueJVMFfqueueFinalizerThreadGCGC</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Finalizer</span><span class=\"params\">(Object finalizee)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(finalizee, queue);</span><br><span class=\"line\">    add();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>addFinalizerf</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>FinalizerFinalizerregisterFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">register</span><span class=\"params\">(Object finalizee)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Finalizer(finalizee);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>JVM</p>\n<p>JVMFinalizer.registerFinalizerf</p>\n<p>clonefcloneFinalizer.register</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (unfinalized != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.next = unfinalized;</span><br><span class=\"line\">            unfinalized.prev = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        unfinalized = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>addlockf</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (unfinalized == <span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                unfinalized = <span class=\"keyword\">this</span>.next;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                unfinalized = <span class=\"keyword\">this</span>.prev;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.next.prev = <span class=\"keyword\">this</span>.prev;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.prev != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.prev.next = <span class=\"keyword\">this</span>.next;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.next = <span class=\"keyword\">this</span>; </span><br><span class=\"line\">        <span class=\"keyword\">this</span>.prev = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>removelockfnextprevffinalize</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasBeenFinalized</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (next == <span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>hasBeenFinalizedffinalizenext == this</p>\n<h3 id=\"FinalizerThread\"><a href=\"#FinalizerThread\" class=\"headerlink\" title=\"FinalizerThread\"></a>FinalizerThread</h3><p>FinalizerFinalizerThread</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">         tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">         tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">    Thread finalizer = <span class=\"keyword\">new</span> FinalizerThread(tg);</span><br><span class=\"line\">    finalizer.setPriority(Thread.MAX_PRIORITY - <span class=\"number\">2</span>);</span><br><span class=\"line\">    finalizer.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    finalizer.start();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceHandler</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">finalizer.setPriority(Thread.MAX_PRIORITY - <span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n<p>CPU</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FinalizerThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">    FinalizerThread(ThreadGroup g) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(g, <span class=\"string\">\"Finalizer\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Finalizer System.initializeSystemClass </span></span><br><span class=\"line\">        <span class=\"comment\">// JVM</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                VM.awaitBooted();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">        running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                Finalizer f = (Finalizer)queue.remove();</span><br><span class=\"line\">                <span class=\"comment\">// runFinalizer</span></span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>JVMrunFinalizertrycatch<strong>finalize</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">runFinalizer</span><span class=\"params\">(JavaLangAccess jla)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// finalize</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (hasBeenFinalized()) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        remove();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        Object finalizee = <span class=\"keyword\">this</span>.get();</span><br><span class=\"line\">        <span class=\"comment\">// nullEnum</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (finalizee != <span class=\"keyword\">null</span> &amp;&amp; !(finalizee <span class=\"keyword\">instanceof</span> java.lang.Enum)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// finalize</span></span><br><span class=\"line\">            jla.invokeFinalize(finalizee);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// GC</span></span><br><span class=\"line\">            finalizee = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Throwable x) &#123; &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Referenceclear</span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>.clear();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>finalize<strong>finalize</strong>ffinalizefinalizeJVM</p>\n<p>Finalizerfinalizenull</p>\n<h3 id=\"SecondaryFinalizer\"><a href=\"#SecondaryFinalizer\" class=\"headerlink\" title=\"SecondaryFinalizer\"></a>SecondaryFinalizer</h3><p>emmm.runFinalizationrunAllFinalizersqueueFinalizerrunFinalizerfrunFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">runFinalization</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    forkSecondaryFinalizer(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">            running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">                Finalizer f = (Finalizer)queue.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (f == <span class=\"keyword\">null</span>) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>runFinalizationFinalizerThreadrunFinalizerRuntimeShutdownJVM</p>\n<p>System.runFinalizationRuntime.runFinalizationFinalizer.runFinalization</p>\n<p>runAllFinalizers</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">runAllFinalizers</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!VM.isBooted()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    forkSecondaryFinalizer(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> <span class=\"keyword\">boolean</span> running;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (running)</span><br><span class=\"line\">                <span class=\"keyword\">return</span>;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> JavaLangAccess jla = SharedSecrets.getJavaLangAccess();</span><br><span class=\"line\">            running = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">                Finalizer f;</span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">                    f = unfinalized;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (f == <span class=\"keyword\">null</span>) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                    unfinalized = f.next;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                f.runFinalizer(jla);</span><br><span class=\"line\">            &#125;&#125;&#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>queueunfinalized</p>\n<p>java.lang.ShutDownsequencerunAllFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (rfoe) runAllFinalizers();</span><br></pre></td></tr></table></figure>\n<p>JVMFinalizerrunAllFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Wormhole for invoking java.lang.ref.Finalizer.runAllFinalizers */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> <span class=\"keyword\">void</span> <span class=\"title\">runAllFinalizers</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<p>forkSecondaryFinalizer</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">forkSecondaryFinalizer</span><span class=\"params\">(<span class=\"keyword\">final</span> Runnable proc)</span> </span>&#123;</span><br><span class=\"line\">    AccessController.doPrivileged(</span><br><span class=\"line\">        <span class=\"keyword\">new</span> PrivilegedAction&lt;Void&gt;() &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> Void <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">                     tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                     tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">                Thread sft = <span class=\"keyword\">new</span> Thread(tg, proc, <span class=\"string\">\"Secondary finalizer\"</span>);</span><br><span class=\"line\">                sft.start();</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    sft.join();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;&#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>AccessController.doPrivileged<a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/\" target=\"_blank\" rel=\"noopener\">Java</a></p>\n<p>runrun</p>\n<h3 id=\"Finalizer\"><a href=\"#Finalizer\" class=\"headerlink\" title=\"Finalizer\"></a>Finalizer</h3><p>finalize</p>\n<p>finalizeJavaFinalizer;</p>\n<blockquote>\n<p>Finalizerfinalizerfinalize</p>\n</blockquote>\n<p>finalizefinalizefinalize</p>\n<p>finalizefinalizebugJava</p>\n<p>finalizefinalizationJVMJVMfinalization</p>\n<p>FinalizeThreadCPUFinalizerffinalize</p>\n<p>fGCGCfinalizeGCGCFinalizerThread</p>\n<p>f<img src=\"/images/0190.png\" width=\"40\"></p>\n<p>fFinalizerfunfinalizedFinalizerFinalizer</p>\n<p>finalizeSystem.runFinalization</p>\n<h3 id=\"Finalizer-\"><a href=\"#Finalizer-\" class=\"headerlink\" title=\"Finalizer \"></a>Finalizer </h3><p>Finalizer<img src=\"/images/0012.png\" width=\"50\"></p>\n<p>FinalizernativaCmallocfinalizenativefree</p>\n<p>socketsFinalizerFinalizer</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ul>\n<li>FinalReferencefinalize</li>\n<li>ObjectfinalizefJVM</li>\n<li>fFinalizer</li>\n<li>fGC</li>\n<li>ffinalizefGCfinalizeGC</li>\n<li>FinalizerGCGCFinalizerunfinalizedfinalize</li>\n<li>ffinalize</li>\n<li>ffinalizefoldGCFull GCGC</li>\n</ul>\n"},{"title":"","date":"2018-12-29T11:57:51.000Z","_content":"\n## \n\nPhantomReference\n\n## \n\n\n\n> \n> GC Roots`phantom reachable`\n\nget()null\n\n  \n\nfinalizefinalize\n\nfinalizenull\n\n\n\n```java\npublic class PhantomReferenceTest {\n    private static final List<Object> TEST_DATA = new LinkedList<>();\n    private static final ReferenceQueue<TestClass> QUEUE = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        TestClass obj = new TestClass(\"Test\");\n        PhantomReference<TestClass> phantomReference = new PhantomReference<>(obj, QUEUE);\n\n        // GC\n        new Thread(() -> {\n            while (true) {\n                TEST_DATA.add(new byte[1024 * 100]);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                    Thread.currentThread().interrupt();\n                }\n                System.out.println(phantomReference.get());\n            }\n        }).start();\n\n        // \n        new Thread(() -> {\n            while (true) {\n                Reference<? extends TestClass> poll = QUEUE.poll();\n                if (poll != null) {\n                    System.out.println(\"--- jvm ---- \" + poll);\n                    System.out.println(\"---  ---- \" + poll.get());\n                }\n            }\n        }).start();\n\n        obj = null;\n\n        try {\n            Thread.currentThread().join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n            System.exit(1);\n        }\n    }\n\n    static class TestClass {\n        private String name;\n\n        public TestClass(String name) {\n            this.name = name;\n        }\n\n        @Override\n        public String toString() {\n            return \"TestClass - \" + name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1024K->432K(3584K), 0.0113386 secs]\n[GC (Allocation Failure)  1455K->520K(3584K), 0.0133610 secs]\n[GC (Allocation Failure)  1544K->648K(3584K), 0.0008654 secs]\nnull\nnull\nnull\n[GC (Allocation Failure)  1655K->973K(3584K), 0.0008111 secs]\nnull\n...null\n[GC (Allocation Failure)  1980K->1997K(3584K), 0.0009289 secs]\n[Full GC (Ergonomics)  1997K->1870K(3584K), 0.0048483 secs]\n--- jvm ---- java.lang.ref.PhantomReference@74cbe23d\n---  ---- null\nnull\n...nullFull GC\n[Full GC (Ergonomics)  2971K->2971K(3584K), 0.0024850 secs]\n[Full GC (Allocation Failure)  2971K->2971K(3584K), 0.0022460 secs]\nException in thread \"Thread-0\" java.lang.OutOfMemoryError: Java heap space\n\tat weakhashmap.PhantomReferenceTest.lambda$main$0(PhantomReferenceTest.java:20)\n\tat weakhashmap.PhantomReferenceTest$$Lambda$1/2065951873.run(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\n100kFull GC\n\n## \n\nGC\n\nDirectByteBuffer \n\n## \n\n+ \n+ \n+ \n+ ","source":"_posts/java/reference/phantom-reference.md","raw":"---\ntitle: \ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 19:57:51\n---\n\n## \n\nPhantomReference\n\n## \n\n\n\n> \n> GC Roots`phantom reachable`\n\nget()null\n\n  \n\nfinalizefinalize\n\nfinalizenull\n\n\n\n```java\npublic class PhantomReferenceTest {\n    private static final List<Object> TEST_DATA = new LinkedList<>();\n    private static final ReferenceQueue<TestClass> QUEUE = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        TestClass obj = new TestClass(\"Test\");\n        PhantomReference<TestClass> phantomReference = new PhantomReference<>(obj, QUEUE);\n\n        // GC\n        new Thread(() -> {\n            while (true) {\n                TEST_DATA.add(new byte[1024 * 100]);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                    Thread.currentThread().interrupt();\n                }\n                System.out.println(phantomReference.get());\n            }\n        }).start();\n\n        // \n        new Thread(() -> {\n            while (true) {\n                Reference<? extends TestClass> poll = QUEUE.poll();\n                if (poll != null) {\n                    System.out.println(\"--- jvm ---- \" + poll);\n                    System.out.println(\"---  ---- \" + poll.get());\n                }\n            }\n        }).start();\n\n        obj = null;\n\n        try {\n            Thread.currentThread().join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n            System.exit(1);\n        }\n    }\n\n    static class TestClass {\n        private String name;\n\n        public TestClass(String name) {\n            this.name = name;\n        }\n\n        @Override\n        public String toString() {\n            return \"TestClass - \" + name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1024K->432K(3584K), 0.0113386 secs]\n[GC (Allocation Failure)  1455K->520K(3584K), 0.0133610 secs]\n[GC (Allocation Failure)  1544K->648K(3584K), 0.0008654 secs]\nnull\nnull\nnull\n[GC (Allocation Failure)  1655K->973K(3584K), 0.0008111 secs]\nnull\n...null\n[GC (Allocation Failure)  1980K->1997K(3584K), 0.0009289 secs]\n[Full GC (Ergonomics)  1997K->1870K(3584K), 0.0048483 secs]\n--- jvm ---- java.lang.ref.PhantomReference@74cbe23d\n---  ---- null\nnull\n...nullFull GC\n[Full GC (Ergonomics)  2971K->2971K(3584K), 0.0024850 secs]\n[Full GC (Allocation Failure)  2971K->2971K(3584K), 0.0022460 secs]\nException in thread \"Thread-0\" java.lang.OutOfMemoryError: Java heap space\n\tat weakhashmap.PhantomReferenceTest.lambda$main$0(PhantomReferenceTest.java:20)\n\tat weakhashmap.PhantomReferenceTest$$Lambda$1/2065951873.run(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\n100kFull GC\n\n## \n\nGC\n\nDirectByteBuffer \n\n## \n\n+ \n+ \n+ \n+ ","slug":"java/reference/phantom-reference","published":1,"updated":"2019-06-04T01:29:57.400Z","_id":"cjxze3gwu005j0cvw0opodqas","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>PhantomReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<blockquote>\n<p><br>GC Roots<code>phantom reachable</code></p>\n</blockquote>\n<p>get()null</p>\n<p>  </p>\n<p>finalizefinalize</p>\n<p>finalizenull</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PhantomReferenceTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> List&lt;Object&gt; TEST_DATA = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;TestClass&gt; QUEUE = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        TestClass obj = <span class=\"keyword\">new</span> TestClass(<span class=\"string\">\"Test\"</span>);</span><br><span class=\"line\">        PhantomReference&lt;TestClass&gt; phantomReference = <span class=\"keyword\">new</span> PhantomReference&lt;&gt;(obj, QUEUE);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// GC</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                TEST_DATA.add(<span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>]);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(phantomReference.get());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                Reference&lt;? extends TestClass&gt; poll = QUEUE.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (poll != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"--- jvm ---- \"</span> + poll);</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"---  ---- \"</span> + poll.get());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        obj = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.currentThread().join();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestClass</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TestClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"TestClass - \"</span> + name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1024K-&gt;432K(3584K), 0.0113386 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1455K-&gt;520K(3584K), 0.0133610 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1544K-&gt;648K(3584K), 0.0008654 secs]</span><br><span class=\"line\">null</span><br><span class=\"line\">null</span><br><span class=\"line\">null</span><br><span class=\"line\">[GC (Allocation Failure)  1655K-&gt;973K(3584K), 0.0008111 secs]</span><br><span class=\"line\">null</span><br><span class=\"line\">...null</span><br><span class=\"line\">[GC (Allocation Failure)  1980K-&gt;1997K(3584K), 0.0009289 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  1997K-&gt;1870K(3584K), 0.0048483 secs]</span><br><span class=\"line\">--- jvm ---- java.lang.ref.PhantomReference@74cbe23d</span><br><span class=\"line\">---  ---- null</span><br><span class=\"line\">null</span><br><span class=\"line\">...nullFull GC</span><br><span class=\"line\">[Full GC (Ergonomics)  2971K-&gt;2971K(3584K), 0.0024850 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2971K-&gt;2971K(3584K), 0.0022460 secs]</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"Thread-0\"</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">\tat weakhashmap.PhantomReferenceTest.lambda<span class=\"variable\">$main</span><span class=\"variable\">$0</span>(PhantomReferenceTest.java:20)</span><br><span class=\"line\">\tat weakhashmap.PhantomReferenceTest$<span class=\"variable\">$Lambda</span><span class=\"variable\">$1</span>/2065951873.run(Unknown Source)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure>\n<p>100kFull GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC</p>\n<p>DirectByteBuffer </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>PhantomReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<blockquote>\n<p><br>GC Roots<code>phantom reachable</code></p>\n</blockquote>\n<p>get()null</p>\n<p>  </p>\n<p>finalizefinalize</p>\n<p>finalizenull</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PhantomReferenceTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> List&lt;Object&gt; TEST_DATA = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;TestClass&gt; QUEUE = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        TestClass obj = <span class=\"keyword\">new</span> TestClass(<span class=\"string\">\"Test\"</span>);</span><br><span class=\"line\">        PhantomReference&lt;TestClass&gt; phantomReference = <span class=\"keyword\">new</span> PhantomReference&lt;&gt;(obj, QUEUE);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// GC</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                TEST_DATA.add(<span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>]);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(phantomReference.get());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                Reference&lt;? extends TestClass&gt; poll = QUEUE.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (poll != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"--- jvm ---- \"</span> + poll);</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"---  ---- \"</span> + poll.get());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        obj = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.currentThread().join();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestClass</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TestClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"TestClass - \"</span> + name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1024K-&gt;432K(3584K), 0.0113386 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1455K-&gt;520K(3584K), 0.0133610 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1544K-&gt;648K(3584K), 0.0008654 secs]</span><br><span class=\"line\">null</span><br><span class=\"line\">null</span><br><span class=\"line\">null</span><br><span class=\"line\">[GC (Allocation Failure)  1655K-&gt;973K(3584K), 0.0008111 secs]</span><br><span class=\"line\">null</span><br><span class=\"line\">...null</span><br><span class=\"line\">[GC (Allocation Failure)  1980K-&gt;1997K(3584K), 0.0009289 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  1997K-&gt;1870K(3584K), 0.0048483 secs]</span><br><span class=\"line\">--- jvm ---- java.lang.ref.PhantomReference@74cbe23d</span><br><span class=\"line\">---  ---- null</span><br><span class=\"line\">null</span><br><span class=\"line\">...nullFull GC</span><br><span class=\"line\">[Full GC (Ergonomics)  2971K-&gt;2971K(3584K), 0.0024850 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2971K-&gt;2971K(3584K), 0.0022460 secs]</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"Thread-0\"</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">\tat weakhashmap.PhantomReferenceTest.lambda<span class=\"variable\">$main</span><span class=\"variable\">$0</span>(PhantomReferenceTest.java:20)</span><br><span class=\"line\">\tat weakhashmap.PhantomReferenceTest$<span class=\"variable\">$Lambda</span><span class=\"variable\">$1</span>/2065951873.run(Unknown Source)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure>\n<p>100kFull GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC</p>\n<p>DirectByteBuffer </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n"},{"title":"","date":"2018-12-29T11:55:51.000Z","_content":"\n## \n\nJDK1.2\n\nJavaJava\n\n<img src=\"/images/0046.png\" width=\"50\"/>\n\n## \n\nJavasocketOOM<img src=\"/images/0005.png\" width=\"50\"/>\n\nJavaJVM  \n\nJavaCC++JVMbug\n\nJVM[](../jvm/garbage-collection.html)\n\n## \n\nJDK 1.2reachable \n\nJVM\n\nJDK 1.2Java4\n\nJVMJVM\n\n4****************\n\n\n\n<img src=\"/images/148.png\" width=\"50\"/>\n\n## \n\n\n\n\n\n```java\npublic static Map<K, V> storedObjs = new HashMap<>();\n```\n\nOOM\n\n```java\npublic class OOMTest {\n    public static List<Integer> cachedObjs = new ArrayList<>();\n \n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000_000; i++) {\n            cachedObjs.add(i);\n        }\n    }\n}\n```\n\n\n\n```bash\nException in thread main java.lang.OutOfMemoryError: Java heap space\n```\n\n<img src=\"/images/0005.png\" width=\"50\"/>\n\nHashMap\n\n## \n\n \n\n+ <LabelBlock>    </LabelBlock>\n  + [](./strong-reference.html)\n  + [](./soft-reference.html)\n  + [](./weak-referecen.html)\n  + [](./phantom-reference.html)\n+ <LabelBlock>    </LabelBlock>\n  + [Reference](./reference-code-detail.html)\n  + [ReferenceQueue](./reference-queue-code-detail.html)\n  + [SoftReference](./soft-reference-code-detail.html)\n  + [WeakReference](./weak-reference-code-detail.html)\n  + [PhantomReference](./phantom-reference-code-detail.html)\n  + [FinalReferenceFinalizer](./final-reference-code-detail.html)\n+ <LabelBlock>    </LabelBlock>\n  + [](./reference-summary.html)\n\n> \n> `JDK1.8`  \n\n<img src=\"/images/0003.png\" width=\"50\"/>","source":"_posts/java/reference/four-kinds-of-reference.md","raw":"---\ntitle: \ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 19:55:51\n---\n\n## \n\nJDK1.2\n\nJavaJava\n\n<img src=\"/images/0046.png\" width=\"50\"/>\n\n## \n\nJavasocketOOM<img src=\"/images/0005.png\" width=\"50\"/>\n\nJavaJVM  \n\nJavaCC++JVMbug\n\nJVM[](../jvm/garbage-collection.html)\n\n## \n\nJDK 1.2reachable \n\nJVM\n\nJDK 1.2Java4\n\nJVMJVM\n\n4****************\n\n\n\n<img src=\"/images/148.png\" width=\"50\"/>\n\n## \n\n\n\n\n\n```java\npublic static Map<K, V> storedObjs = new HashMap<>();\n```\n\nOOM\n\n```java\npublic class OOMTest {\n    public static List<Integer> cachedObjs = new ArrayList<>();\n \n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000_000; i++) {\n            cachedObjs.add(i);\n        }\n    }\n}\n```\n\n\n\n```bash\nException in thread main java.lang.OutOfMemoryError: Java heap space\n```\n\n<img src=\"/images/0005.png\" width=\"50\"/>\n\nHashMap\n\n## \n\n \n\n+ <LabelBlock>    </LabelBlock>\n  + [](./strong-reference.html)\n  + [](./soft-reference.html)\n  + [](./weak-referecen.html)\n  + [](./phantom-reference.html)\n+ <LabelBlock>    </LabelBlock>\n  + [Reference](./reference-code-detail.html)\n  + [ReferenceQueue](./reference-queue-code-detail.html)\n  + [SoftReference](./soft-reference-code-detail.html)\n  + [WeakReference](./weak-reference-code-detail.html)\n  + [PhantomReference](./phantom-reference-code-detail.html)\n  + [FinalReferenceFinalizer](./final-reference-code-detail.html)\n+ <LabelBlock>    </LabelBlock>\n  + [](./reference-summary.html)\n\n> \n> `JDK1.8`  \n\n<img src=\"/images/0003.png\" width=\"50\"/>","slug":"java/reference/four-kinds-of-reference","published":1,"updated":"2019-06-04T01:29:57.400Z","_id":"cjxze3gwu005m0cvwpr9rtcrz","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK1.2</p>\n<p>JavaJava</p>\n<p><img src=\"/images/0046.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavasocketOOM<img src=\"/images/0005.png\" width=\"50\"></p>\n<p>JavaJVM  </p>\n<p>JavaCC++JVMbug</p>\n<p>JVM<a href=\"../jvm/garbage-collection.html\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK 1.2reachable </p>\n<p>JVM</p>\n<p>JDK 1.2Java4</p>\n<p>JVMJVM</p>\n<p>4<strong></strong><strong></strong><strong></strong><strong></strong></p>\n<p></p>\n<p><img src=\"/images/148.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Map&lt;K, V&gt; storedObjs = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>OOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> List&lt;Integer&gt; cachedObjs = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000_000</span>; i++) &#123;</span><br><span class=\"line\">            cachedObjs.add(i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Exception <span class=\"keyword\">in</span> thread main java.lang.OutOfMemoryError: Java heap space</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/0005.png\" width=\"50\"></p>\n<p>HashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n<ul>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./strong-reference.html\"></a></li>\n<li><a href=\"./soft-reference.html\"></a></li>\n<li><a href=\"./weak-referecen.html\"></a></li>\n<li><a href=\"./phantom-reference.html\"></a></li>\n</ul>\n</li>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./reference-code-detail.html\">Reference</a></li>\n<li><a href=\"./reference-queue-code-detail.html\">ReferenceQueue</a></li>\n<li><a href=\"./soft-reference-code-detail.html\">SoftReference</a></li>\n<li><a href=\"./weak-reference-code-detail.html\">WeakReference</a></li>\n<li><a href=\"./phantom-reference-code-detail.html\">PhantomReference</a></li>\n<li><a href=\"./final-reference-code-detail.html\">FinalReferenceFinalizer</a></li>\n</ul>\n</li>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./reference-summary.html\"></a></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p><br><code>JDK1.8</code>  </p>\n</blockquote>\n<p><img src=\"/images/0003.png\" width=\"50\"></p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK1.2</p>\n<p>JavaJava</p>\n<p><img src=\"/images/0046.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JavasocketOOM<img src=\"/images/0005.png\" width=\"50\"></p>\n<p>JavaJVM  </p>\n<p>JavaCC++JVMbug</p>\n<p>JVM<a href=\"../jvm/garbage-collection.html\"></a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JDK 1.2reachable </p>\n<p>JVM</p>\n<p>JDK 1.2Java4</p>\n<p>JVMJVM</p>\n<p>4<strong></strong><strong></strong><strong></strong><strong></strong></p>\n<p></p>\n<p><img src=\"/images/148.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Map&lt;K, V&gt; storedObjs = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>OOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> List&lt;Integer&gt; cachedObjs = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000_000</span>; i++) &#123;</span><br><span class=\"line\">            cachedObjs.add(i);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Exception <span class=\"keyword\">in</span> thread main java.lang.OutOfMemoryError: Java heap space</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/0005.png\" width=\"50\"></p>\n<p>HashMap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n<ul>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./strong-reference.html\"></a></li>\n<li><a href=\"./soft-reference.html\"></a></li>\n<li><a href=\"./weak-referecen.html\"></a></li>\n<li><a href=\"./phantom-reference.html\"></a></li>\n</ul>\n</li>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./reference-code-detail.html\">Reference</a></li>\n<li><a href=\"./reference-queue-code-detail.html\">ReferenceQueue</a></li>\n<li><a href=\"./soft-reference-code-detail.html\">SoftReference</a></li>\n<li><a href=\"./weak-reference-code-detail.html\">WeakReference</a></li>\n<li><a href=\"./phantom-reference-code-detail.html\">PhantomReference</a></li>\n<li><a href=\"./final-reference-code-detail.html\">FinalReferenceFinalizer</a></li>\n</ul>\n</li>\n<li><labelblock>    </labelblock><ul>\n<li><a href=\"./reference-summary.html\"></a></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p><br><code>JDK1.8</code>  </p>\n</blockquote>\n<p><img src=\"/images/0003.png\" width=\"50\"></p>\n"},{"title":"JavaJavaWindows","date":"2018-12-28T11:00:02.000Z","_content":"\n>  -- \n\n## JDK\n\nhttps://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\n\n{% asset_img 1-jdk-windows.png jdk-windows %}\n\n## \n\n\n\nJAVA_HOME     JDK\n\nPATH                  JDK\n\nCLASSPATH      \n\n### 1-->-->\n\n{% asset_img 2-jdk-windows.png jdk-windows %}\n\n### 2-->\n\n{% asset_img 3-jdk-windows.png jdk-windows %}\n\n{% asset_img 4-jdk-windows.png jdk-windows %}\n\n{% asset_img 5-jdk-windows.png jdk-windows %})\n\n(1)->\"JAVA_HOME\"\"C:/Java/jdk1.8.0_144\"JDK \n\n(2)->\"Path\";%JAVA_HOME%/bin;%JAVA_HOME%/jre/bin \n\n(3)->CLASSPATH,.;%JAVA_HOME%/lib;%JAVA_HOME%/lib/dt.jar;%JAVA_HOME%/lib/tools.jar\n\n### 3\n\njavajavacjava -version JDK\n\njava\n\n{% asset_img 6-jdk-windows.png jdk-windows %}\n\njavac\n\n{% asset_img 7-jdk-windows.png jdk-windows %}\n\njava -version\n\n{% asset_img 8-jdk-windows.png jdk-windows %}\n\n### 4java\n\n----\n\n```java\npublic class Test {\n    public static void main(String[] args) {\n    System.out.println(\"Hello World!\");\n    }\n}\n```\n\n\n\n```bash\nC:\ncd /Users/[]/Desktop\n```\n\n[]CC:/Users \n\njavac Test.javajava TestHello Java\n\n{% asset_img 9-jdk-windows.png jdk-windows %}\n\nJava","source":"_posts/java/introduction/java-environment-windows.md","raw":"---\ntitle: JavaJavaWindows\ntags: \n - Java\n - Java\n - \ncategories: \ndate: 2018-12-28 19:00:02\n---\n\n>  -- \n\n## JDK\n\nhttps://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\n\n{% asset_img 1-jdk-windows.png jdk-windows %}\n\n## \n\n\n\nJAVA_HOME     JDK\n\nPATH                  JDK\n\nCLASSPATH      \n\n### 1-->-->\n\n{% asset_img 2-jdk-windows.png jdk-windows %}\n\n### 2-->\n\n{% asset_img 3-jdk-windows.png jdk-windows %}\n\n{% asset_img 4-jdk-windows.png jdk-windows %}\n\n{% asset_img 5-jdk-windows.png jdk-windows %})\n\n(1)->\"JAVA_HOME\"\"C:/Java/jdk1.8.0_144\"JDK \n\n(2)->\"Path\";%JAVA_HOME%/bin;%JAVA_HOME%/jre/bin \n\n(3)->CLASSPATH,.;%JAVA_HOME%/lib;%JAVA_HOME%/lib/dt.jar;%JAVA_HOME%/lib/tools.jar\n\n### 3\n\njavajavacjava -version JDK\n\njava\n\n{% asset_img 6-jdk-windows.png jdk-windows %}\n\njavac\n\n{% asset_img 7-jdk-windows.png jdk-windows %}\n\njava -version\n\n{% asset_img 8-jdk-windows.png jdk-windows %}\n\n### 4java\n\n----\n\n```java\npublic class Test {\n    public static void main(String[] args) {\n    System.out.println(\"Hello World!\");\n    }\n}\n```\n\n\n\n```bash\nC:\ncd /Users/[]/Desktop\n```\n\n[]CC:/Users \n\njavac Test.javajava TestHello Java\n\n{% asset_img 9-jdk-windows.png jdk-windows %}\n\nJava","slug":"java/introduction/java-environment-windows","published":1,"updated":"2019-06-04T01:29:57.315Z","_id":"cjxze3gwu005q0cvwu5jx6eyy","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"JDK\"><a href=\"#JDK\" class=\"headerlink\" title=\"JDK\"></a>JDK</h2><p><a href=\"https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" target=\"_blank\" rel=\"noopener\">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p>\n<img src=\"/programming/java/introduction/java-environment-windows/1-jdk-windows.png\" title=\"jdk-windows\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>JAVA_HOME     JDK</p>\n<p>PATH                  JDK</p>\n<p>CLASSPATH      </p>\n<h3 id=\"1-gt--gt-\"><a href=\"#1-gt--gt-\" class=\"headerlink\" title=\"1&gt;&gt;\"></a>1&gt;&gt;</h3><img src=\"/programming/java/introduction/java-environment-windows/2-jdk-windows.png\" title=\"jdk-windows\">\n<h3 id=\"2-gt-\"><a href=\"#2-gt-\" class=\"headerlink\" title=\"2&gt;\"></a>2&gt;</h3><img src=\"/programming/java/introduction/java-environment-windows/3-jdk-windows.png\" title=\"jdk-windows\">\n<img src=\"/programming/java/introduction/java-environment-windows/4-jdk-windows.png\" title=\"jdk-windows\">\n<img src=\"/programming/java/introduction/java-environment-windows/5-jdk-windows.png\" title=\"jdk-windows\">)<br><br>(1)-&gt;JAVA_HOMEC:/Java/jdk1.8.0_144JDK<br><br>(2)-&gt;Path;%JAVA_HOME%/bin;%JAVA_HOME%/jre/bin<br><br>(3)-&gt;CLASSPATH,.;%JAVA_HOME%/lib;%JAVA_HOME%/lib/dt.jar;%JAVA_HOME%/lib/tools.jar<br><br>### 3<br><br>javajavacjava -version JDK<br><br>java<br><br><img src=\"/programming/java/introduction/java-environment-windows/6-jdk-windows.png\" title=\"jdk-windows\">\n<p>javac</p>\n<img src=\"/programming/java/introduction/java-environment-windows/7-jdk-windows.png\" title=\"jdk-windows\">\n<p>java -version</p>\n<img src=\"/programming/java/introduction/java-environment-windows/8-jdk-windows.png\" title=\"jdk-windows\">\n<h3 id=\"4java\"><a href=\"#4java\" class=\"headerlink\" title=\"4java\"></a>4java</h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Hello World!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /Users/[]/Desktop</span><br></pre></td></tr></table></figure>\n<p>[]CC:/Users </p>\n<p>javac Test.javajava TestHello Java</p>\n<img src=\"/programming/java/introduction/java-environment-windows/9-jdk-windows.png\" title=\"jdk-windows\">\n<p>Java</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p>  </p>\n</blockquote>\n<h2 id=\"JDK\"><a href=\"#JDK\" class=\"headerlink\" title=\"JDK\"></a>JDK</h2><p><a href=\"https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" target=\"_blank\" rel=\"noopener\">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p>\n<img src=\"/programming/java/introduction/java-environment-windows/1-jdk-windows.png\" title=\"jdk-windows\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>JAVA_HOME     JDK</p>\n<p>PATH                  JDK</p>\n<p>CLASSPATH      </p>\n<h3 id=\"1-gt--gt-\"><a href=\"#1-gt--gt-\" class=\"headerlink\" title=\"1&gt;&gt;\"></a>1&gt;&gt;</h3><img src=\"/programming/java/introduction/java-environment-windows/2-jdk-windows.png\" title=\"jdk-windows\">\n<h3 id=\"2-gt-\"><a href=\"#2-gt-\" class=\"headerlink\" title=\"2&gt;\"></a>2&gt;</h3><img src=\"/programming/java/introduction/java-environment-windows/3-jdk-windows.png\" title=\"jdk-windows\">\n<img src=\"/programming/java/introduction/java-environment-windows/4-jdk-windows.png\" title=\"jdk-windows\">\n<img src=\"/programming/java/introduction/java-environment-windows/5-jdk-windows.png\" title=\"jdk-windows\">)<br><br>(1)-&gt;JAVA_HOMEC:/Java/jdk1.8.0_144JDK<br><br>(2)-&gt;Path;%JAVA_HOME%/bin;%JAVA_HOME%/jre/bin<br><br>(3)-&gt;CLASSPATH,.;%JAVA_HOME%/lib;%JAVA_HOME%/lib/dt.jar;%JAVA_HOME%/lib/tools.jar<br><br>### 3<br><br>javajavacjava -version JDK<br><br>java<br><br><img src=\"/programming/java/introduction/java-environment-windows/6-jdk-windows.png\" title=\"jdk-windows\">\n<p>javac</p>\n<img src=\"/programming/java/introduction/java-environment-windows/7-jdk-windows.png\" title=\"jdk-windows\">\n<p>java -version</p>\n<img src=\"/programming/java/introduction/java-environment-windows/8-jdk-windows.png\" title=\"jdk-windows\">\n<h3 id=\"4java\"><a href=\"#4java\" class=\"headerlink\" title=\"4java\"></a>4java</h3><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Hello World!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C:</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /Users/[]/Desktop</span><br></pre></td></tr></table></figure>\n<p>[]CC:/Users </p>\n<p>javac Test.javajava TestHello Java</p>\n<img src=\"/programming/java/introduction/java-environment-windows/9-jdk-windows.png\" title=\"jdk-windows\">\n<p>Java</p>\n"},{"title":"Reference","date":"2018-12-29T12:10:51.000Z","_content":"\n{% asset_img reference-1.png reference-1 %}\n\n## \n\n> \n> Reference\n> referencereferentreferencereferencereferent\n\n## \n\nReferenceReferenceReferenceReference\n\n> \n> Finalizer  FinalReferenceCleaner  PhantomReference\n\n## \n\nReference\n\nreferencereference<img src=\"/images/0003.png\" width=\"50\"/>\n\nreferencegetnull( phantomReferencegetnullqueue )\n\nweakHashMapqueueThreadLocalMapget()null\n\n```java\n/* -- Constructors -- */\nReference(T referent) {\n    this(referent, null);\n}\n\nReference(T referent, ReferenceQueue<? super T> queue) {\n    this.referent = referent;\n    this.queue = (queue == null) ? ReferenceQueue.NULL : queue;\n}\n```\n\n## \n\nReference\n\nreferentreference\n\n``` java\nprivate T referent;\n```\n\nqueuereference( referent )queuequeue\n\nqueue( ReferenceQueue )queueheadreferencenext\n\n```java\nvolatile ReferenceQueue<? super T> queue;\n```\n\nnextReference\n\n```java\nReference next;\n```\ndiscovered\n\n```java\n/* active: discovered\n * pending: pending\n * :   NULL\n */\ntransient private Reference<T> discovered;\n```\n\nlockpendingReference\n\n```java\nstatic private class Lock { }\nprivate static Lock lock = new Lock();\n```\n\npendingqueueReferencepending\n\n```java\n/* reference\n * Reference-handler\n * lockdiscovered\n */\nprivate static Reference<Object> pending = null;\n```\n\n> \n> queuenextreferencependingdiscoveredreference\n\n## Reference\n\nReferencereferent\n\n> Active: \n> referencereferent()PendingInactive\n> Pendingpending-Reference\n>\n> Pending:\n> pending-ReferenceReference-handler\n>\n> Enqueued: \n> Inactive\n>\n> Inactive: \n> ()\n\nActivePendingEnqueuedInactivePendingEnqueued\n\nreferenceActivereferent\n\nreferencependingreferencependingqueuepending\n\nEnqueuedqueue\n\nInactive\n\nJVMnextqueue\n\n```bash\nActiveReferenceReferenceQueuequeue=ReferenceQueue.NULLqueueReferenceQueuenext == null\n\nPendingqueueReferenceQueuenext == this\n\nEnqueuequeue == ReferenceQueue.ENQUEUEDnextqueuereferencenext == this\n\nInactivequeue == ReferenceQueue.NULL; next == this.\n```\n\nnext==nullreferenceActive\n\nnext!=nullqueue == ReferenceQueue.NULLreferenceInactive\n\nnext!=nullqueue == ReferenceQueue.ENQUEUEDreferenceEnqueue\n\nnext != nullqueue != ReferenceQueue.NULL && queu != ReferenceQueue.ENQUEUED referencePending\n\n{% asset_img reference-2.png Reference-relastionship %}\n\n## ReferenceHandler\n\nReferenceReferenceHandlerpendingReferenceHandlerReferenceThreadReferenceHandler<img src=\"/images/0019.png\" width=\"50\"/>\n\n```java\nprivate static class ReferenceHandler extends Thread {\n    // \n    private static void ensureClassInitialized(Class<?> clazz) {\n        try {\n            Class.forName(clazz.getName(), true, clazz.getClassLoader());\n        } catch (ClassNotFoundException e) {\n            throw (Error) new NoClassDefFoundError(e.getMessage()).initCause(e);\n        }\n    }\n\n    static {\n        //  InterruptedException  Cleaner \n        // \t\t \n        ensureClassInitialized(InterruptedException.class);\n        ensureClassInitialized(Cleaner.class);\n    }\n\n    ReferenceHandler(ThreadGroup g, String name) {\n        super(g, name);\n    }\n\n    public void run() {\n        // \n        while (true) {\n            tryHandlePending(true);\n        }\n    }\n}\n```\n\nrunwhiletryHandlerPendingpending\n\n```java\nstatic {\n    ThreadGroup tg = Thread.currentThread().getThreadGroup();\n    for (ThreadGroup tgn = tg;\n         tgn != null;\n         tg = tgn, tgn = tg.getParent());\n    // handler\n    Thread handler = new ReferenceHandler(tg, \"Reference Handler\");\n    handler.setPriority(Thread.MAX_PRIORITY);\n    handler.setDaemon(true);\n    handler.start();\n\n    // jvm\n    SharedSecrets.setJavaLangRefAccess(new JavaLangRefAccess() {\n        @Override\n        public boolean tryHandlePendingReference() {\n            return tryHandlePending(false);\n        }\n    });\n}\n```\n\nReferenceHandlerJVMpending tryHandlePending(false) \n\n```java\nstatic boolean tryHandlePending(boolean waitForNotify) {\n    Reference<Object> r;\n    Cleaner c;\n    try {\n        synchronized (lock) {\n            // pendingnull\n            if (pending != null) {\n                r = pending;\n                //  'instanceof' OOM\n                // r\n                c = r instanceof Cleaner ? (Cleaner) r : null;\n                // pending\n                pending = r.discovered;\n                // rpending\n                r.discovered = null;\n            } else {\n                // OOMexception\n                if (waitForNotify) {\n                    lock.wait();\n                }\n                // \n                return waitForNotify;\n            }\n        }\n    } catch (OutOfMemoryError x) {\n        Thread.yield();\n        // \n        return true;\n    } catch (InterruptedException x) {\n        // \n        return true;\n    }\n\n    // Cleanerclean\n    if (c != null) {\n        c.clean();\n        return true;\n    }\n\n    ReferenceQueue<? super Object> q = r.queue;\n    // \n    if (q != ReferenceQueue.NULL) q.enqueue(r);\n    return true;\n}\n```\n\npendingCleanerclean\n\n## \n\n```java\n/**\n  * referentnull\n  */\npublic T get() {\n    return this.referent;\n}\n\n/**\n  * referentEnqueued\n  */\npublic void clear() {\n    this.referent = null;\n}\n\n/**\n  * reference\n  */\npublic boolean isEnqueued() {\n    return (this.queue == ReferenceQueue.ENQUEUED);\n}\n\n/**\n  * \n  * referencetruefalse\n  */\npublic boolean enqueue() {\n    return this.queue.enqueue(this);\n}\n```\n\nReferenceJVMJVMReference\n\n## \n\n+ Reference\n\n+ Reference\n\n+ Reference\n\n+ getnull \n\n\n\n\n\n\n\n\n\n","source":"_posts/java/reference/reference-code-detail.md","raw":"---\ntitle: Reference\ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 20:10:51\n---\n\n{% asset_img reference-1.png reference-1 %}\n\n## \n\n> \n> Reference\n> referencereferentreferencereferencereferent\n\n## \n\nReferenceReferenceReferenceReference\n\n> \n> Finalizer  FinalReferenceCleaner  PhantomReference\n\n## \n\nReference\n\nreferencereference<img src=\"/images/0003.png\" width=\"50\"/>\n\nreferencegetnull( phantomReferencegetnullqueue )\n\nweakHashMapqueueThreadLocalMapget()null\n\n```java\n/* -- Constructors -- */\nReference(T referent) {\n    this(referent, null);\n}\n\nReference(T referent, ReferenceQueue<? super T> queue) {\n    this.referent = referent;\n    this.queue = (queue == null) ? ReferenceQueue.NULL : queue;\n}\n```\n\n## \n\nReference\n\nreferentreference\n\n``` java\nprivate T referent;\n```\n\nqueuereference( referent )queuequeue\n\nqueue( ReferenceQueue )queueheadreferencenext\n\n```java\nvolatile ReferenceQueue<? super T> queue;\n```\n\nnextReference\n\n```java\nReference next;\n```\ndiscovered\n\n```java\n/* active: discovered\n * pending: pending\n * :   NULL\n */\ntransient private Reference<T> discovered;\n```\n\nlockpendingReference\n\n```java\nstatic private class Lock { }\nprivate static Lock lock = new Lock();\n```\n\npendingqueueReferencepending\n\n```java\n/* reference\n * Reference-handler\n * lockdiscovered\n */\nprivate static Reference<Object> pending = null;\n```\n\n> \n> queuenextreferencependingdiscoveredreference\n\n## Reference\n\nReferencereferent\n\n> Active: \n> referencereferent()PendingInactive\n> Pendingpending-Reference\n>\n> Pending:\n> pending-ReferenceReference-handler\n>\n> Enqueued: \n> Inactive\n>\n> Inactive: \n> ()\n\nActivePendingEnqueuedInactivePendingEnqueued\n\nreferenceActivereferent\n\nreferencependingreferencependingqueuepending\n\nEnqueuedqueue\n\nInactive\n\nJVMnextqueue\n\n```bash\nActiveReferenceReferenceQueuequeue=ReferenceQueue.NULLqueueReferenceQueuenext == null\n\nPendingqueueReferenceQueuenext == this\n\nEnqueuequeue == ReferenceQueue.ENQUEUEDnextqueuereferencenext == this\n\nInactivequeue == ReferenceQueue.NULL; next == this.\n```\n\nnext==nullreferenceActive\n\nnext!=nullqueue == ReferenceQueue.NULLreferenceInactive\n\nnext!=nullqueue == ReferenceQueue.ENQUEUEDreferenceEnqueue\n\nnext != nullqueue != ReferenceQueue.NULL && queu != ReferenceQueue.ENQUEUED referencePending\n\n{% asset_img reference-2.png Reference-relastionship %}\n\n## ReferenceHandler\n\nReferenceReferenceHandlerpendingReferenceHandlerReferenceThreadReferenceHandler<img src=\"/images/0019.png\" width=\"50\"/>\n\n```java\nprivate static class ReferenceHandler extends Thread {\n    // \n    private static void ensureClassInitialized(Class<?> clazz) {\n        try {\n            Class.forName(clazz.getName(), true, clazz.getClassLoader());\n        } catch (ClassNotFoundException e) {\n            throw (Error) new NoClassDefFoundError(e.getMessage()).initCause(e);\n        }\n    }\n\n    static {\n        //  InterruptedException  Cleaner \n        // \t\t \n        ensureClassInitialized(InterruptedException.class);\n        ensureClassInitialized(Cleaner.class);\n    }\n\n    ReferenceHandler(ThreadGroup g, String name) {\n        super(g, name);\n    }\n\n    public void run() {\n        // \n        while (true) {\n            tryHandlePending(true);\n        }\n    }\n}\n```\n\nrunwhiletryHandlerPendingpending\n\n```java\nstatic {\n    ThreadGroup tg = Thread.currentThread().getThreadGroup();\n    for (ThreadGroup tgn = tg;\n         tgn != null;\n         tg = tgn, tgn = tg.getParent());\n    // handler\n    Thread handler = new ReferenceHandler(tg, \"Reference Handler\");\n    handler.setPriority(Thread.MAX_PRIORITY);\n    handler.setDaemon(true);\n    handler.start();\n\n    // jvm\n    SharedSecrets.setJavaLangRefAccess(new JavaLangRefAccess() {\n        @Override\n        public boolean tryHandlePendingReference() {\n            return tryHandlePending(false);\n        }\n    });\n}\n```\n\nReferenceHandlerJVMpending tryHandlePending(false) \n\n```java\nstatic boolean tryHandlePending(boolean waitForNotify) {\n    Reference<Object> r;\n    Cleaner c;\n    try {\n        synchronized (lock) {\n            // pendingnull\n            if (pending != null) {\n                r = pending;\n                //  'instanceof' OOM\n                // r\n                c = r instanceof Cleaner ? (Cleaner) r : null;\n                // pending\n                pending = r.discovered;\n                // rpending\n                r.discovered = null;\n            } else {\n                // OOMexception\n                if (waitForNotify) {\n                    lock.wait();\n                }\n                // \n                return waitForNotify;\n            }\n        }\n    } catch (OutOfMemoryError x) {\n        Thread.yield();\n        // \n        return true;\n    } catch (InterruptedException x) {\n        // \n        return true;\n    }\n\n    // Cleanerclean\n    if (c != null) {\n        c.clean();\n        return true;\n    }\n\n    ReferenceQueue<? super Object> q = r.queue;\n    // \n    if (q != ReferenceQueue.NULL) q.enqueue(r);\n    return true;\n}\n```\n\npendingCleanerclean\n\n## \n\n```java\n/**\n  * referentnull\n  */\npublic T get() {\n    return this.referent;\n}\n\n/**\n  * referentEnqueued\n  */\npublic void clear() {\n    this.referent = null;\n}\n\n/**\n  * reference\n  */\npublic boolean isEnqueued() {\n    return (this.queue == ReferenceQueue.ENQUEUED);\n}\n\n/**\n  * \n  * referencetruefalse\n  */\npublic boolean enqueue() {\n    return this.queue.enqueue(this);\n}\n```\n\nReferenceJVMJVMReference\n\n## \n\n+ Reference\n\n+ Reference\n\n+ Reference\n\n+ getnull \n\n\n\n\n\n\n\n\n\n","slug":"java/reference/reference-code-detail","published":1,"updated":"2019-06-04T01:29:57.401Z","_id":"cjxze3gwu005t0cvw8r0uapym","comments":1,"layout":"post","photos":[],"link":"","content":"<img src=\"/programming/java/reference/reference-code-detail/reference-1.png\" title=\"reference-1\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote>\n<p><br>Reference<br>referencereferentreferencereferencereferent</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceReferenceReferenceReference</p>\n<blockquote>\n<p><br>Finalizer  FinalReferenceCleaner  PhantomReference</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Reference</p>\n<p>referencereference<img src=\"/images/0003.png\" width=\"50\"></p>\n<p>referencegetnull( phantomReferencegetnullqueue )</p>\n<p>weakHashMapqueueThreadLocalMapget()null</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* -- Constructors -- */</span></span><br><span class=\"line\">Reference(T referent) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(referent, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Reference(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; queue) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.referent = referent;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.queue = (queue == <span class=\"keyword\">null</span>) ? ReferenceQueue.NULL : queue;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Reference</p>\n<p>referentreference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> T referent;</span><br></pre></td></tr></table></figure>\n<p>queuereference( referent )queuequeue</p>\n<p>queue( ReferenceQueue )queueheadreferencenext</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">volatile</span> ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; queue;</span><br></pre></td></tr></table></figure>\n<p>nextReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Reference next;</span><br></pre></td></tr></table></figure>\n<p>discovered</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* active: discovered</span></span><br><span class=\"line\"><span class=\"comment\"> * pending: pending</span></span><br><span class=\"line\"><span class=\"comment\"> * :   NULL</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">transient</span> <span class=\"keyword\">private</span> Reference&lt;T&gt; discovered;</span><br></pre></td></tr></table></figure>\n<p>lockpendingReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Lock</span> </span>&#123; &#125;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Lock lock = <span class=\"keyword\">new</span> Lock();</span><br></pre></td></tr></table></figure>\n<p>pendingqueueReferencepending</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* reference</span></span><br><span class=\"line\"><span class=\"comment\"> * Reference-handler</span></span><br><span class=\"line\"><span class=\"comment\"> * lockdiscovered</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Reference&lt;Object&gt; pending = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><br>queuenextreferencependingdiscoveredreference</p>\n</blockquote>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p>Referencereferent</p>\n<blockquote>\n<p>Active:<br>referencereferent()PendingInactive<br>Pendingpending-Reference</p>\n<p>Pending:<br>pending-ReferenceReference-handler</p>\n<p>Enqueued:<br>Inactive</p>\n<p>Inactive:<br>()</p>\n</blockquote>\n<p>ActivePendingEnqueuedInactivePendingEnqueued</p>\n<p>referenceActivereferent</p>\n<p>referencependingreferencependingqueuepending</p>\n<p>Enqueuedqueue</p>\n<p>Inactive</p>\n<p>JVMnextqueue</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ActiveReferenceReferenceQueuequeue=ReferenceQueue.NULLqueueReferenceQueuenext == null</span><br><span class=\"line\"></span><br><span class=\"line\">PendingqueueReferenceQueuenext == this</span><br><span class=\"line\"></span><br><span class=\"line\">Enqueuequeue == ReferenceQueue.ENQUEUEDnextqueuereferencenext == this</span><br><span class=\"line\"></span><br><span class=\"line\">Inactivequeue == ReferenceQueue.NULL; next == this.</span><br></pre></td></tr></table></figure>\n<p>next==nullreferenceActive</p>\n<p>next!=nullqueue == ReferenceQueue.NULLreferenceInactive</p>\n<p>next!=nullqueue == ReferenceQueue.ENQUEUEDreferenceEnqueue</p>\n<p>next != nullqueue != ReferenceQueue.NULL &amp;&amp; queu != ReferenceQueue.ENQUEUED referencePending</p>\n<img src=\"/programming/java/reference/reference-code-detail/reference-2.png\" title=\"Reference-relastionship\">\n<h2 id=\"ReferenceHandler\"><a href=\"#ReferenceHandler\" class=\"headerlink\" title=\"ReferenceHandler\"></a>ReferenceHandler</h2><p>ReferenceReferenceHandlerpendingReferenceHandlerReferenceThreadReferenceHandler<img src=\"/images/0019.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReferenceHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureClassInitialized</span><span class=\"params\">(Class&lt;?&gt; clazz)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Class.forName(clazz.getName(), <span class=\"keyword\">true</span>, clazz.getClassLoader());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> (Error) <span class=\"keyword\">new</span> NoClassDefFoundError(e.getMessage()).initCause(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  InterruptedException  Cleaner </span></span><br><span class=\"line\">        <span class=\"comment\">// \t\t </span></span><br><span class=\"line\">        ensureClassInitialized(InterruptedException.class);</span><br><span class=\"line\">        ensureClassInitialized(Cleaner.class);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ReferenceHandler(ThreadGroup g, String name) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(g, name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">            tryHandlePending(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>runwhiletryHandlerPendingpending</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">         tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">         tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">    <span class=\"comment\">// handler</span></span><br><span class=\"line\">    Thread handler = <span class=\"keyword\">new</span> ReferenceHandler(tg, <span class=\"string\">\"Reference Handler\"</span>);</span><br><span class=\"line\">    handler.setPriority(Thread.MAX_PRIORITY);</span><br><span class=\"line\">    handler.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    handler.start();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// jvm</span></span><br><span class=\"line\">    SharedSecrets.setJavaLangRefAccess(<span class=\"keyword\">new</span> JavaLangRefAccess() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">tryHandlePendingReference</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> tryHandlePending(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceHandlerJVMpending tryHandlePending(false) </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">tryHandlePending</span><span class=\"params\">(<span class=\"keyword\">boolean</span> waitForNotify)</span> </span>&#123;</span><br><span class=\"line\">    Reference&lt;Object&gt; r;</span><br><span class=\"line\">    Cleaner c;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// pendingnull</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (pending != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                r = pending;</span><br><span class=\"line\">                <span class=\"comment\">//  'instanceof' OOM</span></span><br><span class=\"line\">                <span class=\"comment\">// r</span></span><br><span class=\"line\">                c = r <span class=\"keyword\">instanceof</span> Cleaner ? (Cleaner) r : <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                <span class=\"comment\">// pending</span></span><br><span class=\"line\">                pending = r.discovered;</span><br><span class=\"line\">                <span class=\"comment\">// rpending</span></span><br><span class=\"line\">                r.discovered = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// OOMexception</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (waitForNotify) &#123;</span><br><span class=\"line\">                    lock.wait();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> waitForNotify;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (OutOfMemoryError x) &#123;</span><br><span class=\"line\">        Thread.yield();</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Cleanerclean</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (c != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        c.clean();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ReferenceQueue&lt;? <span class=\"keyword\">super</span> Object&gt; q = r.queue;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (q != ReferenceQueue.NULL) q.enqueue(r);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pendingCleanerclean</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * referentnull</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.referent;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * referentEnqueued</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.referent = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * reference</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isEnqueued</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (<span class=\"keyword\">this</span>.queue == ReferenceQueue.ENQUEUED);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * </span></span><br><span class=\"line\"><span class=\"comment\">  * referencetruefalse</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.queue.enqueue(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceJVMJVMReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>Reference</p>\n</li>\n<li><p>Reference</p>\n</li>\n<li><p>Reference</p>\n</li>\n<li><p>getnull </p>\n</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<img src=\"/programming/java/reference/reference-code-detail/reference-1.png\" title=\"reference-1\">\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote>\n<p><br>Reference<br>referencereferentreferencereferencereferent</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceReferenceReferenceReference</p>\n<blockquote>\n<p><br>Finalizer  FinalReferenceCleaner  PhantomReference</p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Reference</p>\n<p>referencereference<img src=\"/images/0003.png\" width=\"50\"></p>\n<p>referencegetnull( phantomReferencegetnullqueue )</p>\n<p>weakHashMapqueueThreadLocalMapget()null</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* -- Constructors -- */</span></span><br><span class=\"line\">Reference(T referent) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(referent, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Reference(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; queue) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.referent = referent;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.queue = (queue == <span class=\"keyword\">null</span>) ? ReferenceQueue.NULL : queue;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Reference</p>\n<p>referentreference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> T referent;</span><br></pre></td></tr></table></figure>\n<p>queuereference( referent )queuequeue</p>\n<p>queue( ReferenceQueue )queueheadreferencenext</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">volatile</span> ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; queue;</span><br></pre></td></tr></table></figure>\n<p>nextReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Reference next;</span><br></pre></td></tr></table></figure>\n<p>discovered</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* active: discovered</span></span><br><span class=\"line\"><span class=\"comment\"> * pending: pending</span></span><br><span class=\"line\"><span class=\"comment\"> * :   NULL</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">transient</span> <span class=\"keyword\">private</span> Reference&lt;T&gt; discovered;</span><br></pre></td></tr></table></figure>\n<p>lockpendingReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Lock</span> </span>&#123; &#125;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Lock lock = <span class=\"keyword\">new</span> Lock();</span><br></pre></td></tr></table></figure>\n<p>pendingqueueReferencepending</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* reference</span></span><br><span class=\"line\"><span class=\"comment\"> * Reference-handler</span></span><br><span class=\"line\"><span class=\"comment\"> * lockdiscovered</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Reference&lt;Object&gt; pending = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><br>queuenextreferencependingdiscoveredreference</p>\n</blockquote>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p>Referencereferent</p>\n<blockquote>\n<p>Active:<br>referencereferent()PendingInactive<br>Pendingpending-Reference</p>\n<p>Pending:<br>pending-ReferenceReference-handler</p>\n<p>Enqueued:<br>Inactive</p>\n<p>Inactive:<br>()</p>\n</blockquote>\n<p>ActivePendingEnqueuedInactivePendingEnqueued</p>\n<p>referenceActivereferent</p>\n<p>referencependingreferencependingqueuepending</p>\n<p>Enqueuedqueue</p>\n<p>Inactive</p>\n<p>JVMnextqueue</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ActiveReferenceReferenceQueuequeue=ReferenceQueue.NULLqueueReferenceQueuenext == null</span><br><span class=\"line\"></span><br><span class=\"line\">PendingqueueReferenceQueuenext == this</span><br><span class=\"line\"></span><br><span class=\"line\">Enqueuequeue == ReferenceQueue.ENQUEUEDnextqueuereferencenext == this</span><br><span class=\"line\"></span><br><span class=\"line\">Inactivequeue == ReferenceQueue.NULL; next == this.</span><br></pre></td></tr></table></figure>\n<p>next==nullreferenceActive</p>\n<p>next!=nullqueue == ReferenceQueue.NULLreferenceInactive</p>\n<p>next!=nullqueue == ReferenceQueue.ENQUEUEDreferenceEnqueue</p>\n<p>next != nullqueue != ReferenceQueue.NULL &amp;&amp; queu != ReferenceQueue.ENQUEUED referencePending</p>\n<img src=\"/programming/java/reference/reference-code-detail/reference-2.png\" title=\"Reference-relastionship\">\n<h2 id=\"ReferenceHandler\"><a href=\"#ReferenceHandler\" class=\"headerlink\" title=\"ReferenceHandler\"></a>ReferenceHandler</h2><p>ReferenceReferenceHandlerpendingReferenceHandlerReferenceThreadReferenceHandler<img src=\"/images/0019.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReferenceHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureClassInitialized</span><span class=\"params\">(Class&lt;?&gt; clazz)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Class.forName(clazz.getName(), <span class=\"keyword\">true</span>, clazz.getClassLoader());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> (Error) <span class=\"keyword\">new</span> NoClassDefFoundError(e.getMessage()).initCause(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  InterruptedException  Cleaner </span></span><br><span class=\"line\">        <span class=\"comment\">// \t\t </span></span><br><span class=\"line\">        ensureClassInitialized(InterruptedException.class);</span><br><span class=\"line\">        ensureClassInitialized(Cleaner.class);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ReferenceHandler(ThreadGroup g, String name) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(g, name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">            tryHandlePending(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>runwhiletryHandlerPendingpending</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">    ThreadGroup tg = Thread.currentThread().getThreadGroup();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (ThreadGroup tgn = tg;</span><br><span class=\"line\">         tgn != <span class=\"keyword\">null</span>;</span><br><span class=\"line\">         tg = tgn, tgn = tg.getParent());</span><br><span class=\"line\">    <span class=\"comment\">// handler</span></span><br><span class=\"line\">    Thread handler = <span class=\"keyword\">new</span> ReferenceHandler(tg, <span class=\"string\">\"Reference Handler\"</span>);</span><br><span class=\"line\">    handler.setPriority(Thread.MAX_PRIORITY);</span><br><span class=\"line\">    handler.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    handler.start();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// jvm</span></span><br><span class=\"line\">    SharedSecrets.setJavaLangRefAccess(<span class=\"keyword\">new</span> JavaLangRefAccess() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">tryHandlePendingReference</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> tryHandlePending(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceHandlerJVMpending tryHandlePending(false) </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">tryHandlePending</span><span class=\"params\">(<span class=\"keyword\">boolean</span> waitForNotify)</span> </span>&#123;</span><br><span class=\"line\">    Reference&lt;Object&gt; r;</span><br><span class=\"line\">    Cleaner c;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// pendingnull</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (pending != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                r = pending;</span><br><span class=\"line\">                <span class=\"comment\">//  'instanceof' OOM</span></span><br><span class=\"line\">                <span class=\"comment\">// r</span></span><br><span class=\"line\">                c = r <span class=\"keyword\">instanceof</span> Cleaner ? (Cleaner) r : <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                <span class=\"comment\">// pending</span></span><br><span class=\"line\">                pending = r.discovered;</span><br><span class=\"line\">                <span class=\"comment\">// rpending</span></span><br><span class=\"line\">                r.discovered = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// OOMexception</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (waitForNotify) &#123;</span><br><span class=\"line\">                    lock.wait();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> waitForNotify;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (OutOfMemoryError x) &#123;</span><br><span class=\"line\">        Thread.yield();</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (InterruptedException x) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Cleanerclean</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (c != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        c.clean();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ReferenceQueue&lt;? <span class=\"keyword\">super</span> Object&gt; q = r.queue;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (q != ReferenceQueue.NULL) q.enqueue(r);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pendingCleanerclean</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * referentnull</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.referent;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * referentEnqueued</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.referent = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * reference</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isEnqueued</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (<span class=\"keyword\">this</span>.queue == ReferenceQueue.ENQUEUED);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * </span></span><br><span class=\"line\"><span class=\"comment\">  * referencetruefalse</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.queue.enqueue(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceJVMJVMReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p>Reference</p>\n</li>\n<li><p>Reference</p>\n</li>\n<li><p>Reference</p>\n</li>\n<li><p>getnull </p>\n</li>\n</ul>\n"},{"title":"","date":"2018-12-29T12:20:51.000Z","_content":"\n## \n\nSoftReference\n\n## \n\n<img src=\"/images/0003.png\" width=\"50\"/>\n\nGC RootsGCGC Roots<img src=\"/images/0005.png\" width=\"50\"/>\n\n> \n> GC Roots`soft reachable`\n\n\n\n```java\nString s = new String(\"Frank\");    // StringString\nSoftReference<String> softRef = new SoftReference<String>(s);     // \ns = null;        // String\ns = softRef.get();  // \n```\n\nssoftRefs = nullFull GC\n\n> \n> SoftReferencegetJavagetnullnullNullPointerException<img src=\"/images/2030.png\" width=\"50\"/>\n\ns\n\n```java\ns = softRef.get();\n```\n\nsoftRef\n\nSoftReference\n\n```java\npublic class TestA {\n    static class OOMClass{\n        private int[] oom = new int[1024 * 100];// 100KB\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        ReferenceQueue<OOMClass> queue = new ReferenceQueue<>();\n        List<SoftReference> list = new ArrayList<>();\n        while(true){\n            for (int i = 0; i < 100; i++) {\n                list.add(new SoftReference<OOMClass>(new OOMClass(), queue));\n            }\n            Thread.sleep(500);\n        }\n    }\n}\n```\n\n> \n> ReferenceQueueOOMClassSoftReference\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1017K->432K(3584K), 0.0017239 secs]\n[GC (Allocation Failure)  1072K->472K(3584K), 0.0099237 secs]\n[GC (Allocation Failure)  1323K->1296K(3584K), 0.0009528 secs]\n[GC (Allocation Failure)  2114K->2136K(3584K), 0.0009951 secs]\n[Full GC (Ergonomics)  2136K->1992K(3584K), 0.0040658 secs]\n[Full GC (Ergonomics)  2807K->2791K(3584K), 0.0036280 secs]\n[Full GC (Allocation Failure)  2791K->373K(3584K), 0.0032477 secs]\n[Full GC (Ergonomics)  2786K->2773K(3584K), 0.0034554 secs]\n[Full GC (Allocation Failure)  2773K->373K(3584K), 0.0032667 secs]\n[Full GC (Ergonomics)  2798K->2775K(3584K), 0.0036231 secs]\n[Full GC (Allocation Failure)  2775K->375K(3584K), 0.0055482 secs]\n[Full GC (Ergonomics)  2799K->2776K(3584K), 0.0031358 secs]\n...nGC\n```\n\nTestAlistOOM4M100KB10010MJVM\n\n```bash\n[Full GC (Allocation Failure)  2791K->373K(3584K), 0.0032477 secs]\n```\n\nFull GC\n\n2MGC100010000100000<img src=\"/images/141.png\" width=\"50\"/>\n\n## \n\nJVMOOM \n\n QQ\n\nOOM<img src=\"/images/0009.png\" width=\"50\"/>\n\n> \n> SoftReferenceJavaSoftReferenceget()nullSoftReferencenullSoftReferenceSoftReference\n\nReferenceQueueReferenceQueueJava\n\nSoftReference\n\n```java\npublic class SoftCache<T> {\n    // \n    private ReferenceQueue<T> referenceQueue = new ReferenceQueue<>();\n    // \n    private List<Reference<T>> list = new ArrayList<>();\n\n    // \n    public synchronized void add(T obj){\n        // \n        Reference<T> reference = new SoftReference<T>(obj, referenceQueue);\n        // \n        list.add(reference);\n    }\n\n    // \n    public synchronized T get(int index){\n        // \n        clear();\n        if (index < 0 || list.size() < index){\n            return null;\n        }\n        Reference<T> reference = list.get(index);\n        return reference == null ? null : reference.get();\n    }\n\n    public int size(){\n        return list.size();\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    private void clear(){\n        Reference<T> reference;\n        while (null != (reference = (Reference<T>) referenceQueue.poll())){\n            list.remove(reference);\n        }\n    }\n}\n```\n\n\n\n```java\npublic class SoftCacheTest {\n    private static int num = 0;\n\n    public static void main(String[] args){\n        SoftCache<OOMClass> softCache = new SoftCache<>();\n        for (int i = 0; i < 40; i++) {\n            softCache.add(new OOMClass(\"OOM Obj-\" + ++num));\n        }\n        System.out.println(softCache.size());\n        for (int i = 0; i < softCache.size(); i++) {\n            OOMClass obj = softCache.get(i);\n            System.out.println(obj == null ? \"null\" : obj.name);\n        }\n        System.out.println(softCache.size());\n    }\n\n    static class OOMClass{\n        private String name;\n        private int[] oom = new int[1024 * 100];// 100KB\n\n        public OOMClass(String name) {\n            this.name = name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```java\n[GC (Allocation Failure)  1017K->432K(3584K), 0.0012236 secs]\n[GC (Allocation Failure)  1117K->496K(3584K), 0.0016875 secs]\n[GC (Allocation Failure)  1347K->1229K(3584K), 0.0015059 secs]\n[GC (Allocation Failure)  2047K->2125K(3584K), 0.0018090 secs]\n[Full GC (Ergonomics)  2125K->1994K(3584K), 0.0054759 secs]\n[Full GC (Ergonomics)  2822K->2794K(3584K), 0.0023167 secs]\n[Full GC (Allocation Failure)  2794K->376K(3584K), 0.0036056 secs]\n[Full GC (Ergonomics)  2795K->2776K(3584K), 0.0042365 secs]\n[Full GC (Allocation Failure)  2776K->376K(3584K), 0.0035122 secs]\n[Full GC (Ergonomics)  2795K->2776K(3584K), 0.0054760 secs]\n[Full GC (Allocation Failure)  2776K->376K(3584K), 0.0036965 secs]\n[Full GC (Ergonomics)  2802K->2777K(3584K), 0.0044513 secs]\n[Full GC (Allocation Failure)  2777K->376K(3584K), 0.0041400 secs]\n[Full GC (Ergonomics)  2796K->2777K(3584K), 0.0025255 secs]\n[Full GC (Allocation Failure)  2777K->376K(3584K), 0.0037690 secs]\n[Full GC (Ergonomics)  2817K->2777K(3584K), 0.0037759 secs]\n[Full GC (Allocation Failure)  2777K->377K(3584K), 0.0042416 secs]\n40\nOOM Obj-37\nOOM Obj-38\nOOM Obj-39\nOOM Obj-40\n4\n```\n\n40GC4\n\n## \n\n\n\n```java\npublic class Test {\n\n    static class OOMClass{\n        private int[] oom = new int[1024];\n    }\n\n    public static void main(String[] args) {\n        testStrongReference();\n        //testSoftReference();\n    }\n\n    public static void testStrongReference(){\n        List<OOMClass> list = new ArrayList<>();\n        for (int i = 0; i < 1000; i++) {\n            list.add(new OOMClass());\n        }\n    }\n\n    public static void testSoftReference(){\n        ReferenceQueue<OOMClass> referenceQueue = new ReferenceQueue<>();\n        List<SoftReference> list = new ArrayList<>();\n        for (int i = 0; i < 1000; i++) {\n            OOMClass oomClass = new OOMClass();\n            list.add(new SoftReference(oomClass, referenceQueue));\n            oomClass = null;\n        }\n    }\n}\n```\n\ntestStrongReference\n\n```java\n[GC (Allocation Failure)  1019K->384K(3584K), 0.0033595 secs]\n[GC (Allocation Failure)  1406K->856K(3584K), 0.0013098 secs]\n[GC (Allocation Failure)  1880K->1836K(3584K), 0.0014382 secs]\n[Full GC (Ergonomics)  1836K->1756K(3584K), 0.0039761 secs]\n[Full GC (Ergonomics)  2778K->2758K(3584K), 0.0021269 secs]\n[Full GC (Ergonomics)  2779K->2770K(3584K), 0.0016329 secs]\n[Full GC (Ergonomics)  2779K->2775K(3584K), 0.0023157 secs]\n[Full GC (Ergonomics)  2775K->2775K(3584K), 0.0015927 secs]\n[Full GC (Ergonomics)  3037K->3029K(3584K), 0.0025071 secs]\n[Full GC (Ergonomics)  3067K->3065K(3584K), 0.0017529 secs]\n[Full GC (Allocation Failure)  3065K->3047K(3584K), 0.0033445 secs]\n[Full GC (Ergonomics)  3068K->3059K(3584K), 0.0016623 secs]\n[Full GC (Ergonomics)  3070K->3068K(3584K), 0.0028357 secs]\n[Full GC (Allocation Failure)  3068K->3068K(3584K), 0.0017616 secs]\njava.lang.OutOfMemoryError: Java heap space\nDumping heap to java_pid3352.hprof ...\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\nHeap dump file created [3855956 bytes in 0.017 secs]\n[Full GC (Ergonomics)  3071K->376K(3584K), 0.0032068 secs]\n\tat reference.Test$OOMClass.<init>(Test.java:11)\n\tat reference.Test.testStrongReference(Test.java:22)\n\tat reference.Test.main(Test.java:15)\n\nProcess finished with exit code 1\n```\n\nOOMJava heap space\n\ntestSoftReference\n\n```java\n[GC (Allocation Failure)  1019K->464K(3584K), 0.0019850 secs]\n[GC (Allocation Failure)  1484K->844K(3584K), 0.0015920 secs]\n[GC (Allocation Failure)  1868K->1860K(3584K), 0.0043236 secs]\n[Full GC (Ergonomics)  1860K->1781K(3584K), 0.0044581 secs]\n[Full GC (Ergonomics)  2802K->2754K(3584K), 0.0041726 secs]\n[Full GC (Ergonomics)  2802K->2799K(3584K), 0.0031293 secs]\n[Full GC (Ergonomics)  3023K->3023K(3584K), 0.0024830 secs]\n[Full GC (Ergonomics)  3071K->3068K(3584K), 0.0035025 secs]\n[Full GC (Allocation Failure)  3068K->405K(3584K), 0.0040672 secs]\n[GC (Allocation Failure)  1512K->1567K(3584K), 0.0011170 secs]\n[Full GC (Ergonomics)  1567K->1496K(3584K), 0.0048438 secs]\n```\n\nOOMGC\n\n```bash\n[Full GC (Allocation Failure)  3068K->405K(3584K), 0.0040672 secs]\n```\n\nFull GC\n\n## \n\n+ \n+ \n+ JVM\n+ OOM\n+ \n\n \n\n\n\n","source":"_posts/java/reference/soft-reference.md","raw":"---\ntitle: \ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 20:20:51\n---\n\n## \n\nSoftReference\n\n## \n\n<img src=\"/images/0003.png\" width=\"50\"/>\n\nGC RootsGCGC Roots<img src=\"/images/0005.png\" width=\"50\"/>\n\n> \n> GC Roots`soft reachable`\n\n\n\n```java\nString s = new String(\"Frank\");    // StringString\nSoftReference<String> softRef = new SoftReference<String>(s);     // \ns = null;        // String\ns = softRef.get();  // \n```\n\nssoftRefs = nullFull GC\n\n> \n> SoftReferencegetJavagetnullnullNullPointerException<img src=\"/images/2030.png\" width=\"50\"/>\n\ns\n\n```java\ns = softRef.get();\n```\n\nsoftRef\n\nSoftReference\n\n```java\npublic class TestA {\n    static class OOMClass{\n        private int[] oom = new int[1024 * 100];// 100KB\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        ReferenceQueue<OOMClass> queue = new ReferenceQueue<>();\n        List<SoftReference> list = new ArrayList<>();\n        while(true){\n            for (int i = 0; i < 100; i++) {\n                list.add(new SoftReference<OOMClass>(new OOMClass(), queue));\n            }\n            Thread.sleep(500);\n        }\n    }\n}\n```\n\n> \n> ReferenceQueueOOMClassSoftReference\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1017K->432K(3584K), 0.0017239 secs]\n[GC (Allocation Failure)  1072K->472K(3584K), 0.0099237 secs]\n[GC (Allocation Failure)  1323K->1296K(3584K), 0.0009528 secs]\n[GC (Allocation Failure)  2114K->2136K(3584K), 0.0009951 secs]\n[Full GC (Ergonomics)  2136K->1992K(3584K), 0.0040658 secs]\n[Full GC (Ergonomics)  2807K->2791K(3584K), 0.0036280 secs]\n[Full GC (Allocation Failure)  2791K->373K(3584K), 0.0032477 secs]\n[Full GC (Ergonomics)  2786K->2773K(3584K), 0.0034554 secs]\n[Full GC (Allocation Failure)  2773K->373K(3584K), 0.0032667 secs]\n[Full GC (Ergonomics)  2798K->2775K(3584K), 0.0036231 secs]\n[Full GC (Allocation Failure)  2775K->375K(3584K), 0.0055482 secs]\n[Full GC (Ergonomics)  2799K->2776K(3584K), 0.0031358 secs]\n...nGC\n```\n\nTestAlistOOM4M100KB10010MJVM\n\n```bash\n[Full GC (Allocation Failure)  2791K->373K(3584K), 0.0032477 secs]\n```\n\nFull GC\n\n2MGC100010000100000<img src=\"/images/141.png\" width=\"50\"/>\n\n## \n\nJVMOOM \n\n QQ\n\nOOM<img src=\"/images/0009.png\" width=\"50\"/>\n\n> \n> SoftReferenceJavaSoftReferenceget()nullSoftReferencenullSoftReferenceSoftReference\n\nReferenceQueueReferenceQueueJava\n\nSoftReference\n\n```java\npublic class SoftCache<T> {\n    // \n    private ReferenceQueue<T> referenceQueue = new ReferenceQueue<>();\n    // \n    private List<Reference<T>> list = new ArrayList<>();\n\n    // \n    public synchronized void add(T obj){\n        // \n        Reference<T> reference = new SoftReference<T>(obj, referenceQueue);\n        // \n        list.add(reference);\n    }\n\n    // \n    public synchronized T get(int index){\n        // \n        clear();\n        if (index < 0 || list.size() < index){\n            return null;\n        }\n        Reference<T> reference = list.get(index);\n        return reference == null ? null : reference.get();\n    }\n\n    public int size(){\n        return list.size();\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    private void clear(){\n        Reference<T> reference;\n        while (null != (reference = (Reference<T>) referenceQueue.poll())){\n            list.remove(reference);\n        }\n    }\n}\n```\n\n\n\n```java\npublic class SoftCacheTest {\n    private static int num = 0;\n\n    public static void main(String[] args){\n        SoftCache<OOMClass> softCache = new SoftCache<>();\n        for (int i = 0; i < 40; i++) {\n            softCache.add(new OOMClass(\"OOM Obj-\" + ++num));\n        }\n        System.out.println(softCache.size());\n        for (int i = 0; i < softCache.size(); i++) {\n            OOMClass obj = softCache.get(i);\n            System.out.println(obj == null ? \"null\" : obj.name);\n        }\n        System.out.println(softCache.size());\n    }\n\n    static class OOMClass{\n        private String name;\n        private int[] oom = new int[1024 * 100];// 100KB\n\n        public OOMClass(String name) {\n            this.name = name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```java\n[GC (Allocation Failure)  1017K->432K(3584K), 0.0012236 secs]\n[GC (Allocation Failure)  1117K->496K(3584K), 0.0016875 secs]\n[GC (Allocation Failure)  1347K->1229K(3584K), 0.0015059 secs]\n[GC (Allocation Failure)  2047K->2125K(3584K), 0.0018090 secs]\n[Full GC (Ergonomics)  2125K->1994K(3584K), 0.0054759 secs]\n[Full GC (Ergonomics)  2822K->2794K(3584K), 0.0023167 secs]\n[Full GC (Allocation Failure)  2794K->376K(3584K), 0.0036056 secs]\n[Full GC (Ergonomics)  2795K->2776K(3584K), 0.0042365 secs]\n[Full GC (Allocation Failure)  2776K->376K(3584K), 0.0035122 secs]\n[Full GC (Ergonomics)  2795K->2776K(3584K), 0.0054760 secs]\n[Full GC (Allocation Failure)  2776K->376K(3584K), 0.0036965 secs]\n[Full GC (Ergonomics)  2802K->2777K(3584K), 0.0044513 secs]\n[Full GC (Allocation Failure)  2777K->376K(3584K), 0.0041400 secs]\n[Full GC (Ergonomics)  2796K->2777K(3584K), 0.0025255 secs]\n[Full GC (Allocation Failure)  2777K->376K(3584K), 0.0037690 secs]\n[Full GC (Ergonomics)  2817K->2777K(3584K), 0.0037759 secs]\n[Full GC (Allocation Failure)  2777K->377K(3584K), 0.0042416 secs]\n40\nOOM Obj-37\nOOM Obj-38\nOOM Obj-39\nOOM Obj-40\n4\n```\n\n40GC4\n\n## \n\n\n\n```java\npublic class Test {\n\n    static class OOMClass{\n        private int[] oom = new int[1024];\n    }\n\n    public static void main(String[] args) {\n        testStrongReference();\n        //testSoftReference();\n    }\n\n    public static void testStrongReference(){\n        List<OOMClass> list = new ArrayList<>();\n        for (int i = 0; i < 1000; i++) {\n            list.add(new OOMClass());\n        }\n    }\n\n    public static void testSoftReference(){\n        ReferenceQueue<OOMClass> referenceQueue = new ReferenceQueue<>();\n        List<SoftReference> list = new ArrayList<>();\n        for (int i = 0; i < 1000; i++) {\n            OOMClass oomClass = new OOMClass();\n            list.add(new SoftReference(oomClass, referenceQueue));\n            oomClass = null;\n        }\n    }\n}\n```\n\ntestStrongReference\n\n```java\n[GC (Allocation Failure)  1019K->384K(3584K), 0.0033595 secs]\n[GC (Allocation Failure)  1406K->856K(3584K), 0.0013098 secs]\n[GC (Allocation Failure)  1880K->1836K(3584K), 0.0014382 secs]\n[Full GC (Ergonomics)  1836K->1756K(3584K), 0.0039761 secs]\n[Full GC (Ergonomics)  2778K->2758K(3584K), 0.0021269 secs]\n[Full GC (Ergonomics)  2779K->2770K(3584K), 0.0016329 secs]\n[Full GC (Ergonomics)  2779K->2775K(3584K), 0.0023157 secs]\n[Full GC (Ergonomics)  2775K->2775K(3584K), 0.0015927 secs]\n[Full GC (Ergonomics)  3037K->3029K(3584K), 0.0025071 secs]\n[Full GC (Ergonomics)  3067K->3065K(3584K), 0.0017529 secs]\n[Full GC (Allocation Failure)  3065K->3047K(3584K), 0.0033445 secs]\n[Full GC (Ergonomics)  3068K->3059K(3584K), 0.0016623 secs]\n[Full GC (Ergonomics)  3070K->3068K(3584K), 0.0028357 secs]\n[Full GC (Allocation Failure)  3068K->3068K(3584K), 0.0017616 secs]\njava.lang.OutOfMemoryError: Java heap space\nDumping heap to java_pid3352.hprof ...\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\nHeap dump file created [3855956 bytes in 0.017 secs]\n[Full GC (Ergonomics)  3071K->376K(3584K), 0.0032068 secs]\n\tat reference.Test$OOMClass.<init>(Test.java:11)\n\tat reference.Test.testStrongReference(Test.java:22)\n\tat reference.Test.main(Test.java:15)\n\nProcess finished with exit code 1\n```\n\nOOMJava heap space\n\ntestSoftReference\n\n```java\n[GC (Allocation Failure)  1019K->464K(3584K), 0.0019850 secs]\n[GC (Allocation Failure)  1484K->844K(3584K), 0.0015920 secs]\n[GC (Allocation Failure)  1868K->1860K(3584K), 0.0043236 secs]\n[Full GC (Ergonomics)  1860K->1781K(3584K), 0.0044581 secs]\n[Full GC (Ergonomics)  2802K->2754K(3584K), 0.0041726 secs]\n[Full GC (Ergonomics)  2802K->2799K(3584K), 0.0031293 secs]\n[Full GC (Ergonomics)  3023K->3023K(3584K), 0.0024830 secs]\n[Full GC (Ergonomics)  3071K->3068K(3584K), 0.0035025 secs]\n[Full GC (Allocation Failure)  3068K->405K(3584K), 0.0040672 secs]\n[GC (Allocation Failure)  1512K->1567K(3584K), 0.0011170 secs]\n[Full GC (Ergonomics)  1567K->1496K(3584K), 0.0048438 secs]\n```\n\nOOMGC\n\n```bash\n[Full GC (Allocation Failure)  3068K->405K(3584K), 0.0040672 secs]\n```\n\nFull GC\n\n## \n\n+ \n+ \n+ JVM\n+ OOM\n+ \n\n \n\n\n\n","slug":"java/reference/soft-reference","published":1,"updated":"2019-06-04T01:29:57.413Z","_id":"cjxze3gx4005x0cvwc2nksy7c","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>SoftReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"/images/0003.png\" width=\"50\"></p>\n<p>GC RootsGCGC Roots<img src=\"/images/0005.png\" width=\"50\"></p>\n<blockquote>\n<p><br>GC Roots<code>soft reachable</code></p>\n</blockquote>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Frank\"</span>);    <span class=\"comment\">// StringString</span></span><br><span class=\"line\">SoftReference&lt;String&gt; softRef = <span class=\"keyword\">new</span> SoftReference&lt;String&gt;(s);     <span class=\"comment\">// </span></span><br><span class=\"line\">s = <span class=\"keyword\">null</span>;        <span class=\"comment\">// String</span></span><br><span class=\"line\">s = softRef.get();  <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n<p>ssoftRefs = nullFull GC</p>\n<blockquote>\n<p><br>SoftReferencegetJavagetnullnullNullPointerException<img src=\"/images/2030.png\" width=\"50\"></p>\n</blockquote>\n<p>s</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = softRef.get();</span><br></pre></td></tr></table></figure>\n<p>softRef</p>\n<p>SoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestA</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>];<span class=\"comment\">// 100KB</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        ReferenceQueue&lt;OOMClass&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">        List&lt;SoftReference&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"keyword\">true</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</span><br><span class=\"line\">                list.add(<span class=\"keyword\">new</span> SoftReference&lt;OOMClass&gt;(<span class=\"keyword\">new</span> OOMClass(), queue));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">500</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><br>ReferenceQueueOOMClassSoftReference</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1017K-&gt;432K(3584K), 0.0017239 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1072K-&gt;472K(3584K), 0.0099237 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1323K-&gt;1296K(3584K), 0.0009528 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  2114K-&gt;2136K(3584K), 0.0009951 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2136K-&gt;1992K(3584K), 0.0040658 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2807K-&gt;2791K(3584K), 0.0036280 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2791K-&gt;373K(3584K), 0.0032477 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2786K-&gt;2773K(3584K), 0.0034554 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2773K-&gt;373K(3584K), 0.0032667 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2798K-&gt;2775K(3584K), 0.0036231 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2775K-&gt;375K(3584K), 0.0055482 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2799K-&gt;2776K(3584K), 0.0031358 secs]</span><br><span class=\"line\">...nGC</span><br></pre></td></tr></table></figure>\n<p>TestAlistOOM4M100KB10010MJVM</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Full GC (Allocation Failure)  2791K-&gt;373K(3584K), 0.0032477 secs]</span><br></pre></td></tr></table></figure>\n<p>Full GC</p>\n<p>2MGC100010000100000<img src=\"/images/141.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JVMOOM </p>\n<p> QQ</p>\n<p>OOM<img src=\"/images/0009.png\" width=\"50\"></p>\n<blockquote>\n<p><br>SoftReferenceJavaSoftReferenceget()nullSoftReferencenullSoftReferenceSoftReference</p>\n</blockquote>\n<p>ReferenceQueueReferenceQueueJava</p>\n<p>SoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftCache</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ReferenceQueue&lt;T&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Reference&lt;T&gt;&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(T obj)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        Reference&lt;T&gt; reference = <span class=\"keyword\">new</span> SoftReference&lt;T&gt;(obj, referenceQueue);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        list.add(reference);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> T <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        clear();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index &lt; <span class=\"number\">0</span> || list.size() &lt; index)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Reference&lt;T&gt; reference = list.get(index);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> reference == <span class=\"keyword\">null</span> ? <span class=\"keyword\">null</span> : reference.get();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">size</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> list.size();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Reference&lt;T&gt; reference;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"keyword\">null</span> != (reference = (Reference&lt;T&gt;) referenceQueue.poll()))&#123;</span><br><span class=\"line\">            list.remove(reference);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftCacheTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> num = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        SoftCache&lt;OOMClass&gt; softCache = <span class=\"keyword\">new</span> SoftCache&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">40</span>; i++) &#123;</span><br><span class=\"line\">            softCache.add(<span class=\"keyword\">new</span> OOMClass(<span class=\"string\">\"OOM Obj-\"</span> + ++num));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(softCache.size());</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; softCache.size(); i++) &#123;</span><br><span class=\"line\">            OOMClass obj = softCache.get(i);</span><br><span class=\"line\">            System.out.println(obj == <span class=\"keyword\">null</span> ? <span class=\"string\">\"null\"</span> : obj.name);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(softCache.size());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>];<span class=\"comment\">// 100KB</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">OOMClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1017</span>K-&gt;<span class=\"number\">432</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0012236</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1117</span>K-&gt;<span class=\"number\">496</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0016875</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1347</span>K-&gt;<span class=\"number\">1229</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0015059</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">2047</span>K-&gt;<span class=\"number\">2125</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0018090</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2125K-&gt;1994<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0054759 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2822K-&gt;2794<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0023167 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2794K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0036056 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2795K-&gt;2776<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0042365 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2776K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0035122 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2795K-&gt;2776<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0054760 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2776K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0036965 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0044513 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0041400 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2796K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0025255 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0037690 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2817K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0037759 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;377<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0042416 secs]</span></span><br><span class=\"line\"><span class=\"function\">40</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-37</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-38</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-39</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-40</span></span><br><span class=\"line\"><span class=\"function\">4</span></span><br></pre></td></tr></table></figure>\n<p>40GC4</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        testStrongReference();</span><br><span class=\"line\">        <span class=\"comment\">//testSoftReference();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testStrongReference</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        List&lt;OOMClass&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000</span>; i++) &#123;</span><br><span class=\"line\">            list.add(<span class=\"keyword\">new</span> OOMClass());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testSoftReference</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        ReferenceQueue&lt;OOMClass&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">        List&lt;SoftReference&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000</span>; i++) &#123;</span><br><span class=\"line\">            OOMClass oomClass = <span class=\"keyword\">new</span> OOMClass();</span><br><span class=\"line\">            list.add(<span class=\"keyword\">new</span> SoftReference(oomClass, referenceQueue));</span><br><span class=\"line\">            oomClass = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>testStrongReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1019</span>K-&gt;<span class=\"number\">384</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0033595</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1406</span>K-&gt;<span class=\"number\">856</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0013098</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1880</span>K-&gt;<span class=\"number\">1836</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0014382</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1836K-&gt;1756<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0039761 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2778K-&gt;2758<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0021269 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2779K-&gt;2770<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0016329 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2779K-&gt;2775<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0023157 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2775K-&gt;2775<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0015927 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3037K-&gt;3029<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0025071 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3067K-&gt;3065<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0017529 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3065K-&gt;3047<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0033445 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3068K-&gt;3059<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0016623 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3070K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0028357 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3068K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0017616 secs]</span></span><br><span class=\"line\"><span class=\"function\">java.lang.OutOfMemoryError: Java heap space</span></span><br><span class=\"line\"><span class=\"function\">Dumping heap to java_pid3352.hprof ...</span></span><br><span class=\"line\"><span class=\"function\">Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space</span></span><br><span class=\"line\"><span class=\"function\">Heap dump file created [3855956 bytes in 0.017 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3071K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0032068 secs]</span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test$OOMClass.&lt;init&gt;<span class=\"params\">(Test.java:<span class=\"number\">11</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test.<span class=\"title\">testStrongReference</span><span class=\"params\">(Test.java:<span class=\"number\">22</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test.<span class=\"title\">main</span><span class=\"params\">(Test.java:<span class=\"number\">15</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\">Process finished with exit code 1</span></span><br></pre></td></tr></table></figure>\n<p>OOMJava heap space</p>\n<p>testSoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1019</span>K-&gt;<span class=\"number\">464</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0019850</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1484</span>K-&gt;<span class=\"number\">844</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0015920</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1868</span>K-&gt;<span class=\"number\">1860</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0043236</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1860K-&gt;1781<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0044581 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2754<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0041726 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2799<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0031293 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3023K-&gt;3023<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0024830 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3071K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0035025 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3068K-&gt;405<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0040672 secs]</span></span><br><span class=\"line\"><span class=\"function\">[<span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  1512K-&gt;1567<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0011170 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1567K-&gt;1496<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0048438 secs]</span></span><br></pre></td></tr></table></figure>\n<p>OOMGC</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Full GC (Allocation Failure)  3068K-&gt;405K(3584K), 0.0040672 secs]</span><br></pre></td></tr></table></figure>\n<p>Full GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li>OOM</li>\n<li></li>\n</ul>\n<p> </p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>SoftReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"/images/0003.png\" width=\"50\"></p>\n<p>GC RootsGCGC Roots<img src=\"/images/0005.png\" width=\"50\"></p>\n<blockquote>\n<p><br>GC Roots<code>soft reachable</code></p>\n</blockquote>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Frank\"</span>);    <span class=\"comment\">// StringString</span></span><br><span class=\"line\">SoftReference&lt;String&gt; softRef = <span class=\"keyword\">new</span> SoftReference&lt;String&gt;(s);     <span class=\"comment\">// </span></span><br><span class=\"line\">s = <span class=\"keyword\">null</span>;        <span class=\"comment\">// String</span></span><br><span class=\"line\">s = softRef.get();  <span class=\"comment\">// </span></span><br></pre></td></tr></table></figure>\n<p>ssoftRefs = nullFull GC</p>\n<blockquote>\n<p><br>SoftReferencegetJavagetnullnullNullPointerException<img src=\"/images/2030.png\" width=\"50\"></p>\n</blockquote>\n<p>s</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = softRef.get();</span><br></pre></td></tr></table></figure>\n<p>softRef</p>\n<p>SoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestA</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>];<span class=\"comment\">// 100KB</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        ReferenceQueue&lt;OOMClass&gt; queue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">        List&lt;SoftReference&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"keyword\">true</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++) &#123;</span><br><span class=\"line\">                list.add(<span class=\"keyword\">new</span> SoftReference&lt;OOMClass&gt;(<span class=\"keyword\">new</span> OOMClass(), queue));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            Thread.sleep(<span class=\"number\">500</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><br>ReferenceQueueOOMClassSoftReference</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1017K-&gt;432K(3584K), 0.0017239 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1072K-&gt;472K(3584K), 0.0099237 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1323K-&gt;1296K(3584K), 0.0009528 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  2114K-&gt;2136K(3584K), 0.0009951 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2136K-&gt;1992K(3584K), 0.0040658 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2807K-&gt;2791K(3584K), 0.0036280 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2791K-&gt;373K(3584K), 0.0032477 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2786K-&gt;2773K(3584K), 0.0034554 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2773K-&gt;373K(3584K), 0.0032667 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2798K-&gt;2775K(3584K), 0.0036231 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2775K-&gt;375K(3584K), 0.0055482 secs]</span><br><span class=\"line\">[Full GC (Ergonomics)  2799K-&gt;2776K(3584K), 0.0031358 secs]</span><br><span class=\"line\">...nGC</span><br></pre></td></tr></table></figure>\n<p>TestAlistOOM4M100KB10010MJVM</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Full GC (Allocation Failure)  2791K-&gt;373K(3584K), 0.0032477 secs]</span><br></pre></td></tr></table></figure>\n<p>Full GC</p>\n<p>2MGC100010000100000<img src=\"/images/141.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>JVMOOM </p>\n<p> QQ</p>\n<p>OOM<img src=\"/images/0009.png\" width=\"50\"></p>\n<blockquote>\n<p><br>SoftReferenceJavaSoftReferenceget()nullSoftReferencenullSoftReferenceSoftReference</p>\n</blockquote>\n<p>ReferenceQueueReferenceQueueJava</p>\n<p>SoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftCache</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ReferenceQueue&lt;T&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Reference&lt;T&gt;&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(T obj)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        Reference&lt;T&gt; reference = <span class=\"keyword\">new</span> SoftReference&lt;T&gt;(obj, referenceQueue);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        list.add(reference);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> T <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        clear();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index &lt; <span class=\"number\">0</span> || list.size() &lt; index)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Reference&lt;T&gt; reference = list.get(index);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> reference == <span class=\"keyword\">null</span> ? <span class=\"keyword\">null</span> : reference.get();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">size</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> list.size();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Reference&lt;T&gt; reference;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"keyword\">null</span> != (reference = (Reference&lt;T&gt;) referenceQueue.poll()))&#123;</span><br><span class=\"line\">            list.remove(reference);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftCacheTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> num = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</span><br><span class=\"line\">        SoftCache&lt;OOMClass&gt; softCache = <span class=\"keyword\">new</span> SoftCache&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">40</span>; i++) &#123;</span><br><span class=\"line\">            softCache.add(<span class=\"keyword\">new</span> OOMClass(<span class=\"string\">\"OOM Obj-\"</span> + ++num));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(softCache.size());</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; softCache.size(); i++) &#123;</span><br><span class=\"line\">            OOMClass obj = softCache.get(i);</span><br><span class=\"line\">            System.out.println(obj == <span class=\"keyword\">null</span> ? <span class=\"string\">\"null\"</span> : obj.name);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(softCache.size());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>];<span class=\"comment\">// 100KB</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">OOMClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1017</span>K-&gt;<span class=\"number\">432</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0012236</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1117</span>K-&gt;<span class=\"number\">496</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0016875</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1347</span>K-&gt;<span class=\"number\">1229</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0015059</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">2047</span>K-&gt;<span class=\"number\">2125</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0018090</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2125K-&gt;1994<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0054759 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2822K-&gt;2794<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0023167 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2794K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0036056 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2795K-&gt;2776<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0042365 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2776K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0035122 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2795K-&gt;2776<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0054760 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2776K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0036965 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0044513 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0041400 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2796K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0025255 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0037690 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2817K-&gt;2777<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0037759 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  2777K-&gt;377<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0042416 secs]</span></span><br><span class=\"line\"><span class=\"function\">40</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-37</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-38</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-39</span></span><br><span class=\"line\"><span class=\"function\">OOM Obj-40</span></span><br><span class=\"line\"><span class=\"function\">4</span></span><br></pre></td></tr></table></figure>\n<p>40GC4</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OOMClass</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] oom = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1024</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        testStrongReference();</span><br><span class=\"line\">        <span class=\"comment\">//testSoftReference();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testStrongReference</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        List&lt;OOMClass&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000</span>; i++) &#123;</span><br><span class=\"line\">            list.add(<span class=\"keyword\">new</span> OOMClass());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">testSoftReference</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        ReferenceQueue&lt;OOMClass&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">        List&lt;SoftReference&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">1000</span>; i++) &#123;</span><br><span class=\"line\">            OOMClass oomClass = <span class=\"keyword\">new</span> OOMClass();</span><br><span class=\"line\">            list.add(<span class=\"keyword\">new</span> SoftReference(oomClass, referenceQueue));</span><br><span class=\"line\">            oomClass = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>testStrongReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1019</span>K-&gt;<span class=\"number\">384</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0033595</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1406</span>K-&gt;<span class=\"number\">856</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0013098</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1880</span>K-&gt;<span class=\"number\">1836</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0014382</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1836K-&gt;1756<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0039761 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2778K-&gt;2758<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0021269 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2779K-&gt;2770<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0016329 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2779K-&gt;2775<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0023157 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2775K-&gt;2775<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0015927 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3037K-&gt;3029<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0025071 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3067K-&gt;3065<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0017529 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3065K-&gt;3047<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0033445 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3068K-&gt;3059<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0016623 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3070K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0028357 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3068K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0017616 secs]</span></span><br><span class=\"line\"><span class=\"function\">java.lang.OutOfMemoryError: Java heap space</span></span><br><span class=\"line\"><span class=\"function\">Dumping heap to java_pid3352.hprof ...</span></span><br><span class=\"line\"><span class=\"function\">Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space</span></span><br><span class=\"line\"><span class=\"function\">Heap dump file created [3855956 bytes in 0.017 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3071K-&gt;376<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0032068 secs]</span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test$OOMClass.&lt;init&gt;<span class=\"params\">(Test.java:<span class=\"number\">11</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test.<span class=\"title\">testStrongReference</span><span class=\"params\">(Test.java:<span class=\"number\">22</span>)</span></span></span><br><span class=\"line\"><span class=\"function\">\tat reference.Test.<span class=\"title\">main</span><span class=\"params\">(Test.java:<span class=\"number\">15</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span></span><br><span class=\"line\"><span class=\"function\">Process finished with exit code 1</span></span><br></pre></td></tr></table></figure>\n<p>OOMJava heap space</p>\n<p>testSoftReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1019</span>K-&gt;<span class=\"number\">464</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0019850</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1484</span>K-&gt;<span class=\"number\">844</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0015920</span> secs]</span><br><span class=\"line\">[GC (Allocation Failure)  <span class=\"number\">1868</span>K-&gt;<span class=\"number\">1860</span>K(<span class=\"number\">3584</span>K), <span class=\"number\">0.0043236</span> secs]</span><br><span class=\"line\">[<span class=\"function\">Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1860K-&gt;1781<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0044581 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2754<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0041726 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  2802K-&gt;2799<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0031293 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3023K-&gt;3023<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0024830 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  3071K-&gt;3068<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0035025 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  3068K-&gt;405<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0040672 secs]</span></span><br><span class=\"line\"><span class=\"function\">[<span class=\"title\">GC</span> <span class=\"params\">(Allocation Failure)</span>  1512K-&gt;1567<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0011170 secs]</span></span><br><span class=\"line\"><span class=\"function\">[Full <span class=\"title\">GC</span> <span class=\"params\">(Ergonomics)</span>  1567K-&gt;1496<span class=\"title\">K</span><span class=\"params\">(<span class=\"number\">3584</span>K)</span>, 0.0048438 secs]</span></span><br></pre></td></tr></table></figure>\n<p>OOMGC</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Full GC (Allocation Failure)  3068K-&gt;405K(3584K), 0.0040672 secs]</span><br></pre></td></tr></table></figure>\n<p>Full GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li></li>\n<li>JVM</li>\n<li>OOM</li>\n<li></li>\n</ul>\n<p> </p>\n"},{"title":"Java","date":"2018-12-28T11:00:00.000Z","_content":"\n> \n\n## \n\n[](http://www.cnblogs.com/mfrank/)\n\nJavaJavaJavaJava\n\n## \n\nBOSS\n\n\n\n3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## Java\n\nJava\n\nJavaJavaWeb/APPJavaJava\n\n\n\n\n\nJavaJavaWebJava\n\nJavaWebhtmlappappUI\n\nJava\n\n\n\nJava\n\nQQ529253292\n\nJavabossbossboss\n\nJavaWeb\n\nJavaWeb:\n\n{% asset_img java-started-1.png JavaWeb %}\n\n\n\nJava\n","source":"_posts/java/introduction/java-started.md","raw":"---\ntitle: Java\ntags: \n - Java\n - Java\ncategories: \ndate: 2018-12-28 19:00:00\n---\n\n> \n\n## \n\n[](http://www.cnblogs.com/mfrank/)\n\nJavaJavaJavaJava\n\n## \n\nBOSS\n\n\n\n3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## Java\n\nJava\n\nJavaJavaWeb/APPJavaJava\n\n\n\n\n\nJavaJavaWebJava\n\nJavaWebhtmlappappUI\n\nJava\n\n\n\nJava\n\nQQ529253292\n\nJavabossbossboss\n\nJavaWeb\n\nJavaWeb:\n\n{% asset_img java-started-1.png JavaWeb %}\n\n\n\nJava\n","slug":"java/introduction/java-started","published":1,"updated":"2019-06-04T01:29:57.329Z","_id":"cjxze3gx400600cvw5txb31od","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://www.cnblogs.com/mfrank/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>JavaJavaJavaJava</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>BOSS</p>\n<p></p>\n<p>3</p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p>Java</p>\n<p>JavaJavaWeb/APPJavaJava</p>\n<p></p>\n<p></p>\n<p>JavaJavaWebJava</p>\n<p>JavaWebhtmlappappUI</p>\n<p>Java</p>\n<p></p>\n<p>Java</p>\n<p>QQ529253292</p>\n<p>Javabossbossboss</p>\n<p>JavaWeb</p>\n<p>JavaWeb:</p>\n<img src=\"/programming/java/introduction/java-started/java-started-1.png\" title=\"JavaWeb\">\n<p></p>\n<p>Java</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<blockquote>\n<p></p>\n</blockquote>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"http://www.cnblogs.com/mfrank/\" target=\"_blank\" rel=\"noopener\"></a></p>\n<p>JavaJavaJavaJava</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>BOSS</p>\n<p></p>\n<p>3</p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<h2 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h2><p>Java</p>\n<p>JavaJavaWeb/APPJavaJava</p>\n<p></p>\n<p></p>\n<p>JavaJavaWebJava</p>\n<p>JavaWebhtmlappappUI</p>\n<p>Java</p>\n<p></p>\n<p>Java</p>\n<p>QQ529253292</p>\n<p>Javabossbossboss</p>\n<p>JavaWeb</p>\n<p>JavaWeb:</p>\n<img src=\"/programming/java/introduction/java-started/java-started-1.png\" title=\"JavaWeb\">\n<p></p>\n<p>Java</p>\n"},{"title":"","date":"2018-12-29T11:56:51.000Z","_content":"\n## \n\nOOMOutOfMemoryError\n\n## \n\n``<img src=\"/images/0009.png\" width=\"50\"/>\n\n```java\nString s = new String(\"Hello Frank!\");\n```\n\n> \n> GC Roots`strong reachable`\n\n[](../jvm/reachable.html)\n\n<img src=\"/images/0003.png\" width=\"50\"/>\n\nJVMGC\n\n> \n> \n\nnullOOM\n\n```java\ns = null;\n```\n\nJVMGC\n\nsObjectsobjectsobjectGCssnullobject<img src=\"/images/0013.png\" width=\"50\"/>\n\n\n\n```java\nA a = new A();\nB b = new B(a);\na = null;\n```\n\nab a = null  a  A A a = null A B[](../jvm/memory-leak.html)<img src=\"/images/8111.png\" width=\"50\"/>\n\n\n\n```java\npublic static ArrayList<Object> list = new ArrayList<Object>();\npublic void stackOverflowTest(Object object){\n    list.add(object);\n    object = null;\n}\n```\n\nGC\n\nlistnullobjectlist[](../jvm/memory-leak.html) \n\n## \n\n\n\n- \n- \n- \n- \n- OOM\n\n","source":"_posts/java/reference/strong-reference.md","raw":"---\ntitle: \ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 19:56:51\n---\n\n## \n\nOOMOutOfMemoryError\n\n## \n\n``<img src=\"/images/0009.png\" width=\"50\"/>\n\n```java\nString s = new String(\"Hello Frank!\");\n```\n\n> \n> GC Roots`strong reachable`\n\n[](../jvm/reachable.html)\n\n<img src=\"/images/0003.png\" width=\"50\"/>\n\nJVMGC\n\n> \n> \n\nnullOOM\n\n```java\ns = null;\n```\n\nJVMGC\n\nsObjectsobjectsobjectGCssnullobject<img src=\"/images/0013.png\" width=\"50\"/>\n\n\n\n```java\nA a = new A();\nB b = new B(a);\na = null;\n```\n\nab a = null  a  A A a = null A B[](../jvm/memory-leak.html)<img src=\"/images/8111.png\" width=\"50\"/>\n\n\n\n```java\npublic static ArrayList<Object> list = new ArrayList<Object>();\npublic void stackOverflowTest(Object object){\n    list.add(object);\n    object = null;\n}\n```\n\nGC\n\nlistnullobjectlist[](../jvm/memory-leak.html) \n\n## \n\n\n\n- \n- \n- \n- \n- OOM\n\n","slug":"java/reference/strong-reference","published":1,"updated":"2019-06-04T01:29:57.414Z","_id":"cjxze3gx400640cvwg6sj2kyp","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>OOMOutOfMemoryError</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><img src=\"/images/0009.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Hello Frank!\"</span>);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><br>GC Roots<code>strong reachable</code></p>\n</blockquote>\n<p><a href=\"../jvm/reachable.html\"></a></p>\n<p><img src=\"/images/0003.png\" width=\"50\"></p>\n<p>JVMGC</p>\n<blockquote>\n<p><br></p>\n</blockquote>\n<p>nullOOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>JVMGC</p>\n<p>sObjectsobjectsobjectGCssnullobject<img src=\"/images/0013.png\" width=\"50\"></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A a = <span class=\"keyword\">new</span> A();</span><br><span class=\"line\">B b = <span class=\"keyword\">new</span> B(a);</span><br><span class=\"line\">a = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>ab a = null  a  A A a = null A B<a href=\"../jvm/memory-leak.html\"></a><img src=\"/images/8111.png\" width=\"50\"></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ArrayList&lt;Object&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;Object&gt;();</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">stackOverflowTest</span><span class=\"params\">(Object object)</span></span>&#123;</span><br><span class=\"line\">    list.add(object);</span><br><span class=\"line\">    object = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>GC</p>\n<p>listnullobjectlist<a href=\"../jvm/memory-leak.html\"></a> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>OOM</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>OOMOutOfMemoryError</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code></code><img src=\"/images/0009.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Hello Frank!\"</span>);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><br>GC Roots<code>strong reachable</code></p>\n</blockquote>\n<p><a href=\"../jvm/reachable.html\"></a></p>\n<p><img src=\"/images/0003.png\" width=\"50\"></p>\n<p>JVMGC</p>\n<blockquote>\n<p><br></p>\n</blockquote>\n<p>nullOOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>JVMGC</p>\n<p>sObjectsobjectsobjectGCssnullobject<img src=\"/images/0013.png\" width=\"50\"></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A a = <span class=\"keyword\">new</span> A();</span><br><span class=\"line\">B b = <span class=\"keyword\">new</span> B(a);</span><br><span class=\"line\">a = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>ab a = null  a  A A a = null A B<a href=\"../jvm/memory-leak.html\"></a><img src=\"/images/8111.png\" width=\"50\"></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ArrayList&lt;Object&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;Object&gt;();</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">stackOverflowTest</span><span class=\"params\">(Object object)</span></span>&#123;</span><br><span class=\"line\">    list.add(object);</span><br><span class=\"line\">    object = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>GC</p>\n<p>listnullobjectlist<a href=\"../jvm/memory-leak.html\"></a> </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li>OOM</li>\n</ul>\n"},{"title":"SoftReference","date":"2018-12-29T12:20:51.000Z","_content":"\n## \n\nSoftReferencesoftly-reachable\n\n## \n\nOOM\n\n\n\nJVMsoftly-reachablereferentreferentSoftReferencememory-sensitive cachesJVM\n\nJVMreferentreferent\n\nSoftReferencereferent\n\n```ba&#39;sh\nSoft reference objects, which are cleared at the discretion of the garbage collector in response to memory demand. \n```\n\n\n\n## SoftReference\n\n```java\npublic class SoftReference<T> extends Reference<T> {\n    /**\n     * \n     */\n    static private long clock;\n\n    /**\n     * get\n     */\n    private long timestamp;\n\n    public SoftReference(T referent) {\n        super(referent);\n        this.timestamp = clock;\n    }\n\n    public SoftReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n        this.timestamp = clock;\n    }\n\n    /**\n     * referentnull\n     */\n    public T get() {\n        T o = super.get();\n        if (o != null && this.timestamp != clock)\n            this.timestamp = clock;\n        return o;\n    }\n}\n```\n\nSoftReferenceclockJVMclockJVMGCclockclockGC\n\ntimestampclocktimestamp\n\nSoftReferencetimestampclockget super.get() nulltimestamp\n\n## \n\n\n\nHotSpotOracle\n\n```java\nThe default value is 1000 ms per megabyte, which means that a soft reference will survive (after the last strong reference to the object has been collected) for 1 second for each megabyte of free space in the heap\n```\n\n1000ms/Mb\n\n512Mb400Mbobject AAcacheobject B object ABAA\n\n{% asset_img soft-reference-3.png soft-reference-3 %}\n\nBAcacheA400s\n\n{% asset_img soft-reference-2.png soft-reference-2 %}\n\n\n\n```java\npublic class SoftRefTest {\n    public static class A{\n    }\n    public static class B{\n        private A strongRef;\n \n        public void setStrongRef(A ref) {\n            this.strongRef = ref;\n        }\n    }\n    public static SoftReference<A> cache;\n \n    public static void main(String[] args) throws InterruptedException{\n        //Acache\n        SoftRefTest.A instanceA = new SoftRefTest.A();\n        cache = new SoftReference<SoftRefTest.A>(instanceA);\n        instanceA = null;\n        // instanceA \n        Thread.sleep(10000);\n \n        ...\n        SoftRefTest.B instanceB = new SoftRefTest.B();\n        //cacheinstanceAinstanceA\n        instanceA = cache.get();\n        if (instanceA == null){\n            instanceA = new SoftRefTest.A();\n            cache = new SoftReference<SoftRefTest.A>(instanceA);\n        }\n        instanceB.setStrongRef(instanceA);\n        instanceA = null;\n        // instanceAcacheB\n \n        ...\n    }\n}\n```\n\n[](./soft-reference.md#)\n\nOOM\n\n```java\npublic class SoftReferenceTest{\n\n    public static class MyBigObject{\n        int[] data = new int[128];\n    }\n\n    public static int CACHE_INITIAL_CAPACITY = 100_000;\n    // \n    public static Set<SoftReference<MyBigObject>> cache = new HashSet<>(CACHE_INITIAL_CAPACITY);\n\n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000; i++) {\n            MyBigObject obj = new MyBigObject();\n            cache.add(new SoftReference<>(obj));\n            if (i%10_000 == 0){\n                System.out.println(\"size of cache:\" + cache.size());\n            }\n        }\n        System.out.println(\"End\");\n    }\n}\n```\n\n\n\n```java\n-Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\nsize of cache:1\nsize of cache:10001\nsize of cache:20001\nsize of cache:30001\nException in thread \"main\" java.lang.OutOfMemoryError: GC overhead limit exceeded\n```\n\nOOM`Java heap space`` GC overhead limit exceeded ` cpu98%2%\n\ncache\n\n```java\npublic class SoftReferenceTest{\n\n    public static int removedSoftRefs = 0;\n\n    public static class MyBigObject{\n        int[] data = new int[128];\n    }\n\n    public static int CACHE_INITIAL_CAPACITY = 100_000;\n    // \n    public static Set<SoftReference<MyBigObject>> cache = new HashSet<>(CACHE_INITIAL_CAPACITY);\n    public static ReferenceQueue<MyBigObject> referenceQueue = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000; i++) {\n            MyBigObject obj = new MyBigObject();\n            cache.add(new SoftReference<>(obj, referenceQueue));\n            clearUselessReferences();\n        }\n        System.out.println(\"End, removed soft references=\" + removedSoftRefs);\n    }\n\n    public static void clearUselessReferences() {\n        Reference<? extends MyBigObject> ref = referenceQueue.poll();\n        while (ref != null) {\n            if (cache.remove(ref)) {\n                removedSoftRefs++;\n            }\n            ref = referenceQueue.poll();\n        }\n    }\n}\n```\n\n\n\n```bash\nEnd, removed soft references=97319\n```\n\n## HotSpot\n\nHotSpotLRULRUCurrentHeapPolicyclocktimestamp\n\n```c++\nbool LRUCurrentHeapPolicy::should_clear_reference(oop p,\n                                                  jlong timestamp_clock) {\n  jlong interval = timestamp_clock - java_lang_ref_SoftReference::timestamp(p);\n  assert(interval >= 0, \"Sanity check\");\n\n  if(interval <= _max_interval) {\n    return false;\n  }\n\n  return true;\n}\n```\n\n `timestamp_clock` SoftReferenceclockGCjava_lang_ref_SoftReference::timestamp(p)timestamp\n\n `_max_interval`\n\n```c++\nvoid LRUCurrentHeapPolicy::setup() {\n  _max_interval = (Universe::get_heap_free_at_last_gc() / M) * SoftRefLRUPolicyMSPerMB;\n  assert(_max_interval >= 0,\"Sanity check\");\n}\n```\n\n`SoftRefLRUPolicyMSPerMB`1000GC`_max_interval`\n\nGCSoftReferenceGCSoftReference\n\nSoftReferencereferentJVMOutOfMemoryErrorFull GC \n\n## \n\n+ \n+ gettimestamp\n+ hotspotLRU\n\n","source":"_posts/java/reference/soft-reference-code-detail.md","raw":"---\ntitle: SoftReference\ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 20:20:51\n---\n\n## \n\nSoftReferencesoftly-reachable\n\n## \n\nOOM\n\n\n\nJVMsoftly-reachablereferentreferentSoftReferencememory-sensitive cachesJVM\n\nJVMreferentreferent\n\nSoftReferencereferent\n\n```ba&#39;sh\nSoft reference objects, which are cleared at the discretion of the garbage collector in response to memory demand. \n```\n\n\n\n## SoftReference\n\n```java\npublic class SoftReference<T> extends Reference<T> {\n    /**\n     * \n     */\n    static private long clock;\n\n    /**\n     * get\n     */\n    private long timestamp;\n\n    public SoftReference(T referent) {\n        super(referent);\n        this.timestamp = clock;\n    }\n\n    public SoftReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n        this.timestamp = clock;\n    }\n\n    /**\n     * referentnull\n     */\n    public T get() {\n        T o = super.get();\n        if (o != null && this.timestamp != clock)\n            this.timestamp = clock;\n        return o;\n    }\n}\n```\n\nSoftReferenceclockJVMclockJVMGCclockclockGC\n\ntimestampclocktimestamp\n\nSoftReferencetimestampclockget super.get() nulltimestamp\n\n## \n\n\n\nHotSpotOracle\n\n```java\nThe default value is 1000 ms per megabyte, which means that a soft reference will survive (after the last strong reference to the object has been collected) for 1 second for each megabyte of free space in the heap\n```\n\n1000ms/Mb\n\n512Mb400Mbobject AAcacheobject B object ABAA\n\n{% asset_img soft-reference-3.png soft-reference-3 %}\n\nBAcacheA400s\n\n{% asset_img soft-reference-2.png soft-reference-2 %}\n\n\n\n```java\npublic class SoftRefTest {\n    public static class A{\n    }\n    public static class B{\n        private A strongRef;\n \n        public void setStrongRef(A ref) {\n            this.strongRef = ref;\n        }\n    }\n    public static SoftReference<A> cache;\n \n    public static void main(String[] args) throws InterruptedException{\n        //Acache\n        SoftRefTest.A instanceA = new SoftRefTest.A();\n        cache = new SoftReference<SoftRefTest.A>(instanceA);\n        instanceA = null;\n        // instanceA \n        Thread.sleep(10000);\n \n        ...\n        SoftRefTest.B instanceB = new SoftRefTest.B();\n        //cacheinstanceAinstanceA\n        instanceA = cache.get();\n        if (instanceA == null){\n            instanceA = new SoftRefTest.A();\n            cache = new SoftReference<SoftRefTest.A>(instanceA);\n        }\n        instanceB.setStrongRef(instanceA);\n        instanceA = null;\n        // instanceAcacheB\n \n        ...\n    }\n}\n```\n\n[](./soft-reference.md#)\n\nOOM\n\n```java\npublic class SoftReferenceTest{\n\n    public static class MyBigObject{\n        int[] data = new int[128];\n    }\n\n    public static int CACHE_INITIAL_CAPACITY = 100_000;\n    // \n    public static Set<SoftReference<MyBigObject>> cache = new HashSet<>(CACHE_INITIAL_CAPACITY);\n\n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000; i++) {\n            MyBigObject obj = new MyBigObject();\n            cache.add(new SoftReference<>(obj));\n            if (i%10_000 == 0){\n                System.out.println(\"size of cache:\" + cache.size());\n            }\n        }\n        System.out.println(\"End\");\n    }\n}\n```\n\n\n\n```java\n-Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\nsize of cache:1\nsize of cache:10001\nsize of cache:20001\nsize of cache:30001\nException in thread \"main\" java.lang.OutOfMemoryError: GC overhead limit exceeded\n```\n\nOOM`Java heap space`` GC overhead limit exceeded ` cpu98%2%\n\ncache\n\n```java\npublic class SoftReferenceTest{\n\n    public static int removedSoftRefs = 0;\n\n    public static class MyBigObject{\n        int[] data = new int[128];\n    }\n\n    public static int CACHE_INITIAL_CAPACITY = 100_000;\n    // \n    public static Set<SoftReference<MyBigObject>> cache = new HashSet<>(CACHE_INITIAL_CAPACITY);\n    public static ReferenceQueue<MyBigObject> referenceQueue = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        for (int i = 0; i < 100_000; i++) {\n            MyBigObject obj = new MyBigObject();\n            cache.add(new SoftReference<>(obj, referenceQueue));\n            clearUselessReferences();\n        }\n        System.out.println(\"End, removed soft references=\" + removedSoftRefs);\n    }\n\n    public static void clearUselessReferences() {\n        Reference<? extends MyBigObject> ref = referenceQueue.poll();\n        while (ref != null) {\n            if (cache.remove(ref)) {\n                removedSoftRefs++;\n            }\n            ref = referenceQueue.poll();\n        }\n    }\n}\n```\n\n\n\n```bash\nEnd, removed soft references=97319\n```\n\n## HotSpot\n\nHotSpotLRULRUCurrentHeapPolicyclocktimestamp\n\n```c++\nbool LRUCurrentHeapPolicy::should_clear_reference(oop p,\n                                                  jlong timestamp_clock) {\n  jlong interval = timestamp_clock - java_lang_ref_SoftReference::timestamp(p);\n  assert(interval >= 0, \"Sanity check\");\n\n  if(interval <= _max_interval) {\n    return false;\n  }\n\n  return true;\n}\n```\n\n `timestamp_clock` SoftReferenceclockGCjava_lang_ref_SoftReference::timestamp(p)timestamp\n\n `_max_interval`\n\n```c++\nvoid LRUCurrentHeapPolicy::setup() {\n  _max_interval = (Universe::get_heap_free_at_last_gc() / M) * SoftRefLRUPolicyMSPerMB;\n  assert(_max_interval >= 0,\"Sanity check\");\n}\n```\n\n`SoftRefLRUPolicyMSPerMB`1000GC`_max_interval`\n\nGCSoftReferenceGCSoftReference\n\nSoftReferencereferentJVMOutOfMemoryErrorFull GC \n\n## \n\n+ \n+ gettimestamp\n+ hotspotLRU\n\n","slug":"java/reference/soft-reference-code-detail","published":1,"updated":"2019-06-04T01:29:57.411Z","_id":"cjxze3gxe00670cvwchtc3rmu","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>SoftReferencesoftly-reachable</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>OOM</p>\n<p></p>\n<p>JVMsoftly-reachablereferentreferentSoftReferencememory-sensitive cachesJVM</p>\n<p>JVMreferentreferent</p>\n<p>SoftReferencereferent</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Soft reference objects, which are cleared at the discretion of the garbage collector in response to memory demand.</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"SoftReference\"><a href=\"#SoftReference\" class=\"headerlink\" title=\"SoftReference\"></a>SoftReference</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> clock;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * get</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> timestamp;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SoftReference</span><span class=\"params\">(T referent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SoftReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * referentnull</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        T o = <span class=\"keyword\">super</span>.get();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (o != <span class=\"keyword\">null</span> &amp;&amp; <span class=\"keyword\">this</span>.timestamp != clock)</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> o;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>SoftReferenceclockJVMclockJVMGCclockclockGC</p>\n<p>timestampclocktimestamp</p>\n<p>SoftReferencetimestampclockget super.get() nulltimestamp</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>HotSpotOracle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The <span class=\"keyword\">default</span> value is <span class=\"number\">1000</span> ms per megabyte, <span class=\"function\">which means that a soft reference will <span class=\"title\">survive</span> <span class=\"params\">(after the last strong reference to the object has been collected)</span> <span class=\"keyword\">for</span> 1 second <span class=\"keyword\">for</span> each megabyte of free space in the heap</span></span><br></pre></td></tr></table></figure>\n<p>1000ms/Mb</p>\n<p>512Mb400Mbobject AAcacheobject B object ABAA</p>\n<img src=\"/programming/java/reference/soft-reference-code-detail/soft-reference-3.png\" title=\"soft-reference-3\">\n<p>BAcacheA400s</p>\n<img src=\"/programming/java/reference/soft-reference-code-detail/soft-reference-2.png\" title=\"soft-reference-2\">\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftRefTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> A strongRef;</span><br><span class=\"line\"> </span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setStrongRef</span><span class=\"params\">(A ref)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.strongRef = ref;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SoftReference&lt;A&gt; cache;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//Acache</span></span><br><span class=\"line\">        SoftRefTest.A instanceA = <span class=\"keyword\">new</span> SoftRefTest.A();</span><br><span class=\"line\">        cache = <span class=\"keyword\">new</span> SoftReference&lt;SoftRefTest.A&gt;(instanceA);</span><br><span class=\"line\">        instanceA = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"comment\">// instanceA </span></span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">10000</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">        ...</span><br><span class=\"line\">        SoftRefTest.B instanceB = <span class=\"keyword\">new</span> SoftRefTest.B();</span><br><span class=\"line\">        <span class=\"comment\">//cacheinstanceAinstanceA</span></span><br><span class=\"line\">        instanceA = cache.get();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (instanceA == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            instanceA = <span class=\"keyword\">new</span> SoftRefTest.A();</span><br><span class=\"line\">            cache = <span class=\"keyword\">new</span> SoftReference&lt;SoftRefTest.A&gt;(instanceA);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        instanceB.setStrongRef(instanceA);</span><br><span class=\"line\">        instanceA = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"comment\">// instanceAcacheB</span></span><br><span class=\"line\"> </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"./soft-reference.md#\"></a></p>\n<p>OOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReferenceTest</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBigObject</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] data = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">128</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> CACHE_INITIAL_CAPACITY = <span class=\"number\">100_000</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Set&lt;SoftReference&lt;MyBigObject&gt;&gt; cache = <span class=\"keyword\">new</span> HashSet&lt;&gt;(CACHE_INITIAL_CAPACITY);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000</span>; i++) &#123;</span><br><span class=\"line\">            MyBigObject obj = <span class=\"keyword\">new</span> MyBigObject();</span><br><span class=\"line\">            cache.add(<span class=\"keyword\">new</span> SoftReference&lt;&gt;(obj));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i%<span class=\"number\">10_000</span> == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">\"size of cache:\"</span> + cache.size());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"End\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">size of cache:1</span><br><span class=\"line\">size of cache:10001</span><br><span class=\"line\">size of cache:20001</span><br><span class=\"line\">size of cache:30001</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"main\"</span> java.lang.OutOfMemoryError: GC overhead <span class=\"built_in\">limit</span> exceeded</span><br></pre></td></tr></table></figure>\n<p>OOM<code>Java heap space</code><code>GC overhead limit exceeded</code> cpu98%2%</p>\n<p>cache</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReferenceTest</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> removedSoftRefs = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBigObject</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] data = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">128</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> CACHE_INITIAL_CAPACITY = <span class=\"number\">100_000</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Set&lt;SoftReference&lt;MyBigObject&gt;&gt; cache = <span class=\"keyword\">new</span> HashSet&lt;&gt;(CACHE_INITIAL_CAPACITY);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;MyBigObject&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000</span>; i++) &#123;</span><br><span class=\"line\">            MyBigObject obj = <span class=\"keyword\">new</span> MyBigObject();</span><br><span class=\"line\">            cache.add(<span class=\"keyword\">new</span> SoftReference&lt;&gt;(obj, referenceQueue));</span><br><span class=\"line\">            clearUselessReferences();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"End, removed soft references=\"</span> + removedSoftRefs);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">clearUselessReferences</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Reference&lt;? extends MyBigObject&gt; ref = referenceQueue.poll();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (ref != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (cache.remove(ref)) &#123;</span><br><span class=\"line\">                removedSoftRefs++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ref = referenceQueue.poll();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">End, removed soft references=97319</span><br></pre></td></tr></table></figure>\n<h2 id=\"HotSpot\"><a href=\"#HotSpot\" class=\"headerlink\" title=\"HotSpot\"></a>HotSpot</h2><p>HotSpotLRULRUCurrentHeapPolicyclocktimestamp</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">bool</span> LRUCurrentHeapPolicy::should_clear_reference(oop p,</span><br><span class=\"line\">                                                  jlong timestamp_clock) &#123;</span><br><span class=\"line\">  jlong interval = timestamp_clock - java_lang_ref_SoftReference::timestamp(p);</span><br><span class=\"line\">  assert(interval &gt;= <span class=\"number\">0</span>, <span class=\"string\">\"Sanity check\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(interval &lt;= _max_interval) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>timestamp_clock</code> SoftReferenceclockGCjava_lang_ref_SoftReference::timestamp(p)timestamp</p>\n<p> <code>_max_interval</code></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> LRUCurrentHeapPolicy::setup() &#123;</span><br><span class=\"line\">  _max_interval = (Universe::get_heap_free_at_last_gc() / M) * SoftRefLRUPolicyMSPerMB;</span><br><span class=\"line\">  assert(_max_interval &gt;= <span class=\"number\">0</span>,<span class=\"string\">\"Sanity check\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>SoftRefLRUPolicyMSPerMB</code>1000GC<code>_max_interval</code></p>\n<p>GCSoftReferenceGCSoftReference</p>\n<p>SoftReferencereferentJVMOutOfMemoryErrorFull GC </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li>gettimestamp</li>\n<li>hotspotLRU</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>SoftReferencesoftly-reachable</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>OOM</p>\n<p></p>\n<p>JVMsoftly-reachablereferentreferentSoftReferencememory-sensitive cachesJVM</p>\n<p>JVMreferentreferent</p>\n<p>SoftReferencereferent</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Soft reference objects, which are cleared at the discretion of the garbage collector in response to memory demand.</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"SoftReference\"><a href=\"#SoftReference\" class=\"headerlink\" title=\"SoftReference\"></a>SoftReference</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * </span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> clock;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * get</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> timestamp;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SoftReference</span><span class=\"params\">(T referent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SoftReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * referentnull</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        T o = <span class=\"keyword\">super</span>.get();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (o != <span class=\"keyword\">null</span> &amp;&amp; <span class=\"keyword\">this</span>.timestamp != clock)</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.timestamp = clock;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> o;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>SoftReferenceclockJVMclockJVMGCclockclockGC</p>\n<p>timestampclocktimestamp</p>\n<p>SoftReferencetimestampclockget super.get() nulltimestamp</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>HotSpotOracle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The <span class=\"keyword\">default</span> value is <span class=\"number\">1000</span> ms per megabyte, <span class=\"function\">which means that a soft reference will <span class=\"title\">survive</span> <span class=\"params\">(after the last strong reference to the object has been collected)</span> <span class=\"keyword\">for</span> 1 second <span class=\"keyword\">for</span> each megabyte of free space in the heap</span></span><br></pre></td></tr></table></figure>\n<p>1000ms/Mb</p>\n<p>512Mb400Mbobject AAcacheobject B object ABAA</p>\n<img src=\"/programming/java/reference/soft-reference-code-detail/soft-reference-3.png\" title=\"soft-reference-3\">\n<p>BAcacheA400s</p>\n<img src=\"/programming/java/reference/soft-reference-code-detail/soft-reference-2.png\" title=\"soft-reference-2\">\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftRefTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> A strongRef;</span><br><span class=\"line\"> </span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setStrongRef</span><span class=\"params\">(A ref)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.strongRef = ref;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SoftReference&lt;A&gt; cache;</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//Acache</span></span><br><span class=\"line\">        SoftRefTest.A instanceA = <span class=\"keyword\">new</span> SoftRefTest.A();</span><br><span class=\"line\">        cache = <span class=\"keyword\">new</span> SoftReference&lt;SoftRefTest.A&gt;(instanceA);</span><br><span class=\"line\">        instanceA = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"comment\">// instanceA </span></span><br><span class=\"line\">        Thread.sleep(<span class=\"number\">10000</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">        ...</span><br><span class=\"line\">        SoftRefTest.B instanceB = <span class=\"keyword\">new</span> SoftRefTest.B();</span><br><span class=\"line\">        <span class=\"comment\">//cacheinstanceAinstanceA</span></span><br><span class=\"line\">        instanceA = cache.get();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (instanceA == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            instanceA = <span class=\"keyword\">new</span> SoftRefTest.A();</span><br><span class=\"line\">            cache = <span class=\"keyword\">new</span> SoftReference&lt;SoftRefTest.A&gt;(instanceA);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        instanceB.setStrongRef(instanceA);</span><br><span class=\"line\">        instanceA = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"comment\">// instanceAcacheB</span></span><br><span class=\"line\"> </span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"./soft-reference.md#\"></a></p>\n<p>OOM</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReferenceTest</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBigObject</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] data = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">128</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> CACHE_INITIAL_CAPACITY = <span class=\"number\">100_000</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Set&lt;SoftReference&lt;MyBigObject&gt;&gt; cache = <span class=\"keyword\">new</span> HashSet&lt;&gt;(CACHE_INITIAL_CAPACITY);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000</span>; i++) &#123;</span><br><span class=\"line\">            MyBigObject obj = <span class=\"keyword\">new</span> MyBigObject();</span><br><span class=\"line\">            cache.add(<span class=\"keyword\">new</span> SoftReference&lt;&gt;(obj));</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i%<span class=\"number\">10_000</span> == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">\"size of cache:\"</span> + cache.size());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"End\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">size of cache:1</span><br><span class=\"line\">size of cache:10001</span><br><span class=\"line\">size of cache:20001</span><br><span class=\"line\">size of cache:30001</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"main\"</span> java.lang.OutOfMemoryError: GC overhead <span class=\"built_in\">limit</span> exceeded</span><br></pre></td></tr></table></figure>\n<p>OOM<code>Java heap space</code><code>GC overhead limit exceeded</code> cpu98%2%</p>\n<p>cache</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoftReferenceTest</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> removedSoftRefs = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBigObject</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span>[] data = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">128</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> CACHE_INITIAL_CAPACITY = <span class=\"number\">100_000</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Set&lt;SoftReference&lt;MyBigObject&gt;&gt; cache = <span class=\"keyword\">new</span> HashSet&lt;&gt;(CACHE_INITIAL_CAPACITY);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;MyBigObject&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100_000</span>; i++) &#123;</span><br><span class=\"line\">            MyBigObject obj = <span class=\"keyword\">new</span> MyBigObject();</span><br><span class=\"line\">            cache.add(<span class=\"keyword\">new</span> SoftReference&lt;&gt;(obj, referenceQueue));</span><br><span class=\"line\">            clearUselessReferences();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"End, removed soft references=\"</span> + removedSoftRefs);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">clearUselessReferences</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Reference&lt;? extends MyBigObject&gt; ref = referenceQueue.poll();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (ref != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (cache.remove(ref)) &#123;</span><br><span class=\"line\">                removedSoftRefs++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ref = referenceQueue.poll();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">End, removed soft references=97319</span><br></pre></td></tr></table></figure>\n<h2 id=\"HotSpot\"><a href=\"#HotSpot\" class=\"headerlink\" title=\"HotSpot\"></a>HotSpot</h2><p>HotSpotLRULRUCurrentHeapPolicyclocktimestamp</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">bool</span> LRUCurrentHeapPolicy::should_clear_reference(oop p,</span><br><span class=\"line\">                                                  jlong timestamp_clock) &#123;</span><br><span class=\"line\">  jlong interval = timestamp_clock - java_lang_ref_SoftReference::timestamp(p);</span><br><span class=\"line\">  assert(interval &gt;= <span class=\"number\">0</span>, <span class=\"string\">\"Sanity check\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(interval &lt;= _max_interval) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> <code>timestamp_clock</code> SoftReferenceclockGCjava_lang_ref_SoftReference::timestamp(p)timestamp</p>\n<p> <code>_max_interval</code></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> LRUCurrentHeapPolicy::setup() &#123;</span><br><span class=\"line\">  _max_interval = (Universe::get_heap_free_at_last_gc() / M) * SoftRefLRUPolicyMSPerMB;</span><br><span class=\"line\">  assert(_max_interval &gt;= <span class=\"number\">0</span>,<span class=\"string\">\"Sanity check\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>SoftRefLRUPolicyMSPerMB</code>1000GC<code>_max_interval</code></p>\n<p>GCSoftReferenceGCSoftReference</p>\n<p>SoftReferencereferentJVMOutOfMemoryErrorFull GC </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li>gettimestamp</li>\n<li>hotspotLRU</li>\n</ul>\n"},{"title":"WeakReference","date":"2018-12-29T12:20:51.000Z","_content":"\n## \n\nWeakReference\n\n## \n\nweakly-reachablefinalizable\n\n[](./weak-reference.html)WeakReferenceWeakReference\n\n## \n\n```java\npublic class WeakReference<T> extends Reference<T> {\n    public WeakReference(T referent) {\n        super(referent);\n    }\n    \n    public WeakReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n    \n}\n```\n\nReference\n\n## WeakHashMap\n\nWeakReferenceWeakHashMapmaphashmapkeySoftReference\n\nWeakHashMap[](../collections/weakhashmap-code-detail.html)\n\n<img src=\"/images/06.png\" width=\"40\"/> ","source":"_posts/java/reference/weak-reference-code-detail.md","raw":"---\ntitle: WeakReference\ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 20:20:51\n---\n\n## \n\nWeakReference\n\n## \n\nweakly-reachablefinalizable\n\n[](./weak-reference.html)WeakReferenceWeakReference\n\n## \n\n```java\npublic class WeakReference<T> extends Reference<T> {\n    public WeakReference(T referent) {\n        super(referent);\n    }\n    \n    public WeakReference(T referent, ReferenceQueue<? super T> q) {\n        super(referent, q);\n    }\n    \n}\n```\n\nReference\n\n## WeakHashMap\n\nWeakReferenceWeakHashMapmaphashmapkeySoftReference\n\nWeakHashMap[](../collections/weakhashmap-code-detail.html)\n\n<img src=\"/images/06.png\" width=\"40\"/> ","slug":"java/reference/weak-reference-code-detail","published":1,"updated":"2019-06-04T01:29:57.414Z","_id":"cjxze3gxe006b0cvwp2lb0o4u","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>weakly-reachablefinalizable</p>\n<p><a href=\"./weak-reference.html\"></a>WeakReferenceWeakReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakReference</span><span class=\"params\">(T referent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Reference</p>\n<h2 id=\"WeakHashMap\"><a href=\"#WeakHashMap\" class=\"headerlink\" title=\"WeakHashMap\"></a>WeakHashMap</h2><p>WeakReferenceWeakHashMapmaphashmapkeySoftReference</p>\n<p>WeakHashMap<a href=\"../collections/weakhashmap-code-detail.html\"></a></p>\n<p><img src=\"/images/06.png\" width=\"40\"> </p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>weakly-reachablefinalizable</p>\n<p><a href=\"./weak-reference.html\"></a>WeakReferenceWeakReference</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakReference</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Reference</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakReference</span><span class=\"params\">(T referent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">WeakReference</span><span class=\"params\">(T referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> T&gt; q)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Reference</p>\n<h2 id=\"WeakHashMap\"><a href=\"#WeakHashMap\" class=\"headerlink\" title=\"WeakHashMap\"></a>WeakHashMap</h2><p>WeakReferenceWeakHashMapmaphashmapkeySoftReference</p>\n<p>WeakHashMap<a href=\"../collections/weakhashmap-code-detail.html\"></a></p>\n<p><img src=\"/images/06.png\" width=\"40\"> </p>\n"},{"title":"ReferenceQueue","date":"2018-12-30T12:10:51.000Z","_content":"\n## \n\nReferenceQueue.\n\n## \n\n \n\nreferencequeuequeue\n\n## \n\n```java\npublic class ReferenceQueueTest {\n    private static ReferenceQueue<byte[]> rq = new ReferenceQueue<>();\n    private static int _1M = 1024 * 1024;\n\n    public static void main(String[] args) {\n        Object value = new Object();\n        Map<WeakReference<byte[]>, Object> map = new HashMap<>();\n        Thread thread = new Thread(ReferenceQueueTest::run);\n        thread.setDaemon(true);\n        thread.start();\n\n        for(int i = 0;i < 100;i++) {\n            byte[] bytes = new byte[_1M];\n            WeakReference<byte[]> weakReference = new WeakReference<>(bytes, rq);\n            map.put(weakReference, value);\n        }\n        System.out.println(\"map.size->\" + map.size());\n        \n        int aliveNum = 0;\n        for (Map.Entry<WeakReference<byte[]>, Object> entry : map.entrySet()){\n            if (entry != null){\n                if (entry.getKey().get() != null){\n                    aliveNum++;\n                }\n            }\n        }\n        System.out.println(\"100\" + aliveNum);\n    }\n\n    private static void run() {\n        try {\n            int n = 0;\n            WeakReference k;\n            while ((k = (WeakReference) rq.remove()) != null) {\n                System.out.println((++n) + \":\" + k);\n            }\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n```\n\nmainmap100\n\n```java\n...\n85:java.lang.ref.WeakReference@7106e68e\n86:java.lang.ref.WeakReference@1f17ae12\n87:java.lang.ref.WeakReference@c4437c4\nmap.size->100\n10012\n```\n\nReferenceQueue\n\n## \n\nReferenceQueue\n\n```java\nstatic ReferenceQueue<Object> NULL = new Null<>();\nstatic ReferenceQueue<Object> ENQUEUED = new Null<>();\n```\n\nNULLENQUEUEReferenceQueue.NULLReferenceQueue.ENQUEUED\n\nNull\n\n```java\nprivate static class Null<S> extends ReferenceQueue<S> {\n    boolean enqueue(Reference<? extends S> r) {\n        return false;\n    }\n}\n```\n\nReferenceQueueemmmnewReferenceQueueReferenceQueueNULLENQUEUEDReferenceQueueenqueuelockfalse\n\n```java\nstatic private class Lock { };\nprivate Lock lock = new Lock();\n```\n\nReferencelock\n\n```java\nprivate volatile Reference<? extends T> head = null;\n```\n\nheadReference\n\n```java\nprivate long queueLength = 0;\n```\n\nqueueLength+1-1synchronized\n\n## \n\n```java\n// Reference\nboolean enqueue(Reference<? extends T> r) { \n    synchronized (lock) {\n        // Reference\n        ReferenceQueue<?> queue = r.queue;\n        if ((queue == NULL) || (queue == ENQUEUED)) {\n            return false;\n        }\n        assert queue == this;\n        // referencequeueENQUEUED\n        r.queue = ENQUEUED;\n        // r\n        r.next = (head == null) ? r : head;\n        head = r;\n        queueLength++;\n        // rFinalReferenceFinalRef+1\n        if (r instanceof FinalReference) {\n            sun.misc.VM.addFinalRefCount(1);\n        }\n        lock.notifyAll();\n        return true;\n    }\n}\n```\n\nlockr\n\n```java\npublic Reference<? extends T> poll() {\n    if (head == null)\n        return null;\n    synchronized (lock) {\n        return reallyPoll();\n    }\n}\n\nprivate Reference<? extends T> reallyPoll() {     \n    Reference<? extends T> r = head;\n    if (r != null) {\n        head = (r.next == r) ?\n            null : r.next;\n        r.queue = NULL;\n        r.next = r;\n        queueLength--;\n        if (r instanceof FinalReference) {\n            sun.misc.VM.addFinalRefCount(-1);\n        }\n        return r;\n    }\n    return null;\n}\n```\n\npollReferenceQueueReferenceStack<img src=\"/images/0001.png\" width=\"50\"/>\n\n```java\n/**\n  * Reference\n  * timeout\n  */\npublic Reference<? extends T> remove(long timeout)\n    throws IllegalArgumentException, InterruptedException{\n    if (timeout < 0) {\n        throw new IllegalArgumentException(\"Negative timeout value\");\n    }\n    synchronized (lock) {\n        Reference<? extends T> r = reallyPoll();\n        if (r != null) return r;\n        long start = (timeout == 0) ? 0 : System.nanoTime();\n        // \n        for (;;) {\n            lock.wait(timeout);\n            r = reallyPoll();\n            if (r != null) return r;\n            if (timeout != 0) {\n                // System.nanoTime1=1*1000*1000\n                long end = System.nanoTime();\n                timeout -= (end - start) / 1000_000;\n                if (timeout <= 0) return null;\n                start = end;\n            }\n        }\n    }\n}\n\n/**\n * Reference\n */\npublic Reference<? extends T> remove() throws InterruptedException {\n\treturn remove(0);\n}\n```\n\npollReference\n\nremovelock\n\nenqueueReferenceReferencepublicenqueueReferenceremove\n\n## \n\nReferenceQueueSoftReferenceWeakReferencePhantomReference\n\n\n\n1\n\n2\n\nReference\n\n```java\npublic class TestB {\n\n    private static ReferenceQueue<byte[]> referenceQueue = new ReferenceQueue<>();\n    private static int _1M = 1024 * 1024;\n\n    public static void main(String[] args) throws InterruptedException {\n        final Map<Object, MyWeakReference> hashMap = new HashMap<>();\n        Thread thread = new Thread(() -> {\n            try {\n                int n = 0;\n                MyWeakReference k;\n                while(null != (k = (MyWeakReference) referenceQueue.remove())) {\n                    System.out.println((++n) + \":\" + k);\n                    //entry\n                    hashMap.remove(k.key);\n                    //key\n                }\n            } catch(InterruptedException e) {\n                e.printStackTrace();\n            }\n        });\n        thread.setDaemon(true);\n        thread.start();\n\n        for(int i = 0;i < 10000;i++) {\n            byte[] bytesKey = new byte[_1M];\n            byte[] bytesValue = new byte[_1M];\n            hashMap.put(bytesKey, new MyWeakReference(bytesKey, bytesValue, referenceQueue));\n        }\n    }\n\n    static class MyWeakReference extends WeakReference<byte[]> {\n        private Object key;\n        MyWeakReference(Object key, byte[] referent, ReferenceQueue<? super byte[]> q) {\n            super(referent, q);\n            this.key = key;\n        }\n    }\n}\n```\n\nreferenceQueuemapvalue\n\n## \n\n+ ReferenceQueueReference\n+ ReferenceQueue\n+ ReferenceQueue\n","source":"_posts/java/reference/reference-queue-code-detail.md","raw":"---\ntitle: ReferenceQueue\ntags: \n - Java\n - \ncategories: \ndate: 2018-12-30 20:10:51\n---\n\n## \n\nReferenceQueue.\n\n## \n\n \n\nreferencequeuequeue\n\n## \n\n```java\npublic class ReferenceQueueTest {\n    private static ReferenceQueue<byte[]> rq = new ReferenceQueue<>();\n    private static int _1M = 1024 * 1024;\n\n    public static void main(String[] args) {\n        Object value = new Object();\n        Map<WeakReference<byte[]>, Object> map = new HashMap<>();\n        Thread thread = new Thread(ReferenceQueueTest::run);\n        thread.setDaemon(true);\n        thread.start();\n\n        for(int i = 0;i < 100;i++) {\n            byte[] bytes = new byte[_1M];\n            WeakReference<byte[]> weakReference = new WeakReference<>(bytes, rq);\n            map.put(weakReference, value);\n        }\n        System.out.println(\"map.size->\" + map.size());\n        \n        int aliveNum = 0;\n        for (Map.Entry<WeakReference<byte[]>, Object> entry : map.entrySet()){\n            if (entry != null){\n                if (entry.getKey().get() != null){\n                    aliveNum++;\n                }\n            }\n        }\n        System.out.println(\"100\" + aliveNum);\n    }\n\n    private static void run() {\n        try {\n            int n = 0;\n            WeakReference k;\n            while ((k = (WeakReference) rq.remove()) != null) {\n                System.out.println((++n) + \":\" + k);\n            }\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n```\n\nmainmap100\n\n```java\n...\n85:java.lang.ref.WeakReference@7106e68e\n86:java.lang.ref.WeakReference@1f17ae12\n87:java.lang.ref.WeakReference@c4437c4\nmap.size->100\n10012\n```\n\nReferenceQueue\n\n## \n\nReferenceQueue\n\n```java\nstatic ReferenceQueue<Object> NULL = new Null<>();\nstatic ReferenceQueue<Object> ENQUEUED = new Null<>();\n```\n\nNULLENQUEUEReferenceQueue.NULLReferenceQueue.ENQUEUED\n\nNull\n\n```java\nprivate static class Null<S> extends ReferenceQueue<S> {\n    boolean enqueue(Reference<? extends S> r) {\n        return false;\n    }\n}\n```\n\nReferenceQueueemmmnewReferenceQueueReferenceQueueNULLENQUEUEDReferenceQueueenqueuelockfalse\n\n```java\nstatic private class Lock { };\nprivate Lock lock = new Lock();\n```\n\nReferencelock\n\n```java\nprivate volatile Reference<? extends T> head = null;\n```\n\nheadReference\n\n```java\nprivate long queueLength = 0;\n```\n\nqueueLength+1-1synchronized\n\n## \n\n```java\n// Reference\nboolean enqueue(Reference<? extends T> r) { \n    synchronized (lock) {\n        // Reference\n        ReferenceQueue<?> queue = r.queue;\n        if ((queue == NULL) || (queue == ENQUEUED)) {\n            return false;\n        }\n        assert queue == this;\n        // referencequeueENQUEUED\n        r.queue = ENQUEUED;\n        // r\n        r.next = (head == null) ? r : head;\n        head = r;\n        queueLength++;\n        // rFinalReferenceFinalRef+1\n        if (r instanceof FinalReference) {\n            sun.misc.VM.addFinalRefCount(1);\n        }\n        lock.notifyAll();\n        return true;\n    }\n}\n```\n\nlockr\n\n```java\npublic Reference<? extends T> poll() {\n    if (head == null)\n        return null;\n    synchronized (lock) {\n        return reallyPoll();\n    }\n}\n\nprivate Reference<? extends T> reallyPoll() {     \n    Reference<? extends T> r = head;\n    if (r != null) {\n        head = (r.next == r) ?\n            null : r.next;\n        r.queue = NULL;\n        r.next = r;\n        queueLength--;\n        if (r instanceof FinalReference) {\n            sun.misc.VM.addFinalRefCount(-1);\n        }\n        return r;\n    }\n    return null;\n}\n```\n\npollReferenceQueueReferenceStack<img src=\"/images/0001.png\" width=\"50\"/>\n\n```java\n/**\n  * Reference\n  * timeout\n  */\npublic Reference<? extends T> remove(long timeout)\n    throws IllegalArgumentException, InterruptedException{\n    if (timeout < 0) {\n        throw new IllegalArgumentException(\"Negative timeout value\");\n    }\n    synchronized (lock) {\n        Reference<? extends T> r = reallyPoll();\n        if (r != null) return r;\n        long start = (timeout == 0) ? 0 : System.nanoTime();\n        // \n        for (;;) {\n            lock.wait(timeout);\n            r = reallyPoll();\n            if (r != null) return r;\n            if (timeout != 0) {\n                // System.nanoTime1=1*1000*1000\n                long end = System.nanoTime();\n                timeout -= (end - start) / 1000_000;\n                if (timeout <= 0) return null;\n                start = end;\n            }\n        }\n    }\n}\n\n/**\n * Reference\n */\npublic Reference<? extends T> remove() throws InterruptedException {\n\treturn remove(0);\n}\n```\n\npollReference\n\nremovelock\n\nenqueueReferenceReferencepublicenqueueReferenceremove\n\n## \n\nReferenceQueueSoftReferenceWeakReferencePhantomReference\n\n\n\n1\n\n2\n\nReference\n\n```java\npublic class TestB {\n\n    private static ReferenceQueue<byte[]> referenceQueue = new ReferenceQueue<>();\n    private static int _1M = 1024 * 1024;\n\n    public static void main(String[] args) throws InterruptedException {\n        final Map<Object, MyWeakReference> hashMap = new HashMap<>();\n        Thread thread = new Thread(() -> {\n            try {\n                int n = 0;\n                MyWeakReference k;\n                while(null != (k = (MyWeakReference) referenceQueue.remove())) {\n                    System.out.println((++n) + \":\" + k);\n                    //entry\n                    hashMap.remove(k.key);\n                    //key\n                }\n            } catch(InterruptedException e) {\n                e.printStackTrace();\n            }\n        });\n        thread.setDaemon(true);\n        thread.start();\n\n        for(int i = 0;i < 10000;i++) {\n            byte[] bytesKey = new byte[_1M];\n            byte[] bytesValue = new byte[_1M];\n            hashMap.put(bytesKey, new MyWeakReference(bytesKey, bytesValue, referenceQueue));\n        }\n    }\n\n    static class MyWeakReference extends WeakReference<byte[]> {\n        private Object key;\n        MyWeakReference(Object key, byte[] referent, ReferenceQueue<? super byte[]> q) {\n            super(referent, q);\n            this.key = key;\n        }\n    }\n}\n```\n\nreferenceQueuemapvalue\n\n## \n\n+ ReferenceQueueReference\n+ ReferenceQueue\n+ ReferenceQueue\n","slug":"java/reference/reference-queue-code-detail","published":1,"updated":"2019-06-04T01:29:57.403Z","_id":"cjxze3gxe006e0cvwctmnxum0","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceQueue.</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n<p>referencequeuequeue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReferenceQueueTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;<span class=\"keyword\">byte</span>[]&gt; rq = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> _1M = <span class=\"number\">1024</span> * <span class=\"number\">1024</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Object value = <span class=\"keyword\">new</span> Object();</span><br><span class=\"line\">        Map&lt;WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt;, Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        Thread thread = <span class=\"keyword\">new</span> Thread(ReferenceQueueTest::run);</span><br><span class=\"line\">        thread.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        thread.start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"number\">100</span>;i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytes = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt; weakReference = <span class=\"keyword\">new</span> WeakReference&lt;&gt;(bytes, rq);</span><br><span class=\"line\">            map.put(weakReference, value);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"map.size-&gt;\"</span> + map.size());</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">int</span> aliveNum = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Map.Entry&lt;WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt;, Object&gt; entry : map.entrySet())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (entry != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (entry.getKey().get() != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                    aliveNum++;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"100\"</span> + aliveNum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> n = <span class=\"number\">0</span>;</span><br><span class=\"line\">            WeakReference k;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> ((k = (WeakReference) rq.remove()) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                System.out.println((++n) + <span class=\"string\">\":\"</span> + k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>mainmap100</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"number\">85</span>:java.lang.ref.WeakReference@<span class=\"number\">7106e68</span>e</span><br><span class=\"line\"><span class=\"number\">86</span>:java.lang.ref.WeakReference@<span class=\"number\">1f</span>17ae12</span><br><span class=\"line\"><span class=\"number\">87</span>:java.lang.ref.WeakReference<span class=\"meta\">@c</span>4437c4</span><br><span class=\"line\">map.size-&gt;<span class=\"number\">100</span></span><br><span class=\"line\"><span class=\"number\">100</span><span class=\"number\">12</span></span><br></pre></td></tr></table></figure>\n<p>ReferenceQueue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceQueue</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; NULL = <span class=\"keyword\">new</span> Null&lt;&gt;();</span><br><span class=\"line\"><span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; ENQUEUED = <span class=\"keyword\">new</span> Null&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>NULLENQUEUEReferenceQueue.NULLReferenceQueue.ENQUEUED</p>\n<p>Null</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Null</span>&lt;<span class=\"title\">S</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">ReferenceQueue</span>&lt;<span class=\"title\">S</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">(Reference&lt;? extends S&gt; r)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceQueueemmmnewReferenceQueueReferenceQueueNULLENQUEUEDReferenceQueueenqueuelockfalse</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Lock</span> </span>&#123; &#125;;</span><br><span class=\"line\"><span class=\"keyword\">private</span> Lock lock = <span class=\"keyword\">new</span> Lock();</span><br></pre></td></tr></table></figure>\n<p>Referencelock</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> Reference&lt;? extends T&gt; head = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>headReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">long</span> queueLength = <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n<p>queueLength+1-1synchronized</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Reference</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">(Reference&lt;? extends T&gt; r)</span> </span>&#123; </span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Reference</span></span><br><span class=\"line\">        ReferenceQueue&lt;?&gt; queue = r.queue;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((queue == NULL) || (queue == ENQUEUED)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> queue == <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        <span class=\"comment\">// referencequeueENQUEUED</span></span><br><span class=\"line\">        r.queue = ENQUEUED;</span><br><span class=\"line\">        <span class=\"comment\">// r</span></span><br><span class=\"line\">        r.next = (head == <span class=\"keyword\">null</span>) ? r : head;</span><br><span class=\"line\">        head = r;</span><br><span class=\"line\">        queueLength++;</span><br><span class=\"line\">        <span class=\"comment\">// rFinalReferenceFinalRef+1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r <span class=\"keyword\">instanceof</span> FinalReference) &#123;</span><br><span class=\"line\">            sun.misc.VM.addFinalRefCount(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        lock.notifyAll();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>lockr</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; poll() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> reallyPoll();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> Reference&lt;? extends T&gt; reallyPoll() &#123;     </span><br><span class=\"line\">    Reference&lt;? extends T&gt; r = head;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        head = (r.next == r) ?</span><br><span class=\"line\">            <span class=\"keyword\">null</span> : r.next;</span><br><span class=\"line\">        r.queue = NULL;</span><br><span class=\"line\">        r.next = r;</span><br><span class=\"line\">        queueLength--;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r <span class=\"keyword\">instanceof</span> FinalReference) &#123;</span><br><span class=\"line\">            sun.misc.VM.addFinalRefCount(-<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pollReferenceQueueReferenceStack<img src=\"/images/0001.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * Reference</span></span><br><span class=\"line\"><span class=\"comment\">  * timeout</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; remove(<span class=\"keyword\">long</span> timeout)</span><br><span class=\"line\">    <span class=\"keyword\">throws</span> IllegalArgumentException, InterruptedException&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timeout &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Negative timeout value\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        Reference&lt;? extends T&gt; r = reallyPoll();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> start = (timeout == <span class=\"number\">0</span>) ? <span class=\"number\">0</span> : System.nanoTime();</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">            lock.wait(timeout);</span><br><span class=\"line\">            r = reallyPoll();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (timeout != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// System.nanoTime1=1*1000*1000</span></span><br><span class=\"line\">                <span class=\"keyword\">long</span> end = System.nanoTime();</span><br><span class=\"line\">                timeout -= (end - start) / <span class=\"number\">1000_000</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (timeout &lt;= <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                start = end;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Reference</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; remove() <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> remove(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pollReference</p>\n<p>removelock</p>\n<p>enqueueReferenceReferencepublicenqueueReferenceremove</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceQueueSoftReferenceWeakReferencePhantomReference</p>\n<p></p>\n<p>1</p>\n<p>2</p>\n<p>Reference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestB</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;<span class=\"keyword\">byte</span>[]&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> _1M = <span class=\"number\">1024</span> * <span class=\"number\">1024</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Map&lt;Object, MyWeakReference&gt; hashMap = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        Thread thread = <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> n = <span class=\"number\">0</span>;</span><br><span class=\"line\">                MyWeakReference k;</span><br><span class=\"line\">                <span class=\"keyword\">while</span>(<span class=\"keyword\">null</span> != (k = (MyWeakReference) referenceQueue.remove())) &#123;</span><br><span class=\"line\">                    System.out.println((++n) + <span class=\"string\">\":\"</span> + k);</span><br><span class=\"line\">                    <span class=\"comment\">//entry</span></span><br><span class=\"line\">                    hashMap.remove(k.key);</span><br><span class=\"line\">                    <span class=\"comment\">//key</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span>(InterruptedException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        thread.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        thread.start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"number\">10000</span>;i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytesKey = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytesValue = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            hashMap.put(bytesKey, <span class=\"keyword\">new</span> MyWeakReference(bytesKey, bytesValue, referenceQueue));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    static class MyWeakReference extends WeakReference&lt;byte[]&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> Object key;</span><br><span class=\"line\">        MyWeakReference(Object key, <span class=\"keyword\">byte</span>[] referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> <span class=\"keyword\">byte</span>[]&gt; q) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.key = key;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>referenceQueuemapvalue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>ReferenceQueueReference</li>\n<li>ReferenceQueue</li>\n<li>ReferenceQueue</li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceQueue.</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> </p>\n<p>referencequeuequeue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReferenceQueueTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;<span class=\"keyword\">byte</span>[]&gt; rq = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> _1M = <span class=\"number\">1024</span> * <span class=\"number\">1024</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Object value = <span class=\"keyword\">new</span> Object();</span><br><span class=\"line\">        Map&lt;WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt;, Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        Thread thread = <span class=\"keyword\">new</span> Thread(ReferenceQueueTest::run);</span><br><span class=\"line\">        thread.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        thread.start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"number\">100</span>;i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytes = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt; weakReference = <span class=\"keyword\">new</span> WeakReference&lt;&gt;(bytes, rq);</span><br><span class=\"line\">            map.put(weakReference, value);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"map.size-&gt;\"</span> + map.size());</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">int</span> aliveNum = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Map.Entry&lt;WeakReference&lt;<span class=\"keyword\">byte</span>[]&gt;, Object&gt; entry : map.entrySet())&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (entry != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (entry.getKey().get() != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                    aliveNum++;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"100\"</span> + aliveNum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span> n = <span class=\"number\">0</span>;</span><br><span class=\"line\">            WeakReference k;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> ((k = (WeakReference) rq.remove()) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                System.out.println((++n) + <span class=\"string\">\":\"</span> + k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>mainmap100</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"number\">85</span>:java.lang.ref.WeakReference@<span class=\"number\">7106e68</span>e</span><br><span class=\"line\"><span class=\"number\">86</span>:java.lang.ref.WeakReference@<span class=\"number\">1f</span>17ae12</span><br><span class=\"line\"><span class=\"number\">87</span>:java.lang.ref.WeakReference<span class=\"meta\">@c</span>4437c4</span><br><span class=\"line\">map.size-&gt;<span class=\"number\">100</span></span><br><span class=\"line\"><span class=\"number\">100</span><span class=\"number\">12</span></span><br></pre></td></tr></table></figure>\n<p>ReferenceQueue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceQueue</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; NULL = <span class=\"keyword\">new</span> Null&lt;&gt;();</span><br><span class=\"line\"><span class=\"keyword\">static</span> ReferenceQueue&lt;Object&gt; ENQUEUED = <span class=\"keyword\">new</span> Null&lt;&gt;();</span><br></pre></td></tr></table></figure>\n<p>NULLENQUEUEReferenceQueue.NULLReferenceQueue.ENQUEUED</p>\n<p>Null</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Null</span>&lt;<span class=\"title\">S</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">ReferenceQueue</span>&lt;<span class=\"title\">S</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">(Reference&lt;? extends S&gt; r)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ReferenceQueueemmmnewReferenceQueueReferenceQueueNULLENQUEUEDReferenceQueueenqueuelockfalse</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Lock</span> </span>&#123; &#125;;</span><br><span class=\"line\"><span class=\"keyword\">private</span> Lock lock = <span class=\"keyword\">new</span> Lock();</span><br></pre></td></tr></table></figure>\n<p>Referencelock</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">volatile</span> Reference&lt;? extends T&gt; head = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>headReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">long</span> queueLength = <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n<p>queueLength+1-1synchronized</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Reference</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">boolean</span> <span class=\"title\">enqueue</span><span class=\"params\">(Reference&lt;? extends T&gt; r)</span> </span>&#123; </span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Reference</span></span><br><span class=\"line\">        ReferenceQueue&lt;?&gt; queue = r.queue;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((queue == NULL) || (queue == ENQUEUED)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">assert</span> queue == <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        <span class=\"comment\">// referencequeueENQUEUED</span></span><br><span class=\"line\">        r.queue = ENQUEUED;</span><br><span class=\"line\">        <span class=\"comment\">// r</span></span><br><span class=\"line\">        r.next = (head == <span class=\"keyword\">null</span>) ? r : head;</span><br><span class=\"line\">        head = r;</span><br><span class=\"line\">        queueLength++;</span><br><span class=\"line\">        <span class=\"comment\">// rFinalReferenceFinalRef+1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r <span class=\"keyword\">instanceof</span> FinalReference) &#123;</span><br><span class=\"line\">            sun.misc.VM.addFinalRefCount(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        lock.notifyAll();</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>lockr</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; poll() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (head == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> reallyPoll();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> Reference&lt;? extends T&gt; reallyPoll() &#123;     </span><br><span class=\"line\">    Reference&lt;? extends T&gt; r = head;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        head = (r.next == r) ?</span><br><span class=\"line\">            <span class=\"keyword\">null</span> : r.next;</span><br><span class=\"line\">        r.queue = NULL;</span><br><span class=\"line\">        r.next = r;</span><br><span class=\"line\">        queueLength--;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r <span class=\"keyword\">instanceof</span> FinalReference) &#123;</span><br><span class=\"line\">            sun.misc.VM.addFinalRefCount(-<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pollReferenceQueueReferenceStack<img src=\"/images/0001.png\" width=\"50\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * Reference</span></span><br><span class=\"line\"><span class=\"comment\">  * timeout</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; remove(<span class=\"keyword\">long</span> timeout)</span><br><span class=\"line\">    <span class=\"keyword\">throws</span> IllegalArgumentException, InterruptedException&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timeout &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Negative timeout value\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (lock) &#123;</span><br><span class=\"line\">        Reference&lt;? extends T&gt; r = reallyPoll();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> start = (timeout == <span class=\"number\">0</span>) ? <span class=\"number\">0</span> : System.nanoTime();</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">            lock.wait(timeout);</span><br><span class=\"line\">            r = reallyPoll();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span> r;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (timeout != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// System.nanoTime1=1*1000*1000</span></span><br><span class=\"line\">                <span class=\"keyword\">long</span> end = System.nanoTime();</span><br><span class=\"line\">                timeout -= (end - start) / <span class=\"number\">1000_000</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (timeout &lt;= <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                start = end;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Reference</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Reference&lt;? extends T&gt; remove() <span class=\"keyword\">throws</span> InterruptedException &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> remove(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>pollReference</p>\n<p>removelock</p>\n<p>enqueueReferenceReferencepublicenqueueReferenceremove</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ReferenceQueueSoftReferenceWeakReferencePhantomReference</p>\n<p></p>\n<p>1</p>\n<p>2</p>\n<p>Reference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestB</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> ReferenceQueue&lt;<span class=\"keyword\">byte</span>[]&gt; referenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> _1M = <span class=\"number\">1024</span> * <span class=\"number\">1024</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> InterruptedException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Map&lt;Object, MyWeakReference&gt; hashMap = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        Thread thread = <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">int</span> n = <span class=\"number\">0</span>;</span><br><span class=\"line\">                MyWeakReference k;</span><br><span class=\"line\">                <span class=\"keyword\">while</span>(<span class=\"keyword\">null</span> != (k = (MyWeakReference) referenceQueue.remove())) &#123;</span><br><span class=\"line\">                    System.out.println((++n) + <span class=\"string\">\":\"</span> + k);</span><br><span class=\"line\">                    <span class=\"comment\">//entry</span></span><br><span class=\"line\">                    hashMap.remove(k.key);</span><br><span class=\"line\">                    <span class=\"comment\">//key</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span>(InterruptedException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        thread.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        thread.start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"number\">10000</span>;i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytesKey = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            <span class=\"keyword\">byte</span>[] bytesValue = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[_1M];</span><br><span class=\"line\">            hashMap.put(bytesKey, <span class=\"keyword\">new</span> MyWeakReference(bytesKey, bytesValue, referenceQueue));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    static class MyWeakReference extends WeakReference&lt;byte[]&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> Object key;</span><br><span class=\"line\">        MyWeakReference(Object key, <span class=\"keyword\">byte</span>[] referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> <span class=\"keyword\">byte</span>[]&gt; q) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.key = key;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>referenceQueuemapvalue</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>ReferenceQueueReference</li>\n<li>ReferenceQueue</li>\n<li>ReferenceQueue</li>\n</ul>\n"},{"title":"","date":"2018-12-29T12:20:51.000Z","_content":"\n## \n\n >  >  > \n\n## \n\nGC\n\nJVMGC\n\nJVM\n\nGC\n\nJVM\n\n## \n\n|  |                         |                                        |  |                        |\n| :------- | ----------------------------------------------- | ------------------------------------------ | ------------------ | ------------------------------ |\n|    |                                         |                  |                |                            |\n|    | GCJVM |          |                | SoftReference                  |\n|    |             |    |                | WeakReference<br />WeakHashMap |\n|    |                                   | GC |              | PhantomReference               |\n\n## \n\nemmmm.StrongReference \n\nStrongReferenceguavaLocalCache[StrongValueReference](https://github.com/google/guava/blob/1670960e088fe9c1e78b5d7dd7c0505741bf2988/guava/src/com/google/common/cache/LocalCache.java#L1676)\n\n<img src=\"/images/0003.png\" width=\"50\"/>\n\n\n\n<img src=\"/images/94.png\" width=\"50\"/>\n\nB","source":"_posts/java/reference/reference-summary.md","raw":"---\ntitle: \ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 20:20:51\n---\n\n## \n\n >  >  > \n\n## \n\nGC\n\nJVMGC\n\nJVM\n\nGC\n\nJVM\n\n## \n\n|  |                         |                                        |  |                        |\n| :------- | ----------------------------------------------- | ------------------------------------------ | ------------------ | ------------------------------ |\n|    |                                         |                  |                |                            |\n|    | GCJVM |          |                | SoftReference                  |\n|    |             |    |                | WeakReference<br />WeakHashMap |\n|    |                                   | GC |              | PhantomReference               |\n\n## \n\nemmmm.StrongReference \n\nStrongReferenceguavaLocalCache[StrongValueReference](https://github.com/google/guava/blob/1670960e088fe9c1e78b5d7dd7c0505741bf2988/guava/src/com/google/common/cache/LocalCache.java#L1676)\n\n<img src=\"/images/0003.png\" width=\"50\"/>\n\n\n\n<img src=\"/images/94.png\" width=\"50\"/>\n\nB","slug":"java/reference/reference-summary","published":1,"updated":"2019-06-04T01:29:57.410Z","_id":"cjxze3gxe006h0cvwsozru4mv","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> &gt;  &gt;  &gt; </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC</p>\n<p>JVMGC</p>\n<p>JVM</p>\n<p>GC</p>\n<p>JVM</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td>GCJVM</td>\n<td></td>\n<td></td>\n<td>SoftReference</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td></td>\n<td></td>\n<td>WeakReference<br>WeakHashMap</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td>GC</td>\n<td></td>\n<td>PhantomReference</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>emmmm.StrongReference </p>\n<p>StrongReferenceguavaLocalCache<a href=\"https://github.com/google/guava/blob/1670960e088fe9c1e78b5d7dd7c0505741bf2988/guava/src/com/google/common/cache/LocalCache.java#L1676\" target=\"_blank\" rel=\"noopener\">StrongValueReference</a></p>\n<p><img src=\"/images/0003.png\" width=\"50\"></p>\n<p></p>\n<p><img src=\"/images/94.png\" width=\"50\"></p>\n<p>B</p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> &gt;  &gt;  &gt; </p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC</p>\n<p>JVMGC</p>\n<p>JVM</p>\n<p>GC</p>\n<p>JVM</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td>GCJVM</td>\n<td></td>\n<td></td>\n<td>SoftReference</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td></td>\n<td></td>\n<td>WeakReference<br>WeakHashMap</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"></td>\n<td></td>\n<td>GC</td>\n<td></td>\n<td>PhantomReference</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>emmmm.StrongReference </p>\n<p>StrongReferenceguavaLocalCache<a href=\"https://github.com/google/guava/blob/1670960e088fe9c1e78b5d7dd7c0505741bf2988/guava/src/com/google/common/cache/LocalCache.java#L1676\" target=\"_blank\" rel=\"noopener\">StrongValueReference</a></p>\n<p><img src=\"/images/0003.png\" width=\"50\"></p>\n<p></p>\n<p><img src=\"/images/94.png\" width=\"50\"></p>\n<p>B</p>\n"},{"title":"","date":"2018-12-29T11:57:51.000Z","_content":"\n## \n\nWeakReferenceGC\n\n## \n\nGC<img src=\"/images/0040.png\" width=\"50\"/>\n\nFull GC\n\nWeakReference\n\n```java\nString s = new String(\"Frank\");    \nWeakReference<String> weakRef = new WeakReference<String>(s);\ns = null;\n```\n\nsnull\n\n> \n> GC Roots`(weakly reachable)`\n\n> warning \n> WeakReferencegetgetnullnullNullPointerException<img src=\"/images/0019.png\" width=\"50\"/>\n\ns\n\n```java\ns = weakRef.get();\n```\n\nweakRef\n\nWeakReference\n\n```java\npublic class WeakReferenceTest {\n    private static final List<Object> TEST_DATA = new LinkedList<>();\n    private static final ReferenceQueue<TestClass> QUEUE = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        TestClass obj = new TestClass(\"Test\");\n        WeakReference<TestClass> weakRef = new WeakReference<>(obj, QUEUE);\n        //OOMClass\n        //oomObj = weakRef.get();\n\n        // GC\n        new Thread(() -> {\n            while (true) {\n                TEST_DATA.add(new byte[1024 * 100]);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                    Thread.currentThread().interrupt();\n                }\n                System.out.println(weakRef.get());\n            }\n        }).start();\n\n        // \n        new Thread(() -> {\n            while (true) {\n                Reference<? extends TestClass> poll = QUEUE.poll();\n                if (poll != null) {\n                    System.out.println(\"--- jvm ---- \" + poll);\n                    System.out.println(\"---  ---- \" + poll.get());\n                }\n            }\n        }).start();\n\n        // TestClass\n        obj = null;\n\n        try {\n            Thread.currentThread().join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n            System.exit(1);\n        }\n    }\n\n    static class TestClass {\n        private String name;\n\n        public TestClass(String name) {\n            this.name = name;\n        }\n\n        @Override\n        public String toString() {\n            return \"TestClass - \" + name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1017K->464K(3584K), 0.0014345 secs]\n[GC (Allocation Failure)  1483K->536K(3584K), 0.0017221 secs]\n[GC (Allocation Failure)  1560K->648K(3584K), 0.0036572 secs]\nTestClass - Test\nTestClass - Test\nTestClass - Test\n[GC (Allocation Failure)  1621K->984K(3584K), 0.0011455 secs]\n--- jvm ---- java.lang.ref.WeakReference@51a947fe\n---  ---- null\nnull\n...nnullGC\n[Full GC (Ergonomics)  2964K->2964K(3584K), 0.0025450 secs]\n[Full GC (Allocation Failure)  2964K->2964K(3584K), 0.0021907 secs]\njava.lang.OutOfMemoryError: Java heap space\nDumping heap to java_pid6860.hprof ...\nHeap dump file created [3912229 bytes in 0.011 secs]\nException in thread \"Thread-0\" java.lang.OutOfMemoryError: Java heap space\n\tat weakhashmap.WeakReferenceTest.lambda$main$0(WeakReferenceTest.java:22)\n\tat weakhashmap.WeakReferenceTest$$Lambda$1/764977973.run(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\nGC\n\n## \n\n WeakReference  \n\nReferenceQueueJava\n\nWeakReferenceWeakHashMapWeakHashMapWeakReference\n\nTomcatWeakHashMap\n\n```java\npublic final class ConcurrentCache<K,V> {\n    private final int size;\n    private final Map<K,V> eden;\n    private final Map<K,V> longterm;\n\n    public ConcurrentCache(int size) {\n        this.size = size;\n        this.eden = new ConcurrentHashMap<>(size);\n        this.longterm = new WeakHashMap<>(size);\n    }\n\n    public V get(K k) {\n        // eden\n        V v = this.eden.get(k);\n        if (v == null) {\n            // longterm\n            synchronized (longterm) {\n                v = this.longterm.get(k);\n            }\n            // eden\n            if (v != null) {\n                this.eden.put(k, v);\n            }\n        }\n        return v;\n    }\n\n    public void put(K k, V v) {\n        if (this.eden.size() >= size) {\n            // edenlongterm\n            synchronized (longterm) {\n                this.longterm.putAll(this.eden);\n            }\n            this.eden.clear();\n        }\n        this.eden.put(k, v);\n    }\n}\n```\n\nedenlongtermmapjvmtomcatConcurrentHashMapWeakHashMap\n\nputedenedenlongtermedenlongtermeden\n\ngetedenkeylongtermeden \n\nedenlongtermlongtermkeygcheap\n\n## \n\n\n\n1. \n2. \n3. GCGC\n\n\n\nSoftReferenceWeakReference\n\nSoftReference\n\nWeakReference\n\nWeakHashMap<img src=\"./195.png\" width=\"50\"/>\n\n## \n\n+  \n+ \n+ \n+ ","source":"_posts/java/reference/weak-reference.md","raw":"---\ntitle: \ntags: \n - Java\n - \ncategories: \ndate: 2018-12-29 19:57:51\n---\n\n## \n\nWeakReferenceGC\n\n## \n\nGC<img src=\"/images/0040.png\" width=\"50\"/>\n\nFull GC\n\nWeakReference\n\n```java\nString s = new String(\"Frank\");    \nWeakReference<String> weakRef = new WeakReference<String>(s);\ns = null;\n```\n\nsnull\n\n> \n> GC Roots`(weakly reachable)`\n\n> warning \n> WeakReferencegetgetnullnullNullPointerException<img src=\"/images/0019.png\" width=\"50\"/>\n\ns\n\n```java\ns = weakRef.get();\n```\n\nweakRef\n\nWeakReference\n\n```java\npublic class WeakReferenceTest {\n    private static final List<Object> TEST_DATA = new LinkedList<>();\n    private static final ReferenceQueue<TestClass> QUEUE = new ReferenceQueue<>();\n\n    public static void main(String[] args) {\n        TestClass obj = new TestClass(\"Test\");\n        WeakReference<TestClass> weakRef = new WeakReference<>(obj, QUEUE);\n        //OOMClass\n        //oomObj = weakRef.get();\n\n        // GC\n        new Thread(() -> {\n            while (true) {\n                TEST_DATA.add(new byte[1024 * 100]);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                    Thread.currentThread().interrupt();\n                }\n                System.out.println(weakRef.get());\n            }\n        }).start();\n\n        // \n        new Thread(() -> {\n            while (true) {\n                Reference<? extends TestClass> poll = QUEUE.poll();\n                if (poll != null) {\n                    System.out.println(\"--- jvm ---- \" + poll);\n                    System.out.println(\"---  ---- \" + poll.get());\n                }\n            }\n        }).start();\n\n        // TestClass\n        obj = null;\n\n        try {\n            Thread.currentThread().join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n            System.exit(1);\n        }\n    }\n\n    static class TestClass {\n        private String name;\n\n        public TestClass(String name) {\n            this.name = name;\n        }\n\n        @Override\n        public String toString() {\n            return \"TestClass - \" + name;\n        }\n    }\n}\n```\n\n\n\n```bash\n-verbose:gc -Xms4m -Xmx4m -Xmn2m\n```\n\n\n\n```bash\n[GC (Allocation Failure)  1017K->464K(3584K), 0.0014345 secs]\n[GC (Allocation Failure)  1483K->536K(3584K), 0.0017221 secs]\n[GC (Allocation Failure)  1560K->648K(3584K), 0.0036572 secs]\nTestClass - Test\nTestClass - Test\nTestClass - Test\n[GC (Allocation Failure)  1621K->984K(3584K), 0.0011455 secs]\n--- jvm ---- java.lang.ref.WeakReference@51a947fe\n---  ---- null\nnull\n...nnullGC\n[Full GC (Ergonomics)  2964K->2964K(3584K), 0.0025450 secs]\n[Full GC (Allocation Failure)  2964K->2964K(3584K), 0.0021907 secs]\njava.lang.OutOfMemoryError: Java heap space\nDumping heap to java_pid6860.hprof ...\nHeap dump file created [3912229 bytes in 0.011 secs]\nException in thread \"Thread-0\" java.lang.OutOfMemoryError: Java heap space\n\tat weakhashmap.WeakReferenceTest.lambda$main$0(WeakReferenceTest.java:22)\n\tat weakhashmap.WeakReferenceTest$$Lambda$1/764977973.run(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\nGC\n\n## \n\n WeakReference  \n\nReferenceQueueJava\n\nWeakReferenceWeakHashMapWeakHashMapWeakReference\n\nTomcatWeakHashMap\n\n```java\npublic final class ConcurrentCache<K,V> {\n    private final int size;\n    private final Map<K,V> eden;\n    private final Map<K,V> longterm;\n\n    public ConcurrentCache(int size) {\n        this.size = size;\n        this.eden = new ConcurrentHashMap<>(size);\n        this.longterm = new WeakHashMap<>(size);\n    }\n\n    public V get(K k) {\n        // eden\n        V v = this.eden.get(k);\n        if (v == null) {\n            // longterm\n            synchronized (longterm) {\n                v = this.longterm.get(k);\n            }\n            // eden\n            if (v != null) {\n                this.eden.put(k, v);\n            }\n        }\n        return v;\n    }\n\n    public void put(K k, V v) {\n        if (this.eden.size() >= size) {\n            // edenlongterm\n            synchronized (longterm) {\n                this.longterm.putAll(this.eden);\n            }\n            this.eden.clear();\n        }\n        this.eden.put(k, v);\n    }\n}\n```\n\nedenlongtermmapjvmtomcatConcurrentHashMapWeakHashMap\n\nputedenedenlongtermedenlongtermeden\n\ngetedenkeylongtermeden \n\nedenlongtermlongtermkeygcheap\n\n## \n\n\n\n1. \n2. \n3. GCGC\n\n\n\nSoftReferenceWeakReference\n\nSoftReference\n\nWeakReference\n\nWeakHashMap<img src=\"./195.png\" width=\"50\"/>\n\n## \n\n+  \n+ \n+ \n+ ","slug":"java/reference/weak-reference","published":1,"updated":"2019-06-04T01:29:57.415Z","_id":"cjxze3gxo006k0cvw15ee24g3","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakReferenceGC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC<img src=\"/images/0040.png\" width=\"50\"></p>\n<p>Full GC</p>\n<p>WeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Frank\"</span>);    </span><br><span class=\"line\">WeakReference&lt;String&gt; weakRef = <span class=\"keyword\">new</span> WeakReference&lt;String&gt;(s);</span><br><span class=\"line\">s = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>snull</p>\n<blockquote>\n<p><br>GC Roots<code>(weakly reachable)</code></p>\n</blockquote>\n<blockquote>\n<p>warning <br>WeakReferencegetgetnullnullNullPointerException<img src=\"/images/0019.png\" width=\"50\"></p>\n</blockquote>\n<p>s</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = weakRef.get();</span><br></pre></td></tr></table></figure>\n<p>weakRef</p>\n<p>WeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakReferenceTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> List&lt;Object&gt; TEST_DATA = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;TestClass&gt; QUEUE = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        TestClass obj = <span class=\"keyword\">new</span> TestClass(<span class=\"string\">\"Test\"</span>);</span><br><span class=\"line\">        WeakReference&lt;TestClass&gt; weakRef = <span class=\"keyword\">new</span> WeakReference&lt;&gt;(obj, QUEUE);</span><br><span class=\"line\">        <span class=\"comment\">//OOMClass</span></span><br><span class=\"line\">        <span class=\"comment\">//oomObj = weakRef.get();</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// GC</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                TEST_DATA.add(<span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>]);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(weakRef.get());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                Reference&lt;? extends TestClass&gt; poll = QUEUE.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (poll != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"--- jvm ---- \"</span> + poll);</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"---  ---- \"</span> + poll.get());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// TestClass</span></span><br><span class=\"line\">        obj = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.currentThread().join();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestClass</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TestClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"TestClass - \"</span> + name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1017K-&gt;464K(3584K), 0.0014345 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1483K-&gt;536K(3584K), 0.0017221 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1560K-&gt;648K(3584K), 0.0036572 secs]</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">[GC (Allocation Failure)  1621K-&gt;984K(3584K), 0.0011455 secs]</span><br><span class=\"line\">--- jvm ---- java.lang.ref.WeakReference@51a947fe</span><br><span class=\"line\">---  ---- null</span><br><span class=\"line\">null</span><br><span class=\"line\">...nnullGC</span><br><span class=\"line\">[Full GC (Ergonomics)  2964K-&gt;2964K(3584K), 0.0025450 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2964K-&gt;2964K(3584K), 0.0021907 secs]</span><br><span class=\"line\">java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">Dumping heap to java_pid6860.hprof ...</span><br><span class=\"line\">Heap dump file created [3912229 bytes <span class=\"keyword\">in</span> 0.011 secs]</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"Thread-0\"</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">\tat weakhashmap.WeakReferenceTest.lambda<span class=\"variable\">$main</span><span class=\"variable\">$0</span>(WeakReferenceTest.java:22)</span><br><span class=\"line\">\tat weakhashmap.WeakReferenceTest$<span class=\"variable\">$Lambda</span><span class=\"variable\">$1</span>/764977973.run(Unknown Source)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure>\n<p>GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> WeakReference  </p>\n<p>ReferenceQueueJava</p>\n<p>WeakReferenceWeakHashMapWeakHashMapWeakReference</p>\n<p>TomcatWeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcurrentCache</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; eden;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; longterm;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ConcurrentCache</span><span class=\"params\">(<span class=\"keyword\">int</span> size)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.size = size;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden = <span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(size);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.longterm = <span class=\"keyword\">new</span> WeakHashMap&lt;&gt;(size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(K k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// eden</span></span><br><span class=\"line\">        V v = <span class=\"keyword\">this</span>.eden.get(k);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// longterm</span></span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                v = <span class=\"keyword\">this</span>.longterm.get(k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// eden</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (v != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> v;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(K k, V v)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.eden.size() &gt;= size) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// edenlongterm</span></span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.longterm.putAll(<span class=\"keyword\">this</span>.eden);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.eden.clear();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>edenlongtermmapjvmtomcatConcurrentHashMapWeakHashMap</p>\n<p>putedenedenlongtermedenlongtermeden</p>\n<p>getedenkeylongtermeden </p>\n<p>edenlongtermlongtermkeygcheap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li></li>\n<li></li>\n<li>GCGC</li>\n</ol>\n<p></p>\n<p>SoftReferenceWeakReference</p>\n<p>SoftReference</p>\n<p>WeakReference</p>\n<p>WeakHashMap<img src=\"./195.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li> </li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>WeakReferenceGC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>GC<img src=\"/images/0040.png\" width=\"50\"></p>\n<p>Full GC</p>\n<p>WeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String s = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Frank\"</span>);    </span><br><span class=\"line\">WeakReference&lt;String&gt; weakRef = <span class=\"keyword\">new</span> WeakReference&lt;String&gt;(s);</span><br><span class=\"line\">s = <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<p>snull</p>\n<blockquote>\n<p><br>GC Roots<code>(weakly reachable)</code></p>\n</blockquote>\n<blockquote>\n<p>warning <br>WeakReferencegetgetnullnullNullPointerException<img src=\"/images/0019.png\" width=\"50\"></p>\n</blockquote>\n<p>s</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">s = weakRef.get();</span><br></pre></td></tr></table></figure>\n<p>weakRef</p>\n<p>WeakReference</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WeakReferenceTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> List&lt;Object&gt; TEST_DATA = <span class=\"keyword\">new</span> LinkedList&lt;&gt;();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> ReferenceQueue&lt;TestClass&gt; QUEUE = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        TestClass obj = <span class=\"keyword\">new</span> TestClass(<span class=\"string\">\"Test\"</span>);</span><br><span class=\"line\">        WeakReference&lt;TestClass&gt; weakRef = <span class=\"keyword\">new</span> WeakReference&lt;&gt;(obj, QUEUE);</span><br><span class=\"line\">        <span class=\"comment\">//OOMClass</span></span><br><span class=\"line\">        <span class=\"comment\">//oomObj = weakRef.get();</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// GC</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                TEST_DATA.add(<span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>]);</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                    Thread.currentThread().interrupt();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                System.out.println(weakRef.get());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(() -&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                Reference&lt;? extends TestClass&gt; poll = QUEUE.poll();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (poll != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"--- jvm ---- \"</span> + poll);</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">\"---  ---- \"</span> + poll.get());</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// TestClass</span></span><br><span class=\"line\">        obj = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Thread.currentThread().join();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestClass</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">TestClass</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">\"TestClass - \"</span> + name;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-verbose:gc -Xms4m -Xmx4m -Xmn2m</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[GC (Allocation Failure)  1017K-&gt;464K(3584K), 0.0014345 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1483K-&gt;536K(3584K), 0.0017221 secs]</span><br><span class=\"line\">[GC (Allocation Failure)  1560K-&gt;648K(3584K), 0.0036572 secs]</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">TestClass - Test</span><br><span class=\"line\">[GC (Allocation Failure)  1621K-&gt;984K(3584K), 0.0011455 secs]</span><br><span class=\"line\">--- jvm ---- java.lang.ref.WeakReference@51a947fe</span><br><span class=\"line\">---  ---- null</span><br><span class=\"line\">null</span><br><span class=\"line\">...nnullGC</span><br><span class=\"line\">[Full GC (Ergonomics)  2964K-&gt;2964K(3584K), 0.0025450 secs]</span><br><span class=\"line\">[Full GC (Allocation Failure)  2964K-&gt;2964K(3584K), 0.0021907 secs]</span><br><span class=\"line\">java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">Dumping heap to java_pid6860.hprof ...</span><br><span class=\"line\">Heap dump file created [3912229 bytes <span class=\"keyword\">in</span> 0.011 secs]</span><br><span class=\"line\">Exception <span class=\"keyword\">in</span> thread <span class=\"string\">\"Thread-0\"</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class=\"line\">\tat weakhashmap.WeakReferenceTest.lambda<span class=\"variable\">$main</span><span class=\"variable\">$0</span>(WeakReferenceTest.java:22)</span><br><span class=\"line\">\tat weakhashmap.WeakReferenceTest$<span class=\"variable\">$Lambda</span><span class=\"variable\">$1</span>/764977973.run(Unknown Source)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure>\n<p>GC</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> WeakReference  </p>\n<p>ReferenceQueueJava</p>\n<p>WeakReferenceWeakHashMapWeakHashMapWeakReference</p>\n<p>TomcatWeakHashMap</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcurrentCache</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; eden;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;K,V&gt; longterm;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ConcurrentCache</span><span class=\"params\">(<span class=\"keyword\">int</span> size)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.size = size;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden = <span class=\"keyword\">new</span> ConcurrentHashMap&lt;&gt;(size);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.longterm = <span class=\"keyword\">new</span> WeakHashMap&lt;&gt;(size);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(K k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// eden</span></span><br><span class=\"line\">        V v = <span class=\"keyword\">this</span>.eden.get(k);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (v == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// longterm</span></span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                v = <span class=\"keyword\">this</span>.longterm.get(k);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">// eden</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (v != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> v;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(K k, V v)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.eden.size() &gt;= size) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// edenlongterm</span></span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span> (longterm) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">this</span>.longterm.putAll(<span class=\"keyword\">this</span>.eden);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.eden.clear();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.eden.put(k, v);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>edenlongtermmapjvmtomcatConcurrentHashMapWeakHashMap</p>\n<p>putedenedenlongtermedenlongtermeden</p>\n<p>getedenkeylongtermeden </p>\n<p>edenlongtermlongtermkeygcheap</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li></li>\n<li></li>\n<li>GCGC</li>\n</ol>\n<p></p>\n<p>SoftReferenceWeakReference</p>\n<p>SoftReference</p>\n<p>WeakReference</p>\n<p>WeakHashMap<img src=\"./195.png\" width=\"50\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li> </li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n"},{"title":"Python9.0","date":"2019-04-27T02:25:00.000Z","categorys":[""],"_content":"\n## \n\n8.09.0python\n\n![](https://i.loli.net/2019/03/14/5c8a580b1789e.png)\n\n## \n\n9.0 = =\n\n![](https://i.loli.net/2019/03/14/5c8a5766a30bc.png)\n\n9.02018-12-255302222\n\n### \n\nURLhttps://www.douban.com/doulist/1264675/?start=0&sort=seq&playable=0&sub_type=4\n\n530\n\n22\n\ncsv\n\n      \n\n### \n\n python \n\n\n\n```py\n\n# headers\n\n# \n\n# \n\n# \n\n# csv\n\n```\n\nheadersUA\n\n```py\nurl = 'https://www.douban.com/doulist/1264675/?start=0&sort=seq&playable=0&sub_type=4'\n\nlogging.basicConfig(level=logging.DEBUG)\n\nua = UserAgent()\n\n# headers\nheaders = {'User-Agent': ua.random}\n\n```\n\nUAIP\n\n![](https://i.loli.net/2019/03/14/5c8a519711460.png)\n\nIP\n\n```py\n# \ndef get_proxies(proxy_url, dis_url, page=10):\n    proxy_list = []\n    for i in range(1, page + 1):\n        tmp_ua = UserAgent()\n        tmp_headers = {'User-Agent': tmp_ua.random}\n        html_str = get_web_data(proxy_url + str(i), tmp_headers)\n        soup = BeautifulSoup(html_str.content, \"lxml\")\n        ips = soup.find('tbody').find_all('tr')\n        for ip_info in ips:\n            tds = ip_info.find_all('td')\n            ip = tds[0].get_text()\n            port = tds[1].get_text()\n            ip_str = ip + \":\" + port\n            tmp = {\"http\": \"http://\" + ip_str}\n            if check_proxy(dis_url, tmp):\n                logging.info(\"ip:%s is available\", ip_str)\n                proxy_list.append(ip_str)\n        time.sleep(1)\n    return proxy_list\n\n\n# ip\ndef check_proxy(url, proxy):\n    try:\n        tmp_ua = UserAgent()\n        tmp_headers = {'User-Agent': tmp_ua.random}\n        res = requests.get(url, proxies=proxy, timeout=1, headers=tmp_headers)\n    except:\n        return False\n    else:\n        return True\n```\n\nget_proxiescheck_proxyip\n\nrequests\n\n```py\n# \ndef get_web_data(url, headers, proxies=[]):\n    try:\n        data = requests.get(url, proxies=proxies, timeout=3, headers=headers)\n    except requests.exceptions.ConnectionError as e:\n        logging.error(\"url:\", url)\n        logging.error(\"\", e)\n        data = None\n    except:\n        logging.error(\"url:\", url)\n        data = None\n    return data\n```\n\nBeautifulSoupre\n\n```python\n# \ndef parse_data(data):\n    if data is None:\n        return None\n    # \n    charset = chardet.detect(data.content)\n    data.encoding = charset['encoding']\n\n    # \n    author_pattern = re.compile(r'(: (.*))?[\\s|\\S]*: (.*)[\\s|\\S]*: (.*)')\n\n    # \n    soup = BeautifulSoup(data.text, 'lxml')\n    book_list = soup.find_all(\"div\", class_=\"bd doulist-subject\")\n    list = []\n    for book in book_list:\n        book_map = {}\n        book_name = book.find('div', class_='title').get_text().strip()\n        book_map['book_name'] = book_name\n\n        rate_point = book.find('div', class_='rating').find('span', class_='rating_nums').get_text().strip()\n        book_map['rate_point'] = rate_point\n\n        rate_number = book.find('div', class_='rating').find('span', class_='').get_text().strip()[1:-4]\n        book_map['rate_number'] = rate_number\n\n        tmp = book.find('div', class_='abstract').get_text().strip()\n        m = author_pattern.match(tmp)\n        if m != None:\n            author = m.group(1)\n            if author == None:\n                author = ''\n            publisher = m.group(3)\n            publish_date = m.group(4)\n            book_map['author'] = author\n            book_map['publisher'] = publisher\n            book_map['publish_date'] = publish_date\n\n        pic_link = book.find('div', class_='post').a.img['src']\n        book_map['pic_link'] = pic_link\n        list.append(book_map)\n        logging.info(\"%s%s%s%s%s%s%s\",\n                     book_name, author, rate_point, rate_number, publisher, publish_date, pic_link)\n    return list\n```\n\ncsv\n\n```py\n# csv\ndef save_to_csv(filename, books):\n    with open(filename, 'a', newline='', encoding='utf-8') as f:\n        writer = csv.DictWriter(f, fieldnames=books[0].keys())\n        for book in books:\n            writer.writerow(book)\n        f.close()\n\n```\n\n\n\n```py\n#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\"\"\"\nauth: Frank\ndate: 2019-04-27\ndesc: 9.0csv\n\nURLhttps://www.douban.com/doulist/1264675/?start=0&sort=seq&playable=0&sub_type=4\n\n530\n\n22\n\ncsv\n\n       \n\"\"\"\nimport logging\nimport os\nimport random\nimport urllib.robotparser\nimport time\nimport requests\nimport re\nimport chardet\nfrom bs4 import BeautifulSoup\nfrom fake_useragent import UserAgent\nimport csv\n\n\n# \ndef get_web_data(url, headers, proxies=[]):\n    try:\n        data = requests.get(url, proxies=proxies, timeout=3, headers=headers)\n    except requests.exceptions.ConnectionError as e:\n        logging.error(\"url:\", url)\n        logging.error(\"\", e)\n        data = None\n    except:\n        logging.error(\"url:\", url)\n        data = None\n    return data\n\n\n# \ndef parse_data(data):\n    if data is None:\n        return None\n    # \n    charset = chardet.detect(data.content)\n    data.encoding = charset['encoding']\n\n    # \n    author_pattern = re.compile(r'(: (.*))?[\\s|\\S]*: (.*)[\\s|\\S]*: (.*)')\n\n    # \n    soup = BeautifulSoup(data.text, 'lxml')\n    book_list = soup.find_all(\"div\", class_=\"bd doulist-subject\")\n    list = []\n    for book in book_list:\n        book_map = {}\n        book_name = book.find('div', class_='title').get_text().strip()\n        book_map['book_name'] = book_name\n\n        rate_point = book.find('div', class_='rating').find('span', class_='rating_nums').get_text().strip()\n        book_map['rate_point'] = rate_point\n\n        rate_number = book.find('div', class_='rating').find('span', class_='').get_text().strip()[1:-4]\n        book_map['rate_number'] = rate_number\n\n        tmp = book.find('div', class_='abstract').get_text().strip()\n        m = author_pattern.match(tmp)\n        if m is not None:\n            author = m.group(1)\n            if author is None:\n                author = ''\n            publisher = m.group(3)\n            publish_date = m.group(4)\n            book_map['author'] = author\n            book_map['publisher'] = publisher\n            book_map['publish_date'] = publish_date\n\n        pic_link = book.find('div', class_='post').a.img['src']\n        book_map['pic_link'] = pic_link\n        list.append(book_map)\n        logging.info(\"%s%s%s%s%s%s%s\",\n                     book_name, author, rate_point, rate_number, publisher, publish_date, pic_link)\n    return list\n\n\n# csv\ndef save_to_csv(filename, books):\n    with open(filename, 'a', newline='', encoding='utf-8') as file:\n        writer = csv.DictWriter(file, fieldnames=books[0].keys())\n        for tmp_book in books:\n            writer.writerow(tmp_book)\n\n\n# \ndef get_proxies(proxy_url, dis_url, page=10):\n    proxy_list = []\n    for i in range(1, page + 1):\n        tmp_ua = UserAgent()\n        tmp_headers = {'User-Agent': tmp_ua.random}\n        html_str = get_web_data(proxy_url + str(i), tmp_headers)\n        soup = BeautifulSoup(html_str.content, \"lxml\")\n        ips = soup.find('tbody').find_all('tr')\n        for ip_info in ips:\n            tds = ip_info.find_all('td')\n            ip = tds[0].get_text()\n            port = tds[1].get_text()\n            ip_str = ip + \":\" + port\n            tmp = {\"http\": \"http://\" + ip_str}\n            if check_proxy(dis_url, tmp):\n                logging.info(\"ip:%s is available\", ip_str)\n                proxy_list.append(ip_str)\n        time.sleep(1)\n    return proxy_list\n\n\n# ip\ndef check_proxy(url, proxy):\n    try:\n        tmp_ua = UserAgent()\n        tmp_headers = {'User-Agent': tmp_ua.random}\n        res = requests.get(url, proxies=proxy, timeout=1, headers=tmp_headers)\n    except:\n        return False\n    else:\n        return True\n\n\ndef get_random_ip(ip_list):\n    proxy = random.choice(ip_list)\n    proxies = {'http': 'http://' + proxy}\n    return proxies\n\n\nif __name__ == '__main__':\n    logging.basicConfig(level=logging.INFO)\n    url = 'https://www.douban.com/doulist/1264675/?start='\n    file_path = os.path.dirname(os.path.realpath(__file__)) + os.sep + 'douban.csv'\n    f = open(file_path, 'w')\n    f.close()\n\n    # \n    proxies = get_proxies(\"https://www.kuaidaili.com/free/intr/\", url, 5)\n\n    # headers\n    ua = UserAgent()\n\n    result_list = []\n    for num in range(0, 530, 25):\n        headers = {'User-Agent': ua.random}\n        logging.info('headers:%s', headers)\n        data = get_web_data(url + str(num), headers, get_random_ip(proxies))\n        book = parse_data(data)\n        save_to_csv(file_path, book)\n        time.sleep(1)\n```\n\n\n\n![](https://i.loli.net/2019/04/30/5cc802f79be50.png)\n\n![](https://i.loli.net/2019/04/30/5cc803435c659.png)\n\n\n\n![](https://i.loli.net/2019/04/30/5cc802e26a2d5.png)\n\ngithubhttps://github.com/MFrank2016/douban_spider\n\nimportlxml\n\n## \n\n\n\n1. ip\n2. UA\n3. ip\n4. \n5. /\n\nipipip22\n\n\n\n BeautifulSoup \n\npythonpython BeautifulSoup \n\npythonjava\n\n![](https://i.loli.net/2019/03/08/5c8255c88946b.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","source":"_posts/python/spider/spider-douban-book.md","raw":"---\ntitle: Python9.0\ndate: 2019-04-27 10:25\ntags: \n - \n - \n - Python\ncategorys:\n - \n---\n\n## \n\n8.09.0python\n\n![](https://i.loli.net/2019/03/14/5c8a580b1789e.png)\n\n## \n\n9.0 = =\n\n![](https://i.loli.net/2019/03/14/5c8a5766a30bc.png)\n\n9.02018-12-255302222\n\n### \n\nURLhttps://www.douban.com/doulist/1264675/?start=0&sort=seq&playable=0&sub_type=4\n\n530\n\n22\n\ncsv\n\n      \n\n### \n\n python \n\n\n\n```py\n\n# headers\n\n# \n\n# \n\n# \n\n# csv\n\n```\n\nheadersUA\n\n```py\nurl = 'https://www.douban.com/doulist/1264675/?start=0&sort=seq&playable=0&sub_type=4'\n\nlogging.basicConfig(level=logging.DEBUG)\n\nua = UserAgent()\n\n# headers\nheaders = {'User-Agent': ua.random}\n\n```\n\nUAIP\n\n![](https://i.loli.net/2019/03/14/5c8a519711460.png)\n\nIP\n\n```py\n# \ndef get_proxies(proxy_url, dis_url, page=10):\n    proxy_list = []\n    for i in range(1, page + 1):\n        tmp_ua = UserAgent()\n        tmp_headers = {'User-Agent': tmp_ua.random}\n        html_str = get_web_data(proxy_url + str(i), tmp_headers)\n        soup = BeautifulSoup(html_str.content, \"lxml\")\n        ips = soup.find('tbody').find_all('tr')\n        for ip_info in ips:\n            tds = ip_info.find_all('td')\n            ip = tds[0].get_text()\n            port = tds[1].get_text()\n            ip_str = ip + \":\" + port\n            tmp = {\"http\": \"http://\" + ip_str}\n            if check_proxy(dis_url, tmp):\n                logging.info(\"ip:%s is available\", ip_str)\n                proxy_list.append(ip_str)\n        time.sleep(1)\n    return proxy_list\n\n\n# ip\ndef check_proxy(url, proxy):\n    try:\n        tmp_ua = UserAgent()\n        tmp_headers = {'User-Agent': tmp_ua.random}\n        res = requests.get(url, proxies=proxy, timeout=1, headers=tmp_headers)\n    except:\n        return False\n    else:\n        return True\n```\n\nget_proxiescheck_proxyip\n\nrequests\n\n```py\n# \ndef get_web_data(url, headers, proxies=[]):\n    try:\n        data = requests.get(url, proxies=proxies, timeout=3, headers=headers)\n    except requests.exceptions.ConnectionError as e:\n        logging.error(\"url:\", url)\n        logging.error(\"\", e)\n        data = None\n    except:\n        logging.error(\"url:\", url)\n        data = None\n    return data\n```\n\nBeautifulSoupre\n\n```python\n# \ndef parse_data(data):\n    if data is None:\n        return None\n    # \n    charset = chardet.detect(data.content)\n    data.encoding = charset['encoding']\n\n    # \n    author_pattern = re.compile(r'(: (.*))?[\\s|\\S]*: (.*)[\\s|\\S]*: (.*)')\n\n    # \n    soup = BeautifulSoup(data.text, 'lxml')\n    book_list = soup.find_all(\"div\", class_=\"bd doulist-subject\")\n    list = []\n    for book in book_list:\n        book_map = {}\n        book_name = book.find('div', class_='title').get_text().strip()\n        book_map['book_name'] = book_name\n\n        rate_point = book.find('div', class_='rating').find('span', class_='rating_nums').get_text().strip()\n        book_map['rate_point'] = rate_point\n\n        rate_number = book.find('div', class_='rating').find('span', class_='').get_text().strip()[1:-4]\n        book_map['rate_number'] = rate_number\n\n        tmp = book.find('div', class_='abstract').get_text().strip()\n        m = author_pattern.match(tmp)\n        if m != None:\n            author = m.group(1)\n            if author == None:\n                author = ''\n            publisher = m.group(3)\n            publish_date = m.group(4)\n            book_map['author'] = author\n            book_map['publisher'] = publisher\n            book_map['publish_date'] = publish_date\n\n        pic_link = book.find('div', class_='post').a.img['src']\n        book_map['pic_link'] = pic_link\n        list.append(book_map)\n        logging.info(\"%s%s%s%s%s%s%s\",\n                     book_name, author, rate_point, rate_number, publisher, publish_date, pic_link)\n    return list\n```\n\ncsv\n\n```py\n# csv\ndef save_to_csv(filename, books):\n    with open(filename, 'a', newline='', encoding='utf-8') as f:\n        writer = csv.DictWriter(f, fieldnames=books[0].keys())\n        for book in books:\n            writer.writerow(book)\n        f.close()\n\n```\n\n\n\n```py\n#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\"\"\"\nauth: Frank\ndate: 2019-04-27\ndesc: 9.0csv\n\nURLhttps://www.douban.com/doulist/1264675/?start=0&sort=seq&playable=0&sub_type=4\n\n530\n\n22\n\ncsv\n\n       \n\"\"\"\nimport logging\nimport os\nimport random\nimport urllib.robotparser\nimport time\nimport requests\nimport re\nimport chardet\nfrom bs4 import BeautifulSoup\nfrom fake_useragent import UserAgent\nimport csv\n\n\n# \ndef get_web_data(url, headers, proxies=[]):\n    try:\n        data = requests.get(url, proxies=proxies, timeout=3, headers=headers)\n    except requests.exceptions.ConnectionError as e:\n        logging.error(\"url:\", url)\n        logging.error(\"\", e)\n        data = None\n    except:\n        logging.error(\"url:\", url)\n        data = None\n    return data\n\n\n# \ndef parse_data(data):\n    if data is None:\n        return None\n    # \n    charset = chardet.detect(data.content)\n    data.encoding = charset['encoding']\n\n    # \n    author_pattern = re.compile(r'(: (.*))?[\\s|\\S]*: (.*)[\\s|\\S]*: (.*)')\n\n    # \n    soup = BeautifulSoup(data.text, 'lxml')\n    book_list = soup.find_all(\"div\", class_=\"bd doulist-subject\")\n    list = []\n    for book in book_list:\n        book_map = {}\n        book_name = book.find('div', class_='title').get_text().strip()\n        book_map['book_name'] = book_name\n\n        rate_point = book.find('div', class_='rating').find('span', class_='rating_nums').get_text().strip()\n        book_map['rate_point'] = rate_point\n\n        rate_number = book.find('div', class_='rating').find('span', class_='').get_text().strip()[1:-4]\n        book_map['rate_number'] = rate_number\n\n        tmp = book.find('div', class_='abstract').get_text().strip()\n        m = author_pattern.match(tmp)\n        if m is not None:\n            author = m.group(1)\n            if author is None:\n                author = ''\n            publisher = m.group(3)\n            publish_date = m.group(4)\n            book_map['author'] = author\n            book_map['publisher'] = publisher\n            book_map['publish_date'] = publish_date\n\n        pic_link = book.find('div', class_='post').a.img['src']\n        book_map['pic_link'] = pic_link\n        list.append(book_map)\n        logging.info(\"%s%s%s%s%s%s%s\",\n                     book_name, author, rate_point, rate_number, publisher, publish_date, pic_link)\n    return list\n\n\n# csv\ndef save_to_csv(filename, books):\n    with open(filename, 'a', newline='', encoding='utf-8') as file:\n        writer = csv.DictWriter(file, fieldnames=books[0].keys())\n        for tmp_book in books:\n            writer.writerow(tmp_book)\n\n\n# \ndef get_proxies(proxy_url, dis_url, page=10):\n    proxy_list = []\n    for i in range(1, page + 1):\n        tmp_ua = UserAgent()\n        tmp_headers = {'User-Agent': tmp_ua.random}\n        html_str = get_web_data(proxy_url + str(i), tmp_headers)\n        soup = BeautifulSoup(html_str.content, \"lxml\")\n        ips = soup.find('tbody').find_all('tr')\n        for ip_info in ips:\n            tds = ip_info.find_all('td')\n            ip = tds[0].get_text()\n            port = tds[1].get_text()\n            ip_str = ip + \":\" + port\n            tmp = {\"http\": \"http://\" + ip_str}\n            if check_proxy(dis_url, tmp):\n                logging.info(\"ip:%s is available\", ip_str)\n                proxy_list.append(ip_str)\n        time.sleep(1)\n    return proxy_list\n\n\n# ip\ndef check_proxy(url, proxy):\n    try:\n        tmp_ua = UserAgent()\n        tmp_headers = {'User-Agent': tmp_ua.random}\n        res = requests.get(url, proxies=proxy, timeout=1, headers=tmp_headers)\n    except:\n        return False\n    else:\n        return True\n\n\ndef get_random_ip(ip_list):\n    proxy = random.choice(ip_list)\n    proxies = {'http': 'http://' + proxy}\n    return proxies\n\n\nif __name__ == '__main__':\n    logging.basicConfig(level=logging.INFO)\n    url = 'https://www.douban.com/doulist/1264675/?start='\n    file_path = os.path.dirname(os.path.realpath(__file__)) + os.sep + 'douban.csv'\n    f = open(file_path, 'w')\n    f.close()\n\n    # \n    proxies = get_proxies(\"https://www.kuaidaili.com/free/intr/\", url, 5)\n\n    # headers\n    ua = UserAgent()\n\n    result_list = []\n    for num in range(0, 530, 25):\n        headers = {'User-Agent': ua.random}\n        logging.info('headers:%s', headers)\n        data = get_web_data(url + str(num), headers, get_random_ip(proxies))\n        book = parse_data(data)\n        save_to_csv(file_path, book)\n        time.sleep(1)\n```\n\n\n\n![](https://i.loli.net/2019/04/30/5cc802f79be50.png)\n\n![](https://i.loli.net/2019/04/30/5cc803435c659.png)\n\n\n\n![](https://i.loli.net/2019/04/30/5cc802e26a2d5.png)\n\ngithubhttps://github.com/MFrank2016/douban_spider\n\nimportlxml\n\n## \n\n\n\n1. ip\n2. UA\n3. ip\n4. \n5. /\n\nipipip22\n\n\n\n BeautifulSoup \n\npythonpython BeautifulSoup \n\npythonjava\n\n![](https://i.loli.net/2019/03/08/5c8255c88946b.png)\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","slug":"python/spider/spider-douban-book","published":1,"updated":"2019-06-04T01:29:57.497Z","_id":"cjxze3gys007u0cvw6ne5bg40","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>8.09.0python</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a580b1789e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>9.0 = =</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a5766a30bc.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>9.02018-12-255302222</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>URL<a href=\"https://www.douban.com/doulist/1264675/?start=0&amp;sort=seq&amp;playable=0&amp;sub_type=4\" target=\"_blank\" rel=\"noopener\">https://www.douban.com/doulist/1264675/?start=0&amp;sort=seq&amp;playable=0&amp;sub_type=4</a></p>\n<p>530</p>\n<p>22</p>\n<p>csv</p>\n<p>      </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> python </p>\n<p></p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># headers</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># csv</span></span><br></pre></td></tr></table></figure>\n<p>headersUA</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url = <span class=\"string\">'https://www.douban.com/doulist/1264675/?start=0&amp;sort=seq&amp;playable=0&amp;sub_type=4'</span></span><br><span class=\"line\"></span><br><span class=\"line\">logging.basicConfig(level=logging.DEBUG)</span><br><span class=\"line\"></span><br><span class=\"line\">ua = UserAgent()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># headers</span></span><br><span class=\"line\">headers = &#123;<span class=\"string\">'User-Agent'</span>: ua.random&#125;</span><br></pre></td></tr></table></figure>\n<p>UAIP</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a519711460.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>IP</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_proxies</span><span class=\"params\">(proxy_url, dis_url, page=<span class=\"number\">10</span>)</span>:</span></span><br><span class=\"line\">    proxy_list = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, page + <span class=\"number\">1</span>):</span><br><span class=\"line\">        tmp_ua = UserAgent()</span><br><span class=\"line\">        tmp_headers = &#123;<span class=\"string\">'User-Agent'</span>: tmp_ua.random&#125;</span><br><span class=\"line\">        html_str = get_web_data(proxy_url + str(i), tmp_headers)</span><br><span class=\"line\">        soup = BeautifulSoup(html_str.content, <span class=\"string\">\"lxml\"</span>)</span><br><span class=\"line\">        ips = soup.find(<span class=\"string\">'tbody'</span>).find_all(<span class=\"string\">'tr'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> ip_info <span class=\"keyword\">in</span> ips:</span><br><span class=\"line\">            tds = ip_info.find_all(<span class=\"string\">'td'</span>)</span><br><span class=\"line\">            ip = tds[<span class=\"number\">0</span>].get_text()</span><br><span class=\"line\">            port = tds[<span class=\"number\">1</span>].get_text()</span><br><span class=\"line\">            ip_str = ip + <span class=\"string\">\":\"</span> + port</span><br><span class=\"line\">            tmp = &#123;<span class=\"string\">\"http\"</span>: <span class=\"string\">\"http://\"</span> + ip_str&#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> check_proxy(dis_url, tmp):</span><br><span class=\"line\">                logging.info(<span class=\"string\">\"ip:%s is available\"</span>, ip_str)</span><br><span class=\"line\">                proxy_list.append(ip_str)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> proxy_list</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ip</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">check_proxy</span><span class=\"params\">(url, proxy)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        tmp_ua = UserAgent()</span><br><span class=\"line\">        tmp_headers = &#123;<span class=\"string\">'User-Agent'</span>: tmp_ua.random&#125;</span><br><span class=\"line\">        res = requests.get(url, proxies=proxy, timeout=<span class=\"number\">1</span>, headers=tmp_headers)</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">True</span></span><br></pre></td></tr></table></figure>\n<p>get_proxiescheck_proxyip</p>\n<p>requests</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_web_data</span><span class=\"params\">(url, headers, proxies=[])</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        data = requests.get(url, proxies=proxies, timeout=<span class=\"number\">3</span>, headers=headers)</span><br><span class=\"line\">    <span class=\"keyword\">except</span> requests.exceptions.ConnectionError <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"url:\"</span>, url)</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"\"</span>, e)</span><br><span class=\"line\">        data = <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"url:\"</span>, url)</span><br><span class=\"line\">        data = <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br></pre></td></tr></table></figure>\n<p>BeautifulSoupre</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parse_data</span><span class=\"params\">(data)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> data <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    charset = chardet.detect(data.content)</span><br><span class=\"line\">    data.encoding = charset[<span class=\"string\">'encoding'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    author_pattern = re.compile(<span class=\"string\">r'(: (.*))?[\\s|\\S]*: (.*)[\\s|\\S]*: (.*)'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    soup = BeautifulSoup(data.text, <span class=\"string\">'lxml'</span>)</span><br><span class=\"line\">    book_list = soup.find_all(<span class=\"string\">\"div\"</span>, class_=<span class=\"string\">\"bd doulist-subject\"</span>)</span><br><span class=\"line\">    list = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> book <span class=\"keyword\">in</span> book_list:</span><br><span class=\"line\">        book_map = &#123;&#125;</span><br><span class=\"line\">        book_name = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'title'</span>).get_text().strip()</span><br><span class=\"line\">        book_map[<span class=\"string\">'book_name'</span>] = book_name</span><br><span class=\"line\"></span><br><span class=\"line\">        rate_point = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'rating'</span>).find(<span class=\"string\">'span'</span>, class_=<span class=\"string\">'rating_nums'</span>).get_text().strip()</span><br><span class=\"line\">        book_map[<span class=\"string\">'rate_point'</span>] = rate_point</span><br><span class=\"line\"></span><br><span class=\"line\">        rate_number = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'rating'</span>).find(<span class=\"string\">'span'</span>, class_=<span class=\"string\">''</span>).get_text().strip()[<span class=\"number\">1</span>:<span class=\"number\">-4</span>]</span><br><span class=\"line\">        book_map[<span class=\"string\">'rate_number'</span>] = rate_number</span><br><span class=\"line\"></span><br><span class=\"line\">        tmp = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'abstract'</span>).get_text().strip()</span><br><span class=\"line\">        m = author_pattern.match(tmp)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> m != <span class=\"keyword\">None</span>:</span><br><span class=\"line\">            author = m.group(<span class=\"number\">1</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> author == <span class=\"keyword\">None</span>:</span><br><span class=\"line\">                author = <span class=\"string\">''</span></span><br><span class=\"line\">            publisher = m.group(<span class=\"number\">3</span>)</span><br><span class=\"line\">            publish_date = m.group(<span class=\"number\">4</span>)</span><br><span class=\"line\">            book_map[<span class=\"string\">'author'</span>] = author</span><br><span class=\"line\">            book_map[<span class=\"string\">'publisher'</span>] = publisher</span><br><span class=\"line\">            book_map[<span class=\"string\">'publish_date'</span>] = publish_date</span><br><span class=\"line\"></span><br><span class=\"line\">        pic_link = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'post'</span>).a.img[<span class=\"string\">'src'</span>]</span><br><span class=\"line\">        book_map[<span class=\"string\">'pic_link'</span>] = pic_link</span><br><span class=\"line\">        list.append(book_map)</span><br><span class=\"line\">        logging.info(<span class=\"string\">\"%s%s%s%s%s%s%s\"</span>,</span><br><span class=\"line\">                     book_name, author, rate_point, rate_number, publisher, publish_date, pic_link)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> list</span><br></pre></td></tr></table></figure>\n<p>csv</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># csv</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">save_to_csv</span><span class=\"params\">(filename, books)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">with</span> open(filename, <span class=\"string\">'a'</span>, newline=<span class=\"string\">''</span>, encoding=<span class=\"string\">'utf-8'</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">        writer = csv.DictWriter(f, fieldnames=books[<span class=\"number\">0</span>].keys())</span><br><span class=\"line\">        <span class=\"keyword\">for</span> book <span class=\"keyword\">in</span> books:</span><br><span class=\"line\">            writer.writerow(book)</span><br><span class=\"line\">        f.close()</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">auth: Frank</span></span><br><span class=\"line\"><span class=\"string\">date: 2019-04-27</span></span><br><span class=\"line\"><span class=\"string\">desc: 9.0csv</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">URLhttps://www.douban.com/doulist/1264675/?start=0&amp;sort=seq&amp;playable=0&amp;sub_type=4</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">530</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">22</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">csv</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">       </span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"keyword\">import</span> urllib.robotparser</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> chardet</span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\"><span class=\"keyword\">from</span> fake_useragent <span class=\"keyword\">import</span> UserAgent</span><br><span class=\"line\"><span class=\"keyword\">import</span> csv</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_web_data</span><span class=\"params\">(url, headers, proxies=[])</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        data = requests.get(url, proxies=proxies, timeout=<span class=\"number\">3</span>, headers=headers)</span><br><span class=\"line\">    <span class=\"keyword\">except</span> requests.exceptions.ConnectionError <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"url:\"</span>, url)</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"\"</span>, e)</span><br><span class=\"line\">        data = <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"url:\"</span>, url)</span><br><span class=\"line\">        data = <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parse_data</span><span class=\"params\">(data)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> data <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    charset = chardet.detect(data.content)</span><br><span class=\"line\">    data.encoding = charset[<span class=\"string\">'encoding'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    author_pattern = re.compile(<span class=\"string\">r'(: (.*))?[\\s|\\S]*: (.*)[\\s|\\S]*: (.*)'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    soup = BeautifulSoup(data.text, <span class=\"string\">'lxml'</span>)</span><br><span class=\"line\">    book_list = soup.find_all(<span class=\"string\">\"div\"</span>, class_=<span class=\"string\">\"bd doulist-subject\"</span>)</span><br><span class=\"line\">    list = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> book <span class=\"keyword\">in</span> book_list:</span><br><span class=\"line\">        book_map = &#123;&#125;</span><br><span class=\"line\">        book_name = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'title'</span>).get_text().strip()</span><br><span class=\"line\">        book_map[<span class=\"string\">'book_name'</span>] = book_name</span><br><span class=\"line\"></span><br><span class=\"line\">        rate_point = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'rating'</span>).find(<span class=\"string\">'span'</span>, class_=<span class=\"string\">'rating_nums'</span>).get_text().strip()</span><br><span class=\"line\">        book_map[<span class=\"string\">'rate_point'</span>] = rate_point</span><br><span class=\"line\"></span><br><span class=\"line\">        rate_number = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'rating'</span>).find(<span class=\"string\">'span'</span>, class_=<span class=\"string\">''</span>).get_text().strip()[<span class=\"number\">1</span>:<span class=\"number\">-4</span>]</span><br><span class=\"line\">        book_map[<span class=\"string\">'rate_number'</span>] = rate_number</span><br><span class=\"line\"></span><br><span class=\"line\">        tmp = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'abstract'</span>).get_text().strip()</span><br><span class=\"line\">        m = author_pattern.match(tmp)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> m <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">            author = m.group(<span class=\"number\">1</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> author <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">                author = <span class=\"string\">''</span></span><br><span class=\"line\">            publisher = m.group(<span class=\"number\">3</span>)</span><br><span class=\"line\">            publish_date = m.group(<span class=\"number\">4</span>)</span><br><span class=\"line\">            book_map[<span class=\"string\">'author'</span>] = author</span><br><span class=\"line\">            book_map[<span class=\"string\">'publisher'</span>] = publisher</span><br><span class=\"line\">            book_map[<span class=\"string\">'publish_date'</span>] = publish_date</span><br><span class=\"line\"></span><br><span class=\"line\">        pic_link = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'post'</span>).a.img[<span class=\"string\">'src'</span>]</span><br><span class=\"line\">        book_map[<span class=\"string\">'pic_link'</span>] = pic_link</span><br><span class=\"line\">        list.append(book_map)</span><br><span class=\"line\">        logging.info(<span class=\"string\">\"%s%s%s%s%s%s%s\"</span>,</span><br><span class=\"line\">                     book_name, author, rate_point, rate_number, publisher, publish_date, pic_link)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> list</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># csv</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">save_to_csv</span><span class=\"params\">(filename, books)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">with</span> open(filename, <span class=\"string\">'a'</span>, newline=<span class=\"string\">''</span>, encoding=<span class=\"string\">'utf-8'</span>) <span class=\"keyword\">as</span> file:</span><br><span class=\"line\">        writer = csv.DictWriter(file, fieldnames=books[<span class=\"number\">0</span>].keys())</span><br><span class=\"line\">        <span class=\"keyword\">for</span> tmp_book <span class=\"keyword\">in</span> books:</span><br><span class=\"line\">            writer.writerow(tmp_book)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_proxies</span><span class=\"params\">(proxy_url, dis_url, page=<span class=\"number\">10</span>)</span>:</span></span><br><span class=\"line\">    proxy_list = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, page + <span class=\"number\">1</span>):</span><br><span class=\"line\">        tmp_ua = UserAgent()</span><br><span class=\"line\">        tmp_headers = &#123;<span class=\"string\">'User-Agent'</span>: tmp_ua.random&#125;</span><br><span class=\"line\">        html_str = get_web_data(proxy_url + str(i), tmp_headers)</span><br><span class=\"line\">        soup = BeautifulSoup(html_str.content, <span class=\"string\">\"lxml\"</span>)</span><br><span class=\"line\">        ips = soup.find(<span class=\"string\">'tbody'</span>).find_all(<span class=\"string\">'tr'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> ip_info <span class=\"keyword\">in</span> ips:</span><br><span class=\"line\">            tds = ip_info.find_all(<span class=\"string\">'td'</span>)</span><br><span class=\"line\">            ip = tds[<span class=\"number\">0</span>].get_text()</span><br><span class=\"line\">            port = tds[<span class=\"number\">1</span>].get_text()</span><br><span class=\"line\">            ip_str = ip + <span class=\"string\">\":\"</span> + port</span><br><span class=\"line\">            tmp = &#123;<span class=\"string\">\"http\"</span>: <span class=\"string\">\"http://\"</span> + ip_str&#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> check_proxy(dis_url, tmp):</span><br><span class=\"line\">                logging.info(<span class=\"string\">\"ip:%s is available\"</span>, ip_str)</span><br><span class=\"line\">                proxy_list.append(ip_str)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> proxy_list</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ip</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">check_proxy</span><span class=\"params\">(url, proxy)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        tmp_ua = UserAgent()</span><br><span class=\"line\">        tmp_headers = &#123;<span class=\"string\">'User-Agent'</span>: tmp_ua.random&#125;</span><br><span class=\"line\">        res = requests.get(url, proxies=proxy, timeout=<span class=\"number\">1</span>, headers=tmp_headers)</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_random_ip</span><span class=\"params\">(ip_list)</span>:</span></span><br><span class=\"line\">    proxy = random.choice(ip_list)</span><br><span class=\"line\">    proxies = &#123;<span class=\"string\">'http'</span>: <span class=\"string\">'http://'</span> + proxy&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> proxies</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\">    url = <span class=\"string\">'https://www.douban.com/doulist/1264675/?start='</span></span><br><span class=\"line\">    file_path = os.path.dirname(os.path.realpath(__file__)) + os.sep + <span class=\"string\">'douban.csv'</span></span><br><span class=\"line\">    f = open(file_path, <span class=\"string\">'w'</span>)</span><br><span class=\"line\">    f.close()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    proxies = get_proxies(<span class=\"string\">\"https://www.kuaidaili.com/free/intr/\"</span>, url, <span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># headers</span></span><br><span class=\"line\">    ua = UserAgent()</span><br><span class=\"line\"></span><br><span class=\"line\">    result_list = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> num <span class=\"keyword\">in</span> range(<span class=\"number\">0</span>, <span class=\"number\">530</span>, <span class=\"number\">25</span>):</span><br><span class=\"line\">        headers = &#123;<span class=\"string\">'User-Agent'</span>: ua.random&#125;</span><br><span class=\"line\">        logging.info(<span class=\"string\">'headers:%s'</span>, headers)</span><br><span class=\"line\">        data = get_web_data(url + str(num), headers, get_random_ip(proxies))</span><br><span class=\"line\">        book = parse_data(data)</span><br><span class=\"line\">        save_to_csv(file_path, book)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/30/5cc802f79be50.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/30/5cc803435c659.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/30/5cc802e26a2d5.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>github<a href=\"https://github.com/MFrank2016/douban_spider\" target=\"_blank\" rel=\"noopener\">https://github.com/MFrank2016/douban_spider</a></p>\n<p>importlxml</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li>ip</li>\n<li>UA</li>\n<li>ip</li>\n<li></li>\n<li>/</li>\n</ol>\n<p>ipipip22</p>\n<p></p>\n<p> BeautifulSoup </p>\n<p>pythonpython BeautifulSoup </p>\n<p>pythonjava</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c8255c88946b.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>8.09.0python</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a580b1789e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>9.0 = =</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a5766a30bc.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>9.02018-12-255302222</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>URL<a href=\"https://www.douban.com/doulist/1264675/?start=0&amp;sort=seq&amp;playable=0&amp;sub_type=4\" target=\"_blank\" rel=\"noopener\">https://www.douban.com/doulist/1264675/?start=0&amp;sort=seq&amp;playable=0&amp;sub_type=4</a></p>\n<p>530</p>\n<p>22</p>\n<p>csv</p>\n<p>      </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> python </p>\n<p></p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># headers</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># csv</span></span><br></pre></td></tr></table></figure>\n<p>headersUA</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url = <span class=\"string\">'https://www.douban.com/doulist/1264675/?start=0&amp;sort=seq&amp;playable=0&amp;sub_type=4'</span></span><br><span class=\"line\"></span><br><span class=\"line\">logging.basicConfig(level=logging.DEBUG)</span><br><span class=\"line\"></span><br><span class=\"line\">ua = UserAgent()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># headers</span></span><br><span class=\"line\">headers = &#123;<span class=\"string\">'User-Agent'</span>: ua.random&#125;</span><br></pre></td></tr></table></figure>\n<p>UAIP</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a519711460.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>IP</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_proxies</span><span class=\"params\">(proxy_url, dis_url, page=<span class=\"number\">10</span>)</span>:</span></span><br><span class=\"line\">    proxy_list = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, page + <span class=\"number\">1</span>):</span><br><span class=\"line\">        tmp_ua = UserAgent()</span><br><span class=\"line\">        tmp_headers = &#123;<span class=\"string\">'User-Agent'</span>: tmp_ua.random&#125;</span><br><span class=\"line\">        html_str = get_web_data(proxy_url + str(i), tmp_headers)</span><br><span class=\"line\">        soup = BeautifulSoup(html_str.content, <span class=\"string\">\"lxml\"</span>)</span><br><span class=\"line\">        ips = soup.find(<span class=\"string\">'tbody'</span>).find_all(<span class=\"string\">'tr'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> ip_info <span class=\"keyword\">in</span> ips:</span><br><span class=\"line\">            tds = ip_info.find_all(<span class=\"string\">'td'</span>)</span><br><span class=\"line\">            ip = tds[<span class=\"number\">0</span>].get_text()</span><br><span class=\"line\">            port = tds[<span class=\"number\">1</span>].get_text()</span><br><span class=\"line\">            ip_str = ip + <span class=\"string\">\":\"</span> + port</span><br><span class=\"line\">            tmp = &#123;<span class=\"string\">\"http\"</span>: <span class=\"string\">\"http://\"</span> + ip_str&#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> check_proxy(dis_url, tmp):</span><br><span class=\"line\">                logging.info(<span class=\"string\">\"ip:%s is available\"</span>, ip_str)</span><br><span class=\"line\">                proxy_list.append(ip_str)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> proxy_list</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ip</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">check_proxy</span><span class=\"params\">(url, proxy)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        tmp_ua = UserAgent()</span><br><span class=\"line\">        tmp_headers = &#123;<span class=\"string\">'User-Agent'</span>: tmp_ua.random&#125;</span><br><span class=\"line\">        res = requests.get(url, proxies=proxy, timeout=<span class=\"number\">1</span>, headers=tmp_headers)</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">True</span></span><br></pre></td></tr></table></figure>\n<p>get_proxiescheck_proxyip</p>\n<p>requests</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_web_data</span><span class=\"params\">(url, headers, proxies=[])</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        data = requests.get(url, proxies=proxies, timeout=<span class=\"number\">3</span>, headers=headers)</span><br><span class=\"line\">    <span class=\"keyword\">except</span> requests.exceptions.ConnectionError <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"url:\"</span>, url)</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"\"</span>, e)</span><br><span class=\"line\">        data = <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"url:\"</span>, url)</span><br><span class=\"line\">        data = <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br></pre></td></tr></table></figure>\n<p>BeautifulSoupre</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parse_data</span><span class=\"params\">(data)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> data <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    charset = chardet.detect(data.content)</span><br><span class=\"line\">    data.encoding = charset[<span class=\"string\">'encoding'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    author_pattern = re.compile(<span class=\"string\">r'(: (.*))?[\\s|\\S]*: (.*)[\\s|\\S]*: (.*)'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    soup = BeautifulSoup(data.text, <span class=\"string\">'lxml'</span>)</span><br><span class=\"line\">    book_list = soup.find_all(<span class=\"string\">\"div\"</span>, class_=<span class=\"string\">\"bd doulist-subject\"</span>)</span><br><span class=\"line\">    list = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> book <span class=\"keyword\">in</span> book_list:</span><br><span class=\"line\">        book_map = &#123;&#125;</span><br><span class=\"line\">        book_name = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'title'</span>).get_text().strip()</span><br><span class=\"line\">        book_map[<span class=\"string\">'book_name'</span>] = book_name</span><br><span class=\"line\"></span><br><span class=\"line\">        rate_point = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'rating'</span>).find(<span class=\"string\">'span'</span>, class_=<span class=\"string\">'rating_nums'</span>).get_text().strip()</span><br><span class=\"line\">        book_map[<span class=\"string\">'rate_point'</span>] = rate_point</span><br><span class=\"line\"></span><br><span class=\"line\">        rate_number = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'rating'</span>).find(<span class=\"string\">'span'</span>, class_=<span class=\"string\">''</span>).get_text().strip()[<span class=\"number\">1</span>:<span class=\"number\">-4</span>]</span><br><span class=\"line\">        book_map[<span class=\"string\">'rate_number'</span>] = rate_number</span><br><span class=\"line\"></span><br><span class=\"line\">        tmp = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'abstract'</span>).get_text().strip()</span><br><span class=\"line\">        m = author_pattern.match(tmp)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> m != <span class=\"keyword\">None</span>:</span><br><span class=\"line\">            author = m.group(<span class=\"number\">1</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> author == <span class=\"keyword\">None</span>:</span><br><span class=\"line\">                author = <span class=\"string\">''</span></span><br><span class=\"line\">            publisher = m.group(<span class=\"number\">3</span>)</span><br><span class=\"line\">            publish_date = m.group(<span class=\"number\">4</span>)</span><br><span class=\"line\">            book_map[<span class=\"string\">'author'</span>] = author</span><br><span class=\"line\">            book_map[<span class=\"string\">'publisher'</span>] = publisher</span><br><span class=\"line\">            book_map[<span class=\"string\">'publish_date'</span>] = publish_date</span><br><span class=\"line\"></span><br><span class=\"line\">        pic_link = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'post'</span>).a.img[<span class=\"string\">'src'</span>]</span><br><span class=\"line\">        book_map[<span class=\"string\">'pic_link'</span>] = pic_link</span><br><span class=\"line\">        list.append(book_map)</span><br><span class=\"line\">        logging.info(<span class=\"string\">\"%s%s%s%s%s%s%s\"</span>,</span><br><span class=\"line\">                     book_name, author, rate_point, rate_number, publisher, publish_date, pic_link)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> list</span><br></pre></td></tr></table></figure>\n<p>csv</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># csv</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">save_to_csv</span><span class=\"params\">(filename, books)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">with</span> open(filename, <span class=\"string\">'a'</span>, newline=<span class=\"string\">''</span>, encoding=<span class=\"string\">'utf-8'</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">        writer = csv.DictWriter(f, fieldnames=books[<span class=\"number\">0</span>].keys())</span><br><span class=\"line\">        <span class=\"keyword\">for</span> book <span class=\"keyword\">in</span> books:</span><br><span class=\"line\">            writer.writerow(book)</span><br><span class=\"line\">        f.close()</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">auth: Frank</span></span><br><span class=\"line\"><span class=\"string\">date: 2019-04-27</span></span><br><span class=\"line\"><span class=\"string\">desc: 9.0csv</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">URLhttps://www.douban.com/doulist/1264675/?start=0&amp;sort=seq&amp;playable=0&amp;sub_type=4</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">530</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">22</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">csv</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">       </span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"keyword\">import</span> urllib.robotparser</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> chardet</span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\"><span class=\"keyword\">from</span> fake_useragent <span class=\"keyword\">import</span> UserAgent</span><br><span class=\"line\"><span class=\"keyword\">import</span> csv</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_web_data</span><span class=\"params\">(url, headers, proxies=[])</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        data = requests.get(url, proxies=proxies, timeout=<span class=\"number\">3</span>, headers=headers)</span><br><span class=\"line\">    <span class=\"keyword\">except</span> requests.exceptions.ConnectionError <span class=\"keyword\">as</span> e:</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"url:\"</span>, url)</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"\"</span>, e)</span><br><span class=\"line\">        data = <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        logging.error(<span class=\"string\">\"url:\"</span>, url)</span><br><span class=\"line\">        data = <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> data</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parse_data</span><span class=\"params\">(data)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> data <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">None</span></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    charset = chardet.detect(data.content)</span><br><span class=\"line\">    data.encoding = charset[<span class=\"string\">'encoding'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    author_pattern = re.compile(<span class=\"string\">r'(: (.*))?[\\s|\\S]*: (.*)[\\s|\\S]*: (.*)'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    soup = BeautifulSoup(data.text, <span class=\"string\">'lxml'</span>)</span><br><span class=\"line\">    book_list = soup.find_all(<span class=\"string\">\"div\"</span>, class_=<span class=\"string\">\"bd doulist-subject\"</span>)</span><br><span class=\"line\">    list = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> book <span class=\"keyword\">in</span> book_list:</span><br><span class=\"line\">        book_map = &#123;&#125;</span><br><span class=\"line\">        book_name = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'title'</span>).get_text().strip()</span><br><span class=\"line\">        book_map[<span class=\"string\">'book_name'</span>] = book_name</span><br><span class=\"line\"></span><br><span class=\"line\">        rate_point = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'rating'</span>).find(<span class=\"string\">'span'</span>, class_=<span class=\"string\">'rating_nums'</span>).get_text().strip()</span><br><span class=\"line\">        book_map[<span class=\"string\">'rate_point'</span>] = rate_point</span><br><span class=\"line\"></span><br><span class=\"line\">        rate_number = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'rating'</span>).find(<span class=\"string\">'span'</span>, class_=<span class=\"string\">''</span>).get_text().strip()[<span class=\"number\">1</span>:<span class=\"number\">-4</span>]</span><br><span class=\"line\">        book_map[<span class=\"string\">'rate_number'</span>] = rate_number</span><br><span class=\"line\"></span><br><span class=\"line\">        tmp = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'abstract'</span>).get_text().strip()</span><br><span class=\"line\">        m = author_pattern.match(tmp)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> m <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">            author = m.group(<span class=\"number\">1</span>)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> author <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">                author = <span class=\"string\">''</span></span><br><span class=\"line\">            publisher = m.group(<span class=\"number\">3</span>)</span><br><span class=\"line\">            publish_date = m.group(<span class=\"number\">4</span>)</span><br><span class=\"line\">            book_map[<span class=\"string\">'author'</span>] = author</span><br><span class=\"line\">            book_map[<span class=\"string\">'publisher'</span>] = publisher</span><br><span class=\"line\">            book_map[<span class=\"string\">'publish_date'</span>] = publish_date</span><br><span class=\"line\"></span><br><span class=\"line\">        pic_link = book.find(<span class=\"string\">'div'</span>, class_=<span class=\"string\">'post'</span>).a.img[<span class=\"string\">'src'</span>]</span><br><span class=\"line\">        book_map[<span class=\"string\">'pic_link'</span>] = pic_link</span><br><span class=\"line\">        list.append(book_map)</span><br><span class=\"line\">        logging.info(<span class=\"string\">\"%s%s%s%s%s%s%s\"</span>,</span><br><span class=\"line\">                     book_name, author, rate_point, rate_number, publisher, publish_date, pic_link)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> list</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># csv</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">save_to_csv</span><span class=\"params\">(filename, books)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">with</span> open(filename, <span class=\"string\">'a'</span>, newline=<span class=\"string\">''</span>, encoding=<span class=\"string\">'utf-8'</span>) <span class=\"keyword\">as</span> file:</span><br><span class=\"line\">        writer = csv.DictWriter(file, fieldnames=books[<span class=\"number\">0</span>].keys())</span><br><span class=\"line\">        <span class=\"keyword\">for</span> tmp_book <span class=\"keyword\">in</span> books:</span><br><span class=\"line\">            writer.writerow(tmp_book)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_proxies</span><span class=\"params\">(proxy_url, dis_url, page=<span class=\"number\">10</span>)</span>:</span></span><br><span class=\"line\">    proxy_list = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, page + <span class=\"number\">1</span>):</span><br><span class=\"line\">        tmp_ua = UserAgent()</span><br><span class=\"line\">        tmp_headers = &#123;<span class=\"string\">'User-Agent'</span>: tmp_ua.random&#125;</span><br><span class=\"line\">        html_str = get_web_data(proxy_url + str(i), tmp_headers)</span><br><span class=\"line\">        soup = BeautifulSoup(html_str.content, <span class=\"string\">\"lxml\"</span>)</span><br><span class=\"line\">        ips = soup.find(<span class=\"string\">'tbody'</span>).find_all(<span class=\"string\">'tr'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> ip_info <span class=\"keyword\">in</span> ips:</span><br><span class=\"line\">            tds = ip_info.find_all(<span class=\"string\">'td'</span>)</span><br><span class=\"line\">            ip = tds[<span class=\"number\">0</span>].get_text()</span><br><span class=\"line\">            port = tds[<span class=\"number\">1</span>].get_text()</span><br><span class=\"line\">            ip_str = ip + <span class=\"string\">\":\"</span> + port</span><br><span class=\"line\">            tmp = &#123;<span class=\"string\">\"http\"</span>: <span class=\"string\">\"http://\"</span> + ip_str&#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> check_proxy(dis_url, tmp):</span><br><span class=\"line\">                logging.info(<span class=\"string\">\"ip:%s is available\"</span>, ip_str)</span><br><span class=\"line\">                proxy_list.append(ip_str)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> proxy_list</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ip</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">check_proxy</span><span class=\"params\">(url, proxy)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        tmp_ua = UserAgent()</span><br><span class=\"line\">        tmp_headers = &#123;<span class=\"string\">'User-Agent'</span>: tmp_ua.random&#125;</span><br><span class=\"line\">        res = requests.get(url, proxies=proxy, timeout=<span class=\"number\">1</span>, headers=tmp_headers)</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_random_ip</span><span class=\"params\">(ip_list)</span>:</span></span><br><span class=\"line\">    proxy = random.choice(ip_list)</span><br><span class=\"line\">    proxies = &#123;<span class=\"string\">'http'</span>: <span class=\"string\">'http://'</span> + proxy&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> proxies</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    logging.basicConfig(level=logging.INFO)</span><br><span class=\"line\">    url = <span class=\"string\">'https://www.douban.com/doulist/1264675/?start='</span></span><br><span class=\"line\">    file_path = os.path.dirname(os.path.realpath(__file__)) + os.sep + <span class=\"string\">'douban.csv'</span></span><br><span class=\"line\">    f = open(file_path, <span class=\"string\">'w'</span>)</span><br><span class=\"line\">    f.close()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># </span></span><br><span class=\"line\">    proxies = get_proxies(<span class=\"string\">\"https://www.kuaidaili.com/free/intr/\"</span>, url, <span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># headers</span></span><br><span class=\"line\">    ua = UserAgent()</span><br><span class=\"line\"></span><br><span class=\"line\">    result_list = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> num <span class=\"keyword\">in</span> range(<span class=\"number\">0</span>, <span class=\"number\">530</span>, <span class=\"number\">25</span>):</span><br><span class=\"line\">        headers = &#123;<span class=\"string\">'User-Agent'</span>: ua.random&#125;</span><br><span class=\"line\">        logging.info(<span class=\"string\">'headers:%s'</span>, headers)</span><br><span class=\"line\">        data = get_web_data(url + str(num), headers, get_random_ip(proxies))</span><br><span class=\"line\">        book = parse_data(data)</span><br><span class=\"line\">        save_to_csv(file_path, book)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/30/5cc802f79be50.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/30/5cc803435c659.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/30/5cc802e26a2d5.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>github<a href=\"https://github.com/MFrank2016/douban_spider\" target=\"_blank\" rel=\"noopener\">https://github.com/MFrank2016/douban_spider</a></p>\n<p>importlxml</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<ol>\n<li>ip</li>\n<li>UA</li>\n<li>ip</li>\n<li></li>\n<li>/</li>\n</ol>\n<p>ipipip22</p>\n<p></p>\n<p> BeautifulSoup </p>\n<p>pythonpython BeautifulSoup </p>\n<p>pythonjava</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c8255c88946b.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>"},{"title":"Springbeanabstract  parent ","date":"2019-04-22T13:08:55.000Z","categorys":["Spring"],"_content":"\n## abstract \n\n`abstract` javaSpringbean `abstract` beanbean\n\nbean\n\n![](https://i.loli.net/2019/03/14/5c89ad2f033c1.png)\n\n`abstract` \n\n## parent \n\n `parent` beanemmm\n\n```xml\n<bean id=\"abstractBean\" class=\"com.frank.spring.bean.parent.ParentBean\" abstract=\"true\">\n    <property name=\"name\" value=\"Frank\" />\n    <property name=\"age\" value=\"18\" />\n</bean>\n\n<bean id=\"childBean\" class=\"com.frank.spring.bean.parent.ChildBean\" parent=\"abstractBean\">\n    <property name=\"name\" value=\"son\"/>\n    <property name=\"height\" value=\"180\"/>\n</bean>\n```\n\nbeanbean`childBean`nameheightxml`parent``abstractBean`age18beanbeannamechildBean\n\n![](https://i.loli.net/2019/04/22/5cbdbe8bb22cd.png)\n\n\n\n```java\n@Test\npublic void testAbstract() {\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n    ChildBean childBean = (ChildBean) context.getBean(\"childBean\");\n    Assert.assertEquals(childBean.getName(), \"son\");\n    Assert.assertEquals(childBean.getAge(), Integer.valueOf(18));\n    Assert.assertEquals(childBean.getHeight(), Integer.valueOf(180));\n}\n```\n\nParentBeanChildBean\n\n```java\npublic class ParentBean {\n    private String name;\n    private Integer age;\n\n    //gettersetter\n}\n\npublic class ChildBean {\n    private String name;\n    private Integer age;\n    private Integer height;\n\n    //gettersetter\n}\n```\n\n`parent`bean\n\n```xml\n<bean id=\"abstractParent\" abstract=\"true\">\n    <property name=\"name\" value=\"Frank\" />\n    <property name=\"age\" value=\"18\" />\n</bean>\n\n<bean id=\"testChild\" class=\"com.frank.spring.bean.parent.ChildBean\" parent=\"abstractParent\">\n    <property name=\"name\" value=\"son\"/>\n    <property name=\"height\" value=\"180\"/>\n</bean>\n```\n\n```java\n@Test\npublic void testAbstractParent() {\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n    ChildBean childBean = (ChildBean) context.getBean(\"testChild\");\n    Assert.assertEquals(childBean.getName(), \"son\");\n    Assert.assertEquals(childBean.getAge(), Integer.valueOf(18));\n    Assert.assertEquals(childBean.getHeight(), Integer.valueOf(180));\n}\n```\n\n`abstractParent``parent`\n\n## abstract \n\nSpring `abstract` bean\n\n```xml\n<bean id=\"abstractBean\" class=\"com.frank.spring.bean.parent.ParentBean\" abstract=\"true\">\n    <property name=\"name\" value=\"Frank\" />\n    <property name=\"age\" value=\"18\" />\n</bean>\n\n<bean id=\"childA\" class=\"com.frank.spring.bean.parent.ChildBean\" parent=\"abstractBean\">\n    <property name=\"name\" value=\"GG\"/>\n    <property name=\"height\" value=\"180\"/>\n</bean>\n\n<bean id=\"childB\" class=\"com.frank.spring.bean.parent.ChildBean\" parent=\"abstractBean\">\n    <property name=\"name\" value=\"DD\"/>\n    <property name=\"height\" value=\"185\"/>\n</bean>\n```\n\n`abstractBean`abstractBean\n\n## \n\n`abstract`  `parent` xmlbeanbeanxml\n\n`parent`bean`parent`bean\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","source":"_posts/java/spring/source-code-analysis/spring-bean-attribute-abstract.md","raw":"---\ntitle: Springbeanabstract  parent \ndate: 2019-04-22 21:08:55\ntags:\n- Spring\n- \ncategorys:\n- Spring\n---\n\n## abstract \n\n`abstract` javaSpringbean `abstract` beanbean\n\nbean\n\n![](https://i.loli.net/2019/03/14/5c89ad2f033c1.png)\n\n`abstract` \n\n## parent \n\n `parent` beanemmm\n\n```xml\n<bean id=\"abstractBean\" class=\"com.frank.spring.bean.parent.ParentBean\" abstract=\"true\">\n    <property name=\"name\" value=\"Frank\" />\n    <property name=\"age\" value=\"18\" />\n</bean>\n\n<bean id=\"childBean\" class=\"com.frank.spring.bean.parent.ChildBean\" parent=\"abstractBean\">\n    <property name=\"name\" value=\"son\"/>\n    <property name=\"height\" value=\"180\"/>\n</bean>\n```\n\nbeanbean`childBean`nameheightxml`parent``abstractBean`age18beanbeannamechildBean\n\n![](https://i.loli.net/2019/04/22/5cbdbe8bb22cd.png)\n\n\n\n```java\n@Test\npublic void testAbstract() {\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n    ChildBean childBean = (ChildBean) context.getBean(\"childBean\");\n    Assert.assertEquals(childBean.getName(), \"son\");\n    Assert.assertEquals(childBean.getAge(), Integer.valueOf(18));\n    Assert.assertEquals(childBean.getHeight(), Integer.valueOf(180));\n}\n```\n\nParentBeanChildBean\n\n```java\npublic class ParentBean {\n    private String name;\n    private Integer age;\n\n    //gettersetter\n}\n\npublic class ChildBean {\n    private String name;\n    private Integer age;\n    private Integer height;\n\n    //gettersetter\n}\n```\n\n`parent`bean\n\n```xml\n<bean id=\"abstractParent\" abstract=\"true\">\n    <property name=\"name\" value=\"Frank\" />\n    <property name=\"age\" value=\"18\" />\n</bean>\n\n<bean id=\"testChild\" class=\"com.frank.spring.bean.parent.ChildBean\" parent=\"abstractParent\">\n    <property name=\"name\" value=\"son\"/>\n    <property name=\"height\" value=\"180\"/>\n</bean>\n```\n\n```java\n@Test\npublic void testAbstractParent() {\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n    ChildBean childBean = (ChildBean) context.getBean(\"testChild\");\n    Assert.assertEquals(childBean.getName(), \"son\");\n    Assert.assertEquals(childBean.getAge(), Integer.valueOf(18));\n    Assert.assertEquals(childBean.getHeight(), Integer.valueOf(180));\n}\n```\n\n`abstractParent``parent`\n\n## abstract \n\nSpring `abstract` bean\n\n```xml\n<bean id=\"abstractBean\" class=\"com.frank.spring.bean.parent.ParentBean\" abstract=\"true\">\n    <property name=\"name\" value=\"Frank\" />\n    <property name=\"age\" value=\"18\" />\n</bean>\n\n<bean id=\"childA\" class=\"com.frank.spring.bean.parent.ChildBean\" parent=\"abstractBean\">\n    <property name=\"name\" value=\"GG\"/>\n    <property name=\"height\" value=\"180\"/>\n</bean>\n\n<bean id=\"childB\" class=\"com.frank.spring.bean.parent.ChildBean\" parent=\"abstractBean\">\n    <property name=\"name\" value=\"DD\"/>\n    <property name=\"height\" value=\"185\"/>\n</bean>\n```\n\n`abstractBean`abstractBean\n\n## \n\n`abstract`  `parent` xmlbeanbeanxml\n\n`parent`bean`parent`bean\n\n\n\n![](https://i.loli.net/2019/03/14/5c8a58ba229ca.png)","slug":"java/spring/source-code-analysis/spring-bean-attribute-abstract","published":1,"updated":"2019-06-04T01:29:57.416Z","_id":"cjxze3h0g00810cvwbwcrrdjh","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"abstract-\"><a href=\"#abstract-\" class=\"headerlink\" title=\"abstract \"></a>abstract </h2><p><code>abstract</code> javaSpringbean <code>abstract</code> beanbean</p>\n<p>bean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c89ad2f033c1.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>abstract</code> </p>\n<h2 id=\"parent-\"><a href=\"#parent-\" class=\"headerlink\" title=\"parent \"></a>parent </h2><p> <code>parent</code> beanemmm</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"abstractBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ParentBean\"</span> <span class=\"attr\">abstract</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Frank\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"18\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"childBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ChildBean\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractBean\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"son\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"height\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"180\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>beanbean<code>childBean</code>nameheightxml<code>parent</code><code>abstractBean</code>age18beanbeannamechildBean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/22/5cbdbe8bb22cd.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testAbstract</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    ApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">    ChildBean childBean = (ChildBean) context.getBean(<span class=\"string\">\"childBean\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(childBean.getName(), <span class=\"string\">\"son\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(childBean.getAge(), Integer.valueOf(<span class=\"number\">18</span>));</span><br><span class=\"line\">    Assert.assertEquals(childBean.getHeight(), Integer.valueOf(<span class=\"number\">180</span>));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ParentBeanChildBean</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ParentBean</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//gettersetter</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChildBean</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer height;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//gettersetter</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>parent</code>bean</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"abstractParent\"</span> <span class=\"attr\">abstract</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Frank\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"18\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testChild\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ChildBean\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractParent\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"son\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"height\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"180\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testAbstractParent</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    ApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">    ChildBean childBean = (ChildBean) context.getBean(<span class=\"string\">\"testChild\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(childBean.getName(), <span class=\"string\">\"son\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(childBean.getAge(), Integer.valueOf(<span class=\"number\">18</span>));</span><br><span class=\"line\">    Assert.assertEquals(childBean.getHeight(), Integer.valueOf(<span class=\"number\">180</span>));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>abstractParent</code><code>parent</code></p>\n<h2 id=\"abstract-\"><a href=\"#abstract-\" class=\"headerlink\" title=\"abstract \"></a>abstract </h2><p>Spring <code>abstract</code> bean</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"abstractBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ParentBean\"</span> <span class=\"attr\">abstract</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Frank\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"18\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"childA\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ChildBean\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractBean\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"GG\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"height\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"180\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"childB\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ChildBean\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractBean\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"DD\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"height\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"185\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>abstractBean</code>abstractBean</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>abstract</code>  <code>parent</code> xmlbeanbeanxml</p>\n<p><code>parent</code>bean<code>parent</code>bean</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"abstract-\"><a href=\"#abstract-\" class=\"headerlink\" title=\"abstract \"></a>abstract </h2><p><code>abstract</code> javaSpringbean <code>abstract</code> beanbean</p>\n<p>bean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c89ad2f033c1.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>abstract</code> </p>\n<h2 id=\"parent-\"><a href=\"#parent-\" class=\"headerlink\" title=\"parent \"></a>parent </h2><p> <code>parent</code> beanemmm</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"abstractBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ParentBean\"</span> <span class=\"attr\">abstract</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Frank\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"18\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"childBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ChildBean\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractBean\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"son\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"height\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"180\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>beanbean<code>childBean</code>nameheightxml<code>parent</code><code>abstractBean</code>age18beanbeannamechildBean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/04/22/5cbdbe8bb22cd.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testAbstract</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    ApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">    ChildBean childBean = (ChildBean) context.getBean(<span class=\"string\">\"childBean\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(childBean.getName(), <span class=\"string\">\"son\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(childBean.getAge(), Integer.valueOf(<span class=\"number\">18</span>));</span><br><span class=\"line\">    Assert.assertEquals(childBean.getHeight(), Integer.valueOf(<span class=\"number\">180</span>));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ParentBeanChildBean</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ParentBean</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//gettersetter</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChildBean</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer height;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//gettersetter</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>parent</code>bean</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"abstractParent\"</span> <span class=\"attr\">abstract</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Frank\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"18\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testChild\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ChildBean\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractParent\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"son\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"height\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"180\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testAbstractParent</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    ApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">    ChildBean childBean = (ChildBean) context.getBean(<span class=\"string\">\"testChild\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(childBean.getName(), <span class=\"string\">\"son\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(childBean.getAge(), Integer.valueOf(<span class=\"number\">18</span>));</span><br><span class=\"line\">    Assert.assertEquals(childBean.getHeight(), Integer.valueOf(<span class=\"number\">180</span>));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>abstractParent</code><code>parent</code></p>\n<h2 id=\"abstract-\"><a href=\"#abstract-\" class=\"headerlink\" title=\"abstract \"></a>abstract </h2><p>Spring <code>abstract</code> bean</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"abstractBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ParentBean\"</span> <span class=\"attr\">abstract</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Frank\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"age\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"18\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"childA\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ChildBean\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractBean\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"GG\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"height\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"180\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"childB\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.parent.ChildBean\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractBean\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"DD\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"height\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"185\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>abstractBean</code>abstractBean</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>abstract</code>  <code>parent</code> xmlbeanbeanxml</p>\n<p><code>parent</code>bean<code>parent</code>bean</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/14/5c8a58ba229ca.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>"},{"title":"Springbeanscope ","date":"2019-03-05T13:28:43.000Z","categorys":["Spring"],"_content":"\n## scope \n\nspringxml`bean``scope``bean``singleton``prototype``request``session``global session`scope\n\nemmm\n\n![](https://i.loli.net/2019/03/07/5c8073af8fd16.png)\n\nscope\n\n![](https://i.loli.net/2019/03/07/5c80742434d0e.png)\n\n\n\n### singleton\n\n`singleton`scopebeanscope`singleton`beanbeanidbeanbean\n\n`ClassLoader`\n\n`double-check`\n\n```java\npublic class Singleton{\n    private static volatile Singleton FRANK;\n\n    public static Singleton getInstance(){\n        if (FRANK == null){\n            synchronized(this){\n                if (FRANK == null) FRANK = new Singleton();\n            }\n        }\n        return FRANK;\n    }\n}\n```\n\nSpring`singleton`IOCbeanIOC`ClassLoader`IOCbean\n\n![20190307095059.png](https://i.loli.net/2019/03/07/5c8079052f7de.png)\n\n\n\n\n\n```java\npublic class TestScope {\n\t@Test\n\tpublic void testSingleton(){\n\t\tApplicationContext context = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n\t\tTestBean bean = (TestBean) context.getBean(\"testBean\");\n\t\tAssert.assertEquals(bean.getNum() , 0);\n\t\tbean.add();\n\t\tAssert.assertEquals(bean.getNum() , 1);\n\n\t\tTestBean bean1 = (TestBean) context.getBean(\"testBean\");\n\t\tAssert.assertEquals(bean1.getNum() , 1);\n\t\tbean1.add();\n\t\tAssert.assertEquals(bean1.getNum() , 2);\n\n\t\tApplicationContext context1 = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n\t\tTestBean bean2 = (TestBean) context1.getBean(\"testBean\");\n\t\tAssert.assertEquals(bean2.getNum() , 0);\n\t\tbean2.add();\n\t\tAssert.assertEquals(bean2.getNum() , 1);\n\t}\n}\n```\n\n```java\npublic class TestBean {\n\tprivate int num;\n\n\tpublic int getNum() {\n\t\treturn num;\n\t}\n\n\tpublic void setNum(int num) {\n\t\tthis.num = num;\n\t}\n\n\tpublic void add(){\n\t\tnum++;\n\t}\n}\n```\n\n`test-bean.xml`\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE beans PUBLIC \"-//SPRING//DTD BEAN 2.0//EN\" \"http://www.springframework.org/dtd/spring-beans-2.0.dtd\">\n\n<beans>\n\t<bean id=\"testBean\" class=\"com.frank.spring.bean.scope.TestBean\" scope=\"singleton\"/>\n</beans>\n```\n\n`testBean``scope``singleton``bean``bean1`IOCbean`bean``bean1`addnum2`bean2`IOC`num`0`add`num1`singleton`IOC\n\n### prototype\n\nscope`prototype``singleton``prototype`bean`getBean`bean\n\n![20190307191454.png](https://i.loli.net/2019/03/07/5c80fd2fc8df9.png)\n\n`scope`Spring`prototype`beanbean`prototype-bean``prototype-bean`bean`prototype-bean`destroySpring`prototype-bean`  `new` \n\n\n\nxml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE beans PUBLIC \"-//SPRING//DTD BEAN 2.0//EN\" \"http://www.springframework.org/dtd/spring-beans-2.0.dtd\">\n\n<beans>\n\t<bean id=\"testBean\" class=\"com.frank.spring.bean.scope.TestBean\" scope=\"prototype\"/>\n</beans>\n```\n\n```java\n@Test\npublic void testPrototype(){\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n    TestBean bean = (TestBean) context.getBean(\"testBean\");\n    Assert.assertEquals(bean.getNum() , 0);\n    bean.add();\n    Assert.assertEquals(bean.getNum() , 1);\n\n    TestBean bean1 = (TestBean) context.getBean(\"testBean\");\n    Assert.assertEquals(bean1.getNum() , 0);\n    bean1.add();\n    Assert.assertEquals(bean1.getNum() , 1);\n}\n```\n\nIOC`testBean`bean`prototype`\n\n\n\nTestBean\n\n```java\npublic class TestBean {\n\tprivate int num;\n\n\tpublic void init(){\n\t\tSystem.out.println(\"init TestBean\");\n\t}\n\n\tpublic void destroy(){\n\t\tSystem.out.println(\"destroy TestBean\");\n\t}\n\n\tpublic int getNum() {\n\t\treturn num;\n\t}\n\n\tpublic void setNum(int num) {\n\t\tthis.num = num;\n\t}\n\n\tpublic void add(){\n\t\tnum++;\n\t}\n}\n```\n\n\n\n```xml\n<beans>\n\t<bean id=\"testBean\" class=\"com.frank.spring.bean.scope.TestBean\" scope=\"prototype\"  init-method=\"init\"  destroy-method=\"destroy\"/>\n</beans>\n```\n\n\n\n```java\n@Test\npublic void testPrototype(){\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n    TestBean bean = (TestBean) context.getBean(\"testBean\");\n    Assert.assertEquals(bean.getNum() , 0);\n    bean.add();\n    Assert.assertEquals(bean.getNum() , 1);\n\n    TestBean bean1 = (TestBean) context.getBean(\"testBean\");\n    Assert.assertEquals(bean1.getNum() , 0);\n    bean1.add();\n    Assert.assertEquals(bean1.getNum() , 1);\n}\n```\n\n\n\n```\ninit TestBean\ninit TestBean\n```\n\n`init``destroy``prototype-bean`xml`destroy-method`bean\n\n![](https://i.loli.net/2019/03/07/5c81044d154bf.png)\n\n`prototype-bean``singleton-bean``singleton-bean``prototype-bean`\n\n## Request && Session && Application && WebSocket Scopes\n\n![](https://i.loli.net/2019/03/07/5c8106f6ae617.png)\n\n`request`  `session`  `application`  `websocket` scope\n\nscopeweb `ClassPathXmlApplicationContext` bean\n\n```java\njava.lang.IllegalStateException: No Scope registered for scope name 'request'\n```\n\n\n\n### request\n\nscope `request` beanbeanbeanspringbootxml\n\n```java\n@Configuration\n@ImportResource(locations = {\"classpath:application-bean.xml\"})\npublic class WebConfiguration {\n}\n```\n\nxml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\">\n    <bean id=\"testBean\" class=\"com.frank.springboothello.model.TestBean\" scope=\"request\" >\n        <aop:scoped-proxy/>\n    </bean>\n</beans>\n```\n\ncontroller\n\n```java\n@RestController\npublic class HelloController {\n\n    @Autowired\n    private TestBean testBean;\n\n    @Autowired\n    private TestBean testBean1;\n\n    @GetMapping(\"/testBean\")\n    public void testBean(){\n        System.out.println(\"==========request start==========\");\n        System.out.println(testBean.getNum());\n        testBean.add();\n        System.out.println(testBean.getNum());\n        System.out.println(testBean1.getNum());\n        testBean1.add();\n        System.out.println(testBean1.getNum());\n        System.out.println(\"==========request end==========\");\n    }\n}\n```\n\nTestBean\n\n```xml\n<aop:scoped-proxy/>\n```\n\n![20190308093050.png](https://i.loli.net/2019/03/08/5c81c5cc0999a.png)\n\n\n\nbeanbean`CGLib`Beanpublic`request``TestBean`\n\n\n\nbean`testBean`bean`HelloController`bean`HelloController``singleton``request-bean``singleton-bean``testBean``HelloController` `Http Request` `testBean`\n\n`scope``prototype`bean`<aop:scoped-proxy/>`bean\n\n![](https://i.loli.net/2019/03/08/5c8254687adf6.png)\n\n`CGLib``public``private``JDK`aop`proxy-target-class`false\n\n```xml\n<aop:scoped-proxy proxy-target-class=\"false\"/>\n```\n\nbean\n\n\n\n![20190308092733.png](https://i.loli.net/2019/03/08/5c81c5066975f.png)\n\n\n`http://127.0.0.1:8080/testBean`\n\n```java\n==========request start==========\n0\n1\n1\n2\n==========request end==========\n==========request start==========\n0\n1\n1\n2\n==========request end==========\n```\n\n\n\n### session\n\n`request`bean\n\nxml\n\n```xml\n<bean id=\"testBean\" class=\"com.frank.springboothello.model.TestBean\" scope=\"session\" >\n    <aop:scoped-proxy/>\n</bean>\n```\n\n\n\n```java\n==========request start==========\n0\n1\n1\n2\n==========request end==========\n==========request start==========\n2\n3\n3\n4\n==========request end==========\n==========request start==========\n4\n5\n5\n6\n==========request end==========\n```\n\nnumbean\n\n\n\n```java\n==========request start==========\n0\n1\n1\n2\n==========request end==========\n==========request start==========\n2\n3\n3\n4\n==========request end==========\n```\n\nnum0`session`\n\n### application\n\n`application``session``session` `Http Session`a`pplication` `ServletContext`  `singleton``singleton`IOCwebIOCWeb `ServletContext` `application` web\n\n![](https://i.loli.net/2019/03/08/5c8215620925e.png)\n\nxml\n\n```xml\n<bean id=\"testBean\" class=\"com.frank.springboothello.model.TestBean\" scope=\"application\" >\n    <aop:scoped-proxy/>\n</bean>\n```\n\n\n\n```java\n==========request start==========\n0\n1\n1\n2\n==========request end==========\n==========request start==========\n2\n3\n3\n4\n==========request end==========\n==========request start==========\n4\n5\n5\n6\n==========request end==========\n```\n\n\n\n```java\n==========request start==========\n6\n7\n7\n8\n==========request end==========\n==========request start==========\n8\n9\n9\n10\n==========request end==========\n```\n\n\n\n![](https://i.loli.net/2019/03/08/5c82552a6af48.png)\n\n### websocket\n\n`websocket`  `WebSocket`  `WebSocket` \n\nemmmm\n\n![](https://i.loli.net/2019/03/08/5c824b40b64cd.png)\n\n### global session\n\n `global session` \n\n5.2.0.BUILD-SNAPSHOT`global session`\n\nscope\n\n![20190308191406.png](https://i.loli.net/2019/03/08/5c824e7fcae16.png)\n\n## \n\n scope \n\n1. singletonIOC\n2. prototypeIOC\n3. request Http Request\n4. session Http Session\n5. applicationWEBWeb\n6. websocketWebSocket\n\n\n\n\n\n![](https://i.loli.net/2019/03/08/5c8255c88946b.png)","source":"_posts/java/spring/source-code-analysis/spring-bean-attribute-scope.md","raw":"---\ntitle: Springbeanscope \ndate: 2019-03-05 21:28:43\ntags:\n- Spring\n- \ncategorys:\n- Spring\n---\n\n## scope \n\nspringxml`bean``scope``bean``singleton``prototype``request``session``global session`scope\n\nemmm\n\n![](https://i.loli.net/2019/03/07/5c8073af8fd16.png)\n\nscope\n\n![](https://i.loli.net/2019/03/07/5c80742434d0e.png)\n\n\n\n### singleton\n\n`singleton`scopebeanscope`singleton`beanbeanidbeanbean\n\n`ClassLoader`\n\n`double-check`\n\n```java\npublic class Singleton{\n    private static volatile Singleton FRANK;\n\n    public static Singleton getInstance(){\n        if (FRANK == null){\n            synchronized(this){\n                if (FRANK == null) FRANK = new Singleton();\n            }\n        }\n        return FRANK;\n    }\n}\n```\n\nSpring`singleton`IOCbeanIOC`ClassLoader`IOCbean\n\n![20190307095059.png](https://i.loli.net/2019/03/07/5c8079052f7de.png)\n\n\n\n\n\n```java\npublic class TestScope {\n\t@Test\n\tpublic void testSingleton(){\n\t\tApplicationContext context = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n\t\tTestBean bean = (TestBean) context.getBean(\"testBean\");\n\t\tAssert.assertEquals(bean.getNum() , 0);\n\t\tbean.add();\n\t\tAssert.assertEquals(bean.getNum() , 1);\n\n\t\tTestBean bean1 = (TestBean) context.getBean(\"testBean\");\n\t\tAssert.assertEquals(bean1.getNum() , 1);\n\t\tbean1.add();\n\t\tAssert.assertEquals(bean1.getNum() , 2);\n\n\t\tApplicationContext context1 = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n\t\tTestBean bean2 = (TestBean) context1.getBean(\"testBean\");\n\t\tAssert.assertEquals(bean2.getNum() , 0);\n\t\tbean2.add();\n\t\tAssert.assertEquals(bean2.getNum() , 1);\n\t}\n}\n```\n\n```java\npublic class TestBean {\n\tprivate int num;\n\n\tpublic int getNum() {\n\t\treturn num;\n\t}\n\n\tpublic void setNum(int num) {\n\t\tthis.num = num;\n\t}\n\n\tpublic void add(){\n\t\tnum++;\n\t}\n}\n```\n\n`test-bean.xml`\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE beans PUBLIC \"-//SPRING//DTD BEAN 2.0//EN\" \"http://www.springframework.org/dtd/spring-beans-2.0.dtd\">\n\n<beans>\n\t<bean id=\"testBean\" class=\"com.frank.spring.bean.scope.TestBean\" scope=\"singleton\"/>\n</beans>\n```\n\n`testBean``scope``singleton``bean``bean1`IOCbean`bean``bean1`addnum2`bean2`IOC`num`0`add`num1`singleton`IOC\n\n### prototype\n\nscope`prototype``singleton``prototype`bean`getBean`bean\n\n![20190307191454.png](https://i.loli.net/2019/03/07/5c80fd2fc8df9.png)\n\n`scope`Spring`prototype`beanbean`prototype-bean``prototype-bean`bean`prototype-bean`destroySpring`prototype-bean`  `new` \n\n\n\nxml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE beans PUBLIC \"-//SPRING//DTD BEAN 2.0//EN\" \"http://www.springframework.org/dtd/spring-beans-2.0.dtd\">\n\n<beans>\n\t<bean id=\"testBean\" class=\"com.frank.spring.bean.scope.TestBean\" scope=\"prototype\"/>\n</beans>\n```\n\n```java\n@Test\npublic void testPrototype(){\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n    TestBean bean = (TestBean) context.getBean(\"testBean\");\n    Assert.assertEquals(bean.getNum() , 0);\n    bean.add();\n    Assert.assertEquals(bean.getNum() , 1);\n\n    TestBean bean1 = (TestBean) context.getBean(\"testBean\");\n    Assert.assertEquals(bean1.getNum() , 0);\n    bean1.add();\n    Assert.assertEquals(bean1.getNum() , 1);\n}\n```\n\nIOC`testBean`bean`prototype`\n\n\n\nTestBean\n\n```java\npublic class TestBean {\n\tprivate int num;\n\n\tpublic void init(){\n\t\tSystem.out.println(\"init TestBean\");\n\t}\n\n\tpublic void destroy(){\n\t\tSystem.out.println(\"destroy TestBean\");\n\t}\n\n\tpublic int getNum() {\n\t\treturn num;\n\t}\n\n\tpublic void setNum(int num) {\n\t\tthis.num = num;\n\t}\n\n\tpublic void add(){\n\t\tnum++;\n\t}\n}\n```\n\n\n\n```xml\n<beans>\n\t<bean id=\"testBean\" class=\"com.frank.spring.bean.scope.TestBean\" scope=\"prototype\"  init-method=\"init\"  destroy-method=\"destroy\"/>\n</beans>\n```\n\n\n\n```java\n@Test\npublic void testPrototype(){\n    ApplicationContext context = new ClassPathXmlApplicationContext(\"test-bean.xml\");\n    TestBean bean = (TestBean) context.getBean(\"testBean\");\n    Assert.assertEquals(bean.getNum() , 0);\n    bean.add();\n    Assert.assertEquals(bean.getNum() , 1);\n\n    TestBean bean1 = (TestBean) context.getBean(\"testBean\");\n    Assert.assertEquals(bean1.getNum() , 0);\n    bean1.add();\n    Assert.assertEquals(bean1.getNum() , 1);\n}\n```\n\n\n\n```\ninit TestBean\ninit TestBean\n```\n\n`init``destroy``prototype-bean`xml`destroy-method`bean\n\n![](https://i.loli.net/2019/03/07/5c81044d154bf.png)\n\n`prototype-bean``singleton-bean``singleton-bean``prototype-bean`\n\n## Request && Session && Application && WebSocket Scopes\n\n![](https://i.loli.net/2019/03/07/5c8106f6ae617.png)\n\n`request`  `session`  `application`  `websocket` scope\n\nscopeweb `ClassPathXmlApplicationContext` bean\n\n```java\njava.lang.IllegalStateException: No Scope registered for scope name 'request'\n```\n\n\n\n### request\n\nscope `request` beanbeanbeanspringbootxml\n\n```java\n@Configuration\n@ImportResource(locations = {\"classpath:application-bean.xml\"})\npublic class WebConfiguration {\n}\n```\n\nxml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\">\n    <bean id=\"testBean\" class=\"com.frank.springboothello.model.TestBean\" scope=\"request\" >\n        <aop:scoped-proxy/>\n    </bean>\n</beans>\n```\n\ncontroller\n\n```java\n@RestController\npublic class HelloController {\n\n    @Autowired\n    private TestBean testBean;\n\n    @Autowired\n    private TestBean testBean1;\n\n    @GetMapping(\"/testBean\")\n    public void testBean(){\n        System.out.println(\"==========request start==========\");\n        System.out.println(testBean.getNum());\n        testBean.add();\n        System.out.println(testBean.getNum());\n        System.out.println(testBean1.getNum());\n        testBean1.add();\n        System.out.println(testBean1.getNum());\n        System.out.println(\"==========request end==========\");\n    }\n}\n```\n\nTestBean\n\n```xml\n<aop:scoped-proxy/>\n```\n\n![20190308093050.png](https://i.loli.net/2019/03/08/5c81c5cc0999a.png)\n\n\n\nbeanbean`CGLib`Beanpublic`request``TestBean`\n\n\n\nbean`testBean`bean`HelloController`bean`HelloController``singleton``request-bean``singleton-bean``testBean``HelloController` `Http Request` `testBean`\n\n`scope``prototype`bean`<aop:scoped-proxy/>`bean\n\n![](https://i.loli.net/2019/03/08/5c8254687adf6.png)\n\n`CGLib``public``private``JDK`aop`proxy-target-class`false\n\n```xml\n<aop:scoped-proxy proxy-target-class=\"false\"/>\n```\n\nbean\n\n\n\n![20190308092733.png](https://i.loli.net/2019/03/08/5c81c5066975f.png)\n\n\n`http://127.0.0.1:8080/testBean`\n\n```java\n==========request start==========\n0\n1\n1\n2\n==========request end==========\n==========request start==========\n0\n1\n1\n2\n==========request end==========\n```\n\n\n\n### session\n\n`request`bean\n\nxml\n\n```xml\n<bean id=\"testBean\" class=\"com.frank.springboothello.model.TestBean\" scope=\"session\" >\n    <aop:scoped-proxy/>\n</bean>\n```\n\n\n\n```java\n==========request start==========\n0\n1\n1\n2\n==========request end==========\n==========request start==========\n2\n3\n3\n4\n==========request end==========\n==========request start==========\n4\n5\n5\n6\n==========request end==========\n```\n\nnumbean\n\n\n\n```java\n==========request start==========\n0\n1\n1\n2\n==========request end==========\n==========request start==========\n2\n3\n3\n4\n==========request end==========\n```\n\nnum0`session`\n\n### application\n\n`application``session``session` `Http Session`a`pplication` `ServletContext`  `singleton``singleton`IOCwebIOCWeb `ServletContext` `application` web\n\n![](https://i.loli.net/2019/03/08/5c8215620925e.png)\n\nxml\n\n```xml\n<bean id=\"testBean\" class=\"com.frank.springboothello.model.TestBean\" scope=\"application\" >\n    <aop:scoped-proxy/>\n</bean>\n```\n\n\n\n```java\n==========request start==========\n0\n1\n1\n2\n==========request end==========\n==========request start==========\n2\n3\n3\n4\n==========request end==========\n==========request start==========\n4\n5\n5\n6\n==========request end==========\n```\n\n\n\n```java\n==========request start==========\n6\n7\n7\n8\n==========request end==========\n==========request start==========\n8\n9\n9\n10\n==========request end==========\n```\n\n\n\n![](https://i.loli.net/2019/03/08/5c82552a6af48.png)\n\n### websocket\n\n`websocket`  `WebSocket`  `WebSocket` \n\nemmmm\n\n![](https://i.loli.net/2019/03/08/5c824b40b64cd.png)\n\n### global session\n\n `global session` \n\n5.2.0.BUILD-SNAPSHOT`global session`\n\nscope\n\n![20190308191406.png](https://i.loli.net/2019/03/08/5c824e7fcae16.png)\n\n## \n\n scope \n\n1. singletonIOC\n2. prototypeIOC\n3. request Http Request\n4. session Http Session\n5. applicationWEBWeb\n6. websocketWebSocket\n\n\n\n\n\n![](https://i.loli.net/2019/03/08/5c8255c88946b.png)","slug":"java/spring/source-code-analysis/spring-bean-attribute-scope","published":1,"updated":"2019-06-04T01:29:57.422Z","_id":"cjxze3h0g00820cvwd3l93uzw","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"scope-\"><a href=\"#scope-\" class=\"headerlink\" title=\"scope \"></a>scope </h2><p>springxml<code>bean</code><code>scope</code><code>bean</code><code>singleton</code><code>prototype</code><code>request</code><code>session</code><code>global session</code>scope</p>\n<p>emmm</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c8073af8fd16.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>scope</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c80742434d0e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<h3 id=\"singleton\"><a href=\"#singleton\" class=\"headerlink\" title=\"singleton\"></a>singleton</h3><p><code>singleton</code>scopebeanscope<code>singleton</code>beanbeanidbeanbean</p>\n<p><code>ClassLoader</code></p>\n<p><code>double-check</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">volatile</span> Singleton FRANK;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (FRANK == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span>(<span class=\"keyword\">this</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (FRANK == <span class=\"keyword\">null</span>) FRANK = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> FRANK;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Spring<code>singleton</code>IOCbeanIOC<code>ClassLoader</code>IOCbean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c8079052f7de.png\" alt=\"20190307095059.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190307095059.png</div>\n            </figure>\n<p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestScope</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"meta\">@Test</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSingleton</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">\t\tTestBean bean = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">\t\tAssert.assertEquals(bean.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">\t\tbean.add();</span><br><span class=\"line\">\t\tAssert.assertEquals(bean.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tTestBean bean1 = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">\t\tAssert.assertEquals(bean1.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\">\t\tbean1.add();</span><br><span class=\"line\">\t\tAssert.assertEquals(bean1.getNum() , <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tApplicationContext context1 = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">\t\tTestBean bean2 = (TestBean) context1.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">\t\tAssert.assertEquals(bean2.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">\t\tbean2.add();</span><br><span class=\"line\">\t\tAssert.assertEquals(bean2.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestBean</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">int</span> num;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getNum</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> num;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNum</span><span class=\"params\">(<span class=\"keyword\">int</span> num)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.num = num;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tnum++;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>test-bean.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE beans PUBLIC \"-//SPRING//DTD BEAN 2.0//EN\" \"http://www.springframework.org/dtd/spring-beans-2.0.dtd\"&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.scope.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"singleton\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>testBean</code><code>scope</code><code>singleton</code><code>bean</code><code>bean1</code>IOCbean<code>bean</code><code>bean1</code>addnum2<code>bean2</code>IOC<code>num</code>0<code>add</code>num1<code>singleton</code>IOC</p>\n<h3 id=\"prototype\"><a href=\"#prototype\" class=\"headerlink\" title=\"prototype\"></a>prototype</h3><p>scope<code>prototype</code><code>singleton</code><code>prototype</code>bean<code>getBean</code>bean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c80fd2fc8df9.png\" alt=\"20190307191454.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190307191454.png</div>\n            </figure>\n<p><code>scope</code>Spring<code>prototype</code>beanbean<code>prototype-bean</code><code>prototype-bean</code>bean<code>prototype-bean</code>destroySpring<code>prototype-bean</code>  <code>new</code> </p>\n<p></p>\n<p>xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE beans PUBLIC \"-//SPRING//DTD BEAN 2.0//EN\" \"http://www.springframework.org/dtd/spring-beans-2.0.dtd\"&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.scope.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"prototype\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testPrototype</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    ApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">    TestBean bean = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(bean.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">    bean.add();</span><br><span class=\"line\">    Assert.assertEquals(bean.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    TestBean bean1 = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(bean1.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">    bean1.add();</span><br><span class=\"line\">    Assert.assertEquals(bean1.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>IOC<code>testBean</code>bean<code>prototype</code></p>\n<p></p>\n<p>TestBean</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestBean</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">int</span> num;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"init TestBean\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">destroy</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"destroy TestBean\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getNum</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> num;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNum</span><span class=\"params\">(<span class=\"keyword\">int</span> num)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.num = num;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tnum++;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.scope.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"prototype\"</span>  <span class=\"attr\">init-method</span>=<span class=\"string\">\"init\"</span>  <span class=\"attr\">destroy-method</span>=<span class=\"string\">\"destroy\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testPrototype</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    ApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">    TestBean bean = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(bean.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">    bean.add();</span><br><span class=\"line\">    Assert.assertEquals(bean.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    TestBean bean1 = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(bean1.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">    bean1.add();</span><br><span class=\"line\">    Assert.assertEquals(bean1.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">init TestBean</span><br><span class=\"line\">init TestBean</span><br></pre></td></tr></table></figure>\n<p><code>init</code><code>destroy</code><code>prototype-bean</code>xml<code>destroy-method</code>bean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c81044d154bf.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>prototype-bean</code><code>singleton-bean</code><code>singleton-bean</code><code>prototype-bean</code></p>\n<h2 id=\"Request-amp-amp-Session-amp-amp-Application-amp-amp-WebSocket-Scopes\"><a href=\"#Request-amp-amp-Session-amp-amp-Application-amp-amp-WebSocket-Scopes\" class=\"headerlink\" title=\"Request &amp;&amp; Session &amp;&amp; Application &amp;&amp; WebSocket Scopes\"></a>Request &amp;&amp; Session &amp;&amp; Application &amp;&amp; WebSocket Scopes</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c8106f6ae617.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>request</code>  <code>session</code>  <code>application</code>  <code>websocket</code> scope</p>\n<p>scopeweb <code>ClassPathXmlApplicationContext</code> bean</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java.lang.IllegalStateException: No Scope registered <span class=\"keyword\">for</span> scope name <span class=\"string\">'request'</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"request\"><a href=\"#request\" class=\"headerlink\" title=\"request\"></a>request</h3><p>scope <code>request</code> beanbeanbeanspringbootxml</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"meta\">@ImportResource</span>(locations = &#123;<span class=\"string\">\"classpath:application-bean.xml\"</span>&#125;)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WebConfiguration</span> </span>&#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xmlns:aop</span>=<span class=\"string\">\"http://www.springframework.org/schema/aop\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.springboothello.model.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"request\"</span> &gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:scoped-proxy</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>controller</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> TestBean testBean;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> TestBean testBean1;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping</span>(<span class=\"string\">\"/testBean\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testBean</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"==========request start==========\"</span>);</span><br><span class=\"line\">        System.out.println(testBean.getNum());</span><br><span class=\"line\">        testBean.add();</span><br><span class=\"line\">        System.out.println(testBean.getNum());</span><br><span class=\"line\">        System.out.println(testBean1.getNum());</span><br><span class=\"line\">        testBean1.add();</span><br><span class=\"line\">        System.out.println(testBean1.getNum());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"==========request end==========\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>TestBean</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:scoped-proxy</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c81c5cc0999a.png\" alt=\"20190308093050.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190308093050.png</div>\n            </figure>\n<p></p>\n<p>beanbean<code>CGLib</code>Beanpublic<code>request</code><code>TestBean</code></p>\n<p></p>\n<p>bean<code>testBean</code>bean<code>HelloController</code>bean<code>HelloController</code><code>singleton</code><code>request-bean</code><code>singleton-bean</code><code>testBean</code><code>HelloController</code> <code>Http Request</code> <code>testBean</code></p>\n<p><code>scope</code><code>prototype</code>bean<code>&lt;aop:scoped-proxy/&gt;</code>bean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c8254687adf6.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>CGLib</code><code>public</code><code>private</code><code>JDK</code>aop<code>proxy-target-class</code>false</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:scoped-proxy</span> <span class=\"attr\">proxy-target-class</span>=<span class=\"string\">\"false\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<p>bean</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c81c5066975f.png\" alt=\"20190308092733.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190308092733.png</div>\n            </figure>\n<p><code>http://127.0.0.1:8080/testBean</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">==========request end==========</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"session\"><a href=\"#session\" class=\"headerlink\" title=\"session\"></a>session</h3><p><code>request</code>bean</p>\n<p>xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.springboothello.model.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"session\"</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:scoped-proxy</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">4</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"number\">6</span></span><br><span class=\"line\">==========request end==========</span><br></pre></td></tr></table></figure>\n<p>numbean</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">4</span></span><br><span class=\"line\">==========request end==========</span><br></pre></td></tr></table></figure>\n<p>num0<code>session</code></p>\n<h3 id=\"application\"><a href=\"#application\" class=\"headerlink\" title=\"application\"></a>application</h3><p><code>application</code><code>session</code><code>session</code> <code>Http Session</code>a<code>pplication</code> <code>ServletContext</code>  <code>singleton</code><code>singleton</code>IOCwebIOCWeb <code>ServletContext</code> <code>application</code> web</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c8215620925e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.springboothello.model.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"application\"</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:scoped-proxy</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">4</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"number\">6</span></span><br><span class=\"line\">==========request end==========</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">6</span></span><br><span class=\"line\"><span class=\"number\">7</span></span><br><span class=\"line\"><span class=\"number\">7</span></span><br><span class=\"line\"><span class=\"number\">8</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"number\">9</span></span><br><span class=\"line\"><span class=\"number\">9</span></span><br><span class=\"line\"><span class=\"number\">10</span></span><br><span class=\"line\">==========request end==========</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c82552a6af48.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"websocket\"><a href=\"#websocket\" class=\"headerlink\" title=\"websocket\"></a>websocket</h3><p><code>websocket</code>  <code>WebSocket</code>  <code>WebSocket</code> </p>\n<p>emmmm</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c824b40b64cd.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"global-session\"><a href=\"#global-session\" class=\"headerlink\" title=\"global session\"></a>global session</h3><p> <code>global session</code> </p>\n<p>5.2.0.BUILD-SNAPSHOT<code>global session</code></p>\n<p>scope</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c824e7fcae16.png\" alt=\"20190308191406.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190308191406.png</div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> scope </p>\n<ol>\n<li>singletonIOC</li>\n<li>prototypeIOC</li>\n<li>request Http Request</li>\n<li>session Http Session</li>\n<li>applicationWEBWeb</li>\n<li>websocketWebSocket</li>\n</ol>\n<p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c8255c88946b.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"scope-\"><a href=\"#scope-\" class=\"headerlink\" title=\"scope \"></a>scope </h2><p>springxml<code>bean</code><code>scope</code><code>bean</code><code>singleton</code><code>prototype</code><code>request</code><code>session</code><code>global session</code>scope</p>\n<p>emmm</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c8073af8fd16.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>scope</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c80742434d0e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<h3 id=\"singleton\"><a href=\"#singleton\" class=\"headerlink\" title=\"singleton\"></a>singleton</h3><p><code>singleton</code>scopebeanscope<code>singleton</code>beanbeanidbeanbean</p>\n<p><code>ClassLoader</code></p>\n<p><code>double-check</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">volatile</span> Singleton FRANK;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (FRANK == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">synchronized</span>(<span class=\"keyword\">this</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (FRANK == <span class=\"keyword\">null</span>) FRANK = <span class=\"keyword\">new</span> Singleton();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> FRANK;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Spring<code>singleton</code>IOCbeanIOC<code>ClassLoader</code>IOCbean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c8079052f7de.png\" alt=\"20190307095059.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190307095059.png</div>\n            </figure>\n<p></p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestScope</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"meta\">@Test</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSingleton</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">\t\tTestBean bean = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">\t\tAssert.assertEquals(bean.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">\t\tbean.add();</span><br><span class=\"line\">\t\tAssert.assertEquals(bean.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tTestBean bean1 = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">\t\tAssert.assertEquals(bean1.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\">\t\tbean1.add();</span><br><span class=\"line\">\t\tAssert.assertEquals(bean1.getNum() , <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tApplicationContext context1 = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">\t\tTestBean bean2 = (TestBean) context1.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">\t\tAssert.assertEquals(bean2.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">\t\tbean2.add();</span><br><span class=\"line\">\t\tAssert.assertEquals(bean2.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestBean</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">int</span> num;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getNum</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> num;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNum</span><span class=\"params\">(<span class=\"keyword\">int</span> num)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.num = num;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tnum++;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>test-bean.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE beans PUBLIC \"-//SPRING//DTD BEAN 2.0//EN\" \"http://www.springframework.org/dtd/spring-beans-2.0.dtd\"&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.scope.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"singleton\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><code>testBean</code><code>scope</code><code>singleton</code><code>bean</code><code>bean1</code>IOCbean<code>bean</code><code>bean1</code>addnum2<code>bean2</code>IOC<code>num</code>0<code>add</code>num1<code>singleton</code>IOC</p>\n<h3 id=\"prototype\"><a href=\"#prototype\" class=\"headerlink\" title=\"prototype\"></a>prototype</h3><p>scope<code>prototype</code><code>singleton</code><code>prototype</code>bean<code>getBean</code>bean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c80fd2fc8df9.png\" alt=\"20190307191454.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190307191454.png</div>\n            </figure>\n<p><code>scope</code>Spring<code>prototype</code>beanbean<code>prototype-bean</code><code>prototype-bean</code>bean<code>prototype-bean</code>destroySpring<code>prototype-bean</code>  <code>new</code> </p>\n<p></p>\n<p>xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE beans PUBLIC \"-//SPRING//DTD BEAN 2.0//EN\" \"http://www.springframework.org/dtd/spring-beans-2.0.dtd\"&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.scope.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"prototype\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testPrototype</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    ApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">    TestBean bean = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(bean.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">    bean.add();</span><br><span class=\"line\">    Assert.assertEquals(bean.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    TestBean bean1 = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(bean1.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">    bean1.add();</span><br><span class=\"line\">    Assert.assertEquals(bean1.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>IOC<code>testBean</code>bean<code>prototype</code></p>\n<p></p>\n<p>TestBean</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestBean</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">int</span> num;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"init TestBean\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">destroy</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"destroy TestBean\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getNum</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> num;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setNum</span><span class=\"params\">(<span class=\"keyword\">int</span> num)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.num = num;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tnum++;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.spring.bean.scope.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"prototype\"</span>  <span class=\"attr\">init-method</span>=<span class=\"string\">\"init\"</span>  <span class=\"attr\">destroy-method</span>=<span class=\"string\">\"destroy\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testPrototype</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    ApplicationContext context = <span class=\"keyword\">new</span> ClassPathXmlApplicationContext(<span class=\"string\">\"test-bean.xml\"</span>);</span><br><span class=\"line\">    TestBean bean = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(bean.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">    bean.add();</span><br><span class=\"line\">    Assert.assertEquals(bean.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    TestBean bean1 = (TestBean) context.getBean(<span class=\"string\">\"testBean\"</span>);</span><br><span class=\"line\">    Assert.assertEquals(bean1.getNum() , <span class=\"number\">0</span>);</span><br><span class=\"line\">    bean1.add();</span><br><span class=\"line\">    Assert.assertEquals(bean1.getNum() , <span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">init TestBean</span><br><span class=\"line\">init TestBean</span><br></pre></td></tr></table></figure>\n<p><code>init</code><code>destroy</code><code>prototype-bean</code>xml<code>destroy-method</code>bean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c81044d154bf.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>prototype-bean</code><code>singleton-bean</code><code>singleton-bean</code><code>prototype-bean</code></p>\n<h2 id=\"Request-amp-amp-Session-amp-amp-Application-amp-amp-WebSocket-Scopes\"><a href=\"#Request-amp-amp-Session-amp-amp-Application-amp-amp-WebSocket-Scopes\" class=\"headerlink\" title=\"Request &amp;&amp; Session &amp;&amp; Application &amp;&amp; WebSocket Scopes\"></a>Request &amp;&amp; Session &amp;&amp; Application &amp;&amp; WebSocket Scopes</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/07/5c8106f6ae617.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>request</code>  <code>session</code>  <code>application</code>  <code>websocket</code> scope</p>\n<p>scopeweb <code>ClassPathXmlApplicationContext</code> bean</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java.lang.IllegalStateException: No Scope registered <span class=\"keyword\">for</span> scope name <span class=\"string\">'request'</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"request\"><a href=\"#request\" class=\"headerlink\" title=\"request\"></a>request</h3><p>scope <code>request</code> beanbeanbeanspringbootxml</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"meta\">@ImportResource</span>(locations = &#123;<span class=\"string\">\"classpath:application-bean.xml\"</span>&#125;)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">WebConfiguration</span> </span>&#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> <span class=\"attr\">xmlns:aop</span>=<span class=\"string\">\"http://www.springframework.org/schema/aop\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">\"http://www.springframework.org/schema/beans</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.springboothello.model.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"request\"</span> &gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">aop:scoped-proxy</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>controller</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> TestBean testBean;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> TestBean testBean1;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping</span>(<span class=\"string\">\"/testBean\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testBean</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"==========request start==========\"</span>);</span><br><span class=\"line\">        System.out.println(testBean.getNum());</span><br><span class=\"line\">        testBean.add();</span><br><span class=\"line\">        System.out.println(testBean.getNum());</span><br><span class=\"line\">        System.out.println(testBean1.getNum());</span><br><span class=\"line\">        testBean1.add();</span><br><span class=\"line\">        System.out.println(testBean1.getNum());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"==========request end==========\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>TestBean</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:scoped-proxy</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c81c5cc0999a.png\" alt=\"20190308093050.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190308093050.png</div>\n            </figure>\n<p></p>\n<p>beanbean<code>CGLib</code>Beanpublic<code>request</code><code>TestBean</code></p>\n<p></p>\n<p>bean<code>testBean</code>bean<code>HelloController</code>bean<code>HelloController</code><code>singleton</code><code>request-bean</code><code>singleton-bean</code><code>testBean</code><code>HelloController</code> <code>Http Request</code> <code>testBean</code></p>\n<p><code>scope</code><code>prototype</code>bean<code>&lt;aop:scoped-proxy/&gt;</code>bean</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c8254687adf6.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p><code>CGLib</code><code>public</code><code>private</code><code>JDK</code>aop<code>proxy-target-class</code>false</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aop:scoped-proxy</span> <span class=\"attr\">proxy-target-class</span>=<span class=\"string\">\"false\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<p>bean</p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c81c5066975f.png\" alt=\"20190308092733.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190308092733.png</div>\n            </figure>\n<p><code>http://127.0.0.1:8080/testBean</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">==========request end==========</span><br></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"session\"><a href=\"#session\" class=\"headerlink\" title=\"session\"></a>session</h3><p><code>request</code>bean</p>\n<p>xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.springboothello.model.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"session\"</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:scoped-proxy</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">4</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"number\">6</span></span><br><span class=\"line\">==========request end==========</span><br></pre></td></tr></table></figure>\n<p>numbean</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">4</span></span><br><span class=\"line\">==========request end==========</span><br></pre></td></tr></table></figure>\n<p>num0<code>session</code></p>\n<h3 id=\"application\"><a href=\"#application\" class=\"headerlink\" title=\"application\"></a>application</h3><p><code>application</code><code>session</code><code>session</code> <code>Http Session</code>a<code>pplication</code> <code>ServletContext</code>  <code>singleton</code><code>singleton</code>IOCwebIOCWeb <code>ServletContext</code> <code>application</code> web</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c8215620925e.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">\"testBean\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.frank.springboothello.model.TestBean\"</span> <span class=\"attr\">scope</span>=<span class=\"string\">\"application\"</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">aop:scoped-proxy</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">4</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"number\">6</span></span><br><span class=\"line\">==========request end==========</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">6</span></span><br><span class=\"line\"><span class=\"number\">7</span></span><br><span class=\"line\"><span class=\"number\">7</span></span><br><span class=\"line\"><span class=\"number\">8</span></span><br><span class=\"line\">==========request end==========</span><br><span class=\"line\">==========request start==========</span><br><span class=\"line\"><span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"number\">9</span></span><br><span class=\"line\"><span class=\"number\">9</span></span><br><span class=\"line\"><span class=\"number\">10</span></span><br><span class=\"line\">==========request end==========</span><br></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c82552a6af48.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"websocket\"><a href=\"#websocket\" class=\"headerlink\" title=\"websocket\"></a>websocket</h3><p><code>websocket</code>  <code>WebSocket</code>  <code>WebSocket</code> </p>\n<p>emmmm</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c824b40b64cd.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h3 id=\"global-session\"><a href=\"#global-session\" class=\"headerlink\" title=\"global session\"></a>global session</h3><p> <code>global session</code> </p>\n<p>5.2.0.BUILD-SNAPSHOT<code>global session</code></p>\n<p>scope</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c824e7fcae16.png\" alt=\"20190308191406.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">20190308191406.png</div>\n            </figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> scope </p>\n<ol>\n<li>singletonIOC</li>\n<li>prototypeIOC</li>\n<li>request Http Request</li>\n<li>session Http Session</li>\n<li>applicationWEBWeb</li>\n<li>websocketWebSocket</li>\n</ol>\n<p></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/03/08/5c8255c88946b.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>"},{"title":"Springbean","date":"2019-03-05T01:25:05.000Z","categorys":["Spring"],"_content":"\n## \n\nSpringxmlbeanscopeautowirelazy-initinit-methoddestroy-methodbean\n\nSpring`5.2.0.BUILD-SNAPSHOT`\n\n## bean \n\nSpringbeanBeanDefinitionParserDelegate  parseBeanDefinitionAttributes \n\n```java\npublic AbstractBeanDefinition parseBeanDefinitionAttributes(Element ele, String beanName,\n        @Nullable BeanDefinition containingBean, AbstractBeanDefinition bd) {\n\n    //  singleton \n    if (ele.hasAttribute(SINGLETON_ATTRIBUTE)) {\n        error(\"Old 1.x 'singleton' attribute in use - upgrade to 'scope' declaration\", ele);\n    }\n    //  scope \n    else if (ele.hasAttribute(SCOPE_ATTRIBUTE)) {\n        bd.setScope(ele.getAttribute(SCOPE_ATTRIBUTE));\n    }\n    else if (containingBean != null) {\n        //  bean  scope  bean  bean  bean bean  scope \n        bd.setScope(containingBean.getScope());\n    }\n\n    //  abstract \n    if (ele.hasAttribute(ABSTRACT_ATTRIBUTE)) {\n        bd.setAbstract(TRUE_VALUE.equals(ele.getAttribute(ABSTRACT_ATTRIBUTE)));\n    }\n\n    //  lazy-init \n    String lazyInit = ele.getAttribute(LAZY_INIT_ATTRIBUTE);\n    if (isDefaultValue(lazyInit)) {\n        lazyInit = this.defaults.getLazyInit();\n    }\n    bd.setLazyInit(TRUE_VALUE.equals(lazyInit));\n\n    //  autowire \n    String autowire = ele.getAttribute(AUTOWIRE_ATTRIBUTE);\n    bd.setAutowireMode(getAutowireMode(autowire));\n\n    //  depends-on \n    if (ele.hasAttribute(DEPENDS_ON_ATTRIBUTE)) {\n        String dependsOn = ele.getAttribute(DEPENDS_ON_ATTRIBUTE);\n        bd.setDependsOn(StringUtils.tokenizeToStringArray(dependsOn, MULTI_VALUE_ATTRIBUTE_DELIMITERS));\n    }\n\n    //  autowire-candidate \n    String autowireCandidate = ele.getAttribute(AUTOWIRE_CANDIDATE_ATTRIBUTE);\n    if (isDefaultValue(autowireCandidate)) {\n        String candidatePattern = this.defaults.getAutowireCandidates();\n        if (candidatePattern != null) {\n            String[] patterns = StringUtils.commaDelimitedListToStringArray(candidatePattern);\n            bd.setAutowireCandidate(PatternMatchUtils.simpleMatch(patterns, beanName));\n        }\n    }\n    else {\n        bd.setAutowireCandidate(TRUE_VALUE.equals(autowireCandidate));\n    }\n\n    //  primary \n    if (ele.hasAttribute(PRIMARY_ATTRIBUTE)) {\n        bd.setPrimary(TRUE_VALUE.equals(ele.getAttribute(PRIMARY_ATTRIBUTE)));\n    }\n\n    //  init-method \n    if (ele.hasAttribute(INIT_METHOD_ATTRIBUTE)) {\n        String initMethodName = ele.getAttribute(INIT_METHOD_ATTRIBUTE);\n        bd.setInitMethodName(initMethodName);\n    }\n    else if (this.defaults.getInitMethod() != null) {\n        // \n        bd.setInitMethodName(this.defaults.getInitMethod());\n        bd.setEnforceInitMethod(false);\n    }\n\n    //  destroy-method \n    if (ele.hasAttribute(DESTROY_METHOD_ATTRIBUTE)) {\n        String destroyMethodName = ele.getAttribute(DESTROY_METHOD_ATTRIBUTE);\n        bd.setDestroyMethodName(destroyMethodName);\n    }\n    else if (this.defaults.getDestroyMethod() != null) {\n        bd.setDestroyMethodName(this.defaults.getDestroyMethod());\n        bd.setEnforceDestroyMethod(false);\n    }\n\n    //  factory-method \n    if (ele.hasAttribute(FACTORY_METHOD_ATTRIBUTE)) {\n        bd.setFactoryMethodName(ele.getAttribute(FACTORY_METHOD_ATTRIBUTE));\n    }\n    \n    //  factory-bean \n    if (ele.hasAttribute(FACTORY_BEAN_ATTRIBUTE)) {\n        bd.setFactoryBeanName(ele.getAttribute(FACTORY_BEAN_ATTRIBUTE));\n    }\n\n    return bd;\n}\n```\n\n bean \n","source":"_posts/java/spring/source-code-analysis/spring-bean-attribute.md","raw":"---\ntitle: Springbean\ndate: 2019-03-05 09:25:05\ntags:\n- Spring\n- \ncategorys:\n- Spring\n---\n\n## \n\nSpringxmlbeanscopeautowirelazy-initinit-methoddestroy-methodbean\n\nSpring`5.2.0.BUILD-SNAPSHOT`\n\n## bean \n\nSpringbeanBeanDefinitionParserDelegate  parseBeanDefinitionAttributes \n\n```java\npublic AbstractBeanDefinition parseBeanDefinitionAttributes(Element ele, String beanName,\n        @Nullable BeanDefinition containingBean, AbstractBeanDefinition bd) {\n\n    //  singleton \n    if (ele.hasAttribute(SINGLETON_ATTRIBUTE)) {\n        error(\"Old 1.x 'singleton' attribute in use - upgrade to 'scope' declaration\", ele);\n    }\n    //  scope \n    else if (ele.hasAttribute(SCOPE_ATTRIBUTE)) {\n        bd.setScope(ele.getAttribute(SCOPE_ATTRIBUTE));\n    }\n    else if (containingBean != null) {\n        //  bean  scope  bean  bean  bean bean  scope \n        bd.setScope(containingBean.getScope());\n    }\n\n    //  abstract \n    if (ele.hasAttribute(ABSTRACT_ATTRIBUTE)) {\n        bd.setAbstract(TRUE_VALUE.equals(ele.getAttribute(ABSTRACT_ATTRIBUTE)));\n    }\n\n    //  lazy-init \n    String lazyInit = ele.getAttribute(LAZY_INIT_ATTRIBUTE);\n    if (isDefaultValue(lazyInit)) {\n        lazyInit = this.defaults.getLazyInit();\n    }\n    bd.setLazyInit(TRUE_VALUE.equals(lazyInit));\n\n    //  autowire \n    String autowire = ele.getAttribute(AUTOWIRE_ATTRIBUTE);\n    bd.setAutowireMode(getAutowireMode(autowire));\n\n    //  depends-on \n    if (ele.hasAttribute(DEPENDS_ON_ATTRIBUTE)) {\n        String dependsOn = ele.getAttribute(DEPENDS_ON_ATTRIBUTE);\n        bd.setDependsOn(StringUtils.tokenizeToStringArray(dependsOn, MULTI_VALUE_ATTRIBUTE_DELIMITERS));\n    }\n\n    //  autowire-candidate \n    String autowireCandidate = ele.getAttribute(AUTOWIRE_CANDIDATE_ATTRIBUTE);\n    if (isDefaultValue(autowireCandidate)) {\n        String candidatePattern = this.defaults.getAutowireCandidates();\n        if (candidatePattern != null) {\n            String[] patterns = StringUtils.commaDelimitedListToStringArray(candidatePattern);\n            bd.setAutowireCandidate(PatternMatchUtils.simpleMatch(patterns, beanName));\n        }\n    }\n    else {\n        bd.setAutowireCandidate(TRUE_VALUE.equals(autowireCandidate));\n    }\n\n    //  primary \n    if (ele.hasAttribute(PRIMARY_ATTRIBUTE)) {\n        bd.setPrimary(TRUE_VALUE.equals(ele.getAttribute(PRIMARY_ATTRIBUTE)));\n    }\n\n    //  init-method \n    if (ele.hasAttribute(INIT_METHOD_ATTRIBUTE)) {\n        String initMethodName = ele.getAttribute(INIT_METHOD_ATTRIBUTE);\n        bd.setInitMethodName(initMethodName);\n    }\n    else if (this.defaults.getInitMethod() != null) {\n        // \n        bd.setInitMethodName(this.defaults.getInitMethod());\n        bd.setEnforceInitMethod(false);\n    }\n\n    //  destroy-method \n    if (ele.hasAttribute(DESTROY_METHOD_ATTRIBUTE)) {\n        String destroyMethodName = ele.getAttribute(DESTROY_METHOD_ATTRIBUTE);\n        bd.setDestroyMethodName(destroyMethodName);\n    }\n    else if (this.defaults.getDestroyMethod() != null) {\n        bd.setDestroyMethodName(this.defaults.getDestroyMethod());\n        bd.setEnforceDestroyMethod(false);\n    }\n\n    //  factory-method \n    if (ele.hasAttribute(FACTORY_METHOD_ATTRIBUTE)) {\n        bd.setFactoryMethodName(ele.getAttribute(FACTORY_METHOD_ATTRIBUTE));\n    }\n    \n    //  factory-bean \n    if (ele.hasAttribute(FACTORY_BEAN_ATTRIBUTE)) {\n        bd.setFactoryBeanName(ele.getAttribute(FACTORY_BEAN_ATTRIBUTE));\n    }\n\n    return bd;\n}\n```\n\n bean \n","slug":"java/spring/source-code-analysis/spring-bean-attribute","published":1,"updated":"2019-06-04T01:29:57.423Z","_id":"cjxze3h0q00840cvwzteqlyfa","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Springxmlbeanscopeautowirelazy-initinit-methoddestroy-methodbean</p>\n<p>Spring<code>5.2.0.BUILD-SNAPSHOT</code></p>\n<h2 id=\"bean\"><a href=\"#bean\" class=\"headerlink\" title=\"bean\"></a>bean</h2><p>SpringbeanBeanDefinitionParserDelegate  parseBeanDefinitionAttributes </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> AbstractBeanDefinition <span class=\"title\">parseBeanDefinitionAttributes</span><span class=\"params\">(Element ele, String beanName,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        @Nullable BeanDefinition containingBean, AbstractBeanDefinition bd)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  singleton </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(SINGLETON_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        error(<span class=\"string\">\"Old 1.x 'singleton' attribute in use - upgrade to 'scope' declaration\"</span>, ele);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//  scope </span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (ele.hasAttribute(SCOPE_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        bd.setScope(ele.getAttribute(SCOPE_ATTRIBUTE));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (containingBean != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  bean  scope  bean  bean  bean bean  scope </span></span><br><span class=\"line\">        bd.setScope(containingBean.getScope());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  abstract </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(ABSTRACT_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        bd.setAbstract(TRUE_VALUE.equals(ele.getAttribute(ABSTRACT_ATTRIBUTE)));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  lazy-init </span></span><br><span class=\"line\">    String lazyInit = ele.getAttribute(LAZY_INIT_ATTRIBUTE);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isDefaultValue(lazyInit)) &#123;</span><br><span class=\"line\">        lazyInit = <span class=\"keyword\">this</span>.defaults.getLazyInit();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    bd.setLazyInit(TRUE_VALUE.equals(lazyInit));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  autowire </span></span><br><span class=\"line\">    String autowire = ele.getAttribute(AUTOWIRE_ATTRIBUTE);</span><br><span class=\"line\">    bd.setAutowireMode(getAutowireMode(autowire));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  depends-on </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(DEPENDS_ON_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        String dependsOn = ele.getAttribute(DEPENDS_ON_ATTRIBUTE);</span><br><span class=\"line\">        bd.setDependsOn(StringUtils.tokenizeToStringArray(dependsOn, MULTI_VALUE_ATTRIBUTE_DELIMITERS));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  autowire-candidate </span></span><br><span class=\"line\">    String autowireCandidate = ele.getAttribute(AUTOWIRE_CANDIDATE_ATTRIBUTE);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isDefaultValue(autowireCandidate)) &#123;</span><br><span class=\"line\">        String candidatePattern = <span class=\"keyword\">this</span>.defaults.getAutowireCandidates();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (candidatePattern != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            String[] patterns = StringUtils.commaDelimitedListToStringArray(candidatePattern);</span><br><span class=\"line\">            bd.setAutowireCandidate(PatternMatchUtils.simpleMatch(patterns, beanName));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        bd.setAutowireCandidate(TRUE_VALUE.equals(autowireCandidate));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  primary </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(PRIMARY_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        bd.setPrimary(TRUE_VALUE.equals(ele.getAttribute(PRIMARY_ATTRIBUTE)));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  init-method </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(INIT_METHOD_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        String initMethodName = ele.getAttribute(INIT_METHOD_ATTRIBUTE);</span><br><span class=\"line\">        bd.setInitMethodName(initMethodName);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.defaults.getInitMethod() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        bd.setInitMethodName(<span class=\"keyword\">this</span>.defaults.getInitMethod());</span><br><span class=\"line\">        bd.setEnforceInitMethod(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  destroy-method </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(DESTROY_METHOD_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        String destroyMethodName = ele.getAttribute(DESTROY_METHOD_ATTRIBUTE);</span><br><span class=\"line\">        bd.setDestroyMethodName(destroyMethodName);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.defaults.getDestroyMethod() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        bd.setDestroyMethodName(<span class=\"keyword\">this</span>.defaults.getDestroyMethod());</span><br><span class=\"line\">        bd.setEnforceDestroyMethod(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  factory-method </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(FACTORY_METHOD_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        bd.setFactoryMethodName(ele.getAttribute(FACTORY_METHOD_ATTRIBUTE));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//  factory-bean </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(FACTORY_BEAN_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        bd.setFactoryBeanName(ele.getAttribute(FACTORY_BEAN_ATTRIBUTE));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> bd;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> bean </p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Springxmlbeanscopeautowirelazy-initinit-methoddestroy-methodbean</p>\n<p>Spring<code>5.2.0.BUILD-SNAPSHOT</code></p>\n<h2 id=\"bean\"><a href=\"#bean\" class=\"headerlink\" title=\"bean\"></a>bean</h2><p>SpringbeanBeanDefinitionParserDelegate  parseBeanDefinitionAttributes </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> AbstractBeanDefinition <span class=\"title\">parseBeanDefinitionAttributes</span><span class=\"params\">(Element ele, String beanName,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        @Nullable BeanDefinition containingBean, AbstractBeanDefinition bd)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  singleton </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(SINGLETON_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        error(<span class=\"string\">\"Old 1.x 'singleton' attribute in use - upgrade to 'scope' declaration\"</span>, ele);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//  scope </span></span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (ele.hasAttribute(SCOPE_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        bd.setScope(ele.getAttribute(SCOPE_ATTRIBUTE));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (containingBean != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//  bean  scope  bean  bean  bean bean  scope </span></span><br><span class=\"line\">        bd.setScope(containingBean.getScope());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  abstract </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(ABSTRACT_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        bd.setAbstract(TRUE_VALUE.equals(ele.getAttribute(ABSTRACT_ATTRIBUTE)));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  lazy-init </span></span><br><span class=\"line\">    String lazyInit = ele.getAttribute(LAZY_INIT_ATTRIBUTE);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isDefaultValue(lazyInit)) &#123;</span><br><span class=\"line\">        lazyInit = <span class=\"keyword\">this</span>.defaults.getLazyInit();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    bd.setLazyInit(TRUE_VALUE.equals(lazyInit));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  autowire </span></span><br><span class=\"line\">    String autowire = ele.getAttribute(AUTOWIRE_ATTRIBUTE);</span><br><span class=\"line\">    bd.setAutowireMode(getAutowireMode(autowire));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  depends-on </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(DEPENDS_ON_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        String dependsOn = ele.getAttribute(DEPENDS_ON_ATTRIBUTE);</span><br><span class=\"line\">        bd.setDependsOn(StringUtils.tokenizeToStringArray(dependsOn, MULTI_VALUE_ATTRIBUTE_DELIMITERS));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  autowire-candidate </span></span><br><span class=\"line\">    String autowireCandidate = ele.getAttribute(AUTOWIRE_CANDIDATE_ATTRIBUTE);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isDefaultValue(autowireCandidate)) &#123;</span><br><span class=\"line\">        String candidatePattern = <span class=\"keyword\">this</span>.defaults.getAutowireCandidates();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (candidatePattern != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            String[] patterns = StringUtils.commaDelimitedListToStringArray(candidatePattern);</span><br><span class=\"line\">            bd.setAutowireCandidate(PatternMatchUtils.simpleMatch(patterns, beanName));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        bd.setAutowireCandidate(TRUE_VALUE.equals(autowireCandidate));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  primary </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(PRIMARY_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        bd.setPrimary(TRUE_VALUE.equals(ele.getAttribute(PRIMARY_ATTRIBUTE)));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  init-method </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(INIT_METHOD_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        String initMethodName = ele.getAttribute(INIT_METHOD_ATTRIBUTE);</span><br><span class=\"line\">        bd.setInitMethodName(initMethodName);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.defaults.getInitMethod() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        bd.setInitMethodName(<span class=\"keyword\">this</span>.defaults.getInitMethod());</span><br><span class=\"line\">        bd.setEnforceInitMethod(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  destroy-method </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(DESTROY_METHOD_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        String destroyMethodName = ele.getAttribute(DESTROY_METHOD_ATTRIBUTE);</span><br><span class=\"line\">        bd.setDestroyMethodName(destroyMethodName);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.defaults.getDestroyMethod() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        bd.setDestroyMethodName(<span class=\"keyword\">this</span>.defaults.getDestroyMethod());</span><br><span class=\"line\">        bd.setEnforceDestroyMethod(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//  factory-method </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(FACTORY_METHOD_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        bd.setFactoryMethodName(ele.getAttribute(FACTORY_METHOD_ATTRIBUTE));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//  factory-bean </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ele.hasAttribute(FACTORY_BEAN_ATTRIBUTE)) &#123;</span><br><span class=\"line\">        bd.setFactoryBeanName(ele.getAttribute(FACTORY_BEAN_ATTRIBUTE));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> bd;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> bean </p>\n"},{"title":"MysqlMysql","date":"2019-06-04T01:31:52.000Z","categorys":[""],"_content":"\n## \n\n","source":"_posts/mysql/index/mysql-index-01.md","raw":"---\ntitle: MysqlMysql\ndate: 2019-06-04 09:31:52\ntags:\n - mysql\n - \ncategorys:\n - \n---\n\n## \n\n","slug":"mysql/index/mysql-index-01","published":1,"updated":"2019-06-04T01:41:06.712Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjxzito2m0000eus6yxhwf2r8","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>"},{"title":"MysqlMysql1000","date":"2019-06-04T01:37:41.000Z","categorys":[""],"_content":"\n5\n\n## \n\nmysql\n\n![](https://i.loli.net/2019/05/18/5cdf6539270f631562.jpg)\n\nemmmm\n\nMysqlsqlsql\n\nMysql\n\n## \n\nMysql8.0.11\n\n![](https://i.loli.net/2019/06/05/5cf71abecc5be80960.png)\n\nInnoDB\n\n![](https://i.loli.net/2019/06/05/5cf71e71d75b790847.png)\n\n\n\n![](https://i.loli.net/2019/06/05/5cf71c9e7335f90543.png)\n\n```sql\ncreate database if not exists test_db default charset utf8 collate utf8_general_ci;\n```\n\n`if not exists` `default charset utf8 collate utf8_general_ci` `utf8``utf8_general_ci`\n\n`utf8_general_ci``utf8``_ci`\n\n\n\n![](https://i.loli.net/2019/06/10/5cfdb4f13ab8761814.png)\n\n```sql\ncreate table `order_detail` (\n    `id` bigint(11) not null auto_increment,\n    `order_no` varchar(50) not null comment '',\n    `commodity_id` bigint(11) not null comment 'id',\n    `amount` decimal(20,6) not null comment '',\n    `buyer_id` bigint(11) not null comment 'id',\n    `status` int(2) not null comment '',\n    `created_time` datetime not null comment '',\n    `updated_time` datetime not null comment '', \n    primary key(`id`)\n) engine InnoDB charset utf8mb4 collate utf8mb4_unicode_ci;\n```\n\n\n\n## \n\n `springboot` ","source":"_posts/mysql/index/how-to-insert-10-million-pieces-of-data-into-mysql.md","raw":"---\ntitle: MysqlMysql1000\ndate: 2019-06-04 09:37:41\ntags:\n - mysql\n - \ncategorys:\n - \n---\n\n5\n\n## \n\nmysql\n\n![](https://i.loli.net/2019/05/18/5cdf6539270f631562.jpg)\n\nemmmm\n\nMysqlsqlsql\n\nMysql\n\n## \n\nMysql8.0.11\n\n![](https://i.loli.net/2019/06/05/5cf71abecc5be80960.png)\n\nInnoDB\n\n![](https://i.loli.net/2019/06/05/5cf71e71d75b790847.png)\n\n\n\n![](https://i.loli.net/2019/06/05/5cf71c9e7335f90543.png)\n\n```sql\ncreate database if not exists test_db default charset utf8 collate utf8_general_ci;\n```\n\n`if not exists` `default charset utf8 collate utf8_general_ci` `utf8``utf8_general_ci`\n\n`utf8_general_ci``utf8``_ci`\n\n\n\n![](https://i.loli.net/2019/06/10/5cfdb4f13ab8761814.png)\n\n```sql\ncreate table `order_detail` (\n    `id` bigint(11) not null auto_increment,\n    `order_no` varchar(50) not null comment '',\n    `commodity_id` bigint(11) not null comment 'id',\n    `amount` decimal(20,6) not null comment '',\n    `buyer_id` bigint(11) not null comment 'id',\n    `status` int(2) not null comment '',\n    `created_time` datetime not null comment '',\n    `updated_time` datetime not null comment '', \n    primary key(`id`)\n) engine InnoDB charset utf8mb4 collate utf8mb4_unicode_ci;\n```\n\n\n\n## \n\n `springboot` ","slug":"mysql/index/how-to-insert-10-million-pieces-of-data-into-mysql","published":1,"updated":"2019-07-12T03:03:58.135Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjxzito4f0001eus69s0s8g0q","content":"<p>5</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>mysql</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf6539270f631562.jpg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>emmmm</p>\n<p>Mysqlsqlsql</p>\n<p>Mysql</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Mysql8.0.11</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/06/05/5cf71abecc5be80960.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>InnoDB</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/06/05/5cf71e71d75b790847.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/06/05/5cf71c9e7335f90543.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"keyword\">exists</span> test_db <span class=\"keyword\">default</span> <span class=\"keyword\">charset</span> utf8 <span class=\"keyword\">collate</span> utf8_general_ci;</span><br></pre></td></tr></table></figure>\n<p><code>if not exists</code> <code>default charset utf8 collate utf8_general_ci</code> <code>utf8</code><code>utf8_general_ci</code></p>\n<p><code>utf8_general_ci</code><code>utf8</code><code>_ci</code></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/06/10/5cfdb4f13ab8761814.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> <span class=\"string\">`order_detail`</span> (</span><br><span class=\"line\">    <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">11</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> auto_increment,</span><br><span class=\"line\">    <span class=\"string\">`order_no`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"string\">`commodity_id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">11</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">    <span class=\"string\">`amount`</span> <span class=\"built_in\">decimal</span>(<span class=\"number\">20</span>,<span class=\"number\">6</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"string\">`buyer_id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">11</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">    <span class=\"string\">`status`</span> <span class=\"built_in\">int</span>(<span class=\"number\">2</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"string\">`created_time`</span> datetime <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"string\">`updated_time`</span> datetime <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">''</span>, </span><br><span class=\"line\">    primary <span class=\"keyword\">key</span>(<span class=\"string\">`id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">engine</span> <span class=\"keyword\">InnoDB</span> <span class=\"keyword\">charset</span> utf8mb4 <span class=\"keyword\">collate</span> utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <code>springboot</code> </p>\n","site":{"data":{"menu":{"Home":"/","Gallery":"/gallery/","Archives":"/archives/"}}},"excerpt":"","more":"<p>5</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>mysql</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/05/18/5cdf6539270f631562.jpg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>emmmm</p>\n<p>Mysqlsqlsql</p>\n<p>Mysql</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Mysql8.0.11</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/06/05/5cf71abecc5be80960.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>InnoDB</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/06/05/5cf71e71d75b790847.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/06/05/5cf71c9e7335f90543.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"keyword\">exists</span> test_db <span class=\"keyword\">default</span> <span class=\"keyword\">charset</span> utf8 <span class=\"keyword\">collate</span> utf8_general_ci;</span><br></pre></td></tr></table></figure>\n<p><code>if not exists</code> <code>default charset utf8 collate utf8_general_ci</code> <code>utf8</code><code>utf8_general_ci</code></p>\n<p><code>utf8_general_ci</code><code>utf8</code><code>_ci</code></p>\n<p></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://i.loli.net/2019/06/10/5cfdb4f13ab8761814.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> <span class=\"string\">`order_detail`</span> (</span><br><span class=\"line\">    <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">11</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> auto_increment,</span><br><span class=\"line\">    <span class=\"string\">`order_no`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"string\">`commodity_id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">11</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">    <span class=\"string\">`amount`</span> <span class=\"built_in\">decimal</span>(<span class=\"number\">20</span>,<span class=\"number\">6</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"string\">`buyer_id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">11</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">    <span class=\"string\">`status`</span> <span class=\"built_in\">int</span>(<span class=\"number\">2</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"string\">`created_time`</span> datetime <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">''</span>,</span><br><span class=\"line\">    <span class=\"string\">`updated_time`</span> datetime <span class=\"keyword\">not</span> <span class=\"literal\">null</span> <span class=\"keyword\">comment</span> <span class=\"string\">''</span>, </span><br><span class=\"line\">    primary <span class=\"keyword\">key</span>(<span class=\"string\">`id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">engine</span> <span class=\"keyword\">InnoDB</span> <span class=\"keyword\">charset</span> utf8mb4 <span class=\"keyword\">collate</span> utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <code>springboot</code> </p>\n"}],"PostAsset":[{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-7.png","slug":"day3-step-7.png","post":"cjxze3gkw000c0cvwhvfuzczx","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_ECCF05DEC924-1.jpeg","slug":"IMG_ECCF05DEC924-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/complete-knapsack-problem/IMG_6B67BF7CC3A7-1.jpeg","slug":"IMG_6B67BF7CC3A7-1.jpeg","post":"cjxze3gno000q0cvw8bbq0vax","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/example4.png","slug":"example4.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_04E34B950C69-1.jpeg","slug":"IMG_04E34B950C69-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_CD2E7F29F646-1.jpeg","slug":"IMG_CD2E7F29F646-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_F047D511640B-1.jpeg","slug":"IMG_F047D511640B-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_482BA28A5E66-1.jpeg","slug":"IMG_482BA28A5E66-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_E5B595A5513F-1.jpeg","slug":"IMG_E5B595A5513F-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-update/login-server3.gif","slug":"login-server3.gif","post":"cjxze3gpc00250cvwda23pozc","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/fib.png","slug":"fib.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution1-3.png","slug":"solution1-3.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution2-2.png","slug":"solution2-2.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution2-1.png","slug":"solution2-1.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-update/login-server4.gif","slug":"login-server4.gif","post":"cjxze3gpc00250cvwda23pozc","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-v3-md/login-and-view-the-log.gif","slug":"login-and-view-the-log.gif","post":"cjxze3gq600340cvwa3a902j4","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/2-jdk-mac.png","slug":"2-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day1-two-sum/exhaust-algorithm.png","slug":"exhaust-algorithm.png","post":"cjxze3gkw000a0cvw568fw4pv","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day1-two-sum/map-solution.png","slug":"map-solution.png","post":"cjxze3gkw000a0cvw568fw4pv","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/complete-knapsack-problem/CodeCogsEqn.png","slug":"CodeCogsEqn.png","post":"cjxze3gno000q0cvw8bbq0vax","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/complete-knapsack-problem/IMG_510B188AF928-1.jpeg","slug":"IMG_510B188AF928-1.jpeg","post":"cjxze3gno000q0cvw8bbq0vax","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/complete-knapsack-problem/IMG_5E156B07E228-1.jpeg","slug":"IMG_5E156B07E228-1.jpeg","post":"cjxze3gno000q0cvw8bbq0vax","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day2-add-two-numbers/result-5.png","slug":"result-5.png","post":"cjxze3gno000r0cvwwkqf9oyy","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day2-add-two-numbers/solution-1.png","slug":"solution-1.png","post":"cjxze3gno000r0cvwwkqf9oyy","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day2-add-two-numbers/solution-2.png","slug":"solution-2.png","post":"cjxze3gno000r0cvwwkqf9oyy","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day2-add-two-numbers/solution-3.png","slug":"solution-3.png","post":"cjxze3gno000r0cvwwkqf9oyy","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day2-add-two-numbers/solution-4.png","slug":"solution-4.png","post":"cjxze3gno000r0cvwwkqf9oyy","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-update/jump.gif","slug":"jump.gif","post":"cjxze3gpc00250cvwda23pozc","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-update/scp-server3-log.gif","slug":"scp-server3-log.gif","post":"cjxze3gpc00250cvwda23pozc","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-update/scp-server4-log.gif","slug":"scp-server4-log.gif","post":"cjxze3gpc00250cvwda23pozc","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-update/server3-log.gif","slug":"server3-log.gif","post":"cjxze3gpc00250cvwda23pozc","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-update/server4-log.gif","slug":"server4-log.gif","post":"cjxze3gpc00250cvwda23pozc","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-1.png","slug":"day3-step-1.png","post":"cjxze3gkw000c0cvwhvfuzczx","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-2.png","slug":"day3-step-2.png","post":"cjxze3gkw000c0cvwhvfuzczx","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-3.png","slug":"day3-step-3.png","post":"cjxze3gkw000c0cvwhvfuzczx","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-4.png","slug":"day3-step-4.png","post":"cjxze3gkw000c0cvwhvfuzczx","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-5.png","slug":"day3-step-5.png","post":"cjxze3gkw000c0cvwhvfuzczx","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-6.png","slug":"day3-step-6.png","post":"cjxze3gkw000c0cvwhvfuzczx","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-step-8.png","slug":"day3-step-8.png","post":"cjxze3gkw000c0cvwhvfuzczx","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-submit-1.png","slug":"day3-submit-1.png","post":"cjxze3gkw000c0cvwhvfuzczx","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day3-longest-substring-without-repeating-characters/day3-submit-2.png","slug":"day3-submit-2.png","post":"cjxze3gkw000c0cvwhvfuzczx","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/3-jdk-mac.png","slug":"3-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_007B2F2632D2-1.jpeg","slug":"IMG_007B2F2632D2-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_13B30A586085-1.jpeg","slug":"IMG_13B30A586085-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_142D1BF09ED7-1.jpeg","slug":"IMG_142D1BF09ED7-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_16ACD9FB2E1C-1.jpeg","slug":"IMG_16ACD9FB2E1C-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_2ABCC82C89F7-1.jpeg","slug":"IMG_2ABCC82C89F7-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_339C2E86CD88-1.jpeg","slug":"IMG_339C2E86CD88-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_37EAFFF048DB-1.jpeg","slug":"IMG_37EAFFF048DB-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_9B418BF0E7A5-1.jpeg","slug":"IMG_9B418BF0E7A5-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/dp-01-knapsack-problem/IMG_BFE9B7063670-1.jpeg","slug":"IMG_BFE9B7063670-1.jpeg","post":"cjxze3gno000t0cvwe73qcbbe","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/example1.png","slug":"example1.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/example2.png","slug":"example2.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/example3.png","slug":"example3.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/example5.png","slug":"example5.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/result1.png","slug":"result1.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/result2.png","slug":"result2.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/result3.png","slug":"result3.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution1-1.png","slug":"solution1-1.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution1-2.png","slug":"solution1-2.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/leetcode/day4-regular-expression-matching/solution1-4.png","slug":"solution1-4.png","post":"cjxze3gpc001y0cvw806qtrv7","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-2.png","slug":"java-ide-2.png","post":"cjxze3gvg004l0cvwekducab4","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (5).png","slug":"carbon (5).png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-v3-md/list-all-the-commands.gif","slug":"list-all-the-commands.gif","post":"cjxze3gq600340cvwa3a902j4","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-v3-md/list-all-the-servers.gif","slug":"list-all-the-servers.gif","post":"cjxze3gq600340cvwa3a902j4","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-v3-md/login-and-view-the-log2.gif","slug":"login-and-view-the-log2.gif","post":"cjxze3gq600340cvwa3a902j4","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-v3-md/login-jump-server.gif","slug":"login-jump-server.gif","post":"cjxze3gq600340cvwa3a902j4","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-v3-md/login-online-server-and-view-the-log.gif","slug":"login-online-server-and-view-the-log.gif","post":"cjxze3gq600340cvwa3a902j4","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-v3-md/login-online-server.gif","slug":"login-online-server.gif","post":"cjxze3gq600340cvwa3a902j4","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-v3-md/login.gif","slug":"login.gif","post":"cjxze3gq600340cvwa3a902j4","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-v3-md/scp-jump-server-log.gif","slug":"scp-jump-server-log.gif","post":"cjxze3gq600340cvwa3a902j4","modified":0,"renderable":0},{"_id":"source/_posts/shell/gotossh-v3-md/scp-online-server-file.gif","slug":"scp-online-server-file.gif","post":"cjxze3gq600340cvwa3a902j4","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon.png","slug":"carbon.png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/4-jdk-mac.png","slug":"4-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (6).png","slug":"carbon (6).png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-started/java-started-1.png","slug":"java-started-1.png","post":"cjxze3gx400600cvw5txb31od","modified":0,"renderable":0},{"_id":"source/_posts/java/jvm/reachable/accessibility1.jpg","slug":"accessibility1.jpg","post":"cjxze3gwk00590cvwnvqe92ba","modified":0,"renderable":0},{"_id":"source/_posts/java/jvm/reachable/accessibility2.png","slug":"accessibility2.png","post":"cjxze3gwk00590cvwnvqe92ba","modified":0,"renderable":0},{"_id":"source/_posts/java/reference/reference-code-detail/reference-1.png","slug":"reference-1.png","post":"cjxze3gwu005t0cvw8r0uapym","modified":0,"renderable":0},{"_id":"source/_posts/java/reference/reference-code-detail/reference-2.png","slug":"reference-2.png","post":"cjxze3gwu005t0cvw8r0uapym","modified":0,"renderable":0},{"_id":"source/_posts/java/reference/soft-reference-code-detail/soft-reference-2.png","slug":"soft-reference-2.png","post":"cjxze3gxe00670cvwchtc3rmu","modified":0,"renderable":0},{"_id":"source/_posts/java/reference/soft-reference-code-detail/soft-reference-3.png","slug":"soft-reference-3.png","post":"cjxze3gxe00670cvwchtc3rmu","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-1.png","slug":"java-simple-example-1.png","post":"cjxze3gw0004r0cvwam3xiz7c","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-2.png","slug":"java-simple-example-2.png","post":"cjxze3gw0004r0cvwam3xiz7c","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-simple-example/java-simple-example-3.png","slug":"java-simple-example-3.png","post":"cjxze3gw0004r0cvwam3xiz7c","modified":0,"renderable":0},{"_id":"source/_posts/java/collection/weakhashmap-code-detail/0038.png","slug":"0038.png","post":"cjxze3guw004a0cvw1sd62ppr","modified":0,"renderable":0},{"_id":"source/_posts/java/collection/weakhashmap-code-detail/weakhashmap-1.png","slug":"weakhashmap-1.png","post":"cjxze3guw004a0cvw1sd62ppr","modified":0,"renderable":0},{"_id":"source/_posts/java/collection/weakhashmap-code-detail/weakhashmap-2.png","slug":"weakhashmap-2.png","post":"cjxze3guw004a0cvw1sd62ppr","modified":0,"renderable":0},{"_id":"source/_posts/java/collection/weakhashmap-code-detail/weakhashmap-3.png","slug":"weakhashmap-3.png","post":"cjxze3guw004a0cvw1sd62ppr","modified":0,"renderable":0},{"_id":"source/_posts/java/collection/weakhashmap-code-detail/weakhashmap-4.png","slug":"weakhashmap-4.png","post":"cjxze3guw004a0cvw1sd62ppr","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-1.png","slug":"java-ide-1.png","post":"cjxze3gvg004l0cvwekducab4","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-3.png","slug":"java-ide-3.png","post":"cjxze3gvg004l0cvwekducab4","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-4.png","slug":"java-ide-4.png","post":"cjxze3gvg004l0cvwekducab4","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-5.png","slug":"java-ide-5.png","post":"cjxze3gvg004l0cvwekducab4","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-6.png","slug":"java-ide-6.png","post":"cjxze3gvg004l0cvwekducab4","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-7.png","slug":"java-ide-7.png","post":"cjxze3gvg004l0cvwekducab4","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-8.png","slug":"java-ide-8.png","post":"cjxze3gvg004l0cvwekducab4","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-ide/java-ide-9.png","slug":"java-ide-9.png","post":"cjxze3gvg004l0cvwekducab4","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/1-jdk-windows.png","slug":"1-jdk-windows.png","post":"cjxze3gwu005q0cvwu5jx6eyy","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/2-jdk-windows.png","slug":"2-jdk-windows.png","post":"cjxze3gwu005q0cvwu5jx6eyy","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/3-jdk-windows.png","slug":"3-jdk-windows.png","post":"cjxze3gwu005q0cvwu5jx6eyy","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/4-jdk-windows.png","slug":"4-jdk-windows.png","post":"cjxze3gwu005q0cvwu5jx6eyy","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/5-jdk-windows.png","slug":"5-jdk-windows.png","post":"cjxze3gwu005q0cvwu5jx6eyy","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/6-jdk-windows.png","slug":"6-jdk-windows.png","post":"cjxze3gwu005q0cvwu5jx6eyy","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/7-jdk-windows.png","slug":"7-jdk-windows.png","post":"cjxze3gwu005q0cvwu5jx6eyy","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/8-jdk-windows.png","slug":"8-jdk-windows.png","post":"cjxze3gwu005q0cvwu5jx6eyy","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-windows/9-jdk-windows.png","slug":"9-jdk-windows.png","post":"cjxze3gwu005q0cvwu5jx6eyy","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/1-jdk-mac.png","slug":"1-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/10-jdk-mac.png","slug":"10-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/11-jdk-mac.png","slug":"11-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/12-jdk-mac.png","slug":"12-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/13-jdk-mac.png","slug":"13-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/14-jdk-mac.png","slug":"14-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/15-jdk-mac.png","slug":"15-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/16-jdk-mac.png","slug":"16-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/5-jdk-mac.png","slug":"5-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/6-jdk-mac.png","slug":"6-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/7-jdk-mac.png","slug":"7-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/8-jdk-mac.png","slug":"8-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/introduction/java-environment-mac/9-jdk-mac.png","slug":"9-jdk-mac.png","post":"cjxze3guc00400cvw3xggpta5","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf6a292b1d070453.png","slug":"5cdf6a292b1d070453.png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf6a655276187010.png","slug":"5cdf6a655276187010.png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf7daf74e9241031.png","slug":"5cdf7daf74e9241031.png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf7e9f2047e23793.png","slug":"5cdf7e9f2047e23793.png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf7ec98fddd17705.png","slug":"5cdf7ec98fddd17705.png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf7f0e86fbc84596.png","slug":"5cdf7f0e86fbc84596.png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/5cdf7f4a7282234332.png","slug":"5cdf7f4a7282234332.png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/black_smile.jpg","slug":"black_smile.jpg","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (1).png","slug":"carbon (1).png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (2).png","slug":"carbon (2).png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (3).png","slug":"carbon (3).png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (4).png","slug":"carbon (4).png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (7).png","slug":"carbon (7).png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (8).png","slug":"carbon (8).png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/carbon (9).png","slug":"carbon (9).png","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0},{"_id":"source/_posts/java/problem/the-correct-operation-of-arrays/e8df70b9feab81ccabe8a2821dc2e9880cddc9e4f2ce-zo9QsQ_fw658.jpeg","slug":"e8df70b9feab81ccabe8a2821dc2e9880cddc9e4f2ce-zo9QsQ_fw658.jpeg","post":"cjxze3gwa00550cvwlu8qcz9r","modified":0,"renderable":0}],"PostCategory":[{"post_id":"cjxze3gkc00020cvw5rji4j8t","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gkm00060cvwiyvpldvp"},{"post_id":"cjxze3gkw00090cvwyi34fcxb","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gl6000e0cvwgypj8de5"},{"post_id":"cjxze3gkw000a0cvw568fw4pv","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gl6000f0cvwyuallpgm"},{"post_id":"cjxze3gkw000c0cvwhvfuzczx","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gl6000h0cvw5o56kjrs"},{"post_id":"cjxze3gno000q0cvw8bbq0vax","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gny000w0cvw819dkovu"},{"post_id":"cjxze3gno000r0cvwwkqf9oyy","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gny000z0cvwr7yxcw4j"},{"post_id":"cjxze3gno000t0cvwe73qcbbe","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gny00130cvwbzxnittg"},{"post_id":"cjxze3gny000v0cvwgt26h3po","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3go800160cvwvpvpdnho"},{"post_id":"cjxze3gny000y0cvwnr1uuwpf","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3goj001a0cvwl2gjmmq9"},{"post_id":"cjxze3gny00120cvw478hhvpu","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3goo001d0cvway222s7s"},{"post_id":"cjxze3gp1001m0cvwfjpg2c8v","category_id":"cjxze3gox001h0cvw3ibxwq3f","_id":"cjxze3gpa001v0cvwbeufxq57"},{"post_id":"cjxze3gon001c0cvwdh9ove76","category_id":"cjxze3gox001h0cvw3ibxwq3f","_id":"cjxze3gpc001z0cvw7glgq96p"},{"post_id":"cjxze3gp3001o0cvwij3yvuhz","category_id":"cjxze3gox001h0cvw3ibxwq3f","_id":"cjxze3gpc00220cvwp1pkxi7e"},{"post_id":"cjxze3gp7001s0cvwuas8bs7g","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gpc00260cvw1z8ch3ga"},{"post_id":"cjxze3goy001j0cvwm6jvsgrz","category_id":"cjxze3gox001h0cvw3ibxwq3f","_id":"cjxze3gpc00280cvw4m6xvo63"},{"post_id":"cjxze3gp9001u0cvwva2wpd1b","category_id":"cjxze3gox001h0cvw3ibxwq3f","_id":"cjxze3gpm002a0cvwh91u3bsu"},{"post_id":"cjxze3gpc001y0cvw806qtrv7","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gpm002d0cvwgayx09jt"},{"post_id":"cjxze3gqg00350cvwvkwr261w","category_id":"cjxze3gox001h0cvw3ibxwq3f","_id":"cjxze3gqg003a0cvwlqas5nyl"},{"post_id":"cjxze3gt8003c0cvwedynwmt3","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gti003h0cvwbf722oct"},{"post_id":"cjxze3gt8003d0cvwb0lqwidg","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gti003j0cvwzom4lnkc"},{"post_id":"cjxze3gti003f0cvww7vef0nc","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gts003n0cvw0lag136x"},{"post_id":"cjxze3gti003g0cvwmpx266el","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gts003q0cvw7xpbog9r"},{"post_id":"cjxze3gti003i0cvw5iyp6f9l","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gts003u0cvw2e9q7xny"},{"post_id":"cjxze3gti003m0cvwyjtapemc","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gu2003x0cvwrdsablep"},{"post_id":"cjxze3gts003p0cvwtocl9s2y","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3guc00410cvw2oonxii9"},{"post_id":"cjxze3gts003t0cvw5vjgjxgw","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gum00440cvwwqi7f7jg"},{"post_id":"cjxze3gu2003w0cvwfcifyf9a","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3guw00480cvwexpi3l9m"},{"post_id":"cjxze3guc00400cvw3xggpta5","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3guw004b0cvwat0k1omn"},{"post_id":"cjxze3gum00430cvwm6fg8irc","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gv6004f0cvw2qa2059j"},{"post_id":"cjxze3guw00470cvw56eqtear","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gvg004i0cvw67kaxp9c"},{"post_id":"cjxze3guw004a0cvw1sd62ppr","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gvq004m0cvwglygse20"},{"post_id":"cjxze3gv6004e0cvwngbasiic","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gvq004p0cvwmlbudvhv"},{"post_id":"cjxze3gvg004h0cvwzl1jzq7d","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gw0004s0cvwb6oxg92w"},{"post_id":"cjxze3gvg004l0cvwekducab4","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gw0004w0cvwm55xmmnm"},{"post_id":"cjxze3gvq004o0cvw41jihbeh","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gw0004z0cvwqpwk3ax7"},{"post_id":"cjxze3gw0004r0cvwam3xiz7c","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gwa00530cvw08hpmj13"},{"post_id":"cjxze3gw0004v0cvwlyvez3vo","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gwa00560cvwo9rybat9"},{"post_id":"cjxze3gw0004y0cvwi4cslmm4","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gwk005a0cvwf0s94j08"},{"post_id":"cjxze3gwa00520cvwciw7wbfl","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gwk005d0cvw05ae0xac"},{"post_id":"cjxze3gwa00550cvwlu8qcz9r","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gwk005h0cvw7fpcjf5m"},{"post_id":"cjxze3gwk00590cvwnvqe92ba","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gwu005k0cvw7jb41a2n"},{"post_id":"cjxze3gwk005c0cvwle6qbx0f","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gwu005n0cvwl8r3qgse"},{"post_id":"cjxze3gwk005g0cvwp414mbt1","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gwu005r0cvw2gknos4v"},{"post_id":"cjxze3gwu005j0cvw0opodqas","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gx4005u0cvwu82p57jo"},{"post_id":"cjxze3gwu005m0cvwpr9rtcrz","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gx4005y0cvwvzv2d0lu"},{"post_id":"cjxze3gwu005q0cvwu5jx6eyy","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gx400610cvw7bxtwisd"},{"post_id":"cjxze3gwu005t0cvw8r0uapym","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gx400650cvwfjz2979o"},{"post_id":"cjxze3gx4005x0cvwc2nksy7c","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gxe00680cvw1k6xqepi"},{"post_id":"cjxze3gx400600cvw5txb31od","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gxe006c0cvwa27h8hnh"},{"post_id":"cjxze3gx400640cvwg6sj2kyp","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gxe006f0cvwf0lmfx4d"},{"post_id":"cjxze3gxe00670cvwchtc3rmu","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gxo006i0cvwacdtsrab"},{"post_id":"cjxze3gxe006b0cvwp2lb0o4u","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gxo006l0cvwtybr871o"},{"post_id":"cjxze3gxe006e0cvwctmnxum0","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gxo006n0cvwxj2xb417"},{"post_id":"cjxze3gxe006h0cvwsozru4mv","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gxo006p0cvwp9u1w4ut"},{"post_id":"cjxze3gxo006k0cvw15ee24g3","category_id":"cjxze3gkm00030cvw03u1c4h3","_id":"cjxze3gxy006r0cvwb3g4ji7o"}],"PostTag":[{"post_id":"cjxze3gkc00020cvw5rji4j8t","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gkm00070cvwo6ylyc91"},{"post_id":"cjxze3gkc00020cvw5rji4j8t","tag_id":"cjxze3gkm00050cvwq95rzjxp","_id":"cjxze3gkm00080cvw5am5goz7"},{"post_id":"cjxze3gkw00090cvwyi34fcxb","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gkw000b0cvw72s1fagk"},{"post_id":"cjxze3gkw000a0cvw568fw4pv","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3glg000j0cvw9h5p1juf"},{"post_id":"cjxze3gkw000a0cvw568fw4pv","tag_id":"cjxze3gl6000d0cvwsiiku4fc","_id":"cjxze3glg000k0cvw3u2b140f"},{"post_id":"cjxze3gkw000a0cvw568fw4pv","tag_id":"cjxze3gl6000g0cvwnlxa0o1r","_id":"cjxze3glg000m0cvwjnt513kr"},{"post_id":"cjxze3gkw000c0cvwhvfuzczx","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3glq000n0cvw21ls3sqt"},{"post_id":"cjxze3gkw000c0cvwhvfuzczx","tag_id":"cjxze3gl6000d0cvwsiiku4fc","_id":"cjxze3glq000o0cvw8j7biykt"},{"post_id":"cjxze3gkw000c0cvwhvfuzczx","tag_id":"cjxze3gl6000g0cvwnlxa0o1r","_id":"cjxze3glq000p0cvwqsq183ob"},{"post_id":"cjxze3gno000r0cvwwkqf9oyy","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gno000u0cvwo008ehkd"},{"post_id":"cjxze3gno000r0cvwwkqf9oyy","tag_id":"cjxze3gl6000d0cvwsiiku4fc","_id":"cjxze3gny000x0cvwzwz1q0uh"},{"post_id":"cjxze3gno000r0cvwwkqf9oyy","tag_id":"cjxze3gl6000g0cvwnlxa0o1r","_id":"cjxze3gny00110cvwcwqlw297"},{"post_id":"cjxze3gny000v0cvwgt26h3po","tag_id":"cjxze3gl6000d0cvwsiiku4fc","_id":"cjxze3go800140cvwu2cgetb9"},{"post_id":"cjxze3gny000v0cvwgt26h3po","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3go800180cvwsmn74t3n"},{"post_id":"cjxze3gny000v0cvwgt26h3po","tag_id":"cjxze3gl6000g0cvwnlxa0o1r","_id":"cjxze3gom001b0cvwcor08c7j"},{"post_id":"cjxze3gny00120cvw478hhvpu","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gos001f0cvwn9qadaqk"},{"post_id":"cjxze3gny00120cvw478hhvpu","tag_id":"cjxze3gl6000d0cvwsiiku4fc","_id":"cjxze3goy001i0cvw34ipb0oo"},{"post_id":"cjxze3gny00120cvw478hhvpu","tag_id":"cjxze3gno000s0cvwdxmcay2w","_id":"cjxze3gp1001l0cvwa385b6mo"},{"post_id":"cjxze3gny00120cvw478hhvpu","tag_id":"cjxze3gny00100cvwch3drroo","_id":"cjxze3gp3001n0cvwos3z2cmo"},{"post_id":"cjxze3gno000q0cvw8bbq0vax","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gp7001r0cvwcyoh0i5l"},{"post_id":"cjxze3gno000q0cvw8bbq0vax","tag_id":"cjxze3gl6000d0cvwsiiku4fc","_id":"cjxze3gp9001t0cvw4mcxoakj"},{"post_id":"cjxze3gno000q0cvw8bbq0vax","tag_id":"cjxze3gno000s0cvwdxmcay2w","_id":"cjxze3gpc001x0cvwbdrjno5l"},{"post_id":"cjxze3gno000q0cvw8bbq0vax","tag_id":"cjxze3gny00100cvwch3drroo","_id":"cjxze3gpc00200cvwmxgf2cf3"},{"post_id":"cjxze3got001g0cvwfuw9w55m","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gpc00230cvwt4ebdqdj"},{"post_id":"cjxze3got001g0cvwfuw9w55m","tag_id":"cjxze3gl6000d0cvwsiiku4fc","_id":"cjxze3gpc00270cvwywlxuowf"},{"post_id":"cjxze3got001g0cvwfuw9w55m","tag_id":"cjxze3gno000s0cvwdxmcay2w","_id":"cjxze3gpm00290cvw7ddloigy"},{"post_id":"cjxze3got001g0cvwfuw9w55m","tag_id":"cjxze3gny00100cvwch3drroo","_id":"cjxze3gpm002c0cvwvqhv5v5y"},{"post_id":"cjxze3gno000t0cvwe73qcbbe","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gpm002e0cvwgg5kyyiw"},{"post_id":"cjxze3gno000t0cvwe73qcbbe","tag_id":"cjxze3gl6000d0cvwsiiku4fc","_id":"cjxze3gpm002g0cvw03cxeljl"},{"post_id":"cjxze3gno000t0cvwe73qcbbe","tag_id":"cjxze3gno000s0cvwdxmcay2w","_id":"cjxze3gpm002h0cvw7j4v289k"},{"post_id":"cjxze3gno000t0cvwe73qcbbe","tag_id":"cjxze3gny00100cvwch3drroo","_id":"cjxze3gpm002j0cvw59phh4jc"},{"post_id":"cjxze3gny000y0cvwnr1uuwpf","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gpm002k0cvwxn10m4bk"},{"post_id":"cjxze3gny000y0cvwnr1uuwpf","tag_id":"cjxze3gl6000d0cvwsiiku4fc","_id":"cjxze3gpm002m0cvw66bxqw9s"},{"post_id":"cjxze3gny000y0cvwnr1uuwpf","tag_id":"cjxze3gno000s0cvwdxmcay2w","_id":"cjxze3gpm002n0cvw72yglcma"},{"post_id":"cjxze3gny000y0cvwnr1uuwpf","tag_id":"cjxze3gny00100cvwch3drroo","_id":"cjxze3gpm002o0cvwvny1lufz"},{"post_id":"cjxze3gp9001u0cvwva2wpd1b","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gpw002p0cvwob5rus7p"},{"post_id":"cjxze3gp9001u0cvwva2wpd1b","tag_id":"cjxze3gkm00050cvwq95rzjxp","_id":"cjxze3gpw002q0cvw7rri7sri"},{"post_id":"cjxze3gpc001y0cvw806qtrv7","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gpw002r0cvw2dkcdspa"},{"post_id":"cjxze3gpc001y0cvw806qtrv7","tag_id":"cjxze3gl6000d0cvwsiiku4fc","_id":"cjxze3gpw002s0cvwie3d3tnk"},{"post_id":"cjxze3gpc001y0cvw806qtrv7","tag_id":"cjxze3gl6000g0cvwnlxa0o1r","_id":"cjxze3gpw002t0cvw3blvke9u"},{"post_id":"cjxze3gpc001y0cvw806qtrv7","tag_id":"cjxze3gno000s0cvwdxmcay2w","_id":"cjxze3gpw002u0cvw5cq2glot"},{"post_id":"cjxze3go800150cvwdwa9ptzw","tag_id":"cjxze3gp6001q0cvwiulqag9j","_id":"cjxze3gpw002v0cvww059lzru"},{"post_id":"cjxze3go800150cvwdwa9ptzw","tag_id":"cjxze3gpb001w0cvw0v7tcas1","_id":"cjxze3gpw002w0cvwkle7xm9l"},{"post_id":"cjxze3go800190cvwzwkcwhnc","tag_id":"cjxze3gpc00240cvw9q6z7ynb","_id":"cjxze3gpw002x0cvw0rn2t2pi"},{"post_id":"cjxze3gon001c0cvwdh9ove76","tag_id":"cjxze3gpm002b0cvwhhzmcln7","_id":"cjxze3gpw002y0cvwcr8xt0qb"},{"post_id":"cjxze3gon001c0cvwdh9ove76","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gpw002z0cvwzdi3y24r"},{"post_id":"cjxze3gon001c0cvwdh9ove76","tag_id":"cjxze3gkm00050cvwq95rzjxp","_id":"cjxze3gpw00300cvwiycfq6l4"},{"post_id":"cjxze3gp1001m0cvwfjpg2c8v","tag_id":"cjxze3gpm002f0cvwstkbsaln","_id":"cjxze3gpw00310cvwmgygabj5"},{"post_id":"cjxze3gp3001o0cvwij3yvuhz","tag_id":"cjxze3gpm002b0cvwhhzmcln7","_id":"cjxze3gpw00320cvwwxvlh24l"},{"post_id":"cjxze3gp7001s0cvwuas8bs7g","tag_id":"cjxze3gpm002l0cvw92dv9uxt","_id":"cjxze3gpw00330cvw5y8c4sgv"},{"post_id":"cjxze3gqg00350cvwvkwr261w","tag_id":"cjxze3gpm002b0cvwhhzmcln7","_id":"cjxze3gqg00370cvwoqzhf937"},{"post_id":"cjxze3gqg00350cvwvkwr261w","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gqg00390cvwsnxm3uy6"},{"post_id":"cjxze3gqg00350cvwvkwr261w","tag_id":"cjxze3gkm00050cvwq95rzjxp","_id":"cjxze3gqg003b0cvw6aen9bzn"},{"post_id":"cjxze3gti003g0cvwmpx266el","tag_id":"cjxze3gti003e0cvw250yxgxm","_id":"cjxze3gti003l0cvwpvhudmi7"},{"post_id":"cjxze3gt8003c0cvwedynwmt3","tag_id":"cjxze3gti003e0cvw250yxgxm","_id":"cjxze3gts003o0cvw0iap9926"},{"post_id":"cjxze3gti003m0cvwyjtapemc","tag_id":"cjxze3gti003k0cvwfhhsg1v4","_id":"cjxze3gts003s0cvwylp11yan"},{"post_id":"cjxze3gti003m0cvwyjtapemc","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gu2003v0cvwj6mtm5p0"},{"post_id":"cjxze3gt8003d0cvwb0lqwidg","tag_id":"cjxze3gti003k0cvwfhhsg1v4","_id":"cjxze3guc003z0cvwitfp1qqa"},{"post_id":"cjxze3gt8003d0cvwb0lqwidg","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3guc00420cvwqbp86nha"},{"post_id":"cjxze3gts003p0cvwtocl9s2y","tag_id":"cjxze3gti003k0cvwfhhsg1v4","_id":"cjxze3guw00460cvwe07uji5n"},{"post_id":"cjxze3gts003p0cvwtocl9s2y","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3guw00490cvwv3vktczw"},{"post_id":"cjxze3gts003t0cvw5vjgjxgw","tag_id":"cjxze3gti003k0cvwfhhsg1v4","_id":"cjxze3gv6004c0cvwfqjh8duc"},{"post_id":"cjxze3gts003t0cvw5vjgjxgw","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gvg004g0cvwfok3cjf2"},{"post_id":"cjxze3gti003f0cvww7vef0nc","tag_id":"cjxze3gti003e0cvw250yxgxm","_id":"cjxze3gvg004j0cvwcydly4np"},{"post_id":"cjxze3gti003i0cvw5iyp6f9l","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gvq004n0cvw8gu58h01"},{"post_id":"cjxze3gti003i0cvw5iyp6f9l","tag_id":"cjxze3gu2003y0cvw9ou7z8nn","_id":"cjxze3gvq004q0cvw88my9pt4"},{"post_id":"cjxze3gum00430cvwm6fg8irc","tag_id":"cjxze3gti003k0cvwfhhsg1v4","_id":"cjxze3gw0004u0cvw6tbr6ou0"},{"post_id":"cjxze3gum00430cvwm6fg8irc","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gw0004x0cvw85fkfdvo"},{"post_id":"cjxze3guw00470cvw56eqtear","tag_id":"cjxze3gum00450cvwpih78czb","_id":"cjxze3gwa00510cvw25lk76dr"},{"post_id":"cjxze3guw00470cvw56eqtear","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gwa00540cvwo839x6la"},{"post_id":"cjxze3gu2003w0cvwfcifyf9a","tag_id":"cjxze3gum00450cvwpih78czb","_id":"cjxze3gwk00580cvwbd813yle"},{"post_id":"cjxze3gu2003w0cvwfcifyf9a","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gwk005b0cvw97ys54ul"},{"post_id":"cjxze3gu2003w0cvwfcifyf9a","tag_id":"cjxze3gpm002l0cvw92dv9uxt","_id":"cjxze3gwk005e0cvw39y6t6c3"},{"post_id":"cjxze3gv6004e0cvwngbasiic","tag_id":"cjxze3gum00450cvwpih78czb","_id":"cjxze3gwk005i0cvwf0pcsncx"},{"post_id":"cjxze3gv6004e0cvwngbasiic","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gwu005l0cvwnk70gz7g"},{"post_id":"cjxze3guc00400cvw3xggpta5","tag_id":"cjxze3gum00450cvwpih78czb","_id":"cjxze3gwu005p0cvw260fcj4c"},{"post_id":"cjxze3guc00400cvw3xggpta5","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gwu005s0cvw6jra76el"},{"post_id":"cjxze3guc00400cvw3xggpta5","tag_id":"cjxze3gpm002l0cvw92dv9uxt","_id":"cjxze3gx4005w0cvwhdq01th0"},{"post_id":"cjxze3gvg004l0cvwekducab4","tag_id":"cjxze3gum00450cvwpih78czb","_id":"cjxze3gx4005z0cvwbu1u9kqb"},{"post_id":"cjxze3gvg004l0cvwekducab4","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gx400630cvwgost56nq"},{"post_id":"cjxze3gvg004l0cvwekducab4","tag_id":"cjxze3gpm002l0cvw92dv9uxt","_id":"cjxze3gxe00660cvw66q5qrmg"},{"post_id":"cjxze3guw004a0cvw1sd62ppr","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxe006a0cvwwld2vclu"},{"post_id":"cjxze3guw004a0cvw1sd62ppr","tag_id":"cjxze3gvg004k0cvw8we8eozq","_id":"cjxze3gxe006d0cvwk4lsaox7"},{"post_id":"cjxze3gw0004r0cvwam3xiz7c","tag_id":"cjxze3gum00450cvwpih78czb","_id":"cjxze3gxe006g0cvwltcv3a4y"},{"post_id":"cjxze3gw0004r0cvwam3xiz7c","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxo006j0cvwiwxz1og0"},{"post_id":"cjxze3gw0004v0cvwlyvez3vo","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxo006m0cvw5b8g81at"},{"post_id":"cjxze3gvg004h0cvwzl1jzq7d","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxo006o0cvw8q83y8hd"},{"post_id":"cjxze3gvg004h0cvwzl1jzq7d","tag_id":"cjxze3gw0004t0cvw0901ra1p","_id":"cjxze3gxy006q0cvw8c4c2ki2"},{"post_id":"cjxze3gwa00520cvwciw7wbfl","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxy006s0cvwf7b32ky3"},{"post_id":"cjxze3gwa00520cvwciw7wbfl","tag_id":"cjxze3gkm00050cvwq95rzjxp","_id":"cjxze3gxy006t0cvw12mhd6ao"},{"post_id":"cjxze3gvq004o0cvw41jihbeh","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxy006u0cvw4gzc2eyr"},{"post_id":"cjxze3gvq004o0cvw41jihbeh","tag_id":"cjxze3gw000500cvwdew7u6up","_id":"cjxze3gxy006v0cvwht9wgxmq"},{"post_id":"cjxze3gwk00590cvwnvqe92ba","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxy006w0cvwnnty0hf1"},{"post_id":"cjxze3gw0004y0cvwi4cslmm4","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxy006x0cvwbxz9760y"},{"post_id":"cjxze3gw0004y0cvwi4cslmm4","tag_id":"cjxze3gwk00570cvw3tsp3f4g","_id":"cjxze3gxy006y0cvwqwzkwlyh"},{"post_id":"cjxze3gwa00550cvwlu8qcz9r","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxy006z0cvwoyu2xfmz"},{"post_id":"cjxze3gwa00550cvwlu8qcz9r","tag_id":"cjxze3gwk005f0cvwndtuwpns","_id":"cjxze3gxy00700cvwelhk1y9c"},{"post_id":"cjxze3gwu005q0cvwu5jx6eyy","tag_id":"cjxze3gum00450cvwpih78czb","_id":"cjxze3gxy00710cvwzcrfdd6q"},{"post_id":"cjxze3gwu005q0cvwu5jx6eyy","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxy00720cvwas4u8v2g"},{"post_id":"cjxze3gwu005q0cvwu5jx6eyy","tag_id":"cjxze3gpm002l0cvw92dv9uxt","_id":"cjxze3gxy00730cvw9l12y7eo"},{"post_id":"cjxze3gwk005c0cvwle6qbx0f","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxy00740cvw7awr5x0h"},{"post_id":"cjxze3gwk005c0cvwle6qbx0f","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gxy00750cvwp0b8r4ye"},{"post_id":"cjxze3gwu005t0cvw8r0uapym","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gxy00760cvwgv7zwz3d"},{"post_id":"cjxze3gwu005t0cvw8r0uapym","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gxy00770cvwhagpvrsx"},{"post_id":"cjxze3gx4005x0cvwc2nksy7c","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gy800780cvwjx3qyjka"},{"post_id":"cjxze3gx4005x0cvwc2nksy7c","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gy800790cvwz2c3zdzq"},{"post_id":"cjxze3gwk005g0cvwp414mbt1","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gy8007a0cvwehg4s8i1"},{"post_id":"cjxze3gwk005g0cvwp414mbt1","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gy8007b0cvw1s4sj53y"},{"post_id":"cjxze3gx400600cvw5txb31od","tag_id":"cjxze3gum00450cvwpih78czb","_id":"cjxze3gy8007c0cvwyd7a44wl"},{"post_id":"cjxze3gx400600cvw5txb31od","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gy8007d0cvw6ga2zuc6"},{"post_id":"cjxze3gx400640cvwg6sj2kyp","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gy8007e0cvw2xlxqd87"},{"post_id":"cjxze3gx400640cvwg6sj2kyp","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gy8007f0cvw7ocp48er"},{"post_id":"cjxze3gwu005j0cvw0opodqas","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gy8007g0cvw9m9appem"},{"post_id":"cjxze3gwu005j0cvw0opodqas","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gy8007h0cvw0cur4c2m"},{"post_id":"cjxze3gxe00670cvwchtc3rmu","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gy8007i0cvwqkiqgp7e"},{"post_id":"cjxze3gxe00670cvwchtc3rmu","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gy8007j0cvwweineiha"},{"post_id":"cjxze3gxe006b0cvwp2lb0o4u","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gy8007k0cvwku8opn7b"},{"post_id":"cjxze3gxe006b0cvwp2lb0o4u","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gy8007l0cvw9qdijyhh"},{"post_id":"cjxze3gwu005m0cvwpr9rtcrz","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gy8007m0cvw360ww6z0"},{"post_id":"cjxze3gwu005m0cvwpr9rtcrz","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gyi007n0cvwg7og8o2l"},{"post_id":"cjxze3gxe006e0cvwctmnxum0","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gyi007o0cvwyx0dg4o7"},{"post_id":"cjxze3gxe006e0cvwctmnxum0","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gyi007p0cvwdjs5xyts"},{"post_id":"cjxze3gxe006h0cvwsozru4mv","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gyi007q0cvwzgisu7tj"},{"post_id":"cjxze3gxe006h0cvwsozru4mv","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gyi007r0cvw7pv6xd33"},{"post_id":"cjxze3gxo006k0cvw15ee24g3","tag_id":"cjxze3gkm00040cvw81dh5yg3","_id":"cjxze3gyi007s0cvwox4oybx4"},{"post_id":"cjxze3gxo006k0cvw15ee24g3","tag_id":"cjxze3gwu005o0cvwp058wfzd","_id":"cjxze3gyi007t0cvw6mw01dve"},{"post_id":"cjxze3gys007u0cvw6ne5bg40","tag_id":"cjxze3gys007v0cvwwakp22q7","_id":"cjxze3gzw007y0cvwun98f0la"},{"post_id":"cjxze3gys007u0cvw6ne5bg40","tag_id":"cjxze3gz2007w0cvwyq7g5r48","_id":"cjxze3gzw007z0cvwa4vi34vq"},{"post_id":"cjxze3gys007u0cvw6ne5bg40","tag_id":"cjxze3gzc007x0cvwzvs5uxlr","_id":"cjxze3h0600800cvweiv5hbn5"},{"post_id":"cjxze3h0g00810cvwbwcrrdjh","tag_id":"cjxze3h0g00830cvwt1g3373o","_id":"cjxze3h1k00870cvw12pgotpk"},{"post_id":"cjxze3h0g00810cvwbwcrrdjh","tag_id":"cjxze3h1000850cvwccubi2vg","_id":"cjxze3h1k00880cvwukztw0rm"},{"post_id":"cjxze3h0g00820cvwd3l93uzw","tag_id":"cjxze3h0g00830cvwt1g3373o","_id":"cjxze3h1k008b0cvw8ujx4qgs"},{"post_id":"cjxze3h0g00820cvwd3l93uzw","tag_id":"cjxze3h1000850cvwccubi2vg","_id":"cjxze3h1k008c0cvw8d7wngr3"},{"post_id":"cjxze3h0q00840cvwzteqlyfa","tag_id":"cjxze3h0g00830cvwt1g3373o","_id":"cjxze3h1k008e0cvw43z12zut"},{"post_id":"cjxze3h0q00840cvwzteqlyfa","tag_id":"cjxze3h1000850cvwccubi2vg","_id":"cjxze3h1u008f0cvwymhpizde"},{"post_id":"cjxzito2m0000eus6yxhwf2r8","tag_id":"cjxze3gp6001q0cvwiulqag9j","_id":"cjxzito7h0004eus6ws6gj1cj"},{"post_id":"cjxzito2m0000eus6yxhwf2r8","tag_id":"cjxzito6r0002eus63nl4o0wt","_id":"cjxzito7j0005eus6mw39rplb"},{"post_id":"cjxzito4f0001eus69s0s8g0q","tag_id":"cjxze3gp6001q0cvwiulqag9j","_id":"cjxzito7p0006eus64vini0d5"},{"post_id":"cjxzito4f0001eus69s0s8g0q","tag_id":"cjxzito7f0003eus6j7l6bstp","_id":"cjxzito7s0007eus6tl82bgkx"}],"Tag":[{"name":"Java","_id":"cjxze3gkm00040cvw81dh5yg3"},{"name":"","_id":"cjxze3gkm00050cvwq95rzjxp"},{"name":"","_id":"cjxze3gl6000d0cvwsiiku4fc"},{"name":"LeetCode","_id":"cjxze3gl6000g0cvwnlxa0o1r"},{"name":"","_id":"cjxze3gno000s0cvwdxmcay2w"},{"name":"","_id":"cjxze3gny00100cvwch3drroo"},{"name":"mysql","_id":"cjxze3gp6001q0cvwiulqag9j"},{"name":"","_id":"cjxze3gpb001w0cvw0v7tcas1"},{"name":"RabbitMQ","_id":"cjxze3gpc00240cvw9q6z7ynb"},{"name":"","_id":"cjxze3gpm002b0cvwhhzmcln7"},{"name":"","_id":"cjxze3gpm002f0cvwstkbsaln"},{"name":"","_id":"cjxze3gpm002l0cvw92dv9uxt"},{"name":"","_id":"cjxze3gti003e0cvw250yxgxm"},{"name":"Java","_id":"cjxze3gti003k0cvwfhhsg1v4"},{"name":"","_id":"cjxze3gu2003y0cvw9ou7z8nn"},{"name":"Java","_id":"cjxze3gum00450cvwpih78czb"},{"name":"Java","_id":"cjxze3gvg004k0cvw8we8eozq"},{"name":"","_id":"cjxze3gw0004t0cvw0901ra1p"},{"name":"","_id":"cjxze3gw000500cvwdew7u6up"},{"name":"","_id":"cjxze3gwk00570cvw3tsp3f4g"},{"name":"","_id":"cjxze3gwk005f0cvwndtuwpns"},{"name":"","_id":"cjxze3gwu005o0cvwp058wfzd"},{"name":"","_id":"cjxze3gys007v0cvwwakp22q7"},{"name":"","_id":"cjxze3gz2007w0cvwyq7g5r48"},{"name":"Python","_id":"cjxze3gzc007x0cvwzvs5uxlr"},{"name":"Spring","_id":"cjxze3h0g00830cvwt1g3373o"},{"name":"","_id":"cjxze3h1000850cvwccubi2vg"},{"name":"","_id":"cjxzito6r0002eus63nl4o0wt"},{"name":"","_id":"cjxzito7f0003eus6j7l6bstp"}]}}
