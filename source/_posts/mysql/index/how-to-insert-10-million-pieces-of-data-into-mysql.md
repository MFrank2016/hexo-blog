---
title: ã€Mysqlã€‘å¦‚æœåœ¨Mysqlä¸­æ’å…¥1000ä¸‡æ¡æ•°æ®
date: 2019-06-04 09:37:41
tags:
 - mysql
 - æµ‹è¯•
categorys:
 - æ•°æ®åº“
---

é˜…è¯»æœ¬æ–‡å¤§çº¦éœ€è¦ï¼š5åˆ†é’Ÿï¼Œæœ¬æ–‡å£æ„Ÿï¼šå†°é•‡ğŸ‰

## è¯´æ˜

çœ‹åˆ°è¿™ä¸ªæ ‡é¢˜ï¼Œä¹Ÿè®¸ä½ çš„ç¬¬ä¸€ååº”ä¼šæ˜¯ï¼šï¼Ÿï¼Ÿï¼Ÿï¼Œè«åå…¶å¦™æ’ä¸€åƒä¸‡æ¡æ•°æ®å¹²å˜›ï¼Ÿå«Œmysqlç©ºé—´å¤ªå¤§ï¼Ÿ

![](https://i.loli.net/2019/05/18/5cdf6539270f631562.jpg)

è«æ–¹ï¼Œè‡ªæœ‰å¦™ç”¨ã€‚æƒ³æƒ³çœ‹ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªä¸Šäº¿çš„é¡¹ç›®ï¼Œemmmmï¼Œåˆ«è¯¯ä¼šï¼Œæˆ‘æ˜¯è¯´æœ‰å¯èƒ½ä¼šå‘å±•åˆ°ä¸Šäº¿æ•°æ®çš„é¡¹ç›®ï¼Œæ¯”å¦‚æ´»åŠ¨çš„é¢†å–è®°å½•è¡¨ï¼Œè™½ç„¶æ¯æ¬¡æ´»åŠ¨å¯èƒ½åªæœ‰å‡ ä¸‡ç”šè‡³å‡ åä¸‡æ¡æ•°æ®ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ´»åŠ¨ç³»ç»Ÿä¸­åˆ›å»ºçš„æ´»åŠ¨å¾ˆå¤šï¼Œä¸€ä¸ªæœˆçš„æ•°æ®å¢é•¿é‡ä¹Ÿè®¸ä¼šè¾¾åˆ°ç™¾ä¸‡ç”šè‡³åƒä¸‡çº§åˆ«ï¼Œä¸€å¹´ä¸‹æ¥ï¼Œæ•°æ®é‡å¯èƒ½å°±çœŸä¸Šäº¿äº†ã€‚

å¯¹äºMysqlæ•°æ®åº“æ¥è¯´ï¼Œå½“æ•°æ®é‡è¾¾åˆ°åƒä¸‡çš„é‡çº§æ—¶ï¼Œå¯èƒ½å°±ä¼šå‘ç”Ÿä¸€äº›å˜åŒ–ï¼Œæ¯”å¦‚æŸäº›sqlå¯èƒ½å°±ä¼šå› ä¸ºæ²¡æœ‰å‘½ä¸­ç´¢å¼•è€Œååˆ†ç¼“æ…¢ï¼Œåœ¨ä¸€ä¸ªä¸Šåƒä¸‡æ•°æ®çš„è¡¨ä¸­è¿›è¡Œéæœ€å·¦å‰ç¼€æ¨¡ç³ŠåŒ¹é…æ—¶ï¼Œä½ å°±ä¼šçŸ¥é“ä»€ä¹ˆå«åšç»æœ›ã€‚æ‰€ä»¥åˆæœŸçœ‹èµ·æ¥è¿è¡Œè‰¯å¥½çš„ç¨‹åºï¼Œç­‰åˆ°æ•°æ®é‡å¢å¤§åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼Œå°±å®¹æ˜“å˜å¾—ååˆ†ç¼“æ…¢ã€‚æ‰€ä»¥è®¾è®¡ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ•°æ®è¡¨æ—¶ï¼Œç”¨å‡æ•°æ®æ¥è·‘ä¸€è·‘çœ‹sqlçš„æ‰§è¡Œæ•ˆç‡æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚

äºæ˜¯ä¾¿æœ‰äº†æœ¬ç¯‡çš„è¯é¢˜ï¼Œå¦‚ä½•å¾€Mysqlä¸­æ’å…¥ä¸€åƒä¸‡æ¡æ•°æ®ï¼Ÿ
omp-account-service-err.log:[omp-account-service]2019-09-09 00:31:00 669 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":4986742.200,"balance":0.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1565248758000,"creditAmount":5000000.000000,"developerId":452,"developerName":"å’ªå’•æ•°å­—ä¼ åª’æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":27,"settlementType":2,"status":2,"unbilledUnsettledAmount":13186.200000,"updatedAt":1567960260000,"version":1474} å˜æ›´ {"availableAmount":4986742.200,"balance":0.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1565248758000,"creditAmount":5000000.000000,"developerId":452,"developerName":"å’ªå’•æ•°å­—ä¼ åª’æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":27,"settlementType":2,"status":2,"unbilledUnsettledAmount":13198.0000000,"version":1475}
omp-account-service-err.log:[omp-account-service]2019-09-09 09:56:44 853 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":363976.400,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1635885.000000,"updatedAt":1567994193000,"version":71432} å˜æ›´ {"availableAmount":363976.400,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1635894.0000000,"version":71433}
omp-account-service-err.log.2019-09-05:[omp-account-service]2019-09-05 20:02:11 835 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:563)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":675334.700,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":222229.714790,"updatedAt":1567684914000,"version":153682} å˜æ›´ {"availableAmount":675334.700,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":222229.8025400,"version":153683}
omp-account-service-err.log.2019-09-06:[omp-account-service]2019-09-06 10:57:42 226 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:533)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":659561.600,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1340382.600000,"updatedAt":1567738648000,"version":60094} å˜æ›´ {"availableAmount":659561.600,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1340391.6000000,"version":60095}
omp-account-service-err.log.2019-09-06:[omp-account-service]2019-09-06 14:15:59 298 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:533)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":644184.200,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1355751.000000,"updatedAt":1567750550000,"version":60739} å˜æ›´ {"availableAmount":644184.200,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1355797.8000000,"version":60740}
omp-account-service-err.log.2019-09-06:[omp-account-service]2019-09-06 16:15:25 181 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":671460.470,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":226089.537840,"updatedAt":1567757702000,"version":157346} å˜æ›´ {"availableAmount":671460.470,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":226089.6255900,"version":157347}
omp-account-service-err.log.2019-09-06:[omp-account-service]2019-09-06 16:50:56 268 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":671274.590,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":226274.982840,"updatedAt":1567759820000,"version":157490} å˜æ›´ {"availableAmount":671274.590,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":226275.0705900,"version":157491}
omp-account-service-err.log.2019-09-06:[omp-account-service]2019-09-06 21:43:02 865 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":616448.000,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1383440.400000,"updatedAt":1567777362000,"version":61850} å˜æ›´ {"availableAmount":616448.000,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1383449.4000000,"version":61851}
omp-account-service-err.log.2019-09-07:[omp-account-service]2019-09-07 08:59:21 708 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":581922.200,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1417957.200000,"updatedAt":1567817948000,"version":63119} å˜æ›´ {"availableAmount":581922.200,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1418004.0000000,"version":63120}
omp-account-service-err.log.2019-09-07:[omp-account-service]2019-09-07 09:31:54 513 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":664705.740,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":232796.002590,"updatedAt":1567819910000,"version":160462} å˜æ›´ {"availableAmount":664705.740,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":232796.0903400,"version":160463}
omp-account-service-err.log.2019-09-08:[omp-account-service]2019-09-08 00:31:00 611 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":4986925.400,"balance":0.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1565248758000,"creditAmount":5000000.000000,"developerId":452,"developerName":"å’ªå’•æ•°å­—ä¼ åª’æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":27,"settlementType":2,"status":2,"unbilledUnsettledAmount":13054.800000,"updatedAt":1567873860000,"version":1459} å˜æ›´ {"availableAmount":4986925.400,"balance":0.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1565248758000,"creditAmount":5000000.000000,"developerId":452,"developerName":"å’ªå’•æ•°å­—ä¼ åª’æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":27,"settlementType":2,"status":2,"unbilledUnsettledAmount":13066.6000000,"version":1460}
omp-account-service-err.log.2019-09-08:[omp-account-service]2019-09-08 07:17:31 78 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":658959.590,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":238564.393140,"updatedAt":1567898216000,"version":164987} å˜æ›´ {"availableAmount":658959.590,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":238571.4131400,"version":164988}
omp-account-service-err.log.2019-09-08:[omp-account-service]2019-09-08 16:40:54 808 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":655959.000,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":241557.506140,"updatedAt":1567932043000,"version":167459} å˜æ›´ {"availableAmount":655959.000,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":241557.5938900,"version":167460}

omp-account-service-err.log.2019-09-05:[omp-account-service]2019-09-05 13:08:26 83 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:563)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":676987.190,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":220581.411990,"updatedAt":1567660013000,"version":152018} å˜æ›´ {"availableAmount":676987.190,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":220581.4997400,"version":152019}
omp-account-service-err.log.2019-09-05:[omp-account-service]2019-09-05 16:12:27 588 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:563)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":676202.290,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":221364.481390,"updatedAt":1567671144000,"version":152741} å˜æ›´ {"availableAmount":676202.290,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":221364.5691400,"version":152742}
omp-account-service-err.log.2019-09-05:[omp-account-service]2019-09-05 22:30:10 408 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:533)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":698155.400,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1301788.800000,"updatedAt":1567693791000,"version":58645} å˜æ›´ {"availableAmount":698155.400,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1301835.6000000,"version":58646}
omp-account-service-err.log.2019-09-06:[omp-account-service]2019-09-06 07:36:29 680 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:533)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":673123.280,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":224431.508590,"updatedAt":1567726567000,"version":155447} å˜æ›´ {"availableAmount":673123.280,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":224436.7735900,"version":155448}
omp-account-service-err.log.2019-09-07:[omp-account-service]2019-09-07 09:28:32 976 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":664748.230,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":232794.072090,"updatedAt":1567819710000,"version":160442} å˜æ›´ {"availableAmount":664748.230,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":232794.1598400,"version":160443}
omp-account-service-err.log.2019-09-08:[omp-account-service]2019-09-08 10:02:43 153 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":657613.040,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":239909.295840,"updatedAt":1567908151000,"version":165611} å˜æ›´ {"availableAmount":657613.040,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":239909.4128400,"version":165612}
omp-account-service-err.log.2019-09-08:[omp-account-service]2019-09-08 16:00:50 12 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":656026.760,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":241433.585590,"updatedAt":1567929641000,"version":167253} å˜æ›´ {"availableAmount":656026.760,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":241433.7025900,"version":167254}
omp-account-service-err.log.2019-09-08:[omp-account-service]2019-09-08 20:29:35 740 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":654822.900,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":242692.031590,"updatedAt":1567945752000,"version":168475} å˜æ›´ {"availableAmount":654822.900,"balance":0.000000,"billedUnsettledAmount":102431.190255,"businessTypeCategoryId":773,"createdAt":1560477620000,"creditAmount":1000000.000000,"developerId":2997,"developerName":"åä¸ºè½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸","earlyWarningAmount":10000.000000,"earlyWarningOn":1,"id":10,"settlementType":2,"status":2,"unbilledUnsettledAmount":242692.1485900,"version":168476}
omp-account-service-err.log.2019-09-08:[omp-account-service]2019-09-08 20:46:27 651 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":416565.200,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1583352.000000,"updatedAt":1567946782000,"version":69312} å˜æ›´ {"availableAmount":416565.200,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1583398.8000000,"version":69313}
omp-account-service-err.log.2019-09-08:[omp-account-service]2019-09-08 23:49:58 885 [com.ximalaya.omp.account.service.impl.DeductAccountServiceImpl.increaseUnbillUnsettledAmount(DeductAccountServiceImpl.java:373)]-[ERROR] increaseUnbillUnsettledAmount å¤±è´¥, æ›´æ–°å‰ {"availableAmount":394045.400,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1605825.000000,"updatedAt":1567957785000,"version":70171} å˜æ›´ {"availableAmount":394045.400,"balance":2000000.000000,"billedUnsettledAmount":0.000000,"businessTypeCategoryId":0,"createdAt":1561969895000,"creditAmount":0.000000,"developerId":1581,"developerName":"æ›¾ä¿Šä¿Š","earlyWarningAmount":300000.000000,"earlyWarningOn":1,"id":15,"settlementType":1,"status":2,"unbilledUnsettledAmount":1605834.0000000,"version":70172}
## åˆæœŸå‡†å¤‡

Mysqlç‰ˆæœ¬ä¸º8.0.11ï¼š

![](https://i.loli.net/2019/06/05/5cf71abecc5be80960.png)

é»˜è®¤å­˜å‚¨å¼•æ“ä¸ºInnoDBï¼š

![](https://i.loli.net/2019/06/05/5cf71e71d75b790847.png)

å…ˆåˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨çš„æ•°æ®åº“ä»¥åŠæµ‹è¯•ç”¨çš„ä¸€å¼ è¡¨ï¼š

![](https://i.loli.net/2019/06/05/5cf71c9e7335f90543.png)

```sql
create database if not exists test_db default charset utf8 collate utf8_general_ci;
```

ä¸Šé¢è¿™å¥å°±æ˜¯åˆ›å»ºæ•°æ®åº“çš„å‘½ä»¤ï¼Œ`if not exists` ä»£è¡¨å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå¦‚æœå·²å­˜åœ¨åˆ™ä¸æ‰§è¡Œã€‚`default charset utf8 collate utf8_general_ci` åˆ™ä¸ºè®¾ç½®æ•°æ®åº“çš„é»˜è®¤å­—ç¬¦é›†ä¸º`utf8`ï¼Œè®¾ç½®é»˜è®¤çš„å­—ç¬¦æ¯”è¾ƒè§„åˆ™ä¸º`utf8_general_ci`ã€‚

è¯´åˆ°å­—ç¬¦é›†å’Œæ¯”è¾ƒè§„åˆ™ï¼Œé¡ºä¾¿æä¸€å¥ï¼Œæ¯ç§å­—ç¬¦é›†å¯¹åº”è‹¥å¹²ç§æ¯”è¾ƒè§„åˆ™ï¼Œæ¯ç§å­—ç¬¦é›†éƒ½æœ‰é»˜è®¤çš„æ¯”è¾ƒè§„åˆ™ï¼Œ`utf8_general_ci`æ˜¯`utf8`çš„é»˜è®¤æ¯”è¾ƒè§„åˆ™ï¼Œ`_ci`ç»“å°¾ä»£è¡¨è¿™ç§æ¯”è¾ƒè§„åˆ™ä¸åŒºåˆ†å¤§å°å†™ã€‚

æ¥ä¸‹æ¥åˆ›å»ºæµ‹è¯•ç”¨çš„è¡¨ï¼š

![](https://i.loli.net/2019/06/10/5cfdb4f13ab8761814.png)

```sql
create table `order_detail` (
    `id` bigint(11) not null auto_increment,
    `order_no` varchar(50) not null comment 'è®¢å•å·',
    `commodity_id` bigint(11) not null comment 'å•†å“id',
    `amount` decimal(20,6) not null comment 'è®¢å•é‡‘é¢',
    `buyer_id` bigint(11) not null comment 'ä»˜æ¬¾äººid',
    `status` int(2) not null comment 'è®¢å•çŠ¶æ€',
    `created_time` datetime not null comment 'åˆ›å»ºæ—¶é—´',
    `updated_time` datetime not null comment 'æ›´æ–°æ—¶é—´', 
    primary key(`id`)
) engine InnoDB charset utf8mb4 collate utf8mb4_unicode_ci;
```

è¿™é‡Œå…ˆä¸åŠ ç´¢å¼•ï¼Œåç»­ä¼šæ¯”è¾ƒæœ‰ç´¢å¼•å’Œæ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œæ’å…¥æ•°æ®çš„æ•ˆç‡ã€‚

## æš´åŠ›æ’å…¥æ³•

ä¸ç®¡æ˜¯å•¥ï¼Œç›˜å®ƒå°±æ˜¯äº†ï¼Œæ’¸èµ·è¢–å­å°±æ˜¯å¹²ã€‚æ–°å»ºä¸€ä¸ª `springboot` é¡¹ç›®ï¼Œ